import{b as al,e as fi,r as ae,w as ze,c as me,m as Ee,f as M,g as N,i as a,j as kt,d as Le,u as Ne,k as ke,l as Ce,p as mi,q as ue,t as n,v as ve,F as $e,x as I,y as Xe,a as Ye,o as Ke,z as De,A as Te,B as je,C as Me,D as Ae,E as Oe,G as _t,T as ot,n as Qe,H as gt,I as Bt,J as bi,h as nl,K as vi,L as et,M as ut,N as mt,O as Da}from"./vendor-Bx0N753G.js";import{c as ht,g as Ct,C as sl}from"./canvg-0PdlMh_v.js";import{v as Ve,r as il}from"./utils-CRAcIz2K.js";import{r as ll,E as dl}from"./pdf-DGXcMhCb.js";import{r as cl,a as ul}from"./barcode-BoWGE6Vo.js";import{V as yi}from"./monaco-wkXB1TuU.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const hl={common:{save:"Save",cancel:"Cancel",confirm:"Confirm",close:"Close",delete:"Delete",edit:"Edit",copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",rename:"Rename",loading:"Loading...",success:"Success",input:"Input",actions:"Actions",width:"Width",height:"Height",mm:"mm",px:"px",pt:"pt",rotate:"Rotate",lock:"Lock",unlock:"Unlock",appTitle:"Print Designer",testData:"Test Data",invalidJson:"Invalid JSON. Changes were not saved.",testDataKeyChanged:"Test data keys cannot be changed. Please only edit values."},template:{select:"Select Template",noTemplates:"No templates yet",new:"New Template",rename:"Rename Template",confirmDelete:'Are you sure you want to delete "{name}"?'},editor:{preview:"Print Preview",exportPdf:"Export PDF",exportImage:"Export Image",print:"Print",viewJson:"View JSON",viewBlob:"View Blob",viewImageBlob:"View Image Blob",viewPdfBlob:"View PDF Blob",zoomIn:"Zoom In",zoomOut:"Zoom Out",zoomLevel:"Zoom Level",zoomSettings:"Zoom Settings",unit:"Unit",advancedSettings:"Advanced Settings",watermark:"Watermark",watermarkEnable:"Enable",watermarkText:"Text",watermarkTextPlaceholder:"Enter watermark text",watermarkAngle:"Angle",watermarkColor:"Color",watermarkOpacity:"Opacity (%)",watermarkSize:"Size",watermarkDensity:"Density",template:"Template",newTemplate:"New Template",saveTemplate:"Save Template",saveAsTemplate:"Save As Template",templates:"Templates",shortcuts:"Shortcuts",help:"Help",about:"About",paperSettings:"Paper Settings",sizePreset:"Size Preset",custom:"Custom",spacingX:"Horizontal Margin",spacingY:"Vertical Margin",showMarginLines:"Show Margin Lines",showCornerMarkers:"Show Corner Markers",showGrid:"Show Grid",showMinimap:"Show Minimap",headerFooter:"Header & Footer",headerLine:"Header Line",footerLine:"Footer Line",addNewPage:"Add New Page",fonts:{default:"Default",arial:"Arial",timesNewRoman:"Times New Roman",courierNew:"Courier New",simSun:"SimSun (宋体)",simHei:"SimHei (黑体)"},bold:"Bold",italic:"Italic",underline:"Underline",verticalText:"Vertical Text",textColor:"Text Color",backgroundColor:"Background Color",resetRotation:"Reset Rotation",alignLeft:"Align Left",alignCenter:"Align Center",alignRight:"Align Right",alignTop:"Align Top",alignMiddle:"Align Middle",alignBottom:"Align Bottom",group:"Group",lock:"Lock",unlock:"Unlock",fontFamily:"Font Family",settings:"Settings"},canvas:{addPage:"Add Page",copyPage:"Copy Page",pastePage:"Paste Page",deletePage:"Delete Page",newText:"New Text",headerLabel:"Header",footerLabel:"Footer",defaultTableHeaders:{id:"ID",name:"Name",qty:"Qty",price:"Price",total:"Total"},defaultTableData:{item:"Item",pageSum:"Page Sum",total:"Total",inWords:"In Words"}},sidebar:{elements:"Elements",dragToCanvas:"Drag elements to the canvas",standard:"Standard",custom:"Custom",general:"General",dataCodes:"Data & Codes",shapes:"Shapes",text:"Text",image:"Image",pagination:"Pagination",table:"Table",barcode:"Barcode",qrcode:"QR Code",line:"Line",rect:"Rect",circle:"Circle",noCustomElements:"No custom elements saved yet.",moreOptions:"More options",editElement:"Edit Element",rename:"Rename",copy:"Copy",delete:"Delete",renameModalTitle:"Rename Custom Element",enterNamePlaceholder:"Enter element name...",confirmDelete:'Are you sure you want to delete "{name}"?',confirmSwitchEdit:'Exit current edit for "{name}"?',confirmExitEdit:"You have unsaved changes. Exit anyway?",editingElement:"Editing custom element: {name}",saveEdit:"Save",saveAs:"Save As",exitEdit:"Exit",saveAsCustomElement:"Save as Custom Element",editSaveFailed:"Nothing to save. Please select an element."},elements:{text:"Text",image:"Image",table:"Table",line:"Line",rect:"Rect",circle:"Circle",barcode:"Barcode",qrcode:"QR Code",pageNumber:"Page Number",custom:"Custom",layers:"Layers"},properties:{title:"Properties",subtitle:"Edit element properties",locked:"Locked",multiSelectMode:"Multi-select mode",selectedElements:"{n} elements selected",deleteSelected:"Delete Selected Elements",tab:{properties:"Properties",style:"Style",advanced:"Advanced"},section:{positionSize:"Position & Size",dataBehavior:"Data & Behavior",layoutDimensions:"Layout & Dimensions",headerStyle:"Header Style",footerStyle:"Footer Style",cellOperations:"Cell Operations",appearance:"Appearance",elementInfo:"Element Info",content:"Content",typography:"Typography",border:"Border",barcodeSettings:"Barcode Settings",qrSettings:"QR Settings",labelContent:"Label Content",paginationTypography:"Pagination Typography",labelStyle:"Label Style",frameBorder:"Frame Border",lineStyle:"Line Style",imageSource:"Image Source"},action:{mergeCells:"Merge Cells",splitCells:"Split Cells",copyId:"Copy ID",copied:"Copied!",saveCustom:"Save as Custom Element",deleteElement:"Delete Current Element",saveCustomModal:"Save Custom Element"},empty:{noSelection:"No Selection",selectInstruction:"Select an element to edit properties"},label:{type:"Type",x:"X",y:"Y",width:"Width",height:"Height",content:"Content",variable:"Variable",writingMode:"Writing Mode",fontSize:"Font Size",color:"Color",textAlign:"Text Align",fontFamily:"Font Family",fontWeight:"Font Weight",borderStyle:"Border Style",borderWidth:"Border Width",borderColor:"Border Color",backgroundColor:"Background Color",imageSource:"Image Source",format:"Format",showText:"Show Text",lineWidth:"Line Width",barcodeHeight:"Height",margin:"Margin",textPosition:"Text Position",errorCorrection:"Error Correction",thickness:"Thickness",cornerRadius:"Corner Radius",background:"Background",autoPaginate:"Auto Paginate",repeatFooter:"Repeat Footer",showFooter:"Show Footer",columns:"Columns (JSON)",data:"Data (JSON)",footerData:"Footer Data (JSON)",customScript:"Custom Script",headerHeight:"Header Height",rowHeight:"Row Height",footerHeight:"Footer Height",textColor:"Text Color",editCell:"Edit Cell",editColumn:"Edit Column",headerText:"Header Text",fieldKey:"Field Key",variableField:"Variable Field",headerNamePlaceholder:"Header Name",displayTextPlaceholder:"Display Text (e.g. Total:)",dataFieldPlaceholder:"Data Field (e.g. {#amount})",id:"ID",labelBorderColor:"Label Border Color",barcodeContentPlaceholder:"Barcode Value",qrContentPlaceholder:"QR Code Value",textContentPlaceholder:"Enter text content",variablePlaceholder:"Variable Name (e.g. @name)",labelText:"Label Text",labelPosition:"Label Position",labelFontSize:"Label Font Size",labelColor:"Label Color",labelFontFamily:"Label Font Family",labelFontWeight:"Label Font Weight",labelBackgroundColor:"Label Background Color",labelBorderStyle:"Label Border Style",labelBorderWidth:"Label Border Width",pageFormat:"Page Format",labelTextPlaceholder:"e.g. Page",columnsPlaceholder:'[{ "field": "name", "header": "Name", "width": 100 }]',dataPlaceholder:"[{...}]",footerDataPlaceholder:'[{ "id": { "value": "Total" }, "amount": { "value": "Total:", "field": "{#sum}" } }]',customScriptPlaceholder:"return { data: ... };",fontStyle:"Font Style",padding:"Padding (px)"},option:{horizontal:"Horizontal",vertical:"Vertical",default:"Default",left:"Left",center:"Center",right:"Right",normal:"Normal",medium:"Medium",bold:"Bold",none:"None",solid:"Solid",dashed:"Dashed",dotted:"Dotted",yes:"Yes",no:"No",top:"Top",bottom:"Bottom",before:"Before",after:"After",eccLow:"Low (7%)",eccMedium:"Medium (15%)",eccQuartile:"Quartile (25%)",eccHigh:"High (30%)",arial:"Arial",timesNewRoman:"Times New Roman",courierNew:"Courier New",simSun:"SimSun (宋体)",simHei:"SimHei (黑体)",page1:"Page 1",oneTotal:"1/Total",code128:"CODE128",ean13:"EAN-13",upc:"UPC",code39:"CODE39",itf14:"ITF-14",msi:"MSI",pharmacode:"Pharmacode",numberOnly:"Number (1)"},image:{urlPlaceholder:"https://... or data:image/...",uploadBtn:"Upload Image",uploadTip:"Max 2MB, converts to Base64",sizeError:"Image size must be less than 2MB",readError:"Failed to read file"}},shortcuts:{title:"Shortcuts",keyboardShortcuts:"Keyboard Shortcuts",general:"General",editing:"Editing",manipulation:"Manipulation",newTemplate:"New Template",openSettings:"Open Settings",openHelp:"Open Help",zoom:"Zoom In/Out",closeModal:"Close Modal",selectAll:"Select All",multiSelect:"Multi-select",move:"Move",fastMove:"Fast Move",snapRotate:"Snap Rotate",resize:"Proportional Resize",saveAsTemplate:"Save As Template",customEditSave:"Save Custom Edit",customEditSaveAs:"Save Custom Edit As",customEditExit:"Exit Custom Edit",ctrl:"Ctrl",shift:"Shift",alt:"Alt",esc:"Esc",del:"Delete",enter:"Enter",arrow:"Arrow Keys",drag:"Drag",click:"Click",wheel:"Wheel"},help:{title:"Help Center",about:"About",aboutProject:"About {name}",github:"Project URL",dependencies:"Open Source Dependencies",package:"Package",version:"Version"},colorPicker:{clear:"Clear",transparent:"Transparent"},settings:{title:"Settings",basic:"Basic",language:"Language",connection:"Connections",themeColor:"Theme Color",themeColorDesc:"Pick a preset theme color and apply instantly.",themePresetDefault:"Blue",themePresetEmerald:"Emerald",themePresetAmber:"Amber",themePresetRose:"Rose",themePresetCustom:"Custom",theme:"Theme",themeSystem:"Follow System",themeLight:"Light",themeDark:"Dark",themeDesc:"Defaults to following system; you can force Light or Dark.",autoSave:"Auto Save",autoSaveDesc:"Automatically save changes (saved templates only).",exportImageMerged:"Export Image As Single",exportImageMergedDesc:"When off, export each page as a separate image inside a ZIP file.",languageDesc:"Choose the interface language.",connectionDesc:"Connection settings placeholder.",printMode:"Print Mode",printModeLocal:"Local Client",printModeRemote:"Remote Cloud",printModeBrowser:"Browser",printModeDesc:"Local and remote options require a successful connection test.",silentPrint:"Silent Print",silentPrintDesc:"When enabled, skip the custom print dialog; browser print still uses the browser dialog.",localConnection:"Local Client Print",remoteConnection:"Remote Cloud Print",host:"Host",port:"Port",wsPath:"WS Path",protocol:"Protocol",wsAddress:"WS Address",wsAddressPlaceholder:"ws://host:port/ws/request",localWsAddressPlaceholder:"ws://host:port/ws",secretKey:"Secret Key",connectionUrl:"Connection URL",connect:"Connect",disconnect:"Disconnect",connecting:"Connecting...",connectionTesting:"Testing connection...",connectionOk:"Connection OK",connectionOkWithUser:"Connection OK (User: {userId})",connectionFailed:"Connection failed",connectionTimeout:"Connection timeout",connectionMissingFields:"Please fill in API URL, username, and password.",connectionMissingToken:"Login succeeded but token is missing.",apiBaseUrl:"Login URL",apiBasePlaceholder:"http://host:port/api/login",username:"Username",password:"Password",remoteLoginTitle:"Login (HTTP)",remoteLoginDesc:"Used to obtain the JWT token. Enter the full login URL.",remoteWsTitle:"WebSocket (Print Relay)",remoteWsDesc:"Used for printing and client/printer queries. Token is appended to the WS URL.",localClientTitle:"Local Client",localClientDesc:"Configure the local client WebSocket and secret key for on-device printing.",remoteClient:"Default Client",remoteClientPlaceholder:"Select a client",remoteAuthHint:"Remote WS URL appends ?token=JWT for browser WebSocket authentication.",status:{connected:"Connected",connecting:"Connecting",disconnected:"Disconnected",error:"Error"},retrying:"Retrying ({count}/{max})",cancelRetry:"Cancel Retry",selectLanguage:"Select Language",zhLabel:"Chinese",enLabel:"English"},printDialog:{title:"Print Options",titleLocal:"Local Client Print Options",titleRemote:"Remote Cloud Print Options",sectionBasic:"Basic",sectionAdvanced:"Advanced",printer:"Printer",printerSelect:"Select printer",printerEmpty:"No printers found.",remoteClient:"Client",remoteClientPlaceholder:"Select client",remoteClientEmpty:"No clients found.",remotePrinterInfo:"Type: {type} | Paper: {paper} | Formats: {format}",printerPlaceholder:"Printer name",jobName:"Job Name",jobNamePlaceholder:"Optional job name",copies:"Copies",intervalMs:"Interval (ms)",pageRange:"Page Range",pageRangePlaceholder:"e.g. 1-3,5",pageSet:"Page Set",pageSetAll:"All",pageSetOdd:"Odd",pageSetEven:"Even",scale:"Scale",scaleNo:"No Scale",scaleShrink:"Shrink",scaleFit:"Fit",orientation:"Orientation",portrait:"Portrait",landscape:"Landscape",colorMode:"Color Mode",color:"Color",monochrome:"Monochrome",sidesMode:"Duplex",simplex:"Simplex",duplex:"Duplex",duplexShort:"Duplex (Short Edge)",duplexLong:"Duplex (Long Edge)",paperSize:"Paper Size",paperSizePlaceholder:"e.g. A4",trayBin:"Tray",trayBinPlaceholder:"e.g. 2 or Manual",confirm:"Print"},preview:{title:"Print Preview",templateJson:"Template JSON",zoomIn:"Zoom In",zoomOut:"Zoom Out"},input:{title:"Input",placeholder:"Enter value..."}},pl={common:{save:"保存",cancel:"取消",confirm:"确认",close:"关闭",delete:"删除",edit:"编辑",copy:"复制",cut:"剪切",paste:"粘贴",undo:"撤销",redo:"重做",rename:"重命名",loading:"加载中...",success:"成功",input:"输入",actions:"操作",width:"宽度",height:"高度",mm:"毫米",px:"像素",pt:"磅",rotate:"旋转",lock:"锁定",unlock:"解锁",appTitle:"打印设计器",testData:"测试数据",invalidJson:"JSON 无效，未保存更改。",testDataKeyChanged:"测试数据的键不允许修改，请仅编辑值。"},template:{select:"选择模版",noTemplates:"暂无模版",new:"新建模版",rename:"重命名模版",confirmDelete:'确定要删除 "{name}" 吗？'},editor:{preview:"打印预览",exportPdf:"导出 PDF",exportImage:"导出图片",print:"打印",viewJson:"查看 JSON",viewBlob:"查看 Blob",viewImageBlob:"查看图片 Blob",viewPdfBlob:"查看 PDF Blob",zoomIn:"放大",zoomOut:"缩小",zoomLevel:"缩放级别",zoomSettings:"缩放设置",unit:"单位",advancedSettings:"高级设置",watermark:"水印",watermarkEnable:"启用",watermarkText:"文字",watermarkTextPlaceholder:"请输入水印文字",watermarkAngle:"方向",watermarkColor:"颜色",watermarkOpacity:"透明度（%）",watermarkSize:"大小",watermarkDensity:"密度",template:"模版",newTemplate:"新建模版",saveTemplate:"保存模版",saveAsTemplate:"另存为模版",templates:"模版列表",shortcuts:"快捷键",help:"帮助",about:"关于",paperSettings:"页面设置",sizePreset:"纸张尺寸",custom:"自定义",spacingX:"水平边距",spacingY:"垂直边距",showMarginLines:"显示边距线",showCornerMarkers:"显示角标",showGrid:"显示网格",showMinimap:"显示缩略图",headerFooter:"页眉页脚",headerLine:"页眉线",footerLine:"页脚线",addNewPage:"添加新页",fonts:{default:"默认",arial:"Arial",timesNewRoman:"Times New Roman",courierNew:"Courier New",simSun:"宋体",simHei:"黑体"},bold:"加粗",italic:"斜体",underline:"下划线",verticalText:"竖排文本",textColor:"文本颜色",backgroundColor:"背景颜色",resetRotation:"重置旋转",alignLeft:"左对齐",alignCenter:"水平居中",alignRight:"右对齐",alignTop:"顶部对齐",alignMiddle:"垂直居中",alignBottom:"底部对齐",group:"组合",lock:"锁定",unlock:"解锁",fontFamily:"字体",settings:"设置"},canvas:{addPage:"添加页",copyPage:"复制页",pastePage:"粘贴页",deletePage:"删除页",newText:"新文本",headerLabel:"页眉",footerLabel:"页脚",defaultTableHeaders:{id:"ID",name:"名称",qty:"数量",price:"单价",total:"合计"},defaultTableData:{item:"商品",pageSum:"本页合计",total:"总计",inWords:"大写金额"}},sidebar:{custom:"自定义",elements:"组件库",dragToCanvas:"拖拽组件到画布",standard:"标准组件",general:"通用",dataCodes:"数据 & 条码",shapes:"图形",text:"文本",image:"图片",pagination:"页码",table:"表格",barcode:"条形码",qrcode:"二维码",line:"直线",rect:"矩形",circle:"圆形",noCustomElements:"暂无自定义组件",moreOptions:"更多选项",editElement:"编辑元素",rename:"重命名",copy:"复制",delete:"删除",renameModalTitle:"重命名自定义组件",enterNamePlaceholder:"输入组件名称...",confirmDelete:'确定要删除 "{name}" 吗？',confirmSwitchEdit:'退出当前对 "{name}" 的编辑？',confirmExitEdit:"存在未保存的更改，确定退出吗？",editingElement:"正在编辑自定义元素：{name}",saveEdit:"保存",saveAs:"另存为",exitEdit:"退出",saveAsCustomElement:"另存为自定义元素",editSaveFailed:"没有可保存的元素，请先选中一个元素。"},elements:{text:"文本",image:"图片",table:"表格",line:"直线",rect:"矩形",circle:"圆形",barcode:"条形码",qrcode:"二维码",pageNumber:"页码",custom:"自定义",layers:"图层"},properties:{title:"属性面板",subtitle:"编辑组件属性",locked:"已锁定",multiSelectMode:"多选模式",selectedElements:"已选择 {n} 个组件",deleteSelected:"删除选中组件",tab:{properties:"属性",style:"样式",advanced:"高级"},section:{positionSize:"位置 & 尺寸",dataBehavior:"数据 & 行为",layoutDimensions:"布局 & 尺寸",headerStyle:"表头样式",footerStyle:"表脚样式",cellOperations:"单元格操作",appearance:"外观",elementInfo:"组件信息",content:"内容",typography:"排版",border:"边框",barcodeSettings:"条形码设置",qrSettings:"二维码设置",labelContent:"标签内容",paginationTypography:"页码排版",labelStyle:"标签样式",frameBorder:"框架边框",lineStyle:"线条样式",imageSource:"图片来源"},action:{mergeCells:"合并单元格",splitCells:"拆分单元格",copyId:"复制 ID",copied:"已复制!",saveCustom:"保存为自定义组件",deleteElement:"删除当前组件",saveCustomModal:"保存自定义组件"},empty:{noSelection:"未选择",selectInstruction:"选择一个组件以编辑属性"},label:{type:"类型",x:"X",y:"Y",width:"宽度",height:"高度",content:"内容",variable:"变量",writingMode:"书写模式",fontSize:"字号",color:"颜色",textAlign:"对齐方式",fontFamily:"字体",fontWeight:"字重",borderStyle:"边框样式",borderWidth:"边框宽度",borderColor:"边框颜色",backgroundColor:"背景颜色",imageSource:"图片来源",format:"格式",showText:"显示文本",lineWidth:"线宽",barcodeHeight:"高度",margin:"边距",textPosition:"文本位置",errorCorrection:"纠错等级",thickness:"粗细",cornerRadius:"圆角半径",background:"背景",autoPaginate:"自动分页",repeatFooter:"重复表脚",showFooter:"显示表脚",columns:"列定义 (JSON)",data:"数据 (JSON)",footerData:"表脚数据 (JSON)",customScript:"自定义脚本",headerHeight:"表头高度",rowHeight:"行高",footerHeight:"表脚高度",textColor:"文本颜色",editCell:"编辑单元格",editColumn:"编辑列",headerText:"表头文本",fieldKey:"字段键",variableField:"变量字段",headerNamePlaceholder:"表头名称",displayTextPlaceholder:"显示文本 (如: 合计:)",dataFieldPlaceholder:"数据字段 (如: {#amount})",id:"ID",labelBorderColor:"标签边框颜色",barcodeContentPlaceholder:"条码内容",qrContentPlaceholder:"二维码内容",textContentPlaceholder:"请输入文本内容",variablePlaceholder:"变量名 (例如 @name)",labelText:"标签文本",labelPosition:"标签位置",labelFontSize:"标签字号",labelColor:"标签颜色",labelFontFamily:"标签字体",labelFontWeight:"标签字重",labelBackgroundColor:"标签背景颜色",labelBorderStyle:"标签边框样式",labelBorderWidth:"标签边框宽度",pageFormat:"页码格式",labelTextPlaceholder:"例如：第",columnsPlaceholder:'[{ "field": "name", "header": "姓名", "width": 100 }]',dataPlaceholder:"[{...}]",footerDataPlaceholder:'[{ "id": { "value": "合计" }, "amount": { "value": "合计:", "field": "{#sum}" } }]',customScriptPlaceholder:"return { data: ... };",fontStyle:"字体样式",padding:"内边距 (px)"},option:{horizontal:"水平",vertical:"垂直",default:"默认",left:"左对齐",center:"居中",right:"右对齐",normal:"常规",medium:"中等",bold:"加粗",none:"无",solid:"实线",dashed:"虚线",dotted:"点线",yes:"是",no:"否",top:"顶部",bottom:"底部",before:"之前",after:"之后",eccLow:"低 (7%)",eccMedium:"中 (15%)",eccQuartile:"四分 (25%)",eccHigh:"高 (30%)",arial:"Arial",timesNewRoman:"Times New Roman",courierNew:"Courier New",simSun:"宋体",simHei:"黑体",page1:"第 1 页",oneTotal:"1/共几页",code128:"CODE128",ean13:"EAN-13",upc:"UPC",code39:"CODE39",itf14:"ITF-14",msi:"MSI",pharmacode:"Pharmacode",numberOnly:"数字 (1)"},image:{urlPlaceholder:"请输入图片地址或 Base64...",uploadBtn:"上传图片",uploadTip:"最大 2MB，自动转换为 Base64",sizeError:"图片大小不能超过 2MB",readError:"读取文件失败"}},shortcuts:{title:"快捷键",keyboardShortcuts:"键盘快捷键",general:"通用",editing:"编辑",manipulation:"操作",themeColor:"主题色",themeColorDesc:"选择一个预设主题色，立即生效。",themePresetDefault:"蓝色",themePresetEmerald:"绿色",themePresetAmber:"橙色",themePresetRose:"玫红",themePresetCustom:"自定义",newTemplate:"新建模版",openSettings:"打开设置",openHelp:"打开帮助",zoom:"缩放",closeModal:"关闭弹窗",selectAll:"全选",multiSelect:"多选",move:"移动",fastMove:"快速移动",snapRotate:"吸附旋转",resize:"等比缩放",saveAsTemplate:"另存为模版",customEditSave:"保存自定义编辑",customEditSaveAs:"另存自定义编辑",customEditExit:"退出自定义编辑",ctrl:"Ctrl",shift:"Shift",alt:"Alt",esc:"Esc",del:"Delete",enter:"Enter",arrow:"方向键",drag:"拖拽",click:"点击",wheel:"滚轮"},help:{title:"帮助中心",about:"关于",aboutProject:"关于 {name}",github:"项目地址",dependencies:"开源依赖",package:"依赖包",version:"版本"},colorPicker:{clear:"清除",transparent:"透明"},settings:{title:"设置",basic:"基础",language:"语言",connection:"连接",themeColor:"主题色",themeColorDesc:"选择一个预设主题色，立即生效。",themePresetDefault:"蓝色",themePresetEmerald:"绿色",themePresetAmber:"橙色",themePresetRose:"玫红",themePresetCustom:"自定义",theme:"主题",themeSystem:"跟随系统",themeLight:"亮色",themeDark:"暗色",themeDesc:"默认跟随系统；可手动切换为亮色或暗色。",autoSave:"自动保存",autoSaveDesc:"当模版发生变更时自动保存（仅对已保存过的模版生效）。",exportImageMerged:"导出为整张图片",exportImageMergedDesc:"关闭后将每一页导出为单张图片，并打包为 ZIP。",languageDesc:"选择界面的显示语言。",connectionDesc:"连接设置占位内容。",printMode:"打印方式",printModeLocal:"本地客户端打印",printModeRemote:"远程云打印",printModeBrowser:"浏览器打印",printModeDesc:"本地/远程需连接测试成功后才能启用。",silentPrint:"静默打印",silentPrintDesc:"开启后跳过自定义打印对话框；浏览器打印仍会弹出浏览器打印设置。",localConnection:"本地客户端打印",remoteConnection:"远程云打印",host:"主机",port:"端口",wsPath:"WS 路径",protocol:"协议",wsAddress:"WS 地址",wsAddressPlaceholder:"ws://host:port/ws/request",localWsAddressPlaceholder:"ws://host:port/ws",secretKey:"密钥",connectionUrl:"连接地址",connect:"连接",disconnect:"断开",connecting:"连接中...",connectionTesting:"正在测试连接...",connectionOk:"连接成功",connectionOkWithUser:"连接成功（用户：{userId}）",connectionFailed:"连接失败",connectionTimeout:"连接超时",connectionMissingFields:"请填写 API 地址、用户名和密码。",connectionMissingToken:"登录成功但未返回 Token。",apiBaseUrl:"登录地址",apiBasePlaceholder:"http://host:port/api/login",username:"用户名",password:"密码",remoteLoginTitle:"登录（HTTP）",remoteLoginDesc:"用于获取 JWT，请填写完整的登录地址。",remoteWsTitle:"WebSocket（打印中转）",remoteWsDesc:"用于打印与查询客户端/打印机，Token 会拼到 WS 地址。",localClientTitle:"本地客户端",localClientDesc:"配置本地客户端的 WebSocket 与密钥，用于本机打印。",remoteClient:"默认客户端",remoteClientPlaceholder:"请选择客户端",remoteAuthHint:"远程 WS 地址会附加 ?token=JWT 以便浏览器鉴权。",status:{connected:"已连接",connecting:"连接中",disconnected:"未连接",error:"错误"},retrying:"重试中（{count}/{max}）",cancelRetry:"停止重试",selectLanguage:"选择语言",zhLabel:"中文",enLabel:"English"},printDialog:{title:"打印参数",titleLocal:"本地客户端打印参数",titleRemote:"远程云打印参数",sectionBasic:"基础",sectionAdvanced:"高级",printer:"打印机",printerSelect:"请选择打印机",printerEmpty:"未获取到打印机。",remoteClient:"客户端",remoteClientPlaceholder:"请选择客户端",remoteClientEmpty:"未获取到客户端。",remotePrinterInfo:"类型：{type} | 纸张：{paper} | 格式：{format}",printerPlaceholder:"打印机名称",jobName:"任务名称",jobNamePlaceholder:"可选任务名称",copies:"打印份数",intervalMs:"份数间隔(ms)",pageRange:"页码范围",pageRangePlaceholder:"如 1-3,5",pageSet:"奇偶页",pageSetAll:"全部",pageSetOdd:"奇数页",pageSetEven:"偶数页",scale:"缩放",scaleNo:"不缩放",scaleShrink:"缩小",scaleFit:"适应",orientation:"方向",portrait:"纵向",landscape:"横向",colorMode:"颜色模式",color:"彩色",monochrome:"黑白",sidesMode:"单双面",simplex:"单面",duplex:"双面",duplexShort:"双面（短边翻转）",duplexLong:"双面（长边翻转）",paperSize:"纸张",paperSizePlaceholder:"如 A4",trayBin:"纸盒",trayBinPlaceholder:"如 2 或 Manual",confirm:"打印"},preview:{title:"打印预览",templateJson:"模版 JSON",zoomIn:"放大",zoomOut:"缩小"},input:{title:"输入",placeholder:"请输入..."}},gl={en:hl,zh:pl},fl=()=>{const r=localStorage.getItem("print-designer-language");return r&&(r==="zh"||r==="en")?r:navigator.language.toLowerCase().startsWith("zh")?"zh":"en"},ml=r=>al({legacy:!1,locale:fl(),fallbackLocale:"en",messages:gl}),wi=ml();var sr,Ba;function bl(){if(Ba)return sr;Ba=1;function r(){this.__data__=[],this.size=0}return sr=r,sr}var ir,Oa;function xi(){if(Oa)return ir;Oa=1;function r(e,t){return e===t||e!==e&&t!==t}return ir=r,ir}var lr,qa;function Zt(){if(qa)return lr;qa=1;var r=xi();function e(t,s){for(var o=t.length;o--;)if(r(t[o][0],s))return o;return-1}return lr=e,lr}var dr,Fa;function vl(){if(Fa)return dr;Fa=1;var r=Zt(),e=Array.prototype,t=e.splice;function s(o){var i=this.__data__,l=r(i,o);if(l<0)return!1;var d=i.length-1;return l==d?i.pop():t.call(i,l,1),--this.size,!0}return dr=s,dr}var cr,ja;function yl(){if(ja)return cr;ja=1;var r=Zt();function e(t){var s=this.__data__,o=r(s,t);return o<0?void 0:s[o][1]}return cr=e,cr}var ur,Na;function wl(){if(Na)return ur;Na=1;var r=Zt();function e(t){return r(this.__data__,t)>-1}return ur=e,ur}var hr,Ha;function xl(){if(Ha)return hr;Ha=1;var r=Zt();function e(t,s){var o=this.__data__,i=r(o,t);return i<0?(++this.size,o.push([t,s])):o[i][1]=s,this}return hr=e,hr}var pr,Ua;function Jt(){if(Ua)return pr;Ua=1;var r=bl(),e=vl(),t=yl(),s=wl(),o=xl();function i(l){var d=-1,c=l==null?0:l.length;for(this.clear();++d<c;){var m=l[d];this.set(m[0],m[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=s,i.prototype.set=o,pr=i,pr}var gr,Va;function kl(){if(Va)return gr;Va=1;var r=Jt();function e(){this.__data__=new r,this.size=0}return gr=e,gr}var fr,Wa;function _l(){if(Wa)return fr;Wa=1;function r(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}return fr=r,fr}var mr,Ga;function Sl(){if(Ga)return mr;Ga=1;function r(e){return this.__data__.get(e)}return mr=r,mr}var br,Ya;function Cl(){if(Ya)return br;Ya=1;function r(e){return this.__data__.has(e)}return br=r,br}var vr,Ka;function ki(){if(Ka)return vr;Ka=1;var r=typeof ht=="object"&&ht&&ht.Object===Object&&ht;return vr=r,vr}var yr,Xa;function at(){if(Xa)return yr;Xa=1;var r=ki(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return yr=t,yr}var wr,Za;function ba(){if(Za)return wr;Za=1;var r=at(),e=r.Symbol;return wr=e,wr}var xr,Ja;function El(){if(Ja)return xr;Ja=1;var r=ba(),e=Object.prototype,t=e.hasOwnProperty,s=e.toString,o=r?r.toStringTag:void 0;function i(l){var d=t.call(l,o),c=l[o];try{l[o]=void 0;var m=!0}catch{}var x=s.call(l);return m&&(d?l[o]=c:delete l[o]),x}return xr=i,xr}var kr,Qa;function Tl(){if(Qa)return kr;Qa=1;var r=Object.prototype,e=r.toString;function t(s){return e.call(s)}return kr=t,kr}var _r,en;function qt(){if(en)return _r;en=1;var r=ba(),e=El(),t=Tl(),s="[object Null]",o="[object Undefined]",i=r?r.toStringTag:void 0;function l(d){return d==null?d===void 0?o:s:i&&i in Object(d)?e(d):t(d)}return _r=l,_r}var Sr,tn;function bt(){if(tn)return Sr;tn=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Sr=r,Sr}var Cr,rn;function _i(){if(rn)return Cr;rn=1;var r=qt(),e=bt(),t="[object AsyncFunction]",s="[object Function]",o="[object GeneratorFunction]",i="[object Proxy]";function l(d){if(!e(d))return!1;var c=r(d);return c==s||c==o||c==t||c==i}return Cr=l,Cr}var Er,on;function Il(){if(on)return Er;on=1;var r=at(),e=r["__core-js_shared__"];return Er=e,Er}var Tr,an;function $l(){if(an)return Tr;an=1;var r=Il(),e=(function(){var s=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function t(s){return!!e&&e in s}return Tr=t,Tr}var Ir,nn;function Si(){if(nn)return Ir;nn=1;var r=Function.prototype,e=r.toString;function t(s){if(s!=null){try{return e.call(s)}catch{}try{return s+""}catch{}}return""}return Ir=t,Ir}var $r,sn;function Al(){if(sn)return $r;sn=1;var r=_i(),e=$l(),t=bt(),s=Si(),o=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,c=l.toString,m=d.hasOwnProperty,x=RegExp("^"+c.call(m).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(S){if(!t(S)||e(S))return!1;var p=r(S)?x:i;return p.test(s(S))}return $r=v,$r}var Ar,ln;function zl(){if(ln)return Ar;ln=1;function r(e,t){return e==null?void 0:e[t]}return Ar=r,Ar}var zr,dn;function vt(){if(dn)return zr;dn=1;var r=Al(),e=zl();function t(s,o){var i=e(s,o);return r(i)?i:void 0}return zr=t,zr}var Pr,cn;function va(){if(cn)return Pr;cn=1;var r=vt(),e=at(),t=r(e,"Map");return Pr=t,Pr}var Lr,un;function Qt(){if(un)return Lr;un=1;var r=vt(),e=r(Object,"create");return Lr=e,Lr}var Mr,hn;function Pl(){if(hn)return Mr;hn=1;var r=Qt();function e(){this.__data__=r?r(null):{},this.size=0}return Mr=e,Mr}var Rr,pn;function Ll(){if(pn)return Rr;pn=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Rr=r,Rr}var Dr,gn;function Ml(){if(gn)return Dr;gn=1;var r=Qt(),e="__lodash_hash_undefined__",t=Object.prototype,s=t.hasOwnProperty;function o(i){var l=this.__data__;if(r){var d=l[i];return d===e?void 0:d}return s.call(l,i)?l[i]:void 0}return Dr=o,Dr}var Br,fn;function Rl(){if(fn)return Br;fn=1;var r=Qt(),e=Object.prototype,t=e.hasOwnProperty;function s(o){var i=this.__data__;return r?i[o]!==void 0:t.call(i,o)}return Br=s,Br}var Or,mn;function Dl(){if(mn)return Or;mn=1;var r=Qt(),e="__lodash_hash_undefined__";function t(s,o){var i=this.__data__;return this.size+=this.has(s)?0:1,i[s]=r&&o===void 0?e:o,this}return Or=t,Or}var qr,bn;function Bl(){if(bn)return qr;bn=1;var r=Pl(),e=Ll(),t=Ml(),s=Rl(),o=Dl();function i(l){var d=-1,c=l==null?0:l.length;for(this.clear();++d<c;){var m=l[d];this.set(m[0],m[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=s,i.prototype.set=o,qr=i,qr}var Fr,vn;function Ol(){if(vn)return Fr;vn=1;var r=Bl(),e=Jt(),t=va();function s(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Fr=s,Fr}var jr,yn;function ql(){if(yn)return jr;yn=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return jr=r,jr}var Nr,wn;function er(){if(wn)return Nr;wn=1;var r=ql();function e(t,s){var o=t.__data__;return r(s)?o[typeof s=="string"?"string":"hash"]:o.map}return Nr=e,Nr}var Hr,xn;function Fl(){if(xn)return Hr;xn=1;var r=er();function e(t){var s=r(this,t).delete(t);return this.size-=s?1:0,s}return Hr=e,Hr}var Ur,kn;function jl(){if(kn)return Ur;kn=1;var r=er();function e(t){return r(this,t).get(t)}return Ur=e,Ur}var Vr,_n;function Nl(){if(_n)return Vr;_n=1;var r=er();function e(t){return r(this,t).has(t)}return Vr=e,Vr}var Wr,Sn;function Hl(){if(Sn)return Wr;Sn=1;var r=er();function e(t,s){var o=r(this,t),i=o.size;return o.set(t,s),this.size+=o.size==i?0:1,this}return Wr=e,Wr}var Gr,Cn;function Ul(){if(Cn)return Gr;Cn=1;var r=Ol(),e=Fl(),t=jl(),s=Nl(),o=Hl();function i(l){var d=-1,c=l==null?0:l.length;for(this.clear();++d<c;){var m=l[d];this.set(m[0],m[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=s,i.prototype.set=o,Gr=i,Gr}var Yr,En;function Vl(){if(En)return Yr;En=1;var r=Jt(),e=va(),t=Ul(),s=200;function o(i,l){var d=this.__data__;if(d instanceof r){var c=d.__data__;if(!e||c.length<s-1)return c.push([i,l]),this.size=++d.size,this;d=this.__data__=new t(c)}return d.set(i,l),this.size=d.size,this}return Yr=o,Yr}var Kr,Tn;function Wl(){if(Tn)return Kr;Tn=1;var r=Jt(),e=kl(),t=_l(),s=Sl(),o=Cl(),i=Vl();function l(d){var c=this.__data__=new r(d);this.size=c.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=s,l.prototype.has=o,l.prototype.set=i,Kr=l,Kr}var Xr,In;function Gl(){if(In)return Xr;In=1;function r(e,t){for(var s=-1,o=e==null?0:e.length;++s<o&&t(e[s],s,e)!==!1;);return e}return Xr=r,Xr}var Zr,$n;function Yl(){if($n)return Zr;$n=1;var r=vt(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return Zr=e,Zr}var Jr,An;function Ci(){if(An)return Jr;An=1;var r=Yl();function e(t,s,o){s=="__proto__"&&r?r(t,s,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[s]=o}return Jr=e,Jr}var Qr,zn;function Ei(){if(zn)return Qr;zn=1;var r=Ci(),e=xi(),t=Object.prototype,s=t.hasOwnProperty;function o(i,l,d){var c=i[l];(!(s.call(i,l)&&e(c,d))||d===void 0&&!(l in i))&&r(i,l,d)}return Qr=o,Qr}var eo,Pn;function tr(){if(Pn)return eo;Pn=1;var r=Ei(),e=Ci();function t(s,o,i,l){var d=!i;i||(i={});for(var c=-1,m=o.length;++c<m;){var x=o[c],v=l?l(i[x],s[x],x,i,s):void 0;v===void 0&&(v=s[x]),d?e(i,x,v):r(i,x,v)}return i}return eo=t,eo}var to,Ln;function Kl(){if(Ln)return to;Ln=1;function r(e,t){for(var s=-1,o=Array(e);++s<e;)o[s]=t(s);return o}return to=r,to}var ro,Mn;function Et(){if(Mn)return ro;Mn=1;function r(e){return e!=null&&typeof e=="object"}return ro=r,ro}var oo,Rn;function Xl(){if(Rn)return oo;Rn=1;var r=qt(),e=Et(),t="[object Arguments]";function s(o){return e(o)&&r(o)==t}return oo=s,oo}var ao,Dn;function Zl(){if(Dn)return ao;Dn=1;var r=Xl(),e=Et(),t=Object.prototype,s=t.hasOwnProperty,o=t.propertyIsEnumerable,i=r((function(){return arguments})())?r:function(l){return e(l)&&s.call(l,"callee")&&!o.call(l,"callee")};return ao=i,ao}var no,Bn;function ya(){if(Bn)return no;Bn=1;var r=Array.isArray;return no=r,no}var zt={exports:{}},so,On;function Jl(){if(On)return so;On=1;function r(){return!1}return so=r,so}zt.exports;var qn;function Ti(){return qn||(qn=1,(function(r,e){var t=at(),s=Jl(),o=e&&!e.nodeType&&e,i=o&&!0&&r&&!r.nodeType&&r,l=i&&i.exports===o,d=l?t.Buffer:void 0,c=d?d.isBuffer:void 0,m=c||s;r.exports=m})(zt,zt.exports)),zt.exports}var io,Fn;function Ql(){if(Fn)return io;Fn=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(s,o){var i=typeof s;return o=o??r,!!o&&(i=="number"||i!="symbol"&&e.test(s))&&s>-1&&s%1==0&&s<o}return io=t,io}var lo,jn;function Ii(){if(jn)return lo;jn=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return lo=e,lo}var co,Nn;function ed(){if(Nn)return co;Nn=1;var r=qt(),e=Ii(),t=Et(),s="[object Arguments]",o="[object Array]",i="[object Boolean]",l="[object Date]",d="[object Error]",c="[object Function]",m="[object Map]",x="[object Number]",v="[object Object]",S="[object RegExp]",p="[object Set]",f="[object String]",g="[object WeakMap]",C="[object ArrayBuffer]",y="[object DataView]",E="[object Float32Array]",z="[object Float64Array]",k="[object Int8Array]",U="[object Int16Array]",K="[object Int32Array]",j="[object Uint8Array]",D="[object Uint8ClampedArray]",O="[object Uint16Array]",Q="[object Uint32Array]",H={};H[E]=H[z]=H[k]=H[U]=H[K]=H[j]=H[D]=H[O]=H[Q]=!0,H[s]=H[o]=H[C]=H[i]=H[y]=H[l]=H[d]=H[c]=H[m]=H[x]=H[v]=H[S]=H[p]=H[f]=H[g]=!1;function P(q){return t(q)&&e(q.length)&&!!H[r(q)]}return co=P,co}var uo,Hn;function wa(){if(Hn)return uo;Hn=1;function r(e){return function(t){return e(t)}}return uo=r,uo}var Pt={exports:{}};Pt.exports;var Un;function xa(){return Un||(Un=1,(function(r,e){var t=ki(),s=e&&!e.nodeType&&e,o=s&&!0&&r&&!r.nodeType&&r,i=o&&o.exports===s,l=i&&t.process,d=(function(){try{var c=o&&o.require&&o.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}})();r.exports=d})(Pt,Pt.exports)),Pt.exports}var ho,Vn;function td(){if(Vn)return ho;Vn=1;var r=ed(),e=wa(),t=xa(),s=t&&t.isTypedArray,o=s?e(s):r;return ho=o,ho}var po,Wn;function $i(){if(Wn)return po;Wn=1;var r=Kl(),e=Zl(),t=ya(),s=Ti(),o=Ql(),i=td(),l=Object.prototype,d=l.hasOwnProperty;function c(m,x){var v=t(m),S=!v&&e(m),p=!v&&!S&&s(m),f=!v&&!S&&!p&&i(m),g=v||S||p||f,C=g?r(m.length,String):[],y=C.length;for(var E in m)(x||d.call(m,E))&&!(g&&(E=="length"||p&&(E=="offset"||E=="parent")||f&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||o(E,y)))&&C.push(E);return C}return po=c,po}var go,Gn;function ka(){if(Gn)return go;Gn=1;var r=Object.prototype;function e(t){var s=t&&t.constructor,o=typeof s=="function"&&s.prototype||r;return t===o}return go=e,go}var fo,Yn;function Ai(){if(Yn)return fo;Yn=1;function r(e,t){return function(s){return e(t(s))}}return fo=r,fo}var mo,Kn;function rd(){if(Kn)return mo;Kn=1;var r=Ai(),e=r(Object.keys,Object);return mo=e,mo}var bo,Xn;function od(){if(Xn)return bo;Xn=1;var r=ka(),e=rd(),t=Object.prototype,s=t.hasOwnProperty;function o(i){if(!r(i))return e(i);var l=[];for(var d in Object(i))s.call(i,d)&&d!="constructor"&&l.push(d);return l}return bo=o,bo}var vo,Zn;function zi(){if(Zn)return vo;Zn=1;var r=_i(),e=Ii();function t(s){return s!=null&&e(s.length)&&!r(s)}return vo=t,vo}var yo,Jn;function _a(){if(Jn)return yo;Jn=1;var r=$i(),e=od(),t=zi();function s(o){return t(o)?r(o):e(o)}return yo=s,yo}var wo,Qn;function ad(){if(Qn)return wo;Qn=1;var r=tr(),e=_a();function t(s,o){return s&&r(o,e(o),s)}return wo=t,wo}var xo,es;function nd(){if(es)return xo;es=1;function r(e){var t=[];if(e!=null)for(var s in Object(e))t.push(s);return t}return xo=r,xo}var ko,ts;function sd(){if(ts)return ko;ts=1;var r=bt(),e=ka(),t=nd(),s=Object.prototype,o=s.hasOwnProperty;function i(l){if(!r(l))return t(l);var d=e(l),c=[];for(var m in l)m=="constructor"&&(d||!o.call(l,m))||c.push(m);return c}return ko=i,ko}var _o,rs;function Sa(){if(rs)return _o;rs=1;var r=$i(),e=sd(),t=zi();function s(o){return t(o)?r(o,!0):e(o)}return _o=s,_o}var So,os;function id(){if(os)return So;os=1;var r=tr(),e=Sa();function t(s,o){return s&&r(o,e(o),s)}return So=t,So}var Lt={exports:{}};Lt.exports;var as;function ld(){return as||(as=1,(function(r,e){var t=at(),s=e&&!e.nodeType&&e,o=s&&!0&&r&&!r.nodeType&&r,i=o&&o.exports===s,l=i?t.Buffer:void 0,d=l?l.allocUnsafe:void 0;function c(m,x){if(x)return m.slice();var v=m.length,S=d?d(v):new m.constructor(v);return m.copy(S),S}r.exports=c})(Lt,Lt.exports)),Lt.exports}var Co,ns;function dd(){if(ns)return Co;ns=1;function r(e,t){var s=-1,o=e.length;for(t||(t=Array(o));++s<o;)t[s]=e[s];return t}return Co=r,Co}var Eo,ss;function cd(){if(ss)return Eo;ss=1;function r(e,t){for(var s=-1,o=e==null?0:e.length,i=0,l=[];++s<o;){var d=e[s];t(d,s,e)&&(l[i++]=d)}return l}return Eo=r,Eo}var To,is;function Pi(){if(is)return To;is=1;function r(){return[]}return To=r,To}var Io,ls;function Ca(){if(ls)return Io;ls=1;var r=cd(),e=Pi(),t=Object.prototype,s=t.propertyIsEnumerable,o=Object.getOwnPropertySymbols,i=o?function(l){return l==null?[]:(l=Object(l),r(o(l),function(d){return s.call(l,d)}))}:e;return Io=i,Io}var $o,ds;function ud(){if(ds)return $o;ds=1;var r=tr(),e=Ca();function t(s,o){return r(s,e(s),o)}return $o=t,$o}var Ao,cs;function Li(){if(cs)return Ao;cs=1;function r(e,t){for(var s=-1,o=t.length,i=e.length;++s<o;)e[i+s]=t[s];return e}return Ao=r,Ao}var zo,us;function Mi(){if(us)return zo;us=1;var r=Ai(),e=r(Object.getPrototypeOf,Object);return zo=e,zo}var Po,hs;function Ri(){if(hs)return Po;hs=1;var r=Li(),e=Mi(),t=Ca(),s=Pi(),o=Object.getOwnPropertySymbols,i=o?function(l){for(var d=[];l;)r(d,t(l)),l=e(l);return d}:s;return Po=i,Po}var Lo,ps;function hd(){if(ps)return Lo;ps=1;var r=tr(),e=Ri();function t(s,o){return r(s,e(s),o)}return Lo=t,Lo}var Mo,gs;function Di(){if(gs)return Mo;gs=1;var r=Li(),e=ya();function t(s,o,i){var l=o(s);return e(s)?l:r(l,i(s))}return Mo=t,Mo}var Ro,fs;function pd(){if(fs)return Ro;fs=1;var r=Di(),e=Ca(),t=_a();function s(o){return r(o,t,e)}return Ro=s,Ro}var Do,ms;function gd(){if(ms)return Do;ms=1;var r=Di(),e=Ri(),t=Sa();function s(o){return r(o,t,e)}return Do=s,Do}var Bo,bs;function fd(){if(bs)return Bo;bs=1;var r=vt(),e=at(),t=r(e,"DataView");return Bo=t,Bo}var Oo,vs;function md(){if(vs)return Oo;vs=1;var r=vt(),e=at(),t=r(e,"Promise");return Oo=t,Oo}var qo,ys;function bd(){if(ys)return qo;ys=1;var r=vt(),e=at(),t=r(e,"Set");return qo=t,qo}var Fo,ws;function vd(){if(ws)return Fo;ws=1;var r=vt(),e=at(),t=r(e,"WeakMap");return Fo=t,Fo}var jo,xs;function Ea(){if(xs)return jo;xs=1;var r=fd(),e=va(),t=md(),s=bd(),o=vd(),i=qt(),l=Si(),d="[object Map]",c="[object Object]",m="[object Promise]",x="[object Set]",v="[object WeakMap]",S="[object DataView]",p=l(r),f=l(e),g=l(t),C=l(s),y=l(o),E=i;return(r&&E(new r(new ArrayBuffer(1)))!=S||e&&E(new e)!=d||t&&E(t.resolve())!=m||s&&E(new s)!=x||o&&E(new o)!=v)&&(E=function(z){var k=i(z),U=k==c?z.constructor:void 0,K=U?l(U):"";if(K)switch(K){case p:return S;case f:return d;case g:return m;case C:return x;case y:return v}return k}),jo=E,jo}var No,ks;function yd(){if(ks)return No;ks=1;var r=Object.prototype,e=r.hasOwnProperty;function t(s){var o=s.length,i=new s.constructor(o);return o&&typeof s[0]=="string"&&e.call(s,"index")&&(i.index=s.index,i.input=s.input),i}return No=t,No}var Ho,_s;function wd(){if(_s)return Ho;_s=1;var r=at(),e=r.Uint8Array;return Ho=e,Ho}var Uo,Ss;function Ta(){if(Ss)return Uo;Ss=1;var r=wd();function e(t){var s=new t.constructor(t.byteLength);return new r(s).set(new r(t)),s}return Uo=e,Uo}var Vo,Cs;function xd(){if(Cs)return Vo;Cs=1;var r=Ta();function e(t,s){var o=s?r(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}return Vo=e,Vo}var Wo,Es;function kd(){if(Es)return Wo;Es=1;var r=/\w*$/;function e(t){var s=new t.constructor(t.source,r.exec(t));return s.lastIndex=t.lastIndex,s}return Wo=e,Wo}var Go,Ts;function _d(){if(Ts)return Go;Ts=1;var r=ba(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function s(o){return t?Object(t.call(o)):{}}return Go=s,Go}var Yo,Is;function Sd(){if(Is)return Yo;Is=1;var r=Ta();function e(t,s){var o=s?r(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}return Yo=e,Yo}var Ko,$s;function Cd(){if($s)return Ko;$s=1;var r=Ta(),e=xd(),t=kd(),s=_d(),o=Sd(),i="[object Boolean]",l="[object Date]",d="[object Map]",c="[object Number]",m="[object RegExp]",x="[object Set]",v="[object String]",S="[object Symbol]",p="[object ArrayBuffer]",f="[object DataView]",g="[object Float32Array]",C="[object Float64Array]",y="[object Int8Array]",E="[object Int16Array]",z="[object Int32Array]",k="[object Uint8Array]",U="[object Uint8ClampedArray]",K="[object Uint16Array]",j="[object Uint32Array]";function D(O,Q,H){var P=O.constructor;switch(Q){case p:return r(O);case i:case l:return new P(+O);case f:return e(O,H);case g:case C:case y:case E:case z:case k:case U:case K:case j:return o(O,H);case d:return new P;case c:case v:return new P(O);case m:return t(O);case x:return new P;case S:return s(O)}}return Ko=D,Ko}var Xo,As;function Ed(){if(As)return Xo;As=1;var r=bt(),e=Object.create,t=(function(){function s(){}return function(o){if(!r(o))return{};if(e)return e(o);s.prototype=o;var i=new s;return s.prototype=void 0,i}})();return Xo=t,Xo}var Zo,zs;function Td(){if(zs)return Zo;zs=1;var r=Ed(),e=Mi(),t=ka();function s(o){return typeof o.constructor=="function"&&!t(o)?r(e(o)):{}}return Zo=s,Zo}var Jo,Ps;function Id(){if(Ps)return Jo;Ps=1;var r=Ea(),e=Et(),t="[object Map]";function s(o){return e(o)&&r(o)==t}return Jo=s,Jo}var Qo,Ls;function $d(){if(Ls)return Qo;Ls=1;var r=Id(),e=wa(),t=xa(),s=t&&t.isMap,o=s?e(s):r;return Qo=o,Qo}var ea,Ms;function Ad(){if(Ms)return ea;Ms=1;var r=Ea(),e=Et(),t="[object Set]";function s(o){return e(o)&&r(o)==t}return ea=s,ea}var ta,Rs;function zd(){if(Rs)return ta;Rs=1;var r=Ad(),e=wa(),t=xa(),s=t&&t.isSet,o=s?e(s):r;return ta=o,ta}var ra,Ds;function Pd(){if(Ds)return ra;Ds=1;var r=Wl(),e=Gl(),t=Ei(),s=ad(),o=id(),i=ld(),l=dd(),d=ud(),c=hd(),m=pd(),x=gd(),v=Ea(),S=yd(),p=Cd(),f=Td(),g=ya(),C=Ti(),y=$d(),E=bt(),z=zd(),k=_a(),U=Sa(),K=1,j=2,D=4,O="[object Arguments]",Q="[object Array]",H="[object Boolean]",P="[object Date]",q="[object Error]",h="[object Function]",$="[object GeneratorFunction]",Z="[object Map]",F="[object Number]",ee="[object Object]",Y="[object RegExp]",R="[object Set]",A="[object String]",L="[object Symbol]",te="[object WeakMap]",B="[object ArrayBuffer]",J="[object DataView]",ge="[object Float32Array]",_e="[object Float64Array]",de="[object Int8Array]",xe="[object Int16Array]",Se="[object Int32Array]",oe="[object Uint8Array]",ce="[object Uint8ClampedArray]",he="[object Uint16Array]",u="[object Uint32Array]",X={};X[O]=X[Q]=X[B]=X[J]=X[H]=X[P]=X[ge]=X[_e]=X[de]=X[xe]=X[Se]=X[Z]=X[F]=X[ee]=X[Y]=X[R]=X[A]=X[L]=X[oe]=X[ce]=X[he]=X[u]=!0,X[q]=X[h]=X[te]=!1;function T(b,w,_,W,V,G){var ne,pe=w&K,se=w&j,we=w&D;if(_&&(ne=V?_(b,W,V,G):_(b)),ne!==void 0)return ne;if(!E(b))return b;var fe=g(b);if(fe){if(ne=S(b),!pe)return l(b,ne)}else{var le=v(b),re=le==h||le==$;if(C(b))return i(b,pe);if(le==ee||le==O||re&&!V){if(ne=se||re?{}:f(b),!pe)return se?c(b,o(ne,b)):d(b,s(ne,b))}else{if(!X[le])return V?b:{};ne=p(b,le,pe)}}G||(G=new r);var ie=G.get(b);if(ie)return ie;G.set(b,ne),z(b)?b.forEach(function(Pe){ne.add(T(Pe,w,_,Pe,b,G))}):y(b)&&b.forEach(function(Pe,He){ne.set(He,T(Pe,w,_,He,b,G))});var ye=we?se?x:m:se?U:k,We=fe?void 0:ye(b);return e(We||b,function(Pe,He){We&&(He=Pe,Pe=b[He]),t(ne,He,T(Pe,w,_,He,b,G))}),ne}return ra=T,ra}var oa,Bs;function Ld(){if(Bs)return oa;Bs=1;var r=Pd(),e=1,t=4;function s(o){return r(o,e|t)}return oa=s,oa}var Md=Ld();const Ie=Ct(Md);var be=(r=>(r.TEXT="text",r.IMAGE="image",r.TABLE="table",r.PAGE_NUMBER="pageNumber",r.BARCODE="barcode",r.QRCODE="qrcode",r.LINE="line",r.RECT="rect",r.CIRCLE="circle",r))(be||{});const Rd={mode:"local",endpoints:{baseUrl:"",templates:{list:"/api/print/templates",get:"/api/print/templates/{id}",upsert:"/api/print/templates",delete:"/api/print/templates/{id}"},customElements:{list:"/api/print/custom-elements",get:"/api/print/custom-elements/{id}",upsert:"/api/print/custom-elements",delete:"/api/print/custom-elements/{id}"}},headers:{"Content-Type":"application/json"}};let Mt={...Rd};const Dd=(r,e)=>({...r}),tt=()=>({mode:Mt.mode,endpoints:Dd(Mt.endpoints),headers:{...Mt.headers||{}},fetcher:Mt.fetcher}),Bd=r=>{const e=Mt.endpoints.baseUrl||"";return r?/^https?:\/\//i.test(r)||!e?r:r.startsWith("/")?`${e.replace(/\/+$/,"")}${r}`:`${e.replace(/\/+$/,"")}/${r}`:e||""},rt=(r,e)=>{const t=r||"",s=e?t.replace("{id}",e):t;return Bd(s)},Rt={enabled:!1,text:"",angle:-30,color:"#000000",opacity:.1,size:24,density:160},Od={title:"",logoUrl:"",showTitle:!0,showLogo:!0},qd=()=>{const r=localStorage.getItem("print-designer-watermark");if(!r)return{...Rt};try{return{...Rt,...JSON.parse(r)}}catch{return{...Rt}}},Be=fi("designer",{state:()=>({unit:localStorage.getItem("print-designer-unit")||"mm",watermark:qd(),branding:{...Od},pages:[{id:Ve(),elements:[]}],currentPageIndex:0,customElements:JSON.parse(localStorage.getItem("print-designer-custom-elements")||"[]"),testData:{},editingCustomElementId:null,customElementEditSnapshot:null,selectedElementId:null,selectedElementIds:[],selectedGuideId:null,highlightedGuideId:null,highlightedEdge:null,canvasSize:{width:794,height:1123},zoom:1,isDragging:!1,showGrid:!0,showMarginLines:!0,showCornerMarkers:!0,headerHeight:100,footerHeight:100,showHeaderLine:!1,showFooterLine:!1,showMinimap:!1,showHelp:!1,showSettings:!1,canvasBackground:"#ffffff",pageSpacingX:0,pageSpacingY:0,guides:[],historyPast:[],historyFuture:[],clipboard:[],copiedPage:null,isExporting:!1,disableGlobalShortcuts:!1,disableShortcutsCount:0,tableSelection:null}),actions:{setBranding(r){if(!r||typeof r!="object")return;const e={...this.branding,...r};r.showTitle!==void 0&&(e.showTitle=!!r.showTitle),r.showLogo!==void 0&&(e.showLogo=!!r.showLogo),this.branding=e},setWatermark(r){this.watermark={...this.watermark||Rt,...r},localStorage.setItem("print-designer-watermark",JSON.stringify(this.watermark))},setUnit(r){this.unit=r,localStorage.setItem("print-designer-unit",r)},setDragging(r){this.isDragging=r},setDisableGlobalShortcuts(r){const e=this.disableShortcutsCount||0;r?this.disableShortcutsCount=e+1:this.disableShortcutsCount=Math.max(0,e-1),this.disableGlobalShortcuts=this.disableShortcutsCount>0},setIsExporting(r){this.isExporting=r},setPageSpacingX(r){this.pageSpacingX=Math.max(0,Math.round(r))},setPageSpacingY(r){this.pageSpacingY=Math.max(0,Math.round(r))},resetCanvas(){this.watermark={...Rt},localStorage.setItem("print-designer-watermark",JSON.stringify(this.watermark)),this.pages=[{id:Ve(),elements:[]}],this.currentPageIndex=0,this.testData={},this.selectedElementId=null,this.selectedElementIds=[],this.selectedGuideId=null,this.guides=[],this.historyPast=[],this.historyFuture=[],this.headerHeight=100,this.footerHeight=100,this.showHeaderLine=!1,this.showFooterLine=!1,this.canvasBackground="#ffffff",this.pageSpacingX=0,this.pageSpacingY=0,this.canvasSize={width:794,height:1123},this.zoom=1,this.showGrid=!0,this.showCornerMarkers=!0,this.showMinimap=!1,this.showHelp=!1,this.showSettings=!1,this.copiedPage=null},startCustomElementEdit(r){const e=this.customElements.find(s=>s.id===r);if(!e)return;this.customElementEditSnapshot||(this.customElementEditSnapshot={pages:Ie(this.pages),historyPast:Ie(this.historyPast),historyFuture:Ie(this.historyFuture),canvasSize:Ie(this.canvasSize),guides:Ie(this.guides),zoom:this.zoom,showGrid:this.showGrid,showMarginLines:this.showMarginLines,showCornerMarkers:this.showCornerMarkers,headerHeight:this.headerHeight,footerHeight:this.footerHeight,showHeaderLine:this.showHeaderLine,showFooterLine:this.showFooterLine,showMinimap:this.showMinimap,canvasBackground:this.canvasBackground,pageSpacingX:this.pageSpacingX,pageSpacingY:this.pageSpacingY,unit:this.unit,watermark:Ie(this.watermark),testData:Ie(this.testData),currentPageIndex:this.currentPageIndex,selectedElementId:this.selectedElementId,selectedElementIds:Ie(this.selectedElementIds),selectedGuideId:this.selectedGuideId,highlightedGuideId:this.highlightedGuideId,highlightedEdge:this.highlightedEdge}),this.editingCustomElementId=r,this.resetCanvas();const t=Ie(e.element);t.id=Ve(),this.pages=[{id:Ve(),elements:[t]}],this.currentPageIndex=0,this.selectedElementId=t.id,this.selectedElementIds=[t.id],this.historyPast=[],this.historyFuture=[],this.guides=[],this.tableSelection=null},cancelCustomElementEdit(){const r=this.customElementEditSnapshot;this.editingCustomElementId=null,this.customElementEditSnapshot=null,r&&(this.pages=r.pages,this.historyPast=r.historyPast||[],this.historyFuture=r.historyFuture||[],this.canvasSize=r.canvasSize,this.guides=r.guides,this.zoom=r.zoom,this.showGrid=r.showGrid,this.showMarginLines=r.showMarginLines,this.showCornerMarkers=r.showCornerMarkers,this.headerHeight=r.headerHeight,this.footerHeight=r.footerHeight,this.showHeaderLine=r.showHeaderLine,this.showFooterLine=r.showFooterLine,this.showMinimap=r.showMinimap,this.canvasBackground=r.canvasBackground,this.pageSpacingX=r.pageSpacingX??this.pageSpacingX,this.pageSpacingY=r.pageSpacingY??this.pageSpacingY,this.unit=r.unit||this.unit,r.unit&&localStorage.setItem("print-designer-unit",r.unit),r.watermark&&(this.watermark=Ie(r.watermark),localStorage.setItem("print-designer-watermark",JSON.stringify(this.watermark))),this.testData=r.testData||{},this.currentPageIndex=r.currentPageIndex,this.selectedElementId=r.selectedElementId,this.selectedElementIds=r.selectedElementIds,this.selectedGuideId=r.selectedGuideId,this.highlightedGuideId=r.highlightedGuideId,this.highlightedEdge=r.highlightedEdge,this.tableSelection=null)},commitCustomElementEdit(){var t;if(!this.editingCustomElementId)return!1;const r=this.customElements.find(s=>s.id===this.editingCustomElementId);if(!r)return!1;const e=this.selectedElement||((t=this.pages[0])==null?void 0:t.elements[0]);return e?(r.element=Ie(e),this.saveCustomElements(),!0):!1},saveCustomElementEditAs(r){var t;const e=this.selectedElement||((t=this.pages[0])==null?void 0:t.elements[0]);return e?(this.addCustomElement(r,e),!0):!1},copyPage(r){const e=this.pages[r];e&&(this.copiedPage=Ie(e))},pastePage(r){if(!this.copiedPage)return;this.snapshot();const e=Ie(this.copiedPage);e.id=Ve(),e.elements.forEach(t=>{t.id=Ve()}),this.pages.splice(r+1,0,e),this.currentPageIndex=r+1},addPage(){this.snapshot(),this.pages.push({id:Ve(),elements:[]}),this.currentPageIndex=this.pages.length-1},removePage(r){this.pages.length<=1||(this.snapshot(),this.pages.splice(r,1),this.currentPageIndex>=this.pages.length&&(this.currentPageIndex=this.pages.length-1))},setTableSelection(r,e,t){if(this.tableSelection&&this.tableSelection.elementId!==r){this.tableSelection={elementId:r,cells:[e]};return}if(!this.tableSelection){this.tableSelection={elementId:r,cells:[e]};return}if(t){const s=this.tableSelection.cells.findIndex(o=>o.rowIndex===e.rowIndex&&o.colField===e.colField&&o.section===e.section);s>=0?(this.tableSelection.cells.splice(s,1),this.tableSelection.cells.length===0&&(this.tableSelection=null)):this.tableSelection.cells.length>0&&this.tableSelection.cells[0].section!==e.section?this.tableSelection={elementId:r,cells:[e]}:this.tableSelection.cells.push(e)}else this.tableSelection={elementId:r,cells:[e]}},setTableSelectionCells(r,e){this.tableSelection={elementId:r,cells:e}},clearTableSelection(){this.tableSelection=null},mergeSelectedCells(){if(!this.tableSelection||this.tableSelection.cells.length<2)return;const{elementId:r,cells:e}=this.tableSelection,t=e[0].section||"body";let s=null,o=-1,i=-1;for(let y=0;y<this.pages.length;y++){const E=this.pages[y].elements.findIndex(z=>z.id===r);if(E!==-1){s=this.pages[y].elements[E],o=y,i=E;break}}if(!s||!s.columns)return;const l=t==="footer"?"footerData":"data";if(!s[l])return;const d=e.map(y=>y.rowIndex),c=Math.min(...d),m=Math.max(...d),x=s.columns.map(y=>y.field),v=e.map(y=>x.indexOf(y.colField)).filter(y=>y!==-1);if(v.length!==e.length)return;const S=Math.min(...v),p=Math.max(...v),f=m-c+1,g=p-S+1;this.snapshot();const C=Ie(s[l]);for(let y=c;y<=m;y++)for(let E=S;E<=p;E++){const z=x[E],k=C[y];k&&(typeof k[z]!="object"||k[z]===null?k[z]={value:k[z]}:"value"in k[z],y===c&&E===S?(k[z].rowSpan=f,k[z].colSpan=g):(k[z].rowSpan=0,k[z].colSpan=0,k[z].value=""))}this.pages[o].elements[i]={...s,[l]:C},this.tableSelection=null},splitSelectedCells(){if(!this.tableSelection||this.tableSelection.cells.length!==1)return;const{elementId:r,cells:e}=this.tableSelection,t=e[0],s=t.section||"body";let o=null,i=-1,l=-1;for(let g=0;g<this.pages.length;g++){const C=this.pages[g].elements.findIndex(y=>y.id===r);if(C!==-1){o=this.pages[g].elements[C],i=g,l=C;break}}if(!o||!o.columns)return;const d=s==="footer"?"footerData":"data";if(!o[d])return;const c=o[d][t.rowIndex];if(!c)return;const m=c[t.colField];if(!m||typeof m!="object"||!m.rowSpan&&!m.colSpan)return;const x=m.rowSpan||1,v=m.colSpan||1;if(x<=1&&v<=1)return;this.snapshot();const S=Ie(o[d]),p=o.columns.map(g=>g.field),f=p.indexOf(t.colField);for(let g=t.rowIndex;g<t.rowIndex+x;g++)for(let C=f;C<f+v;C++){const y=p[C],E=S[g];E&&E[y]&&typeof E[y]=="object"&&(E[y].rowSpan=1,E[y].colSpan=1)}this.pages[i].elements[l]={...o,[d]:S},this.tableSelection=null},setHeaderHeight(r){this.headerHeight=r},setFooterHeight(r){this.footerHeight=r},setShowHeaderLine(r){this.showHeaderLine=r},setShowFooterLine(r){this.showFooterLine=r},setShowMinimap(r){this.showMinimap=r},setShowHelp(r){this.showHelp=r},setShowSettings(r){this.showSettings=r},setCanvasBackground(r){this.canvasBackground=r},snapshot(){this.historyPast.length>=20&&this.historyPast.shift(),this.historyPast.push(Ie(this.pages)),this.historyFuture=[]},undo(){if(this.historyPast.length===0)return;const r=this.historyPast.pop();this.historyFuture.push(Ie(this.pages)),this.pages=Ie(r),this.selectedElementId&&(this.pages.some(t=>t.elements.some(s=>s.id===this.selectedElementId))||(this.selectedElementId=null,this.selectedElementIds=[])),this.selectedElementIds=this.selectedElementIds.filter(e=>this.pages.some(t=>t.elements.some(s=>s.id===e))),this.currentPageIndex>=this.pages.length&&(this.currentPageIndex=Math.max(0,this.pages.length-1))},redo(){if(this.historyFuture.length===0)return;const r=this.historyFuture.pop();this.historyPast.push(Ie(this.pages)),this.pages=Ie(r),this.currentPageIndex>=this.pages.length&&(this.currentPageIndex=Math.max(0,this.pages.length-1))},addGuide(r){this.guides.push({...r,id:Ve()})},updateGuide(r,e){const t=this.guides.find(s=>s.id===r);t&&(t.position=e)},removeGuide(r){const e=this.guides.findIndex(t=>t.id===r);e!==-1&&(this.guides.splice(e,1),this.selectedGuideId===r&&(this.selectedGuideId=null))},clearGuides(){this.guides=[]},selectGuide(r){this.selectedGuideId=r,r&&(this.selectedElementId=null,this.selectedElementIds=[],this.tableSelection=null)},setHighlightedGuide(r){this.highlightedGuideId=r},setHighlightedEdge(r){this.highlightedEdge=r},setShowMarginLines(r){this.showMarginLines=r},setShowCornerMarkers(r){this.showCornerMarkers=r},getSnapPosition(r,e,t,s=!1,o=!0,i=-1){let d=e,c=t,m=null,x=null;const v=(K,j,D)=>{const O=Math.abs(K-D);if(O>5)return!1;if(s){const Q=Math.abs(j-D);return O<Q}return!0},S=this.pageSpacingX||0,p=this.canvasSize.width-(this.pageSpacingX||0),f=Math.max(S,p-r.width),g=this.pageSpacingY||0,C=this.canvasSize.height-(this.pageSpacingY||0),y=Math.max(g,C-r.height);v(d,r.x,S)?(d=S,x="left"):v(d+r.width,r.x+r.width,p)&&(d=f,x="right"),v(c,r.y,g)?(c=g,x=x||"top"):v(c+r.height,r.y+r.height,C)&&(c=y,x=x||"bottom");for(const K of this.guides)K.type==="vertical"?v(d,r.x,K.position)?(d=K.position,m=K.id):v(d+r.width,r.x+r.width,K.position)&&(d=K.position-r.width,m=K.id):v(c,r.y,K.position)?(c=K.position,m=K.id):v(c+r.height,r.y+r.height,K.position)&&(c=K.position-r.height,m=K.id);let E=o,z=o,k=!1,U=!1;return o||(this.pages.length<=1?(E=!0,z=!0):(E=!0,i===0&&(k=!0),i===this.pages.length-1&&(U=!0))),E&&(d=Math.min(Math.max(S,d),f)),z?c=Math.min(Math.max(g,c),y):(k&&(c=Math.max(g,c)),U&&(c=Math.min(c,y))),{x:d,y:c,highlightedGuideId:m,highlightedEdge:x}},moveElementWithSnap(r,e,t,s=!0,o=!0){for(let i=0;i<this.pages.length;i++){const l=this.pages[i],d=l.elements.findIndex(c=>c.id===r);if(d!==-1){const c=l.elements[d];if(c.locked)return;const m=this.getSnapPosition(c,e,t,!1,o,i);this.setHighlightedGuide(m.highlightedGuideId||null),this.setHighlightedEdge(m.highlightedEdge||null),this.updateElement(r,{x:m.x,y:m.y},s);return}}},moveSelectedElements(r,e,t,s=!0,o=!0){s&&this.snapshot();let i=null,l=-1;const d=[],c=new Set(this.selectedElementIds);for(let C=0;C<this.pages.length;C++){const y=this.pages[C];for(let E=0;E<y.elements.length;E++){const z=y.elements[E];z.id===r&&(i=z,l=C),c.has(z.id)&&!z.locked&&d.push({pageIndex:C,elementIndex:E,element:z})}}if(!i||i.locked)return;const m=this.getSnapPosition(i,e,t,!1,o,l);this.setHighlightedGuide(m.highlightedGuideId||null),this.setHighlightedEdge(m.highlightedEdge||null);let x=m.x-i.x,v=m.y-i.y;if(x===0&&v===0)return;let S=o,p=o;const f=this.pageSpacingX||0,g=this.pageSpacingY||0;if(o||(this.pages.length<=1?(S=!0,p=!0):(S=!0,p=!1)),S||p||!p&&this.pages.length>1)for(const C of d){const y=C.element,E=C.pageIndex;if(S){if(x>0){const z=this.canvasSize.width-f-y.width;y.x+x>z&&(x=z-y.x)}else if(x<0){const z=f;y.x+x<z&&(x=z-y.x)}}if(p){if(v>0){const z=this.canvasSize.height-g-y.height;y.y+v>z&&(v=z-y.y)}else if(v<0){const z=g;y.y+v<z&&(v=z-y.y)}}else{if(E===0&&v<0){const z=g;y.y+v<z&&(v=z-y.y)}if(E===this.pages.length-1&&v>0){const z=this.canvasSize.height-g-y.height;y.y+v>z&&(v=z-y.y)}}}if(!(x===0&&v===0))for(const C of d){const{pageIndex:y,elementIndex:E,element:z}=C;this.pages[y].elements[E]={...z,x:z.x+x,y:z.y+v}}},nudgeSelectedElements(r,e){if(this.selectedElementIds.length===0)return;const t=this.selectedElementIds.filter(S=>{for(const p of this.pages){const f=p.elements.find(g=>g.id===S);if(f&&!f.locked)return!0}return!1});if(t.length===0)return;this.snapshot();let s=this.selectedElementId;(!s||!t.includes(s))&&(s=t[0]);let o=null;for(const S of this.pages){const p=S.elements.find(f=>f.id===s);if(p){o=p;break}}if(!o)return;const i=o.x+r,l=o.y+e,d=this.getSnapPosition(o,i,l,!0);this.setHighlightedGuide(d.highlightedGuideId||null),this.setHighlightedEdge(d.highlightedEdge||null);let c=d.x-o.x,m=d.y-o.y;const x=this.pageSpacingX||0,v=this.pageSpacingY||0;for(const S of t)for(const p of this.pages){const f=p.elements.find(g=>g.id===S);if(f){if(c>0){const g=this.canvasSize.width-x-f.width;f.x+c>g&&(c=g-f.x)}else if(c<0){const g=x;f.x+c<g&&(c=g-f.x)}if(m>0){const g=this.canvasSize.height-v-f.height;f.y+m>g&&(m=g-f.y)}else if(m<0){const g=v;f.y+m<g&&(m=g-f.y)}}}if(!(c===0&&m===0))for(const S of t)for(const p of this.pages){const f=p.elements.findIndex(g=>g.id===S);if(f!==-1){const g=p.elements[f];p.elements[f]={...g,x:g.x+c,y:g.y+m};break}}},addElement(r,e){this.snapshot();const t={...r,id:Ve()},s=e!==void 0&&e>=0&&e<this.pages.length?e:this.currentPageIndex;this.pages[s].elements.push(t),this.selectedElementId=t.id,this.currentPageIndex=s},moveElementToPage(r,e,t,s){this.snapshot();let o=-1,i=-1,l;for(let d=0;d<this.pages.length;d++){const c=this.pages[d].elements.findIndex(m=>m.id===r);if(c!==-1){o=d,i=c,l=this.pages[d].elements[c];break}}!l||o===-1||(this.pages[o].elements.splice(i,1),l.x=t,l.y=s,e>=0&&e<this.pages.length?(this.pages[e].elements.push(l),this.currentPageIndex=e):this.pages[o].elements.push(l))},updateElement(r,e,t=!0){t&&this.snapshot();for(const s of this.pages){const o=s.elements.findIndex(i=>i.id===r);if(o!==-1){if(s.elements[o].locked&&e.locked===void 0)return;s.elements[o]={...s.elements[o],...e};return}}},removeElement(r){for(const e of this.pages){const t=e.elements.find(s=>s.id===r);if(t&&t.locked)return}this.snapshot();for(const e of this.pages){const t=e.elements.findIndex(s=>s.id===r);if(t!==-1){e.elements.splice(t,1),this.selectedElementId===r&&(this.selectedElementId=null),this.tableSelection&&this.tableSelection.elementId===r&&(this.tableSelection=null);const s=this.selectedElementIds.indexOf(r);s!==-1&&this.selectedElementIds.splice(s,1);return}}},selectElement(r,e=!1){if(r&&(this.selectedGuideId=null),this.tableSelection&&(this.tableSelection=null),e&&r){if(this.selectedElementIds.includes(r)){const t=this.selectedElementIds.indexOf(r);this.selectedElementIds.splice(t,1)}else this.selectedElementIds.push(r);this.selectedElementId=this.selectedElementIds.length>0?this.selectedElementIds[this.selectedElementIds.length-1]:null}else this.selectedElementId=r,this.selectedElementIds=r?[r]:[];if(r){const t=this.pages.findIndex(s=>s.elements.some(o=>o.id===r));t!==-1&&(this.currentPageIndex=t)}},clearSelection(){this.selectedElementId=null,this.selectedElementIds=[],this.tableSelection=null},setSelection(r){if(this.tableSelection=null,r.length>0&&(this.selectedGuideId=null),this.selectedElementIds=r,this.selectedElementId=r.length>0?r[r.length-1]:null,r.length>0){const e=this.pages.findIndex(t=>t.elements.some(s=>s.id===this.selectedElementId));e!==-1&&(this.currentPageIndex=e)}},removeSelectedElements(){if(this.selectedElementIds.length===0)return;const r=this.selectedElementIds.filter(e=>{for(const t of this.pages){const s=t.elements.find(o=>o.id===e);if(s&&!s.locked)return!0}return!1});if(r.length!==0){this.snapshot();for(const e of r)for(const t of this.pages){const s=t.elements.findIndex(o=>o.id===e);if(s!==-1){t.elements.splice(s,1);break}}this.selectedElementId=null,this.selectedElementIds=[],this.tableSelection=null}},alignSelectedElements(r){if(this.selectedElementIds.length===0)return;const e=[];for(const t of this.selectedElementIds)for(const s of this.pages){const o=s.elements.find(i=>i.id===t);if(o&&!o.locked){e.push(o);break}}if(e.length!==0)if(this.snapshot(),e.length===1){const t=e[0],s=this.canvasSize.width,o=this.canvasSize.height,i=this.pageSpacingX||0,l=this.pageSpacingY||0,d=i,c=l,m=Math.max(0,s-i*2),x=Math.max(0,o-l*2);switch(r){case"left":t.x=d;break;case"center":t.x=d+(m-t.width)/2;break;case"right":t.x=d+m-t.width;break;case"top":t.y=c;break;case"middle":t.y=c+(x-t.height)/2;break;case"bottom":t.y=c+x-t.height;break}}else{const t=Math.min(...e.map(c=>c.x)),s=Math.max(...e.map(c=>c.x+c.width)),o=Math.min(...e.map(c=>c.y)),i=Math.max(...e.map(c=>c.y+c.height)),l=(t+s)/2,d=(o+i)/2;e.forEach(c=>{switch(r){case"left":c.x=t;break;case"center":c.x=l-c.width/2;break;case"right":c.x=s-c.width;break;case"top":c.y=o;break;case"middle":c.y=d-c.height/2;break;case"bottom":c.y=i-c.height;break}})}},resizeSelectedElements(r,e){if(this.selectedElementIds.length===0)return;const t=this.selectedElementIds.filter(s=>{for(const o of this.pages){const i=o.elements.find(l=>l.id===s);if(i&&!i.locked)return!0}return!1});if(t.length!==0){this.snapshot();for(const s of t)for(const o of this.pages){const i=o.elements.findIndex(l=>l.id===s);if(i!==-1){const l=o.elements[i],d=Math.max(10,l.width+r),c=Math.max(10,l.height+e);o.elements[i]={...l,width:d,height:c};break}}}},updateSelectedElementsStyle(r){if(this.selectedElementIds.length===0)return;this.selectedElementIds.some(t=>{for(const s of this.pages){const o=s.elements.find(i=>i.id===t);if(o&&o.locked)return!0}return!1});const e=this.selectedElementIds.filter(t=>{for(const s of this.pages){const o=s.elements.find(i=>i.id===t);if(o&&!o.locked)return!0}return!1});if(e.length!==0){this.snapshot();for(const t of e)for(const s of this.pages){const o=s.elements.findIndex(i=>i.id===t);if(o!==-1){const i=s.elements[o];s.elements[o]={...i,style:{...i.style,...r}};break}}}},toggleLock(){if(this.selectedElementIds.length===0)return;this.snapshot();let r=!0;const e=this.selectedElement;e&&(r=!e.locked);for(const t of this.selectedElementIds)for(const s of this.pages){const o=s.elements.findIndex(i=>i.id===t);if(o!==-1){s.elements[o].locked=r;break}}},setZoom(r){this.zoom=r},setCanvasSize(r,e){this.snapshot(),this.canvasSize={width:r,height:e}},setShowGrid(r){this.showGrid=r},deletePage(r){this.pages.length>1&&(this.snapshot(),this.pages.splice(r,1),this.currentPageIndex>=this.pages.length&&(this.currentPageIndex=this.pages.length-1))},copy(){if(this.selectedElementIds.length===0)return;const r=[];for(const e of this.selectedElementIds)for(const t of this.pages){const s=t.elements.find(o=>o.id===e);if(s&&!s.locked){r.push(Ie(s));break}}this.clipboard=r},cut(){this.selectedElementIds.length!==0&&(this.copy(),this.removeSelectedElements())},paste(r){if(this.clipboard.length===0)return;this.snapshot();const e=[],t=(r==null?void 0:r.pageIndex)??this.currentPageIndex;let s=1/0,o=1/0;if(r)for(const i of this.clipboard)s=Math.min(s,i.x),o=Math.min(o,i.y);for(const i of this.clipboard){const l=Ie(i);if(l.id=Ve(),r){const d=i.x-s,c=i.y-o;l.x=r.x+d,l.y=r.y+c}else l.x+=20,l.y+=20;l.x+l.width>this.canvasSize.width&&(l.x=Math.max(0,this.canvasSize.width-l.width)),l.y+l.height>this.canvasSize.height&&(l.y=Math.max(0,this.canvasSize.height-l.height)),l.x=Math.max(0,l.x),l.y=Math.max(0,l.y),this.pages[t]?this.pages[t].elements.push(l):this.pages[this.currentPageIndex].elements.push(l),e.push(l.id)}t!==this.currentPageIndex&&this.pages[t]&&(this.currentPageIndex=t),this.setSelection(e)},paginateTable(r){this.snapshot();let e=-1,t;for(let g=0;g<this.pages.length;g++){const C=this.pages[g].elements.findIndex(y=>y.id===r);if(C!==-1){e=g,t=this.pages[g].elements[C];break}}if(!t||t.type!==be.TABLE||!t.data)return;const s=this.canvasSize.height,o=50,i=t.style.headerHeight||40,l=t.style.rowHeight||30,d=t.y,m=s-d-o-i,x=Math.floor(Math.max(0,m)/l);if(x>=t.data.length)return;const v=t.data.slice(0,x),S=t.data.slice(x);this.updateElement(t.id,{data:v,height:i+v.length*l});const p=e+1;p>=this.pages.length&&this.addPage();const f={...Ie(t),id:Ve(),y:50,data:S,height:i+S.length*l};this.pages[p].elements.push(f),this.paginateTable(f.id)},groupSelectedElements(){this.selectedElementIds.length<2||(console.log("Group selected elements:",this.selectedElementIds),alert("Grouping feature is under development"))},async loadCustomElements(){var o;const{mode:r,endpoints:e,headers:t,fetcher:s}=tt();if(r==="remote")try{const i=rt(((o=e.customElements)==null?void 0:o.list)||""),d=await(await(s||fetch)(i,{headers:t})).json(),c=Array.isArray(d)?d:(d==null?void 0:d.customElements)||[];this.customElements=c.filter(m=>m&&typeof m.id=="string"&&typeof m.name=="string"&&m.element).map(m=>({id:m.id,name:m.name,element:Ie(m.element)}))}catch(i){console.error("Failed to load custom elements",i)}},async addCustomElement(r,e){var d;const{mode:t,endpoints:s,headers:o,fetcher:i}=tt(),l={id:Ve(),name:r,element:Ie(e)};if(t==="remote")try{const c=rt(((d=s.customElements)==null?void 0:d.upsert)||""),x=await(await(i||fetch)(c,{method:"POST",headers:o,body:JSON.stringify(l)})).json();l.id=(x==null?void 0:x.id)||l.id}catch(c){console.error("Failed to add custom element",c)}this.customElements.push(l),t!=="remote"&&this.saveCustomElements()},async removeCustomElement(r){var l;const{mode:e,endpoints:t,headers:s,fetcher:o}=tt(),i=this.customElements.findIndex(d=>d.id===r);if(i!==-1){if(this.customElements.splice(i,1),e==="remote"){try{const d=rt(((l=t.customElements)==null?void 0:l.delete)||"",r);await(o||fetch)(d,{method:"DELETE",headers:s})}catch(d){console.error("Failed to remove custom element",d)}return}this.saveCustomElements()}},async renameCustomElement(r,e){var d;const{mode:t,endpoints:s,headers:o,fetcher:i}=tt(),l=this.customElements.find(c=>c.id===r);if(l){if(l.name=e,t==="remote"){try{const c=rt(((d=s.customElements)==null?void 0:d.upsert)||"");await(i||fetch)(c,{method:"POST",headers:o,body:JSON.stringify(l)})}catch(c){console.error("Failed to rename custom element",c)}return}this.saveCustomElements()}},saveCustomElements(){localStorage.setItem("print-designer-custom-elements",JSON.stringify(this.customElements))}},getters:{selectedElement:r=>{if(!r.selectedElementId)return null;for(const e of r.pages){const t=e.elements.find(s=>s.id===r.selectedElementId);if(t)return t}return null},currentPage:r=>r.pages[r.currentPageIndex],editingCustomElement:r=>r.editingCustomElementId&&r.customElements.find(e=>e.id===r.editingCustomElementId)||null}}),rr=fi("templates",{state:()=>({templates:[],currentTemplateId:null,isSaving:!1}),actions:{async loadTemplates(){var i;const{mode:r,endpoints:e,headers:t,fetcher:s}=tt();if(r==="remote")try{const l=rt(((i=e.templates)==null?void 0:i.list)||""),c=await(await(s||fetch)(l,{headers:t})).json(),m=Array.isArray(c)?c:(c==null?void 0:c.templates)||[];this.templates=m.filter(x=>x&&typeof x.id=="string"&&typeof x.name=="string").map(x=>({id:x.id,name:x.name,data:x.data||{},updatedAt:x.updatedAt||Date.now()})).sort((x,v)=>v.updatedAt-x.updatedAt);return}catch(l){console.error("Failed to load templates",l)}const o=localStorage.getItem("print-designer-templates");if(o)try{this.templates=JSON.parse(o),this.templates.sort((l,d)=>d.updatedAt-l.updatedAt)}catch(l){console.error("Failed to parse templates",l),this.templates=[]}},saveToLocalStorage(){localStorage.setItem("print-designer-templates",JSON.stringify(this.templates))},async saveCurrentTemplate(r){var c;const{mode:e,endpoints:t,headers:s,fetcher:o}=tt(),i=Be(),l=this.currentTemplateId,d={pages:Ie(i.pages),canvasSize:Ie(i.canvasSize),guides:Ie(i.guides),zoom:i.zoom,showGrid:i.showGrid,headerHeight:i.headerHeight,footerHeight:i.footerHeight,showHeaderLine:i.showHeaderLine,showFooterLine:i.showFooterLine,showMinimap:i.showMinimap,canvasBackground:i.canvasBackground,pageSpacingX:i.pageSpacingX,pageSpacingY:i.pageSpacingY,unit:i.unit,watermark:Ie(i.watermark),testData:Ie(i.testData||{})};this.isSaving=!0;try{if(e==="remote"){const m={id:l||Ve(),name:r,data:d,updatedAt:Date.now()},x=rt(((c=t.templates)==null?void 0:c.upsert)||""),S=await(await(o||fetch)(x,{method:"POST",headers:s,body:JSON.stringify(m)})).json(),p=(S==null?void 0:S.id)||m.id,f=this.templates.findIndex(C=>C.id===p),g={...m,id:p};f>=0?this.templates[f]=g:this.templates.unshift(g),(!l||this.currentTemplateId===l)&&(this.currentTemplateId=p);return}if(l){const m=this.templates.findIndex(x=>x.id===l);m!==-1?(this.templates[m].data=d,this.templates[m].name=r,this.templates[m].updatedAt=Date.now()):this.createTemplate(r,d)}else this.createTemplate(r,d);this.saveToLocalStorage()}finally{this.isSaving=!1}},async createTemplate(r,e){var m;const{mode:t,endpoints:s,headers:o,fetcher:i}=tt(),l=Be(),d=e||{pages:l.pages,canvasSize:l.canvasSize,pageSpacingX:l.pageSpacingX,pageSpacingY:l.pageSpacingY,unit:l.unit,watermark:l.watermark,testData:Ie(l.testData||{})},c={id:Ve(),name:r,data:d,updatedAt:Date.now()};if(t==="remote")try{const x=rt(((m=s.templates)==null?void 0:m.upsert)||""),S=await(await(i||fetch)(x,{method:"POST",headers:o,body:JSON.stringify(c)})).json(),p=(S==null?void 0:S.id)||c.id;c.id=p}catch(x){console.error("Failed to create template",x)}this.templates.unshift(c),this.currentTemplateId=c.id,t!=="remote"&&this.saveToLocalStorage()},async deleteTemplate(r){var i;const{mode:e,endpoints:t,headers:s,fetcher:o}=tt();if(this.templates=this.templates.filter(l=>l.id!==r),this.currentTemplateId===r&&(this.currentTemplateId=null),e==="remote"){try{const l=rt(((i=t.templates)==null?void 0:i.delete)||"",r);await(o||fetch)(l,{method:"DELETE",headers:s})}catch(l){console.error("Failed to delete template",l)}return}this.saveToLocalStorage()},async renameTemplate(r,e){var d;const{mode:t,endpoints:s,headers:o,fetcher:i}=tt(),l=this.templates.find(c=>c.id===r);if(l){if(l.name=e,l.updatedAt=Date.now(),t==="remote"){try{const c=rt(((d=s.templates)==null?void 0:d.upsert)||"");await(i||fetch)(c,{method:"POST",headers:o,body:JSON.stringify(l)})}catch(c){console.error("Failed to rename template",c)}return}this.saveToLocalStorage()}},async copyTemplate(r){var l;const{mode:e,endpoints:t,headers:s,fetcher:o}=tt(),i=this.templates.find(d=>d.id===r);if(i){const d={id:Ve(),name:`${i.name} Copy`,data:JSON.parse(JSON.stringify(i.data)),updatedAt:Date.now()};if(e==="remote")try{const c=rt(((l=t.templates)==null?void 0:l.upsert)||""),x=await(await(o||fetch)(c,{method:"POST",headers:s,body:JSON.stringify(d)})).json();d.id=(x==null?void 0:x.id)||d.id}catch(c){console.error("Failed to copy template",c)}this.templates.unshift(d),e!=="remote"&&this.saveToLocalStorage()}},async loadTemplate(r){var l;const{mode:e,endpoints:t,headers:s,fetcher:o}=tt();if(e==="remote")try{const d=rt(((l=t.templates)==null?void 0:l.get)||"",r),m=await(await(o||fetch)(d,{headers:s})).json(),x=(m==null?void 0:m.template)||m;if(!x)return;const v=Be();v.resetCanvas();const S=x.data||{};S.pages&&(v.pages=S.pages),S.canvasSize&&(v.canvasSize=S.canvasSize),S.guides&&(v.guides=S.guides),S.zoom!==void 0&&(v.zoom=S.zoom),S.showGrid!==void 0&&(v.showGrid=S.showGrid),S.headerHeight!==void 0&&(v.headerHeight=S.headerHeight),S.footerHeight!==void 0&&(v.footerHeight=S.footerHeight),S.showHeaderLine!==void 0&&(v.showHeaderLine=S.showHeaderLine),S.showFooterLine!==void 0&&(v.showFooterLine=S.showFooterLine),S.showMinimap!==void 0&&(v.showMinimap=S.showMinimap),S.canvasBackground!==void 0&&(v.canvasBackground=S.canvasBackground),S.pageSpacingX!==void 0&&(v.pageSpacingX=S.pageSpacingX),S.pageSpacingY!==void 0&&(v.pageSpacingY=S.pageSpacingY),S.unit!==void 0&&(v.unit=S.unit),S.watermark!==void 0&&(v.watermark=S.watermark),v.testData=S.testData||{},v.selectedElementId=null,v.selectedGuideId=null,v.historyPast=[],v.historyFuture=[],this.currentTemplateId=x.id||r;return}catch(d){console.error("Failed to load template",d);return}const i=this.templates.find(d=>d.id===r);if(i){const d=Be();d.resetCanvas();const c=i.data;c.pages&&(d.pages=c.pages),c.canvasSize&&(d.canvasSize=c.canvasSize),c.guides&&(d.guides=c.guides),c.zoom!==void 0&&(d.zoom=c.zoom),c.showGrid!==void 0&&(d.showGrid=c.showGrid),c.headerHeight!==void 0&&(d.headerHeight=c.headerHeight),c.footerHeight!==void 0&&(d.footerHeight=c.footerHeight),c.showHeaderLine!==void 0&&(d.showHeaderLine=c.showHeaderLine),c.showFooterLine!==void 0&&(d.showFooterLine=c.showFooterLine),c.showMinimap!==void 0&&(d.showMinimap=c.showMinimap),c.canvasBackground!==void 0&&(d.canvasBackground=c.canvasBackground),c.pageSpacingX!==void 0&&(d.pageSpacingX=c.pageSpacingX),c.pageSpacingY!==void 0&&(d.pageSpacingY=c.pageSpacingY),c.unit!==void 0&&(d.unit=c.unit),c.watermark!==void 0&&(d.watermark=c.watermark),d.testData=c.testData||{},d.selectedElementId=null,d.selectedGuideId=null,d.historyPast=[],d.historyFuture=[],this.currentTemplateId=r}}}}),Bi=ae(localStorage.getItem("print-designer-autosave")!=="false");ze(Bi,r=>{localStorage.setItem("print-designer-autosave",String(r))});function Oi(){return{autoSave:Bi}}const Yt=ae(localStorage.getItem("print-designer-theme")||"system"),qi=ae(window.matchMedia("(prefers-color-scheme: dark)").matches),aa=window.matchMedia("(prefers-color-scheme: dark)");var gi;(gi=aa.addEventListener)==null||gi.call(aa,"change",r=>{qi.value=r.matches});const Fd=me(()=>Yt.value==="dark"?!0:Yt.value==="light"?!1:qi.value),jd=r=>{Yt.value=r,localStorage.setItem("print-designer-theme",r)};function yt(){return{theme:Yt,isDark:Fd,setTheme:jd}}var na,Os;function Nd(){if(Os)return na;Os=1;var r=at(),e=function(){return r.Date.now()};return na=e,na}var sa,qs;function Hd(){if(qs)return sa;qs=1;var r=/\s/;function e(t){for(var s=t.length;s--&&r.test(t.charAt(s)););return s}return sa=e,sa}var ia,Fs;function Ud(){if(Fs)return ia;Fs=1;var r=Hd(),e=/^\s+/;function t(s){return s&&s.slice(0,r(s)+1).replace(e,"")}return ia=t,ia}var la,js;function Vd(){if(js)return la;js=1;var r=qt(),e=Et(),t="[object Symbol]";function s(o){return typeof o=="symbol"||e(o)&&r(o)==t}return la=s,la}var da,Ns;function Wd(){if(Ns)return da;Ns=1;var r=Ud(),e=bt(),t=Vd(),s=NaN,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function c(m){if(typeof m=="number")return m;if(t(m))return s;if(e(m)){var x=typeof m.valueOf=="function"?m.valueOf():m;m=e(x)?x+"":x}if(typeof m!="string")return m===0?m:+m;m=r(m);var v=i.test(m);return v||l.test(m)?d(m.slice(2),v?2:8):o.test(m)?s:+m}return da=c,da}var ca,Hs;function Gd(){if(Hs)return ca;Hs=1;var r=bt(),e=Nd(),t=Wd(),s="Expected a function",o=Math.max,i=Math.min;function l(d,c,m){var x,v,S,p,f,g,C=0,y=!1,E=!1,z=!0;if(typeof d!="function")throw new TypeError(s);c=t(c)||0,r(m)&&(y=!!m.leading,E="maxWait"in m,S=E?o(t(m.maxWait)||0,c):S,z="trailing"in m?!!m.trailing:z);function k(q){var h=x,$=v;return x=v=void 0,C=q,p=d.apply($,h),p}function U(q){return C=q,f=setTimeout(D,c),y?k(q):p}function K(q){var h=q-g,$=q-C,Z=c-h;return E?i(Z,S-$):Z}function j(q){var h=q-g,$=q-C;return g===void 0||h>=c||h<0||E&&$>=S}function D(){var q=e();if(j(q))return O(q);f=setTimeout(D,K(q))}function O(q){return f=void 0,z&&x?k(q):(x=v=void 0,p)}function Q(){f!==void 0&&clearTimeout(f),C=0,x=g=v=f=void 0}function H(){return f===void 0?p:O(e())}function P(){var q=e(),h=j(q);if(x=arguments,v=this,g=q,h){if(f===void 0)return U(g);if(E)return clearTimeout(f),f=setTimeout(D,c),k(g)}return f===void 0&&(f=setTimeout(D,c)),p}return P.cancel=Q,P.flush=H,P}return ca=l,ca}var Yd=Gd();const Kd=Ct(Yd),Fi=96/25.4,Xd=25.4/96,ji=96/72,Zd=72/96;function ga(r){return Number((r*Xd).toFixed(2))}function Jd(r){return r*Fi}function Qd(r){return Number((r*Zd).toFixed(2))}function ec(r){return r*ji}function it(r,e){return e==="mm"?ga(r):e==="pt"?Qd(r):Math.round(r)}function Je(r,e){return e==="mm"?Jd(r):e==="pt"?ec(r):Math.round(r)}function Ot(r,e,t){r=r%360,r<0&&(r+=360),e=Math.max(0,Math.min(1,e)),t=Math.max(0,Math.min(1,t));const s=t*e,o=s*(1-Math.abs(r/60%2-1)),i=t-s;let l=0,d=0,c=0;return r>=0&&r<60?(l=s,d=o,c=0):r>=60&&r<120?(l=o,d=s,c=0):r>=120&&r<180?(l=0,d=s,c=o):r>=180&&r<240?(l=0,d=o,c=s):r>=240&&r<300?(l=o,d=0,c=s):(l=s,d=0,c=o),{r:Math.round((l+i)*255),g:Math.round((d+i)*255),b:Math.round((c+i)*255)}}function Us(r,e,t){r/=255,e/=255,t/=255;const s=Math.max(r,e,t),o=Math.min(r,e,t),i=s-o;let l=0;const d=s===0?0:i/s,c=s;if(s!==o){switch(s){case r:l=(e-t)/i+(e<t?6:0);break;case e:l=(t-r)/i+2;break;case t:l=(r-e)/i+4;break}l/=6}return{h:l*360,s:d,v:c}}function Dt(r){if(!r)return null;if(r==="transparent")return{h:0,s:0,v:0,a:0};if(r.startsWith("#")){const e=r.slice(1);let t=0,s=0,o=0,i=1;if(e.length===3)t=parseInt(e[0]+e[0],16),s=parseInt(e[1]+e[1],16),o=parseInt(e[2]+e[2],16);else if(e.length===6)t=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);else if(e.length===8)t=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;else return null;return{...Us(t,s,o),a:i}}if(r.startsWith("rgb")){const e=r.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(e){const t=parseInt(e[1]),s=parseInt(e[2]),o=parseInt(e[3]),i=e[4]!==void 0?parseFloat(e[4]):1;return{...Us(t,s,o),a:i}}}return null}function Vs(r,e,t,s=1){const{r:o,g:i,b:l}=Ot(r,e,t),d=c=>{const m=Math.round(c).toString(16);return m.length===1?"0"+m:m};if(s>=1)return`#${d(o)}${d(i)}${d(l)}`;{const c=Math.round(s*255);return`#${d(o)}${d(i)}${d(l)}${d(c)}`}}function tc(r,e,t,s=1){const{r:o,g:i,b:l}=Ot(r,e,t);return`rgba(${o}, ${i}, ${l}, ${parseFloat(s.toFixed(2))})`}const rc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function oc(r,e){return M(),N("svg",rc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M18 7H6V3h12zm0 5.5q.425 0 .713-.288T19 11.5t-.288-.712T18 10.5t-.712.288T17 11.5t.288.713t.712.287M16 19v-4H8v4zm2 2H6v-4H2v-6q0-1.275.875-2.137T5 8h14q1.275 0 2.138.863T22 11v6h-4z"},null,-1)])])}const Ia=Ee({name:"material-symbols-print",render:oc}),ac={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function nc(r,e){return M(),N("svg",ac,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V7H5zm7-2q-2.05 0-3.662-1.112T6 13q.725-1.775 2.338-2.887T12 9t3.663 1.113T18 13q-.725 1.775-2.337 2.888T12 17m0-2.5q-.625 0-1.062-.437T10.5 13t.438-1.062T12 11.5t1.063.438T13.5 13t-.437 1.063T12 14.5m0 1q1.05 0 1.775-.725T14.5 13t-.725-1.775T12 10.5t-1.775.725T9.5 13t.725 1.775T12 15.5"},null,-1)])])}const sc=Ee({name:"material-symbols-preview",render:nc}),ic={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function lc(r,e){return M(),N("svg",ic,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11zm-6 4q-.825 0-1.412-.587T4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413T18 20z"},null,-1)])])}const Kt=Ee({name:"material-symbols-file-download",render:lc}),dc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function cc(r,e){return M(),N("svg",dc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M9 12.5h1v-2h1q.425 0 .713-.288T12 9.5v-1q0-.425-.288-.712T11 7.5H9zm1-3v-1h1v1zm3 3h2q.425 0 .713-.288T16 11.5v-3q0-.425-.288-.712T15 7.5h-2zm1-1v-3h1v3zm3 1h1v-2h1v-1h-1v-1h1v-1h-2zM8 18q-.825 0-1.412-.587T6 16V4q0-.825.588-1.412T8 2h12q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-4 4q-.825 0-1.412-.587T2 20V6h2v14h14v2z"},null,-1)])])}Ee({name:"material-symbols-picture-as-pdf",render:cc});const uc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function hc(r,e){return M(),N("svg",uc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm1-4h12l-3.75-5l-3 4L9 13z"},null,-1)])])}const Ws=Ee({name:"material-symbols-image",render:hc}),pc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function gc(r,e){return M(),N("svg",pc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14m-1-1.5v-2h-2v-2h2v-2h2v2h2v2h-2v2z"},null,-1)])])}const Ni=Ee({name:"material-symbols-zoom-in",render:gc}),fc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function mc(r,e){return M(),N("svg",fc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14M7 10.5v-2h5v2z"},null,-1)])])}const Hi=Ee({name:"material-symbols-zoom-out",render:mc}),bc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function vc(r,e){return M(),N("svg",bc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m9.25 22l-.4-3.2q-.325-.125-.612-.3t-.563-.375L4.7 19.375l-2.75-4.75l2.575-1.95Q4.5 12.5 4.5 12.338v-.675q0-.163.025-.338L1.95 9.375l2.75-4.75l2.975 1.25q.275-.2.575-.375t.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3t.562.375l2.975-1.25l2.75 4.75l-2.575 1.95q.025.175.025.338v.674q0 .163-.05.338l2.575 1.95l-2.75 4.75l-2.95-1.25q-.275.2-.575.375t-.6.3l-.4 3.2zm2.8-6.5q1.45 0 2.475-1.025T15.55 12t-1.025-2.475T12.05 8.5q-1.475 0-2.488 1.025T8.55 12t1.013 2.475T12.05 15.5"},null,-1)])])}const Xt=Ee({name:"material-symbols-settings",render:vc}),yc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function wc(r,e){return M(),N("svg",yc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M21 7v12q0 .825-.587 1.413T19 21H5q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h12zm-9 11q1.25 0 2.125-.875T15 15t-.875-2.125T12 12t-2.125.875T9 15t.875 2.125T12 18m-6-8h9V6H6z"},null,-1)])])}const $a=Ee({name:"material-symbols-save",render:wc}),xc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function kc(r,e){return M(),N("svg",xc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M13 23v-3.075l5.525-5.5q.225-.225.5-.325t.55-.1q.3 0 .575.113t.5.337l.925.925q.2.225.313.5t.112.55t-.1.563t-.325.512l-5.5 5.5zM6 10h9V6H6zm13.575 7.4l.925-.975l-.925-.925l-.95.95zM11 21H5q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h12l4 4v5.3q-.475-.2-.987-.262T19 12.05t-.975.313t-.875.612L15 15.125V15q0-1.25-.875-2.125T12 12t-2.125.875T9 15t.875 2.125T12 18h.1L11 19.1z"},null,-1)])])}const Ui=Ee({name:"material-symbols-save-as",render:kc}),_c={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Sc(r,e){return M(),N("svg",_c,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M12 22q-2.05 0-3.875-.788t-3.187-2.15t-2.15-3.187T2 12q0-2.075.788-3.887t2.15-3.175t3.187-2.15T12 2q.425 0 .713.288T13 3t-.288.713T12 4Q8.675 4 6.337 6.338T4 12t2.338 5.663T12 20t5.663-2.337T20 12q0-.425.288-.712T21 11t.713.288T22 12q0 2.05-.788 3.875t-2.15 3.188t-3.175 2.15T12 22"},null,-1)])])}const Cc=Ee({name:"material-symbols-progress-activity",render:Sc}),Ec={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Tc(r,e){return M(),N("svg",Ec,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M7 19v-2h7.1q1.575 0 2.738-1T18 13.5T16.838 11T14.1 10H7.8l2.6 2.6L9 14L4 9l5-5l1.4 1.4L7.8 8h6.3q2.425 0 4.163 1.575T20 13.5t-1.737 3.925T14.1 19z"},null,-1)])])}const Vi=Ee({name:"material-symbols-undo",render:Tc}),Ic={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function $c(r,e){return M(),N("svg",Ic,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M9.9 19q-2.425 0-4.163-1.575T4 13.5t1.738-3.925T9.9 8h6.3l-2.6-2.6L15 4l5 5l-5 5l-1.4-1.4l2.6-2.6H9.9q-1.575 0-2.738 1T6 13.5T7.163 16T9.9 17H17v2z"},null,-1)])])}const Wi=Ee({name:"material-symbols-redo",render:$c}),Ac={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function zc(r,e){return M(),N("svg",Ac,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"},null,-1)])])}const Tt=Ee({name:"material-symbols-delete",render:zc}),Pc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Lc(r,e){return M(),N("svg",Pc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M11.95 18q.525 0 .888-.363t.362-.887t-.362-.888t-.888-.362t-.887.363t-.363.887t.363.888t.887.362m-.9-3.85h1.85q0-.825.188-1.3t1.062-1.3q.65-.65 1.025-1.238T15.55 8.9q0-1.4-1.025-2.15T12.1 6q-1.425 0-2.312.75T8.55 8.55l1.65.65q.125-.45.563-.975T12.1 7.7q.8 0 1.2.438t.4.962q0 .5-.3.938t-.75.812q-1.1.975-1.35 1.475t-.25 1.825M12 22q-2.075 0-3.9-.787t-3.175-2.138T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"},null,-1)])])}const Mc=Ee({name:"material-symbols-help",render:Lc}),Rc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Dc(r,e){return M(),N("svg",Rc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M3 21v-2h18v2zm0-4v-2h12v2zm0-4v-2h18v2zm0-4V7h12v2zm0-4V3h18v2z"},null,-1)])])}const Bc=Ee({name:"material-symbols-format-align-left",render:Dc}),Oc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function qc(r,e){return M(),N("svg",Oc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M3 21v-2h18v2zm4-4v-2h10v2zm-4-4v-2h18v2zm4-4V7h10v2zM3 5V3h18v2z"},null,-1)])])}const Fc=Ee({name:"material-symbols-format-align-center",render:qc}),jc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Nc(r,e){return M(),N("svg",jc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M3 5V3h18v2zm6 4V7h12v2zm-6 4v-2h18v2zm6 4v-2h12v2zm-6 4v-2h18v2z"},null,-1)])])}const Hc=Ee({name:"material-symbols-format-align-right",render:Nc}),Uc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Vc(r,e){return M(),N("svg",Uc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M4 5V3h16v2zm7 16V10.8l-2.6 2.6L7 12l5-5l5 5l-1.4 1.4l-2.6-2.6V21z"},null,-1)])])}const Wc=Ee({name:"material-symbols-vertical-align-top",render:Vc}),Gc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Yc(r,e){return M(),N("svg",Gc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M11 22v-4.2l-1.6 1.6L8 18l4-4l4 4l-1.4 1.4l-1.6-1.6V22zm-7-9v-2h16v2zm8-3L8 6l1.4-1.4L11 6.2V2h2v4.2l1.6-1.6L16 6z"},null,-1)])])}const Kc=Ee({name:"material-symbols-vertical-align-center",render:Yc}),Xc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Zc(r,e){return M(),N("svg",Xc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M4 21v-2h16v2zm8-4l-5-5l1.4-1.4l2.6 2.6V3h2v10.2l2.6-2.6L17 12z"},null,-1)])])}const Jc=Ee({name:"material-symbols-vertical-align-bottom",render:Zc}),Qc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function eu(r,e){return M(),N("svg",Qc,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M6.8 19V5h5.525q1.625 0 3 1T16.7 8.775q0 1.275-.575 1.963t-1.075.987q.625.275 1.388 1.025T17.2 15q0 2.225-1.625 3.113t-3.05.887zm3.025-2.8h2.6q1.2 0 1.463-.612t.262-.888t-.262-.887t-1.538-.613H9.825zm0-5.7h2.325q.825 0 1.2-.425t.375-.95q0-.6-.425-.975t-1.1-.375H9.825z"},null,-1)])])}const tu=Ee({name:"material-symbols-format-bold",render:eu}),ru={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ou(r,e){return M(),N("svg",ru,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M5 19v-2.5h4l3-9H8V5h10v2.5h-3.5l-3 9H15V19z"},null,-1)])])}const au=Ee({name:"material-symbols-format-italic",render:ou}),nu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function su(r,e){return M(),N("svg",nu,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M5 21v-2h14v2zm7-4q-2.525 0-3.925-1.575t-1.4-4.175V3H9.25v8.4q0 1.4.7 2.275t2.05.875t2.05-.875t.7-2.275V3h2.575v8.25q0 2.6-1.4 4.175T12 17"},null,-1)])])}const iu=Ee({name:"material-symbols-format-underlined",render:su}),lu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function du(r,e){return M(),N("svg",lu,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M10.9 16L15 5h2l4.1 11h-1.9l-1-2.8h-4.4l-1 2.8zm3.45-4.4h3.3l-1.6-4.55h-.1zM6 20l-3.5-3.5l1.4-1.4L5 16.15V3h2v13.15l1.1-1.05l1.4 1.4z"},null,-1)])])}const cu=Ee({name:"material-symbols-text-rotate-vertical",render:du}),uu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function hu(r,e){return M(),N("svg",uu,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M11 22q-1.25-.125-2.4-.612T6.4 20.1l1.4-1.45q.725.525 1.538.85t1.662.45zm2 0v-2.05q2.6-.375 4.3-2.337T19 13.05q0-2.925-2.037-4.962T12 6.05h-.2l1.6 1.6l-1.4 1.4l-4-4l4-4l1.4 1.45l-1.55 1.55H12q1.875 0 3.513.713t2.85 1.925t1.925 2.85T21 13.05q0 3.425-2.275 5.963T13 22m-8.05-3.35q-.8-1.05-1.288-2.2t-.612-2.4H5.1q.125.85.45 1.663t.85 1.537zm-1.9-6.6q.15-1.275.625-2.45T4.95 7.45l1.45 1.4q-.525.725-.85 1.538T5.1 12.05z"},null,-1)])])}const pu=Ee({name:"material-symbols-rotate-left",render:hu}),gu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function fu(r,e){return M(),N("svg",gu,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M9 18q-.825 0-1.412-.587T7 16V4q0-.825.588-1.412T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.587 1.413T18 18zm-4 4q-.825 0-1.412-.587T3 20V6h2v14h11v2z"},null,-1)])])}const It=Ee({name:"material-symbols-content-copy",render:fu}),mu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function bu(r,e){return M(),N("svg",mu,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M6.4 18h2.1l1.1-3.05h4.8L15.5 18h2.1L13.05 6h-2.1zm3.8-4.8l1.75-4.95h.1l1.75 4.95zM4 22q-.825 0-1.412-.587T2 20V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v16q0 .825-.587 1.413T20 22z"},null,-1)])])}const vu=Ee({name:"material-symbols-font-download",render:bu}),yu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function wu(r,e){return M(),N("svg",yu,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M6.175 1.4L7.6 0l8.575 8.575q.575.575.575 1.425t-.575 1.425l-4.75 4.75q-.575.575-1.425.575t-1.425-.575l-4.75-4.75Q3.25 10.85 3.25 10t.575-1.425L8.575 3.8zM10 5.225L5.225 10h9.55zM19 17q-.825 0-1.412-.587T17 15q0-.525.313-1.125T18 12.75q.225-.3.475-.625T19 11.5q.275.3.525.625t.475.625q.375.525.688 1.125T21 15q0 .825-.587 1.413T19 17M2 24v-4h20v4z"},null,-1)])])}const xu=Ee({name:"material-symbols-format-color-fill",render:wu}),ku={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _u(r,e){return M(),N("svg",ku,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h4.175q.275-.875 1.075-1.437T12 1q1 0 1.788.563T14.85 3H19q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5h-2v3H7V5H5zm7-14q.425 0 .713-.288T13 4t-.288-.712T12 3t-.712.288T11 4t.288.713T12 5"},null,-1)])])}const Aa=Ee({name:"material-symbols-content-paste",render:_u}),Su={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Cu(r,e){return M(),N("svg",Su,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M8 16q.825 0 1.413-.587T10 14t-.587-1.412T8 12t-1.412.588T6 14t.588 1.413T8 16m8 0q.825 0 1.413-.587T18 14t-.587-1.412T16 12t-1.412.588T14 14t.588 1.413T16 16m-4-6q.825 0 1.413-.587T14 8t-.587-1.412T12 6t-1.412.588T10 8t.588 1.413T12 10m0 12q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"},null,-1)])])}const Eu=Ee({name:"material-symbols-group-work",render:Cu}),Tu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Iu(r,e){return M(),N("svg",Tu,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M6 22q-.825 0-1.412-.587T4 20V10q0-.825.588-1.412T6 8h1V6q0-2.075 1.463-3.537T12 1t3.538 1.463T17 6v2h1q.825 0 1.413.588T20 10v10q0 .825-.587 1.413T18 22zm6-5q.825 0 1.413-.587T14 15t-.587-1.412T12 13t-1.412.588T10 15t.588 1.413T12 17M9 8h6V6q0-1.25-.875-2.125T12 3t-2.125.875T9 6z"},null,-1)])])}const or=Ee({name:"material-symbols-lock",render:Iu}),$u={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Au(r,e){return M(),N("svg",$u,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M6 8h9V6q0-1.25-.875-2.125T12 3t-2.125.875T9 6H7q0-2.075 1.463-3.537T12 1t3.538 1.463T17 6v2h1q.825 0 1.413.588T20 10v10q0 .825-.587 1.413T18 22H6q-.825 0-1.412-.587T4 20V10q0-.825.588-1.412T6 8m6 9q.825 0 1.413-.587T14 15t-.587-1.412T12 13t-1.412.588T10 15t.588 1.413T12 17"},null,-1)])])}const Gi=Ee({name:"material-symbols-lock-open",render:Au}),zu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Pu(r,e){return M(),N("svg",zu,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m12 15.375l-6-6l1.4-1.4l4.6 4.6l4.6-4.6l1.4 1.4z"},null,-1)])])}const za=Ee({name:"material-symbols-expand-more",render:Pu});var Lu=ll();const Mu=Ct(Lu);function Vt(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ua={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Gs;function Ru(){return Gs||(Gs=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(s,o,i){function l(m,x){if(!o[m]){if(!s[m]){var v=typeof Vt=="function"&&Vt;if(!x&&v)return v(m,!0);if(d)return d(m,!0);var S=new Error("Cannot find module '"+m+"'");throw S.code="MODULE_NOT_FOUND",S}var p=o[m]={exports:{}};s[m][0].call(p.exports,function(f){var g=s[m][1][f];return l(g||f)},p,p.exports,t,s,o,i)}return o[m].exports}for(var d=typeof Vt=="function"&&Vt,c=0;c<i.length;c++)l(i[c]);return l})({1:[function(t,s,o){var i=t("./utils"),l=t("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(c){for(var m,x,v,S,p,f,g,C=[],y=0,E=c.length,z=E,k=i.getTypeOf(c)!=="string";y<c.length;)z=E-y,v=k?(m=c[y++],x=y<E?c[y++]:0,y<E?c[y++]:0):(m=c.charCodeAt(y++),x=y<E?c.charCodeAt(y++):0,y<E?c.charCodeAt(y++):0),S=m>>2,p=(3&m)<<4|x>>4,f=1<z?(15&x)<<2|v>>6:64,g=2<z?63&v:64,C.push(d.charAt(S)+d.charAt(p)+d.charAt(f)+d.charAt(g));return C.join("")},o.decode=function(c){var m,x,v,S,p,f,g=0,C=0,y="data:";if(c.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var E,z=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===d.charAt(64)&&z--,c.charAt(c.length-2)===d.charAt(64)&&z--,z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=l.uint8array?new Uint8Array(0|z):new Array(0|z);g<c.length;)m=d.indexOf(c.charAt(g++))<<2|(S=d.indexOf(c.charAt(g++)))>>4,x=(15&S)<<4|(p=d.indexOf(c.charAt(g++)))>>2,v=(3&p)<<6|(f=d.indexOf(c.charAt(g++))),E[C++]=m,p!==64&&(E[C++]=x),f!==64&&(E[C++]=v);return E}},{"./support":30,"./utils":32}],2:[function(t,s,o){var i=t("./external"),l=t("./stream/DataWorker"),d=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function m(x,v,S,p,f){this.compressedSize=x,this.uncompressedSize=v,this.crc32=S,this.compression=p,this.compressedContent=f}m.prototype={getContentWorker:function(){var x=new l(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),v=this;return x.on("end",function(){if(this.streamInfo.data_length!==v.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),x},getCompressedWorker:function(){return new l(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(x,v,S){return x.pipe(new d).pipe(new c("uncompressedSize")).pipe(v.compressWorker(S)).pipe(new c("compressedSize")).withStreamInfo("compression",v)},s.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,s,o){var i=t("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},o.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,s,o){var i=t("./utils"),l=(function(){for(var d,c=[],m=0;m<256;m++){d=m;for(var x=0;x<8;x++)d=1&d?3988292384^d>>>1:d>>>1;c[m]=d}return c})();s.exports=function(d,c){return d!==void 0&&d.length?i.getTypeOf(d)!=="string"?(function(m,x,v,S){var p=l,f=S+v;m^=-1;for(var g=S;g<f;g++)m=m>>>8^p[255&(m^x[g])];return-1^m})(0|c,d,d.length,0):(function(m,x,v,S){var p=l,f=S+v;m^=-1;for(var g=S;g<f;g++)m=m>>>8^p[255&(m^x.charCodeAt(g))];return-1^m})(0|c,d,d.length,0):0}},{"./utils":32}],5:[function(t,s,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(t,s,o){var i=null;i=typeof Promise<"u"?Promise:t("lie"),s.exports={Promise:i}},{lie:37}],7:[function(t,s,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=t("pako"),d=t("./utils"),c=t("./stream/GenericWorker"),m=i?"uint8array":"array";function x(v,S){c.call(this,"FlateWorker/"+v),this._pako=null,this._pakoAction=v,this._pakoOptions=S,this.meta={}}o.magic="\b\0",d.inherits(x,c),x.prototype.processChunk=function(v){this.meta=v.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(m,v.data),!1)},x.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},x.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},x.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var v=this;this._pako.onData=function(S){v.push({data:S,meta:v.meta})}},o.compressWorker=function(v){return new x("Deflate",v)},o.uncompressWorker=function(){return new x("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,s,o){function i(p,f){var g,C="";for(g=0;g<f;g++)C+=String.fromCharCode(255&p),p>>>=8;return C}function l(p,f,g,C,y,E){var z,k,U=p.file,K=p.compression,j=E!==m.utf8encode,D=d.transformTo("string",E(U.name)),O=d.transformTo("string",m.utf8encode(U.name)),Q=U.comment,H=d.transformTo("string",E(Q)),P=d.transformTo("string",m.utf8encode(Q)),q=O.length!==U.name.length,h=P.length!==Q.length,$="",Z="",F="",ee=U.dir,Y=U.date,R={crc32:0,compressedSize:0,uncompressedSize:0};f&&!g||(R.crc32=p.crc32,R.compressedSize=p.compressedSize,R.uncompressedSize=p.uncompressedSize);var A=0;f&&(A|=8),j||!q&&!h||(A|=2048);var L=0,te=0;ee&&(L|=16),y==="UNIX"?(te=798,L|=(function(J,ge){var _e=J;return J||(_e=ge?16893:33204),(65535&_e)<<16})(U.unixPermissions,ee)):(te=20,L|=(function(J){return 63&(J||0)})(U.dosPermissions)),z=Y.getUTCHours(),z<<=6,z|=Y.getUTCMinutes(),z<<=5,z|=Y.getUTCSeconds()/2,k=Y.getUTCFullYear()-1980,k<<=4,k|=Y.getUTCMonth()+1,k<<=5,k|=Y.getUTCDate(),q&&(Z=i(1,1)+i(x(D),4)+O,$+="up"+i(Z.length,2)+Z),h&&(F=i(1,1)+i(x(H),4)+P,$+="uc"+i(F.length,2)+F);var B="";return B+=`
\0`,B+=i(A,2),B+=K.magic,B+=i(z,2),B+=i(k,2),B+=i(R.crc32,4),B+=i(R.compressedSize,4),B+=i(R.uncompressedSize,4),B+=i(D.length,2),B+=i($.length,2),{fileRecord:v.LOCAL_FILE_HEADER+B+D+$,dirRecord:v.CENTRAL_FILE_HEADER+i(te,2)+B+i(H.length,2)+"\0\0\0\0"+i(L,4)+i(C,4)+D+$+H}}var d=t("../utils"),c=t("../stream/GenericWorker"),m=t("../utf8"),x=t("../crc32"),v=t("../signature");function S(p,f,g,C){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=g,this.encodeFileName=C,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(S,c),S.prototype.push=function(p){var f=p.meta.percent||0,g=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,c.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:g?(f+100*(g-C-1))/g:100}}))},S.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var f=this.streamFiles&&!p.file.dir;if(f){var g=l(p,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},S.prototype.closedSource=function(p){this.accumulate=!1;var f=this.streamFiles&&!p.file.dir,g=l(p,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),f)this.push({data:(function(C){return v.DATA_DESCRIPTOR+i(C.crc32,4)+i(C.compressedSize,4)+i(C.uncompressedSize,4)})(p),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},S.prototype.flush=function(){for(var p=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var g=this.bytesWritten-p,C=(function(y,E,z,k,U){var K=d.transformTo("string",U(k));return v.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(y,2)+i(y,2)+i(E,4)+i(z,4)+i(K.length,2)+K})(this.dirRecords.length,g,p,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},S.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},S.prototype.registerPrevious=function(p){this._sources.push(p);var f=this;return p.on("data",function(g){f.processChunk(g)}),p.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),p.on("error",function(g){f.error(g)}),this},S.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},S.prototype.error=function(p){var f=this._sources;if(!c.prototype.error.call(this,p))return!1;for(var g=0;g<f.length;g++)try{f[g].error(p)}catch{}return!0},S.prototype.lock=function(){c.prototype.lock.call(this);for(var p=this._sources,f=0;f<p.length;f++)p[f].lock()},s.exports=S},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,s,o){var i=t("../compressions"),l=t("./ZipFileWorker");o.generateWorker=function(d,c,m){var x=new l(c.streamFiles,m,c.platform,c.encodeFileName),v=0;try{d.forEach(function(S,p){v++;var f=(function(E,z){var k=E||z,U=i[k];if(!U)throw new Error(k+" is not a valid compression method !");return U})(p.options.compression,c.compression),g=p.options.compressionOptions||c.compressionOptions||{},C=p.dir,y=p.date;p._compressWorker(f,g).withStreamInfo("file",{name:S,dir:C,date:y,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(x)}),x.entriesCount=v}catch(S){x.error(S)}return x}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,s,o){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new i;for(var d in this)typeof this[d]!="function"&&(l[d]=this[d]);return l}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(l,d){return new i().loadAsync(l,d)},i.external=t("./external"),s.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,s,o){var i=t("./utils"),l=t("./external"),d=t("./utf8"),c=t("./zipEntries"),m=t("./stream/Crc32Probe"),x=t("./nodejsUtils");function v(S){return new l.Promise(function(p,f){var g=S.decompressed.getContentWorker().pipe(new m);g.on("error",function(C){f(C)}).on("end",function(){g.streamInfo.crc32!==S.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}s.exports=function(S,p){var f=this;return p=i.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),x.isNode&&x.isStream(S)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",S,!0,p.optimizedBinaryString,p.base64).then(function(g){var C=new c(p);return C.load(g),C}).then(function(g){var C=[l.Promise.resolve(g)],y=g.files;if(p.checkCRC32)for(var E=0;E<y.length;E++)C.push(v(y[E]));return l.Promise.all(C)}).then(function(g){for(var C=g.shift(),y=C.files,E=0;E<y.length;E++){var z=y[E],k=z.fileNameStr,U=i.resolve(z.fileNameStr);f.file(U,z.decompressed,{binary:!0,optimizedBinaryString:!0,date:z.date,dir:z.dir,comment:z.fileCommentStr.length?z.fileCommentStr:null,unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions,createFolders:p.createFolders}),z.dir||(f.file(U).unsafeOriginalName=k)}return C.zipComment.length&&(f.comment=C.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,s,o){var i=t("../utils"),l=t("../stream/GenericWorker");function d(c,m){l.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(m)}i.inherits(d,l),d.prototype._bindStream=function(c){var m=this;(this._stream=c).pause(),c.on("data",function(x){m.push({data:x,meta:{percent:0}})}).on("error",function(x){m.isPaused?this.generatedError=x:m.error(x)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},d.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,s,o){var i=t("readable-stream").Readable;function l(d,c,m){i.call(this,c),this._helper=d;var x=this;d.on("data",function(v,S){x.push(v)||x._helper.pause(),m&&m(S)}).on("error",function(v){x.emit("error",v)}).on("end",function(){x.push(null)})}t("../utils").inherits(l,i),l.prototype._read=function(){this._helper.resume()},s.exports=l},{"../utils":32,"readable-stream":16}],14:[function(t,s,o){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,l);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,l)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var l=new Buffer(i);return l.fill(0),l},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,s,o){function i(U,K,j){var D,O=d.getTypeOf(K),Q=d.extend(j||{},x);Q.date=Q.date||new Date,Q.compression!==null&&(Q.compression=Q.compression.toUpperCase()),typeof Q.unixPermissions=="string"&&(Q.unixPermissions=parseInt(Q.unixPermissions,8)),Q.unixPermissions&&16384&Q.unixPermissions&&(Q.dir=!0),Q.dosPermissions&&16&Q.dosPermissions&&(Q.dir=!0),Q.dir&&(U=y(U)),Q.createFolders&&(D=C(U))&&E.call(this,D,!0);var H=O==="string"&&Q.binary===!1&&Q.base64===!1;j&&j.binary!==void 0||(Q.binary=!H),(K instanceof v&&K.uncompressedSize===0||Q.dir||!K||K.length===0)&&(Q.base64=!1,Q.binary=!0,K="",Q.compression="STORE",O="string");var P=null;P=K instanceof v||K instanceof c?K:f.isNode&&f.isStream(K)?new g(U,K):d.prepareContent(U,K,Q.binary,Q.optimizedBinaryString,Q.base64);var q=new S(U,P,Q);this.files[U]=q}var l=t("./utf8"),d=t("./utils"),c=t("./stream/GenericWorker"),m=t("./stream/StreamHelper"),x=t("./defaults"),v=t("./compressedObject"),S=t("./zipObject"),p=t("./generate"),f=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),C=function(U){U.slice(-1)==="/"&&(U=U.substring(0,U.length-1));var K=U.lastIndexOf("/");return 0<K?U.substring(0,K):""},y=function(U){return U.slice(-1)!=="/"&&(U+="/"),U},E=function(U,K){return K=K!==void 0?K:x.createFolders,U=y(U),this.files[U]||i.call(this,U,null,{dir:!0,createFolders:K}),this.files[U]};function z(U){return Object.prototype.toString.call(U)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(U){var K,j,D;for(K in this.files)D=this.files[K],(j=K.slice(this.root.length,K.length))&&K.slice(0,this.root.length)===this.root&&U(j,D)},filter:function(U){var K=[];return this.forEach(function(j,D){U(j,D)&&K.push(D)}),K},file:function(U,K,j){if(arguments.length!==1)return U=this.root+U,i.call(this,U,K,j),this;if(z(U)){var D=U;return this.filter(function(Q,H){return!H.dir&&D.test(Q)})}var O=this.files[this.root+U];return O&&!O.dir?O:null},folder:function(U){if(!U)return this;if(z(U))return this.filter(function(O,Q){return Q.dir&&U.test(O)});var K=this.root+U,j=E.call(this,K),D=this.clone();return D.root=j.name,D},remove:function(U){U=this.root+U;var K=this.files[U];if(K||(U.slice(-1)!=="/"&&(U+="/"),K=this.files[U]),K&&!K.dir)delete this.files[U];else for(var j=this.filter(function(O,Q){return Q.name.slice(0,U.length)===U}),D=0;D<j.length;D++)delete this.files[j[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(U){var K,j={};try{if((j=d.extend(U||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");d.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var D=j.comment||this.comment||"";K=p.generateWorker(this,j,D)}catch(O){(K=new c("error")).error(O)}return new m(K,j.type||"string",j.mimeType)},generateAsync:function(U,K){return this.generateInternalStream(U).accumulate(K)},generateNodeStream:function(U,K){return(U=U||{}).type||(U.type="nodebuffer"),this.generateInternalStream(U).toNodejsStream(K)}};s.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,s,o){s.exports=t("stream")},{stream:void 0}],17:[function(t,s,o){var i=t("./DataReader");function l(d){i.call(this,d);for(var c=0;c<this.data.length;c++)d[c]=255&d[c]}t("../utils").inherits(l,i),l.prototype.byteAt=function(d){return this.data[this.zero+d]},l.prototype.lastIndexOfSignature=function(d){for(var c=d.charCodeAt(0),m=d.charCodeAt(1),x=d.charCodeAt(2),v=d.charCodeAt(3),S=this.length-4;0<=S;--S)if(this.data[S]===c&&this.data[S+1]===m&&this.data[S+2]===x&&this.data[S+3]===v)return S-this.zero;return-1},l.prototype.readAndCheckSignature=function(d){var c=d.charCodeAt(0),m=d.charCodeAt(1),x=d.charCodeAt(2),v=d.charCodeAt(3),S=this.readData(4);return c===S[0]&&m===S[1]&&x===S[2]&&v===S[3]},l.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,c},s.exports=l},{"../utils":32,"./DataReader":18}],18:[function(t,s,o){var i=t("../utils");function l(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(){},readInt:function(d){var c,m=0;for(this.checkOffset(d),c=this.index+d-1;c>=this.index;c--)m=(m<<8)+this.byteAt(c);return this.index+=d,m},readString:function(d){return i.transformTo("string",this.readData(d))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},s.exports=l},{"../utils":32}],19:[function(t,s,o){var i=t("./Uint8ArrayReader");function l(d){i.call(this,d)}t("../utils").inherits(l,i),l.prototype.readData=function(d){this.checkOffset(d);var c=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,c},s.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,s,o){var i=t("./DataReader");function l(d){i.call(this,d)}t("../utils").inherits(l,i),l.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},l.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},l.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},l.prototype.readData=function(d){this.checkOffset(d);var c=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,c},s.exports=l},{"../utils":32,"./DataReader":18}],21:[function(t,s,o){var i=t("./ArrayReader");function l(d){i.call(this,d)}t("../utils").inherits(l,i),l.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,c},s.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(t,s,o){var i=t("../utils"),l=t("../support"),d=t("./ArrayReader"),c=t("./StringReader"),m=t("./NodeBufferReader"),x=t("./Uint8ArrayReader");s.exports=function(v){var S=i.getTypeOf(v);return i.checkSupport(S),S!=="string"||l.uint8array?S==="nodebuffer"?new m(v):l.uint8array?new x(i.transformTo("uint8array",v)):new d(i.transformTo("array",v)):new c(v)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,s,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,s,o){var i=t("./GenericWorker"),l=t("../utils");function d(c){i.call(this,"ConvertWorker to "+c),this.destType=c}l.inherits(d,i),d.prototype.processChunk=function(c){this.push({data:l.transformTo(this.destType,c.data),meta:c.meta})},s.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(t,s,o){var i=t("./GenericWorker"),l=t("../crc32");function d(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(d,i),d.prototype.processChunk=function(c){this.streamInfo.crc32=l(c.data,this.streamInfo.crc32||0),this.push(c)},s.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,s,o){var i=t("../utils"),l=t("./GenericWorker");function d(c){l.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(d,l),d.prototype.processChunk=function(c){if(c){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+c.data.length}l.prototype.processChunk.call(this,c)},s.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(t,s,o){var i=t("../utils"),l=t("./GenericWorker");function d(c){l.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(x){m.dataIsReady=!0,m.data=x,m.max=x&&x.length||0,m.type=i.getTypeOf(x),m.isPaused||m._tickAndRepeat()},function(x){m.error(x)})}i.inherits(d,l),d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,m);break;case"uint8array":c=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":c=this.data.slice(this.index,m)}return this.index=m,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(t,s,o){function i(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,d){return this._listeners[l].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,d){if(this._listeners[l])for(var c=0;c<this._listeners[l].length;c++)this._listeners[l][c].call(this,d)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var d=this;return l.on("data",function(c){d.processChunk(c)}),l.on("end",function(){d.end()}),l.on("error",function(c){d.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,d){return this.extraStreamInfo[l]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},s.exports=i},{}],29:[function(t,s,o){var i=t("../utils"),l=t("./ConvertWorker"),d=t("./GenericWorker"),c=t("../base64"),m=t("../support"),x=t("../external"),v=null;if(m.nodestream)try{v=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function S(f,g){return new x.Promise(function(C,y){var E=[],z=f._internalType,k=f._outputType,U=f._mimeType;f.on("data",function(K,j){E.push(K),g&&g(j)}).on("error",function(K){E=[],y(K)}).on("end",function(){try{var K=(function(j,D,O){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),O);case"base64":return c.encode(D);default:return i.transformTo(j,D)}})(k,(function(j,D){var O,Q=0,H=null,P=0;for(O=0;O<D.length;O++)P+=D[O].length;switch(j){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(H=new Uint8Array(P),O=0;O<D.length;O++)H.set(D[O],Q),Q+=D[O].length;return H;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+j+"'")}})(z,E),U);C(K)}catch(j){y(j)}E=[]}).resume()})}function p(f,g,C){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=g,this._mimeType=C,i.checkSupport(y),this._worker=f.pipe(new l(y)),f.lock()}catch(E){this._worker=new d("error"),this._worker.error(E)}}p.prototype={accumulate:function(f){return S(this,f)},on:function(f,g){var C=this;return f==="data"?this._worker.on(f,function(y){g.call(C,y.data,y.meta)}):this._worker.on(f,function(){i.delay(g,arguments,C)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:this._outputType!=="nodebuffer"},f)}},s.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,s,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var i=new ArrayBuffer(0);try{o.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(i),o.blob=l.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!t("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(t,s,o){for(var i=t("./utils"),l=t("./support"),d=t("./nodejsUtils"),c=t("./stream/GenericWorker"),m=new Array(256),x=0;x<256;x++)m[x]=252<=x?6:248<=x?5:240<=x?4:224<=x?3:192<=x?2:1;m[254]=m[254]=1;function v(){c.call(this,"utf-8 decode"),this.leftOver=null}function S(){c.call(this,"utf-8 encode")}o.utf8encode=function(p){return l.nodebuffer?d.newBufferFrom(p,"utf-8"):(function(f){var g,C,y,E,z,k=f.length,U=0;for(E=0;E<k;E++)(64512&(C=f.charCodeAt(E)))==55296&&E+1<k&&(64512&(y=f.charCodeAt(E+1)))==56320&&(C=65536+(C-55296<<10)+(y-56320),E++),U+=C<128?1:C<2048?2:C<65536?3:4;for(g=l.uint8array?new Uint8Array(U):new Array(U),E=z=0;z<U;E++)(64512&(C=f.charCodeAt(E)))==55296&&E+1<k&&(64512&(y=f.charCodeAt(E+1)))==56320&&(C=65536+(C-55296<<10)+(y-56320),E++),C<128?g[z++]=C:(C<2048?g[z++]=192|C>>>6:(C<65536?g[z++]=224|C>>>12:(g[z++]=240|C>>>18,g[z++]=128|C>>>12&63),g[z++]=128|C>>>6&63),g[z++]=128|63&C);return g})(p)},o.utf8decode=function(p){return l.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):(function(f){var g,C,y,E,z=f.length,k=new Array(2*z);for(g=C=0;g<z;)if((y=f[g++])<128)k[C++]=y;else if(4<(E=m[y]))k[C++]=65533,g+=E-1;else{for(y&=E===2?31:E===3?15:7;1<E&&g<z;)y=y<<6|63&f[g++],E--;1<E?k[C++]=65533:y<65536?k[C++]=y:(y-=65536,k[C++]=55296|y>>10&1023,k[C++]=56320|1023&y)}return k.length!==C&&(k.subarray?k=k.subarray(0,C):k.length=C),i.applyFromCharCode(k)})(p=i.transformTo(l.uint8array?"uint8array":"array",p))},i.inherits(v,c),v.prototype.processChunk=function(p){var f=i.transformTo(l.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var g=f;(f=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),f.set(g,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var C=(function(E,z){var k;for((z=z||E.length)>E.length&&(z=E.length),k=z-1;0<=k&&(192&E[k])==128;)k--;return k<0||k===0?z:k+m[E[k]]>z?k:z})(f),y=f;C!==f.length&&(l.uint8array?(y=f.subarray(0,C),this.leftOver=f.subarray(C,f.length)):(y=f.slice(0,C),this.leftOver=f.slice(C,f.length))),this.push({data:o.utf8decode(y),meta:p.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=v,i.inherits(S,c),S.prototype.processChunk=function(p){this.push({data:o.utf8encode(p.data),meta:p.meta})},o.Utf8EncodeWorker=S},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,s,o){var i=t("./support"),l=t("./base64"),d=t("./nodejsUtils"),c=t("./external");function m(g){return g}function x(g,C){for(var y=0;y<g.length;++y)C[y]=255&g.charCodeAt(y);return C}t("setimmediate"),o.newBlob=function(g,C){o.checkSupport("blob");try{return new Blob([g],{type:C})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(g),y.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(g,C,y){var E=[],z=0,k=g.length;if(k<=y)return String.fromCharCode.apply(null,g);for(;z<k;)C==="array"||C==="nodebuffer"?E.push(String.fromCharCode.apply(null,g.slice(z,Math.min(z+y,k)))):E.push(String.fromCharCode.apply(null,g.subarray(z,Math.min(z+y,k)))),z+=y;return E.join("")},stringifyByChar:function(g){for(var C="",y=0;y<g.length;y++)C+=String.fromCharCode(g[y]);return C},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}})()}};function S(g){var C=65536,y=o.getTypeOf(g),E=!0;if(y==="uint8array"?E=v.applyCanBeUsed.uint8array:y==="nodebuffer"&&(E=v.applyCanBeUsed.nodebuffer),E)for(;1<C;)try{return v.stringifyByChunk(g,y,C)}catch{C=Math.floor(C/2)}return v.stringifyByChar(g)}function p(g,C){for(var y=0;y<g.length;y++)C[y]=g[y];return C}o.applyFromCharCode=S;var f={};f.string={string:m,array:function(g){return x(g,new Array(g.length))},arraybuffer:function(g){return f.string.uint8array(g).buffer},uint8array:function(g){return x(g,new Uint8Array(g.length))},nodebuffer:function(g){return x(g,d.allocBuffer(g.length))}},f.array={string:S,array:m,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return d.newBufferFrom(g)}},f.arraybuffer={string:function(g){return S(new Uint8Array(g))},array:function(g){return p(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:m,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return d.newBufferFrom(new Uint8Array(g))}},f.uint8array={string:S,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:m,nodebuffer:function(g){return d.newBufferFrom(g)}},f.nodebuffer={string:S,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return f.nodebuffer.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:m},o.transformTo=function(g,C){if(C=C||"",!g)return C;o.checkSupport(g);var y=o.getTypeOf(C);return f[y][g](C)},o.resolve=function(g){for(var C=g.split("/"),y=[],E=0;E<C.length;E++){var z=C[E];z==="."||z===""&&E!==0&&E!==C.length-1||(z===".."?y.pop():y.push(z))}return y.join("/")},o.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":i.nodebuffer&&d.isBuffer(g)?"nodebuffer":i.uint8array&&g instanceof Uint8Array?"uint8array":i.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(g){if(!i[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(g){var C,y,E="";for(y=0;y<(g||"").length;y++)E+="\\x"+((C=g.charCodeAt(y))<16?"0":"")+C.toString(16).toUpperCase();return E},o.delay=function(g,C,y){setImmediate(function(){g.apply(y||null,C||[])})},o.inherits=function(g,C){function y(){}y.prototype=C.prototype,g.prototype=new y},o.extend=function(){var g,C,y={};for(g=0;g<arguments.length;g++)for(C in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],C)&&y[C]===void 0&&(y[C]=arguments[g][C]);return y},o.prepareContent=function(g,C,y,E,z){return c.Promise.resolve(C).then(function(k){return i.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new c.Promise(function(U,K){var j=new FileReader;j.onload=function(D){U(D.target.result)},j.onerror=function(D){K(D.target.error)},j.readAsArrayBuffer(k)}):k}).then(function(k){var U=o.getTypeOf(k);return U?(U==="arraybuffer"?k=o.transformTo("uint8array",k):U==="string"&&(z?k=l.decode(k):y&&E!==!0&&(k=(function(K){return x(K,i.uint8array?new Uint8Array(K.length):new Array(K.length))})(k))),k):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,s,o){var i=t("./reader/readerFor"),l=t("./utils"),d=t("./signature"),c=t("./zipEntry"),m=t("./support");function x(v){this.files=[],this.loadOptions=v}x.prototype={checkSignature:function(v){if(!this.reader.readAndCheckSignature(v)){this.reader.index-=4;var S=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(S)+", expected "+l.pretty(v)+")")}},isSignature:function(v,S){var p=this.reader.index;this.reader.setIndex(v);var f=this.reader.readString(4)===S;return this.reader.setIndex(p),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var v=this.reader.readData(this.zipCommentLength),S=m.uint8array?"uint8array":"array",p=l.transformTo(S,v);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var v,S,p,f=this.zip64EndOfCentralSize-44;0<f;)v=this.reader.readInt(2),S=this.reader.readInt(4),p=this.reader.readData(S),this.zip64ExtensibleData[v]={id:v,length:S,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var v,S;for(v=0;v<this.files.length;v++)S=this.files[v],this.reader.setIndex(S.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),S.readLocalPart(this.reader),S.handleUTF8(),S.processAttributes()},readCentralDir:function(){var v;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(v=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(v);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var v=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(v<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(v);var S=v;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(v=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(v),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var f=S-p;if(0<f)this.isSignature(S,d.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(v){this.reader=i(v)},load:function(v){this.prepareReader(v),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=x},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,s,o){var i=t("./reader/readerFor"),l=t("./utils"),d=t("./compressedObject"),c=t("./crc32"),m=t("./utf8"),x=t("./compressions"),v=t("./support");function S(p,f){this.options=p,this.loadOptions=f}S.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var f,g;if(p.skip(22),this.fileNameLength=p.readInt(2),g=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=(function(C){for(var y in x)if(Object.prototype.hasOwnProperty.call(x,y)&&x[y].magic===C)return x[y];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,f,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var f=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(f),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var f,g,C,y=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<y;)f=p.readInt(2),g=p.readInt(2),C=p.readData(g),this.extraFields[f]={id:f,length:g,value:C};p.setIndex(y)},handleUTF8:function(){var p=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var g=l.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var y=l.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var f=i(p.value);return f.readInt(1)!==1||c(this.fileName)!==f.readInt(4)?null:m.utf8decode(f.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var f=i(p.value);return f.readInt(1)!==1||c(this.fileComment)!==f.readInt(4)?null:m.utf8decode(f.readData(p.length-5))}return null}},s.exports=S},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,s,o){function i(f,g,C){this.name=f,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=g,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var l=t("./stream/StreamHelper"),d=t("./stream/DataWorker"),c=t("./utf8"),m=t("./compressedObject"),x=t("./stream/GenericWorker");i.prototype={internalStream:function(f){var g=null,C="string";try{if(!f)throw new Error("No output type specified.");var y=(C=f.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),g=this._decompressWorker();var E=!this._dataBinary;E&&!y&&(g=g.pipe(new c.Utf8EncodeWorker)),!E&&y&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(z){(g=new x("error")).error(z)}return new l(g,C,"")},async:function(f,g){return this.internalStream(f).accumulate(g)},nodeStream:function(f,g){return this.internalStream(f||"nodebuffer").toNodejsStream(g)},_compressWorker:function(f,g){if(this._data instanceof m&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new c.Utf8EncodeWorker)),m.createWorkerFrom(C,f,g)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof x?this._data:new d(this._data)}};for(var v=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],S=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<v.length;p++)i.prototype[v[p]]=S;s.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,s,o){(function(i){var l,d,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var m=0,x=new c(f),v=i.document.createTextNode("");x.observe(v,{characterData:!0}),l=function(){v.data=m=++m%2}}else if(i.setImmediate||i.MessageChannel===void 0)l="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var g=i.document.createElement("script");g.onreadystatechange=function(){f(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},i.document.documentElement.appendChild(g)}:function(){setTimeout(f,0)};else{var S=new i.MessageChannel;S.port1.onmessage=f,l=function(){S.port2.postMessage(0)}}var p=[];function f(){var g,C;d=!0;for(var y=p.length;y;){for(C=p,p=[],g=-1;++g<y;)C[g]();y=p.length}d=!1}s.exports=function(g){p.push(g)!==1||d||l()}}).call(this,typeof ht<"u"?ht:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,s,o){var i=t("immediate");function l(){}var d={},c=["REJECTED"],m=["FULFILLED"],x=["PENDING"];function v(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=x,this.queue=[],this.outcome=void 0,y!==l&&g(this,y)}function S(y,E,z){this.promise=y,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}function p(y,E,z){i(function(){var k;try{k=E(z)}catch(U){return d.reject(y,U)}k===y?d.reject(y,new TypeError("Cannot resolve promise with itself")):d.resolve(y,k)})}function f(y){var E=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof E=="function")return function(){E.apply(y,arguments)}}function g(y,E){var z=!1;function k(j){z||(z=!0,d.reject(y,j))}function U(j){z||(z=!0,d.resolve(y,j))}var K=C(function(){E(U,k)});K.status==="error"&&k(K.value)}function C(y,E){var z={};try{z.value=y(E),z.status="success"}catch(k){z.status="error",z.value=k}return z}(s.exports=v).prototype.finally=function(y){if(typeof y!="function")return this;var E=this.constructor;return this.then(function(z){return E.resolve(y()).then(function(){return z})},function(z){return E.resolve(y()).then(function(){throw z})})},v.prototype.catch=function(y){return this.then(null,y)},v.prototype.then=function(y,E){if(typeof y!="function"&&this.state===m||typeof E!="function"&&this.state===c)return this;var z=new this.constructor(l);return this.state!==x?p(z,this.state===m?y:E,this.outcome):this.queue.push(new S(z,y,E)),z},S.prototype.callFulfilled=function(y){d.resolve(this.promise,y)},S.prototype.otherCallFulfilled=function(y){p(this.promise,this.onFulfilled,y)},S.prototype.callRejected=function(y){d.reject(this.promise,y)},S.prototype.otherCallRejected=function(y){p(this.promise,this.onRejected,y)},d.resolve=function(y,E){var z=C(f,E);if(z.status==="error")return d.reject(y,z.value);var k=z.value;if(k)g(y,k);else{y.state=m,y.outcome=E;for(var U=-1,K=y.queue.length;++U<K;)y.queue[U].callFulfilled(E)}return y},d.reject=function(y,E){y.state=c,y.outcome=E;for(var z=-1,k=y.queue.length;++z<k;)y.queue[z].callRejected(E);return y},v.resolve=function(y){return y instanceof this?y:d.resolve(new this(l),y)},v.reject=function(y){var E=new this(l);return d.reject(E,y)},v.all=function(y){var E=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=y.length,k=!1;if(!z)return this.resolve([]);for(var U=new Array(z),K=0,j=-1,D=new this(l);++j<z;)O(y[j],j);return D;function O(Q,H){E.resolve(Q).then(function(P){U[H]=P,++K!==z||k||(k=!0,d.resolve(D,U))},function(P){k||(k=!0,d.reject(D,P))})}},v.race=function(y){var E=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=y.length,k=!1;if(!z)return this.resolve([]);for(var U=-1,K=new this(l);++U<z;)j=y[U],E.resolve(j).then(function(D){k||(k=!0,d.resolve(K,D))},function(D){k||(k=!0,d.reject(K,D))});var j;return K}},{immediate:36}],38:[function(t,s,o){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),s.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,s,o){var i=t("./zlib/deflate"),l=t("./utils/common"),d=t("./utils/strings"),c=t("./zlib/messages"),m=t("./zlib/zstream"),x=Object.prototype.toString,v=0,S=-1,p=0,f=8;function g(y){if(!(this instanceof g))return new g(y);this.options=l.assign({level:S,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},y||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var z=i.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(z!==v)throw new Error(c[z]);if(E.header&&i.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(k=typeof E.dictionary=="string"?d.string2buf(E.dictionary):x.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(z=i.deflateSetDictionary(this.strm,k))!==v)throw new Error(c[z]);this._dict_set=!0}}function C(y,E){var z=new g(E);if(z.push(y,!0),z.err)throw z.msg||c[z.err];return z.result}g.prototype.push=function(y,E){var z,k,U=this.strm,K=this.options.chunkSize;if(this.ended)return!1;k=E===~~E?E:E===!0?4:0,typeof y=="string"?U.input=d.string2buf(y):x.call(y)==="[object ArrayBuffer]"?U.input=new Uint8Array(y):U.input=y,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new l.Buf8(K),U.next_out=0,U.avail_out=K),(z=i.deflate(U,k))!==1&&z!==v)return this.onEnd(z),!(this.ended=!0);U.avail_out!==0&&(U.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(l.shrinkBuf(U.output,U.next_out))):this.onData(l.shrinkBuf(U.output,U.next_out)))}while((0<U.avail_in||U.avail_out===0)&&z!==1);return k===4?(z=i.deflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===v):k!==2||(this.onEnd(v),!(U.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},o.Deflate=g,o.deflate=C,o.deflateRaw=function(y,E){return(E=E||{}).raw=!0,C(y,E)},o.gzip=function(y,E){return(E=E||{}).gzip=!0,C(y,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,s,o){var i=t("./zlib/inflate"),l=t("./utils/common"),d=t("./utils/strings"),c=t("./zlib/constants"),m=t("./zlib/messages"),x=t("./zlib/zstream"),v=t("./zlib/gzheader"),S=Object.prototype.toString;function p(g){if(!(this instanceof p))return new p(g);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},g||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||g&&g.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&(15&C.windowBits)==0&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new x,this.strm.avail_out=0;var y=i.inflateInit2(this.strm,C.windowBits);if(y!==c.Z_OK)throw new Error(m[y]);this.header=new v,i.inflateGetHeader(this.strm,this.header)}function f(g,C){var y=new p(C);if(y.push(g,!0),y.err)throw y.msg||m[y.err];return y.result}p.prototype.push=function(g,C){var y,E,z,k,U,K,j=this.strm,D=this.options.chunkSize,O=this.options.dictionary,Q=!1;if(this.ended)return!1;E=C===~~C?C:C===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?j.input=d.binstring2buf(g):S.call(g)==="[object ArrayBuffer]"?j.input=new Uint8Array(g):j.input=g,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new l.Buf8(D),j.next_out=0,j.avail_out=D),(y=i.inflate(j,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&O&&(K=typeof O=="string"?d.string2buf(O):S.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,y=i.inflateSetDictionary(this.strm,K)),y===c.Z_BUF_ERROR&&Q===!0&&(y=c.Z_OK,Q=!1),y!==c.Z_STREAM_END&&y!==c.Z_OK)return this.onEnd(y),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&y!==c.Z_STREAM_END&&(j.avail_in!==0||E!==c.Z_FINISH&&E!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(z=d.utf8border(j.output,j.next_out),k=j.next_out-z,U=d.buf2string(j.output,z),j.next_out=k,j.avail_out=D-k,k&&l.arraySet(j.output,j.output,z,k,0),this.onData(U)):this.onData(l.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(Q=!0)}while((0<j.avail_in||j.avail_out===0)&&y!==c.Z_STREAM_END);return y===c.Z_STREAM_END&&(E=c.Z_FINISH),E===c.Z_FINISH?(y=i.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===c.Z_OK):E!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(j.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},o.Inflate=p,o.inflate=f,o.inflateRaw=function(g,C){return(C=C||{}).raw=!0,f(g,C)},o.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,s,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(c){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var x=m.shift();if(x){if(typeof x!="object")throw new TypeError(x+"must be non-object");for(var v in x)x.hasOwnProperty(v)&&(c[v]=x[v])}}return c},o.shrinkBuf=function(c,m){return c.length===m?c:c.subarray?c.subarray(0,m):(c.length=m,c)};var l={arraySet:function(c,m,x,v,S){if(m.subarray&&c.subarray)c.set(m.subarray(x,x+v),S);else for(var p=0;p<v;p++)c[S+p]=m[x+p]},flattenChunks:function(c){var m,x,v,S,p,f;for(m=v=0,x=c.length;m<x;m++)v+=c[m].length;for(f=new Uint8Array(v),m=S=0,x=c.length;m<x;m++)p=c[m],f.set(p,S),S+=p.length;return f}},d={arraySet:function(c,m,x,v,S){for(var p=0;p<v;p++)c[S+p]=m[x+p]},flattenChunks:function(c){return[].concat.apply([],c)}};o.setTyped=function(c){c?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,l)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,d))},o.setTyped(i)},{}],42:[function(t,s,o){var i=t("./common"),l=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var c=new i.Buf8(256),m=0;m<256;m++)c[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function x(v,S){if(S<65537&&(v.subarray&&d||!v.subarray&&l))return String.fromCharCode.apply(null,i.shrinkBuf(v,S));for(var p="",f=0;f<S;f++)p+=String.fromCharCode(v[f]);return p}c[254]=c[254]=1,o.string2buf=function(v){var S,p,f,g,C,y=v.length,E=0;for(g=0;g<y;g++)(64512&(p=v.charCodeAt(g)))==55296&&g+1<y&&(64512&(f=v.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(f-56320),g++),E+=p<128?1:p<2048?2:p<65536?3:4;for(S=new i.Buf8(E),g=C=0;C<E;g++)(64512&(p=v.charCodeAt(g)))==55296&&g+1<y&&(64512&(f=v.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(f-56320),g++),p<128?S[C++]=p:(p<2048?S[C++]=192|p>>>6:(p<65536?S[C++]=224|p>>>12:(S[C++]=240|p>>>18,S[C++]=128|p>>>12&63),S[C++]=128|p>>>6&63),S[C++]=128|63&p);return S},o.buf2binstring=function(v){return x(v,v.length)},o.binstring2buf=function(v){for(var S=new i.Buf8(v.length),p=0,f=S.length;p<f;p++)S[p]=v.charCodeAt(p);return S},o.buf2string=function(v,S){var p,f,g,C,y=S||v.length,E=new Array(2*y);for(p=f=0;p<y;)if((g=v[p++])<128)E[f++]=g;else if(4<(C=c[g]))E[f++]=65533,p+=C-1;else{for(g&=C===2?31:C===3?15:7;1<C&&p<y;)g=g<<6|63&v[p++],C--;1<C?E[f++]=65533:g<65536?E[f++]=g:(g-=65536,E[f++]=55296|g>>10&1023,E[f++]=56320|1023&g)}return x(E,f)},o.utf8border=function(v,S){var p;for((S=S||v.length)>v.length&&(S=v.length),p=S-1;0<=p&&(192&v[p])==128;)p--;return p<0||p===0?S:p+c[v[p]]>S?p:S}},{"./common":41}],43:[function(t,s,o){s.exports=function(i,l,d,c){for(var m=65535&i|0,x=i>>>16&65535|0,v=0;d!==0;){for(d-=v=2e3<d?2e3:d;x=x+(m=m+l[c++]|0)|0,--v;);m%=65521,x%=65521}return m|x<<16|0}},{}],44:[function(t,s,o){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,s,o){var i=(function(){for(var l,d=[],c=0;c<256;c++){l=c;for(var m=0;m<8;m++)l=1&l?3988292384^l>>>1:l>>>1;d[c]=l}return d})();s.exports=function(l,d,c,m){var x=i,v=m+c;l^=-1;for(var S=m;S<v;S++)l=l>>>8^x[255&(l^d[S])];return-1^l}},{}],46:[function(t,s,o){var i,l=t("../utils/common"),d=t("./trees"),c=t("./adler32"),m=t("./crc32"),x=t("./messages"),v=0,S=4,p=0,f=-2,g=-1,C=4,y=2,E=8,z=9,k=286,U=30,K=19,j=2*k+1,D=15,O=3,Q=258,H=Q+O+1,P=42,q=113,h=1,$=2,Z=3,F=4;function ee(u,X){return u.msg=x[X],X}function Y(u){return(u<<1)-(4<u?9:0)}function R(u){for(var X=u.length;0<=--X;)u[X]=0}function A(u){var X=u.state,T=X.pending;T>u.avail_out&&(T=u.avail_out),T!==0&&(l.arraySet(u.output,X.pending_buf,X.pending_out,T,u.next_out),u.next_out+=T,X.pending_out+=T,u.total_out+=T,u.avail_out-=T,X.pending-=T,X.pending===0&&(X.pending_out=0))}function L(u,X){d._tr_flush_block(u,0<=u.block_start?u.block_start:-1,u.strstart-u.block_start,X),u.block_start=u.strstart,A(u.strm)}function te(u,X){u.pending_buf[u.pending++]=X}function B(u,X){u.pending_buf[u.pending++]=X>>>8&255,u.pending_buf[u.pending++]=255&X}function J(u,X){var T,b,w=u.max_chain_length,_=u.strstart,W=u.prev_length,V=u.nice_match,G=u.strstart>u.w_size-H?u.strstart-(u.w_size-H):0,ne=u.window,pe=u.w_mask,se=u.prev,we=u.strstart+Q,fe=ne[_+W-1],le=ne[_+W];u.prev_length>=u.good_match&&(w>>=2),V>u.lookahead&&(V=u.lookahead);do if(ne[(T=X)+W]===le&&ne[T+W-1]===fe&&ne[T]===ne[_]&&ne[++T]===ne[_+1]){_+=2,T++;do;while(ne[++_]===ne[++T]&&ne[++_]===ne[++T]&&ne[++_]===ne[++T]&&ne[++_]===ne[++T]&&ne[++_]===ne[++T]&&ne[++_]===ne[++T]&&ne[++_]===ne[++T]&&ne[++_]===ne[++T]&&_<we);if(b=Q-(we-_),_=we-Q,W<b){if(u.match_start=X,V<=(W=b))break;fe=ne[_+W-1],le=ne[_+W]}}while((X=se[X&pe])>G&&--w!=0);return W<=u.lookahead?W:u.lookahead}function ge(u){var X,T,b,w,_,W,V,G,ne,pe,se=u.w_size;do{if(w=u.window_size-u.lookahead-u.strstart,u.strstart>=se+(se-H)){for(l.arraySet(u.window,u.window,se,se,0),u.match_start-=se,u.strstart-=se,u.block_start-=se,X=T=u.hash_size;b=u.head[--X],u.head[X]=se<=b?b-se:0,--T;);for(X=T=se;b=u.prev[--X],u.prev[X]=se<=b?b-se:0,--T;);w+=se}if(u.strm.avail_in===0)break;if(W=u.strm,V=u.window,G=u.strstart+u.lookahead,ne=w,pe=void 0,pe=W.avail_in,ne<pe&&(pe=ne),T=pe===0?0:(W.avail_in-=pe,l.arraySet(V,W.input,W.next_in,pe,G),W.state.wrap===1?W.adler=c(W.adler,V,pe,G):W.state.wrap===2&&(W.adler=m(W.adler,V,pe,G)),W.next_in+=pe,W.total_in+=pe,pe),u.lookahead+=T,u.lookahead+u.insert>=O)for(_=u.strstart-u.insert,u.ins_h=u.window[_],u.ins_h=(u.ins_h<<u.hash_shift^u.window[_+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[_+O-1])&u.hash_mask,u.prev[_&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=_,_++,u.insert--,!(u.lookahead+u.insert<O)););}while(u.lookahead<H&&u.strm.avail_in!==0)}function _e(u,X){for(var T,b;;){if(u.lookahead<H){if(ge(u),u.lookahead<H&&X===v)return h;if(u.lookahead===0)break}if(T=0,u.lookahead>=O&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+O-1])&u.hash_mask,T=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),T!==0&&u.strstart-T<=u.w_size-H&&(u.match_length=J(u,T)),u.match_length>=O)if(b=d._tr_tally(u,u.strstart-u.match_start,u.match_length-O),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=O){for(u.match_length--;u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+O-1])&u.hash_mask,T=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart,--u.match_length!=0;);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else b=d._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(b&&(L(u,!1),u.strm.avail_out===0))return h}return u.insert=u.strstart<O-1?u.strstart:O-1,X===S?(L(u,!0),u.strm.avail_out===0?Z:F):u.last_lit&&(L(u,!1),u.strm.avail_out===0)?h:$}function de(u,X){for(var T,b,w;;){if(u.lookahead<H){if(ge(u),u.lookahead<H&&X===v)return h;if(u.lookahead===0)break}if(T=0,u.lookahead>=O&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+O-1])&u.hash_mask,T=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=O-1,T!==0&&u.prev_length<u.max_lazy_match&&u.strstart-T<=u.w_size-H&&(u.match_length=J(u,T),u.match_length<=5&&(u.strategy===1||u.match_length===O&&4096<u.strstart-u.match_start)&&(u.match_length=O-1)),u.prev_length>=O&&u.match_length<=u.prev_length){for(w=u.strstart+u.lookahead-O,b=d._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-O),u.lookahead-=u.prev_length-1,u.prev_length-=2;++u.strstart<=w&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+O-1])&u.hash_mask,T=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),--u.prev_length!=0;);if(u.match_available=0,u.match_length=O-1,u.strstart++,b&&(L(u,!1),u.strm.avail_out===0))return h}else if(u.match_available){if((b=d._tr_tally(u,0,u.window[u.strstart-1]))&&L(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return h}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(b=d._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<O-1?u.strstart:O-1,X===S?(L(u,!0),u.strm.avail_out===0?Z:F):u.last_lit&&(L(u,!1),u.strm.avail_out===0)?h:$}function xe(u,X,T,b,w){this.good_length=u,this.max_lazy=X,this.nice_length=T,this.max_chain=b,this.func=w}function Se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*j),this.dyn_dtree=new l.Buf16(2*(2*U+1)),this.bl_tree=new l.Buf16(2*(2*K+1)),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(D+1),this.heap=new l.Buf16(2*k+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*k+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function oe(u){var X;return u&&u.state?(u.total_in=u.total_out=0,u.data_type=y,(X=u.state).pending=0,X.pending_out=0,X.wrap<0&&(X.wrap=-X.wrap),X.status=X.wrap?P:q,u.adler=X.wrap===2?0:1,X.last_flush=v,d._tr_init(X),p):ee(u,f)}function ce(u){var X=oe(u);return X===p&&(function(T){T.window_size=2*T.w_size,R(T.head),T.max_lazy_match=i[T.level].max_lazy,T.good_match=i[T.level].good_length,T.nice_match=i[T.level].nice_length,T.max_chain_length=i[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=O-1,T.match_available=0,T.ins_h=0})(u.state),X}function he(u,X,T,b,w,_){if(!u)return f;var W=1;if(X===g&&(X=6),b<0?(W=0,b=-b):15<b&&(W=2,b-=16),w<1||z<w||T!==E||b<8||15<b||X<0||9<X||_<0||C<_)return ee(u,f);b===8&&(b=9);var V=new Se;return(u.state=V).strm=u,V.wrap=W,V.gzhead=null,V.w_bits=b,V.w_size=1<<V.w_bits,V.w_mask=V.w_size-1,V.hash_bits=w+7,V.hash_size=1<<V.hash_bits,V.hash_mask=V.hash_size-1,V.hash_shift=~~((V.hash_bits+O-1)/O),V.window=new l.Buf8(2*V.w_size),V.head=new l.Buf16(V.hash_size),V.prev=new l.Buf16(V.w_size),V.lit_bufsize=1<<w+6,V.pending_buf_size=4*V.lit_bufsize,V.pending_buf=new l.Buf8(V.pending_buf_size),V.d_buf=1*V.lit_bufsize,V.l_buf=3*V.lit_bufsize,V.level=X,V.strategy=_,V.method=T,ce(u)}i=[new xe(0,0,0,0,function(u,X){var T=65535;for(T>u.pending_buf_size-5&&(T=u.pending_buf_size-5);;){if(u.lookahead<=1){if(ge(u),u.lookahead===0&&X===v)return h;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var b=u.block_start+T;if((u.strstart===0||u.strstart>=b)&&(u.lookahead=u.strstart-b,u.strstart=b,L(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-H&&(L(u,!1),u.strm.avail_out===0))return h}return u.insert=0,X===S?(L(u,!0),u.strm.avail_out===0?Z:F):(u.strstart>u.block_start&&(L(u,!1),u.strm.avail_out),h)}),new xe(4,4,8,4,_e),new xe(4,5,16,8,_e),new xe(4,6,32,32,_e),new xe(4,4,16,16,de),new xe(8,16,32,32,de),new xe(8,16,128,128,de),new xe(8,32,128,256,de),new xe(32,128,258,1024,de),new xe(32,258,258,4096,de)],o.deflateInit=function(u,X){return he(u,X,E,15,8,0)},o.deflateInit2=he,o.deflateReset=ce,o.deflateResetKeep=oe,o.deflateSetHeader=function(u,X){return u&&u.state?u.state.wrap!==2?f:(u.state.gzhead=X,p):f},o.deflate=function(u,X){var T,b,w,_;if(!u||!u.state||5<X||X<0)return u?ee(u,f):f;if(b=u.state,!u.output||!u.input&&u.avail_in!==0||b.status===666&&X!==S)return ee(u,u.avail_out===0?-5:f);if(b.strm=u,T=b.last_flush,b.last_flush=X,b.status===P)if(b.wrap===2)u.adler=0,te(b,31),te(b,139),te(b,8),b.gzhead?(te(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),te(b,255&b.gzhead.time),te(b,b.gzhead.time>>8&255),te(b,b.gzhead.time>>16&255),te(b,b.gzhead.time>>24&255),te(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),te(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(te(b,255&b.gzhead.extra.length),te(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(u.adler=m(u.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(te(b,0),te(b,0),te(b,0),te(b,0),te(b,0),te(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),te(b,3),b.status=q);else{var W=E+(b.w_bits-8<<4)<<8;W|=(2<=b.strategy||b.level<2?0:b.level<6?1:b.level===6?2:3)<<6,b.strstart!==0&&(W|=32),W+=31-W%31,b.status=q,B(b,W),b.strstart!==0&&(B(b,u.adler>>>16),B(b,65535&u.adler)),u.adler=1}if(b.status===69)if(b.gzhead.extra){for(w=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>w&&(u.adler=m(u.adler,b.pending_buf,b.pending-w,w)),A(u),w=b.pending,b.pending!==b.pending_buf_size));)te(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>w&&(u.adler=m(u.adler,b.pending_buf,b.pending-w,w)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(b.status===73)if(b.gzhead.name){w=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>w&&(u.adler=m(u.adler,b.pending_buf,b.pending-w,w)),A(u),w=b.pending,b.pending===b.pending_buf_size)){_=1;break}_=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,te(b,_)}while(_!==0);b.gzhead.hcrc&&b.pending>w&&(u.adler=m(u.adler,b.pending_buf,b.pending-w,w)),_===0&&(b.gzindex=0,b.status=91)}else b.status=91;if(b.status===91)if(b.gzhead.comment){w=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>w&&(u.adler=m(u.adler,b.pending_buf,b.pending-w,w)),A(u),w=b.pending,b.pending===b.pending_buf_size)){_=1;break}_=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,te(b,_)}while(_!==0);b.gzhead.hcrc&&b.pending>w&&(u.adler=m(u.adler,b.pending_buf,b.pending-w,w)),_===0&&(b.status=103)}else b.status=103;if(b.status===103&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&A(u),b.pending+2<=b.pending_buf_size&&(te(b,255&u.adler),te(b,u.adler>>8&255),u.adler=0,b.status=q)):b.status=q),b.pending!==0){if(A(u),u.avail_out===0)return b.last_flush=-1,p}else if(u.avail_in===0&&Y(X)<=Y(T)&&X!==S)return ee(u,-5);if(b.status===666&&u.avail_in!==0)return ee(u,-5);if(u.avail_in!==0||b.lookahead!==0||X!==v&&b.status!==666){var V=b.strategy===2?(function(G,ne){for(var pe;;){if(G.lookahead===0&&(ge(G),G.lookahead===0)){if(ne===v)return h;break}if(G.match_length=0,pe=d._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++,pe&&(L(G,!1),G.strm.avail_out===0))return h}return G.insert=0,ne===S?(L(G,!0),G.strm.avail_out===0?Z:F):G.last_lit&&(L(G,!1),G.strm.avail_out===0)?h:$})(b,X):b.strategy===3?(function(G,ne){for(var pe,se,we,fe,le=G.window;;){if(G.lookahead<=Q){if(ge(G),G.lookahead<=Q&&ne===v)return h;if(G.lookahead===0)break}if(G.match_length=0,G.lookahead>=O&&0<G.strstart&&(se=le[we=G.strstart-1])===le[++we]&&se===le[++we]&&se===le[++we]){fe=G.strstart+Q;do;while(se===le[++we]&&se===le[++we]&&se===le[++we]&&se===le[++we]&&se===le[++we]&&se===le[++we]&&se===le[++we]&&se===le[++we]&&we<fe);G.match_length=Q-(fe-we),G.match_length>G.lookahead&&(G.match_length=G.lookahead)}if(G.match_length>=O?(pe=d._tr_tally(G,1,G.match_length-O),G.lookahead-=G.match_length,G.strstart+=G.match_length,G.match_length=0):(pe=d._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++),pe&&(L(G,!1),G.strm.avail_out===0))return h}return G.insert=0,ne===S?(L(G,!0),G.strm.avail_out===0?Z:F):G.last_lit&&(L(G,!1),G.strm.avail_out===0)?h:$})(b,X):i[b.level].func(b,X);if(V!==Z&&V!==F||(b.status=666),V===h||V===Z)return u.avail_out===0&&(b.last_flush=-1),p;if(V===$&&(X===1?d._tr_align(b):X!==5&&(d._tr_stored_block(b,0,0,!1),X===3&&(R(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),A(u),u.avail_out===0))return b.last_flush=-1,p}return X!==S?p:b.wrap<=0?1:(b.wrap===2?(te(b,255&u.adler),te(b,u.adler>>8&255),te(b,u.adler>>16&255),te(b,u.adler>>24&255),te(b,255&u.total_in),te(b,u.total_in>>8&255),te(b,u.total_in>>16&255),te(b,u.total_in>>24&255)):(B(b,u.adler>>>16),B(b,65535&u.adler)),A(u),0<b.wrap&&(b.wrap=-b.wrap),b.pending!==0?p:1)},o.deflateEnd=function(u){var X;return u&&u.state?(X=u.state.status)!==P&&X!==69&&X!==73&&X!==91&&X!==103&&X!==q&&X!==666?ee(u,f):(u.state=null,X===q?ee(u,-3):p):f},o.deflateSetDictionary=function(u,X){var T,b,w,_,W,V,G,ne,pe=X.length;if(!u||!u.state||(_=(T=u.state).wrap)===2||_===1&&T.status!==P||T.lookahead)return f;for(_===1&&(u.adler=c(u.adler,X,pe,0)),T.wrap=0,pe>=T.w_size&&(_===0&&(R(T.head),T.strstart=0,T.block_start=0,T.insert=0),ne=new l.Buf8(T.w_size),l.arraySet(ne,X,pe-T.w_size,T.w_size,0),X=ne,pe=T.w_size),W=u.avail_in,V=u.next_in,G=u.input,u.avail_in=pe,u.next_in=0,u.input=X,ge(T);T.lookahead>=O;){for(b=T.strstart,w=T.lookahead-(O-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[b+O-1])&T.hash_mask,T.prev[b&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=b,b++,--w;);T.strstart=b,T.lookahead=O-1,ge(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=O-1,T.match_available=0,u.next_in=V,u.input=G,u.avail_in=W,T.wrap=_,p},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,s,o){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,s,o){s.exports=function(i,l){var d,c,m,x,v,S,p,f,g,C,y,E,z,k,U,K,j,D,O,Q,H,P,q,h,$;d=i.state,c=i.next_in,h=i.input,m=c+(i.avail_in-5),x=i.next_out,$=i.output,v=x-(l-i.avail_out),S=x+(i.avail_out-257),p=d.dmax,f=d.wsize,g=d.whave,C=d.wnext,y=d.window,E=d.hold,z=d.bits,k=d.lencode,U=d.distcode,K=(1<<d.lenbits)-1,j=(1<<d.distbits)-1;e:do{z<15&&(E+=h[c++]<<z,z+=8,E+=h[c++]<<z,z+=8),D=k[E&K];t:for(;;){if(E>>>=O=D>>>24,z-=O,(O=D>>>16&255)===0)$[x++]=65535&D;else{if(!(16&O)){if((64&O)==0){D=k[(65535&D)+(E&(1<<O)-1)];continue t}if(32&O){d.mode=12;break e}i.msg="invalid literal/length code",d.mode=30;break e}Q=65535&D,(O&=15)&&(z<O&&(E+=h[c++]<<z,z+=8),Q+=E&(1<<O)-1,E>>>=O,z-=O),z<15&&(E+=h[c++]<<z,z+=8,E+=h[c++]<<z,z+=8),D=U[E&j];r:for(;;){if(E>>>=O=D>>>24,z-=O,!(16&(O=D>>>16&255))){if((64&O)==0){D=U[(65535&D)+(E&(1<<O)-1)];continue r}i.msg="invalid distance code",d.mode=30;break e}if(H=65535&D,z<(O&=15)&&(E+=h[c++]<<z,(z+=8)<O&&(E+=h[c++]<<z,z+=8)),p<(H+=E&(1<<O)-1)){i.msg="invalid distance too far back",d.mode=30;break e}if(E>>>=O,z-=O,(O=x-v)<H){if(g<(O=H-O)&&d.sane){i.msg="invalid distance too far back",d.mode=30;break e}if(q=y,(P=0)===C){if(P+=f-O,O<Q){for(Q-=O;$[x++]=y[P++],--O;);P=x-H,q=$}}else if(C<O){if(P+=f+C-O,(O-=C)<Q){for(Q-=O;$[x++]=y[P++],--O;);if(P=0,C<Q){for(Q-=O=C;$[x++]=y[P++],--O;);P=x-H,q=$}}}else if(P+=C-O,O<Q){for(Q-=O;$[x++]=y[P++],--O;);P=x-H,q=$}for(;2<Q;)$[x++]=q[P++],$[x++]=q[P++],$[x++]=q[P++],Q-=3;Q&&($[x++]=q[P++],1<Q&&($[x++]=q[P++]))}else{for(P=x-H;$[x++]=$[P++],$[x++]=$[P++],$[x++]=$[P++],2<(Q-=3););Q&&($[x++]=$[P++],1<Q&&($[x++]=$[P++]))}break}}break}}while(c<m&&x<S);c-=Q=z>>3,E&=(1<<(z-=Q<<3))-1,i.next_in=c,i.next_out=x,i.avail_in=c<m?m-c+5:5-(c-m),i.avail_out=x<S?S-x+257:257-(x-S),d.hold=E,d.bits=z}},{}],49:[function(t,s,o){var i=t("../utils/common"),l=t("./adler32"),d=t("./crc32"),c=t("./inffast"),m=t("./inftrees"),x=1,v=2,S=0,p=-2,f=1,g=852,C=592;function y(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z(P){var q;return P&&P.state?(q=P.state,P.total_in=P.total_out=q.total=0,P.msg="",q.wrap&&(P.adler=1&q.wrap),q.mode=f,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new i.Buf32(g),q.distcode=q.distdyn=new i.Buf32(C),q.sane=1,q.back=-1,S):p}function k(P){var q;return P&&P.state?((q=P.state).wsize=0,q.whave=0,q.wnext=0,z(P)):p}function U(P,q){var h,$;return P&&P.state?($=P.state,q<0?(h=0,q=-q):(h=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?p:($.window!==null&&$.wbits!==q&&($.window=null),$.wrap=h,$.wbits=q,k(P))):p}function K(P,q){var h,$;return P?($=new E,(P.state=$).window=null,(h=U(P,q))!==S&&(P.state=null),h):p}var j,D,O=!0;function Q(P){if(O){var q;for(j=new i.Buf32(512),D=new i.Buf32(32),q=0;q<144;)P.lens[q++]=8;for(;q<256;)P.lens[q++]=9;for(;q<280;)P.lens[q++]=7;for(;q<288;)P.lens[q++]=8;for(m(x,P.lens,0,288,j,0,P.work,{bits:9}),q=0;q<32;)P.lens[q++]=5;m(v,P.lens,0,32,D,0,P.work,{bits:5}),O=!1}P.lencode=j,P.lenbits=9,P.distcode=D,P.distbits=5}function H(P,q,h,$){var Z,F=P.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new i.Buf8(F.wsize)),$>=F.wsize?(i.arraySet(F.window,q,h-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):($<(Z=F.wsize-F.wnext)&&(Z=$),i.arraySet(F.window,q,h-$,Z,F.wnext),($-=Z)?(i.arraySet(F.window,q,h-$,$,0),F.wnext=$,F.whave=F.wsize):(F.wnext+=Z,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=Z))),0}o.inflateReset=k,o.inflateReset2=U,o.inflateResetKeep=z,o.inflateInit=function(P){return K(P,15)},o.inflateInit2=K,o.inflate=function(P,q){var h,$,Z,F,ee,Y,R,A,L,te,B,J,ge,_e,de,xe,Se,oe,ce,he,u,X,T,b,w=0,_=new i.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return p;(h=P.state).mode===12&&(h.mode=13),ee=P.next_out,Z=P.output,R=P.avail_out,F=P.next_in,$=P.input,Y=P.avail_in,A=h.hold,L=h.bits,te=Y,B=R,X=S;e:for(;;)switch(h.mode){case f:if(h.wrap===0){h.mode=13;break}for(;L<16;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if(2&h.wrap&&A===35615){_[h.check=0]=255&A,_[1]=A>>>8&255,h.check=d(h.check,_,2,0),L=A=0,h.mode=2;break}if(h.flags=0,h.head&&(h.head.done=!1),!(1&h.wrap)||(((255&A)<<8)+(A>>8))%31){P.msg="incorrect header check",h.mode=30;break}if((15&A)!=8){P.msg="unknown compression method",h.mode=30;break}if(L-=4,u=8+(15&(A>>>=4)),h.wbits===0)h.wbits=u;else if(u>h.wbits){P.msg="invalid window size",h.mode=30;break}h.dmax=1<<u,P.adler=h.check=1,h.mode=512&A?10:12,L=A=0;break;case 2:for(;L<16;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if(h.flags=A,(255&h.flags)!=8){P.msg="unknown compression method",h.mode=30;break}if(57344&h.flags){P.msg="unknown header flags set",h.mode=30;break}h.head&&(h.head.text=A>>8&1),512&h.flags&&(_[0]=255&A,_[1]=A>>>8&255,h.check=d(h.check,_,2,0)),L=A=0,h.mode=3;case 3:for(;L<32;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}h.head&&(h.head.time=A),512&h.flags&&(_[0]=255&A,_[1]=A>>>8&255,_[2]=A>>>16&255,_[3]=A>>>24&255,h.check=d(h.check,_,4,0)),L=A=0,h.mode=4;case 4:for(;L<16;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}h.head&&(h.head.xflags=255&A,h.head.os=A>>8),512&h.flags&&(_[0]=255&A,_[1]=A>>>8&255,h.check=d(h.check,_,2,0)),L=A=0,h.mode=5;case 5:if(1024&h.flags){for(;L<16;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}h.length=A,h.head&&(h.head.extra_len=A),512&h.flags&&(_[0]=255&A,_[1]=A>>>8&255,h.check=d(h.check,_,2,0)),L=A=0}else h.head&&(h.head.extra=null);h.mode=6;case 6:if(1024&h.flags&&(Y<(J=h.length)&&(J=Y),J&&(h.head&&(u=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Array(h.head.extra_len)),i.arraySet(h.head.extra,$,F,J,u)),512&h.flags&&(h.check=d(h.check,$,J,F)),Y-=J,F+=J,h.length-=J),h.length))break e;h.length=0,h.mode=7;case 7:if(2048&h.flags){if(Y===0)break e;for(J=0;u=$[F+J++],h.head&&u&&h.length<65536&&(h.head.name+=String.fromCharCode(u)),u&&J<Y;);if(512&h.flags&&(h.check=d(h.check,$,J,F)),Y-=J,F+=J,u)break e}else h.head&&(h.head.name=null);h.length=0,h.mode=8;case 8:if(4096&h.flags){if(Y===0)break e;for(J=0;u=$[F+J++],h.head&&u&&h.length<65536&&(h.head.comment+=String.fromCharCode(u)),u&&J<Y;);if(512&h.flags&&(h.check=d(h.check,$,J,F)),Y-=J,F+=J,u)break e}else h.head&&(h.head.comment=null);h.mode=9;case 9:if(512&h.flags){for(;L<16;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if(A!==(65535&h.check)){P.msg="header crc mismatch",h.mode=30;break}L=A=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),P.adler=h.check=0,h.mode=12;break;case 10:for(;L<32;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}P.adler=h.check=y(A),L=A=0,h.mode=11;case 11:if(h.havedict===0)return P.next_out=ee,P.avail_out=R,P.next_in=F,P.avail_in=Y,h.hold=A,h.bits=L,2;P.adler=h.check=1,h.mode=12;case 12:if(q===5||q===6)break e;case 13:if(h.last){A>>>=7&L,L-=7&L,h.mode=27;break}for(;L<3;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}switch(h.last=1&A,L-=1,3&(A>>>=1)){case 0:h.mode=14;break;case 1:if(Q(h),h.mode=20,q!==6)break;A>>>=2,L-=2;break e;case 2:h.mode=17;break;case 3:P.msg="invalid block type",h.mode=30}A>>>=2,L-=2;break;case 14:for(A>>>=7&L,L-=7&L;L<32;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if((65535&A)!=(A>>>16^65535)){P.msg="invalid stored block lengths",h.mode=30;break}if(h.length=65535&A,L=A=0,h.mode=15,q===6)break e;case 15:h.mode=16;case 16:if(J=h.length){if(Y<J&&(J=Y),R<J&&(J=R),J===0)break e;i.arraySet(Z,$,F,J,ee),Y-=J,F+=J,R-=J,ee+=J,h.length-=J;break}h.mode=12;break;case 17:for(;L<14;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if(h.nlen=257+(31&A),A>>>=5,L-=5,h.ndist=1+(31&A),A>>>=5,L-=5,h.ncode=4+(15&A),A>>>=4,L-=4,286<h.nlen||30<h.ndist){P.msg="too many length or distance symbols",h.mode=30;break}h.have=0,h.mode=18;case 18:for(;h.have<h.ncode;){for(;L<3;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}h.lens[W[h.have++]]=7&A,A>>>=3,L-=3}for(;h.have<19;)h.lens[W[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,T={bits:h.lenbits},X=m(0,h.lens,0,19,h.lencode,0,h.work,T),h.lenbits=T.bits,X){P.msg="invalid code lengths set",h.mode=30;break}h.have=0,h.mode=19;case 19:for(;h.have<h.nlen+h.ndist;){for(;xe=(w=h.lencode[A&(1<<h.lenbits)-1])>>>16&255,Se=65535&w,!((de=w>>>24)<=L);){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if(Se<16)A>>>=de,L-=de,h.lens[h.have++]=Se;else{if(Se===16){for(b=de+2;L<b;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if(A>>>=de,L-=de,h.have===0){P.msg="invalid bit length repeat",h.mode=30;break}u=h.lens[h.have-1],J=3+(3&A),A>>>=2,L-=2}else if(Se===17){for(b=de+3;L<b;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}L-=de,u=0,J=3+(7&(A>>>=de)),A>>>=3,L-=3}else{for(b=de+7;L<b;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}L-=de,u=0,J=11+(127&(A>>>=de)),A>>>=7,L-=7}if(h.have+J>h.nlen+h.ndist){P.msg="invalid bit length repeat",h.mode=30;break}for(;J--;)h.lens[h.have++]=u}}if(h.mode===30)break;if(h.lens[256]===0){P.msg="invalid code -- missing end-of-block",h.mode=30;break}if(h.lenbits=9,T={bits:h.lenbits},X=m(x,h.lens,0,h.nlen,h.lencode,0,h.work,T),h.lenbits=T.bits,X){P.msg="invalid literal/lengths set",h.mode=30;break}if(h.distbits=6,h.distcode=h.distdyn,T={bits:h.distbits},X=m(v,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,T),h.distbits=T.bits,X){P.msg="invalid distances set",h.mode=30;break}if(h.mode=20,q===6)break e;case 20:h.mode=21;case 21:if(6<=Y&&258<=R){P.next_out=ee,P.avail_out=R,P.next_in=F,P.avail_in=Y,h.hold=A,h.bits=L,c(P,B),ee=P.next_out,Z=P.output,R=P.avail_out,F=P.next_in,$=P.input,Y=P.avail_in,A=h.hold,L=h.bits,h.mode===12&&(h.back=-1);break}for(h.back=0;xe=(w=h.lencode[A&(1<<h.lenbits)-1])>>>16&255,Se=65535&w,!((de=w>>>24)<=L);){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if(xe&&(240&xe)==0){for(oe=de,ce=xe,he=Se;xe=(w=h.lencode[he+((A&(1<<oe+ce)-1)>>oe)])>>>16&255,Se=65535&w,!(oe+(de=w>>>24)<=L);){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}A>>>=oe,L-=oe,h.back+=oe}if(A>>>=de,L-=de,h.back+=de,h.length=Se,xe===0){h.mode=26;break}if(32&xe){h.back=-1,h.mode=12;break}if(64&xe){P.msg="invalid literal/length code",h.mode=30;break}h.extra=15&xe,h.mode=22;case 22:if(h.extra){for(b=h.extra;L<b;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}h.length+=A&(1<<h.extra)-1,A>>>=h.extra,L-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=23;case 23:for(;xe=(w=h.distcode[A&(1<<h.distbits)-1])>>>16&255,Se=65535&w,!((de=w>>>24)<=L);){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if((240&xe)==0){for(oe=de,ce=xe,he=Se;xe=(w=h.distcode[he+((A&(1<<oe+ce)-1)>>oe)])>>>16&255,Se=65535&w,!(oe+(de=w>>>24)<=L);){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}A>>>=oe,L-=oe,h.back+=oe}if(A>>>=de,L-=de,h.back+=de,64&xe){P.msg="invalid distance code",h.mode=30;break}h.offset=Se,h.extra=15&xe,h.mode=24;case 24:if(h.extra){for(b=h.extra;L<b;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}h.offset+=A&(1<<h.extra)-1,A>>>=h.extra,L-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){P.msg="invalid distance too far back",h.mode=30;break}h.mode=25;case 25:if(R===0)break e;if(J=B-R,h.offset>J){if((J=h.offset-J)>h.whave&&h.sane){P.msg="invalid distance too far back",h.mode=30;break}ge=J>h.wnext?(J-=h.wnext,h.wsize-J):h.wnext-J,J>h.length&&(J=h.length),_e=h.window}else _e=Z,ge=ee-h.offset,J=h.length;for(R<J&&(J=R),R-=J,h.length-=J;Z[ee++]=_e[ge++],--J;);h.length===0&&(h.mode=21);break;case 26:if(R===0)break e;Z[ee++]=h.length,R--,h.mode=21;break;case 27:if(h.wrap){for(;L<32;){if(Y===0)break e;Y--,A|=$[F++]<<L,L+=8}if(B-=R,P.total_out+=B,h.total+=B,B&&(P.adler=h.check=h.flags?d(h.check,Z,B,ee-B):l(h.check,Z,B,ee-B)),B=R,(h.flags?A:y(A))!==h.check){P.msg="incorrect data check",h.mode=30;break}L=A=0}h.mode=28;case 28:if(h.wrap&&h.flags){for(;L<32;){if(Y===0)break e;Y--,A+=$[F++]<<L,L+=8}if(A!==(4294967295&h.total)){P.msg="incorrect length check",h.mode=30;break}L=A=0}h.mode=29;case 29:X=1;break e;case 30:X=-3;break e;case 31:return-4;case 32:default:return p}return P.next_out=ee,P.avail_out=R,P.next_in=F,P.avail_in=Y,h.hold=A,h.bits=L,(h.wsize||B!==P.avail_out&&h.mode<30&&(h.mode<27||q!==4))&&H(P,P.output,P.next_out,B-P.avail_out)?(h.mode=31,-4):(te-=P.avail_in,B-=P.avail_out,P.total_in+=te,P.total_out+=B,h.total+=B,h.wrap&&B&&(P.adler=h.check=h.flags?d(h.check,Z,B,P.next_out-B):l(h.check,Z,B,P.next_out-B)),P.data_type=h.bits+(h.last?64:0)+(h.mode===12?128:0)+(h.mode===20||h.mode===15?256:0),(te==0&&B===0||q===4)&&X===S&&(X=-5),X)},o.inflateEnd=function(P){if(!P||!P.state)return p;var q=P.state;return q.window&&(q.window=null),P.state=null,S},o.inflateGetHeader=function(P,q){var h;return P&&P.state?(2&(h=P.state).wrap)==0?p:((h.head=q).done=!1,S):p},o.inflateSetDictionary=function(P,q){var h,$=q.length;return P&&P.state?(h=P.state).wrap!==0&&h.mode!==11?p:h.mode===11&&l(1,q,$,0)!==h.check?-3:H(P,q,$,$)?(h.mode=31,-4):(h.havedict=1,S):p},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,s,o){var i=t("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(x,v,S,p,f,g,C,y){var E,z,k,U,K,j,D,O,Q,H=y.bits,P=0,q=0,h=0,$=0,Z=0,F=0,ee=0,Y=0,R=0,A=0,L=null,te=0,B=new i.Buf16(16),J=new i.Buf16(16),ge=null,_e=0;for(P=0;P<=15;P++)B[P]=0;for(q=0;q<p;q++)B[v[S+q]]++;for(Z=H,$=15;1<=$&&B[$]===0;$--);if($<Z&&(Z=$),$===0)return f[g++]=20971520,f[g++]=20971520,y.bits=1,0;for(h=1;h<$&&B[h]===0;h++);for(Z<h&&(Z=h),P=Y=1;P<=15;P++)if(Y<<=1,(Y-=B[P])<0)return-1;if(0<Y&&(x===0||$!==1))return-1;for(J[1]=0,P=1;P<15;P++)J[P+1]=J[P]+B[P];for(q=0;q<p;q++)v[S+q]!==0&&(C[J[v[S+q]]++]=q);if(j=x===0?(L=ge=C,19):x===1?(L=l,te-=257,ge=d,_e-=257,256):(L=c,ge=m,-1),P=h,K=g,ee=q=A=0,k=-1,U=(R=1<<(F=Z))-1,x===1&&852<R||x===2&&592<R)return 1;for(;;){for(D=P-ee,Q=C[q]<j?(O=0,C[q]):C[q]>j?(O=ge[_e+C[q]],L[te+C[q]]):(O=96,0),E=1<<P-ee,h=z=1<<F;f[K+(A>>ee)+(z-=E)]=D<<24|O<<16|Q|0,z!==0;);for(E=1<<P-1;A&E;)E>>=1;if(E!==0?(A&=E-1,A+=E):A=0,q++,--B[P]==0){if(P===$)break;P=v[S+C[q]]}if(Z<P&&(A&U)!==k){for(ee===0&&(ee=Z),K+=h,Y=1<<(F=P-ee);F+ee<$&&!((Y-=B[F+ee])<=0);)F++,Y<<=1;if(R+=1<<F,x===1&&852<R||x===2&&592<R)return 1;f[k=A&U]=Z<<24|F<<16|K-g|0}}return A!==0&&(f[K+A]=P-ee<<24|64<<16|0),y.bits=Z,0}},{"../utils/common":41}],51:[function(t,s,o){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,s,o){var i=t("../utils/common"),l=0,d=1;function c(w){for(var _=w.length;0<=--_;)w[_]=0}var m=0,x=29,v=256,S=v+1+x,p=30,f=19,g=2*S+1,C=15,y=16,E=7,z=256,k=16,U=17,K=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(S+2));c(H);var P=new Array(2*p);c(P);var q=new Array(512);c(q);var h=new Array(256);c(h);var $=new Array(x);c($);var Z,F,ee,Y=new Array(p);function R(w,_,W,V,G){this.static_tree=w,this.extra_bits=_,this.extra_base=W,this.elems=V,this.max_length=G,this.has_stree=w&&w.length}function A(w,_){this.dyn_tree=w,this.max_code=0,this.stat_desc=_}function L(w){return w<256?q[w]:q[256+(w>>>7)]}function te(w,_){w.pending_buf[w.pending++]=255&_,w.pending_buf[w.pending++]=_>>>8&255}function B(w,_,W){w.bi_valid>y-W?(w.bi_buf|=_<<w.bi_valid&65535,te(w,w.bi_buf),w.bi_buf=_>>y-w.bi_valid,w.bi_valid+=W-y):(w.bi_buf|=_<<w.bi_valid&65535,w.bi_valid+=W)}function J(w,_,W){B(w,W[2*_],W[2*_+1])}function ge(w,_){for(var W=0;W|=1&w,w>>>=1,W<<=1,0<--_;);return W>>>1}function _e(w,_,W){var V,G,ne=new Array(C+1),pe=0;for(V=1;V<=C;V++)ne[V]=pe=pe+W[V-1]<<1;for(G=0;G<=_;G++){var se=w[2*G+1];se!==0&&(w[2*G]=ge(ne[se]++,se))}}function de(w){var _;for(_=0;_<S;_++)w.dyn_ltree[2*_]=0;for(_=0;_<p;_++)w.dyn_dtree[2*_]=0;for(_=0;_<f;_++)w.bl_tree[2*_]=0;w.dyn_ltree[2*z]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function xe(w){8<w.bi_valid?te(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function Se(w,_,W,V){var G=2*_,ne=2*W;return w[G]<w[ne]||w[G]===w[ne]&&V[_]<=V[W]}function oe(w,_,W){for(var V=w.heap[W],G=W<<1;G<=w.heap_len&&(G<w.heap_len&&Se(_,w.heap[G+1],w.heap[G],w.depth)&&G++,!Se(_,V,w.heap[G],w.depth));)w.heap[W]=w.heap[G],W=G,G<<=1;w.heap[W]=V}function ce(w,_,W){var V,G,ne,pe,se=0;if(w.last_lit!==0)for(;V=w.pending_buf[w.d_buf+2*se]<<8|w.pending_buf[w.d_buf+2*se+1],G=w.pending_buf[w.l_buf+se],se++,V===0?J(w,G,_):(J(w,(ne=h[G])+v+1,_),(pe=j[ne])!==0&&B(w,G-=$[ne],pe),J(w,ne=L(--V),W),(pe=D[ne])!==0&&B(w,V-=Y[ne],pe)),se<w.last_lit;);J(w,z,_)}function he(w,_){var W,V,G,ne=_.dyn_tree,pe=_.stat_desc.static_tree,se=_.stat_desc.has_stree,we=_.stat_desc.elems,fe=-1;for(w.heap_len=0,w.heap_max=g,W=0;W<we;W++)ne[2*W]!==0?(w.heap[++w.heap_len]=fe=W,w.depth[W]=0):ne[2*W+1]=0;for(;w.heap_len<2;)ne[2*(G=w.heap[++w.heap_len]=fe<2?++fe:0)]=1,w.depth[G]=0,w.opt_len--,se&&(w.static_len-=pe[2*G+1]);for(_.max_code=fe,W=w.heap_len>>1;1<=W;W--)oe(w,ne,W);for(G=we;W=w.heap[1],w.heap[1]=w.heap[w.heap_len--],oe(w,ne,1),V=w.heap[1],w.heap[--w.heap_max]=W,w.heap[--w.heap_max]=V,ne[2*G]=ne[2*W]+ne[2*V],w.depth[G]=(w.depth[W]>=w.depth[V]?w.depth[W]:w.depth[V])+1,ne[2*W+1]=ne[2*V+1]=G,w.heap[1]=G++,oe(w,ne,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],(function(le,re){var ie,ye,We,Pe,He,Ge,Ue=re.dyn_tree,nt=re.max_code,dt=re.stat_desc.static_tree,ft=re.stat_desc.has_stree,ct=re.stat_desc.extra_bits,qe=re.stat_desc.extra_base,Ze=re.stat_desc.max_length,st=0;for(Pe=0;Pe<=C;Pe++)le.bl_count[Pe]=0;for(Ue[2*le.heap[le.heap_max]+1]=0,ie=le.heap_max+1;ie<g;ie++)Ze<(Pe=Ue[2*Ue[2*(ye=le.heap[ie])+1]+1]+1)&&(Pe=Ze,st++),Ue[2*ye+1]=Pe,nt<ye||(le.bl_count[Pe]++,He=0,qe<=ye&&(He=ct[ye-qe]),Ge=Ue[2*ye],le.opt_len+=Ge*(Pe+He),ft&&(le.static_len+=Ge*(dt[2*ye+1]+He)));if(st!==0){do{for(Pe=Ze-1;le.bl_count[Pe]===0;)Pe--;le.bl_count[Pe]--,le.bl_count[Pe+1]+=2,le.bl_count[Ze]--,st-=2}while(0<st);for(Pe=Ze;Pe!==0;Pe--)for(ye=le.bl_count[Pe];ye!==0;)nt<(We=le.heap[--ie])||(Ue[2*We+1]!==Pe&&(le.opt_len+=(Pe-Ue[2*We+1])*Ue[2*We],Ue[2*We+1]=Pe),ye--)}})(w,_),_e(ne,fe,w.bl_count)}function u(w,_,W){var V,G,ne=-1,pe=_[1],se=0,we=7,fe=4;for(pe===0&&(we=138,fe=3),_[2*(W+1)+1]=65535,V=0;V<=W;V++)G=pe,pe=_[2*(V+1)+1],++se<we&&G===pe||(se<fe?w.bl_tree[2*G]+=se:G!==0?(G!==ne&&w.bl_tree[2*G]++,w.bl_tree[2*k]++):se<=10?w.bl_tree[2*U]++:w.bl_tree[2*K]++,ne=G,fe=(se=0)===pe?(we=138,3):G===pe?(we=6,3):(we=7,4))}function X(w,_,W){var V,G,ne=-1,pe=_[1],se=0,we=7,fe=4;for(pe===0&&(we=138,fe=3),V=0;V<=W;V++)if(G=pe,pe=_[2*(V+1)+1],!(++se<we&&G===pe)){if(se<fe)for(;J(w,G,w.bl_tree),--se!=0;);else G!==0?(G!==ne&&(J(w,G,w.bl_tree),se--),J(w,k,w.bl_tree),B(w,se-3,2)):se<=10?(J(w,U,w.bl_tree),B(w,se-3,3)):(J(w,K,w.bl_tree),B(w,se-11,7));ne=G,fe=(se=0)===pe?(we=138,3):G===pe?(we=6,3):(we=7,4)}}c(Y);var T=!1;function b(w,_,W,V){B(w,(m<<1)+(V?1:0),3),(function(G,ne,pe,se){xe(G),te(G,pe),te(G,~pe),i.arraySet(G.pending_buf,G.window,ne,pe,G.pending),G.pending+=pe})(w,_,W)}o._tr_init=function(w){T||((function(){var _,W,V,G,ne,pe=new Array(C+1);for(G=V=0;G<x-1;G++)for($[G]=V,_=0;_<1<<j[G];_++)h[V++]=G;for(h[V-1]=G,G=ne=0;G<16;G++)for(Y[G]=ne,_=0;_<1<<D[G];_++)q[ne++]=G;for(ne>>=7;G<p;G++)for(Y[G]=ne<<7,_=0;_<1<<D[G]-7;_++)q[256+ne++]=G;for(W=0;W<=C;W++)pe[W]=0;for(_=0;_<=143;)H[2*_+1]=8,_++,pe[8]++;for(;_<=255;)H[2*_+1]=9,_++,pe[9]++;for(;_<=279;)H[2*_+1]=7,_++,pe[7]++;for(;_<=287;)H[2*_+1]=8,_++,pe[8]++;for(_e(H,S+1,pe),_=0;_<p;_++)P[2*_+1]=5,P[2*_]=ge(_,5);Z=new R(H,j,v+1,S,C),F=new R(P,D,0,p,C),ee=new R(new Array(0),O,0,f,E)})(),T=!0),w.l_desc=new A(w.dyn_ltree,Z),w.d_desc=new A(w.dyn_dtree,F),w.bl_desc=new A(w.bl_tree,ee),w.bi_buf=0,w.bi_valid=0,de(w)},o._tr_stored_block=b,o._tr_flush_block=function(w,_,W,V){var G,ne,pe=0;0<w.level?(w.strm.data_type===2&&(w.strm.data_type=(function(se){var we,fe=4093624447;for(we=0;we<=31;we++,fe>>>=1)if(1&fe&&se.dyn_ltree[2*we]!==0)return l;if(se.dyn_ltree[18]!==0||se.dyn_ltree[20]!==0||se.dyn_ltree[26]!==0)return d;for(we=32;we<v;we++)if(se.dyn_ltree[2*we]!==0)return d;return l})(w)),he(w,w.l_desc),he(w,w.d_desc),pe=(function(se){var we;for(u(se,se.dyn_ltree,se.l_desc.max_code),u(se,se.dyn_dtree,se.d_desc.max_code),he(se,se.bl_desc),we=f-1;3<=we&&se.bl_tree[2*Q[we]+1]===0;we--);return se.opt_len+=3*(we+1)+5+5+4,we})(w),G=w.opt_len+3+7>>>3,(ne=w.static_len+3+7>>>3)<=G&&(G=ne)):G=ne=W+5,W+4<=G&&_!==-1?b(w,_,W,V):w.strategy===4||ne===G?(B(w,2+(V?1:0),3),ce(w,H,P)):(B(w,4+(V?1:0),3),(function(se,we,fe,le){var re;for(B(se,we-257,5),B(se,fe-1,5),B(se,le-4,4),re=0;re<le;re++)B(se,se.bl_tree[2*Q[re]+1],3);X(se,se.dyn_ltree,we-1),X(se,se.dyn_dtree,fe-1)})(w,w.l_desc.max_code+1,w.d_desc.max_code+1,pe+1),ce(w,w.dyn_ltree,w.dyn_dtree)),de(w),V&&xe(w)},o._tr_tally=function(w,_,W){return w.pending_buf[w.d_buf+2*w.last_lit]=_>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&_,w.pending_buf[w.l_buf+w.last_lit]=255&W,w.last_lit++,_===0?w.dyn_ltree[2*W]++:(w.matches++,_--,w.dyn_ltree[2*(h[W]+v+1)]++,w.dyn_dtree[2*L(_)]++),w.last_lit===w.lit_bufsize-1},o._tr_align=function(w){B(w,2,3),J(w,z,H),(function(_){_.bi_valid===16?(te(_,_.bi_buf),_.bi_buf=0,_.bi_valid=0):8<=_.bi_valid&&(_.pending_buf[_.pending++]=255&_.bi_buf,_.bi_buf>>=8,_.bi_valid-=8)})(w)}},{"../utils/common":41}],53:[function(t,s,o){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,s,o){(function(i){(function(l,d){if(!l.setImmediate){var c,m,x,v,S=1,p={},f=!1,g=l.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(l);C=C&&C.setTimeout?C:l,c={}.toString.call(l.process)==="[object process]"?function(k){process.nextTick(function(){E(k)})}:(function(){if(l.postMessage&&!l.importScripts){var k=!0,U=l.onmessage;return l.onmessage=function(){k=!1},l.postMessage("","*"),l.onmessage=U,k}})()?(v="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",z,!1):l.attachEvent("onmessage",z),function(k){l.postMessage(v+k,"*")}):l.MessageChannel?((x=new MessageChannel).port1.onmessage=function(k){E(k.data)},function(k){x.port2.postMessage(k)}):g&&"onreadystatechange"in g.createElement("script")?(m=g.documentElement,function(k){var U=g.createElement("script");U.onreadystatechange=function(){E(k),U.onreadystatechange=null,m.removeChild(U),U=null},m.appendChild(U)}):function(k){setTimeout(E,0,k)},C.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var U=new Array(arguments.length-1),K=0;K<U.length;K++)U[K]=arguments[K+1];var j={callback:k,args:U};return p[S]=j,c(S),S++},C.clearImmediate=y}function y(k){delete p[k]}function E(k){if(f)setTimeout(E,0,k);else{var U=p[k];if(U){f=!0;try{(function(K){var j=K.callback,D=K.args;switch(D.length){case 0:j();break;case 1:j(D[0]);break;case 2:j(D[0],D[1]);break;case 3:j(D[0],D[1],D[2]);break;default:j.apply(d,D)}})(U)}finally{y(k),f=!1}}}}function z(k){k.source===l&&typeof k.data=="string"&&k.data.indexOf(v)===0&&E(+k.data.slice(v.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ht<"u"?ht:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ua)),ua.exports}var Du=Ru();const Bu=Ct(Du),Fe={printMode:"print-designer-print-mode",preferredPrintMode:"print-designer-preferred-print-mode",silentPrint:"print-designer-silent-print",exportImageMerged:"print-designer-export-image-merged",localSettings:"print-designer-local-settings",remoteSettings:"print-designer-remote-settings",localPrintOptions:"print-designer-local-print-options",remotePrintOptions:"print-designer-remote-print-options",remoteAuthToken:"print-designer-remote-auth-token",remoteSelectedClientId:"print-designer-remote-selected-client-id"},Ou={wsAddress:"ws://localhost:1122/ws",secretKey:""},qu={wsAddress:"ws://localhost:8080/ws/request",apiBaseUrl:"http://localhost:8080/api/login",username:"",password:""},Ys={printer:"",jobName:"",copies:1,intervalMs:0,pageRange:"",pageSet:"",scale:"fit",orientation:"portrait",colorMode:"color",sidesMode:"simplex",paperSize:"",trayBin:""},Wt=(r,e)=>{const t=localStorage.getItem(r);if(!t)return e;try{return{...e,...JSON.parse(t)}}catch{return e}},Gt=(r,e)=>{localStorage.setItem(r,JSON.stringify(e))},Fu=r=>r.trim(),Ks=r=>{const e=Fu(r);return e?/^wss?:\/\//i.test(e)?e:`ws://${e.replace(/^\/+/,"")}`:"ws://"},Xs=(r,e,t)=>{if(!t)return r;try{const s=new URL(r);return s.searchParams.set(e,t),s.toString()}catch{const s=r.includes("?")?"&":"?";return`${r}${s}${encodeURIComponent(e)}=${encodeURIComponent(t)}`}};let ha=null;const ju=()=>{const r=localStorage.getItem(Fe.preferredPrintMode),e=ae(r||localStorage.getItem(Fe.printMode)||"browser"),t=ae(localStorage.getItem(Fe.silentPrint)==="true"),s=ae(localStorage.getItem(Fe.exportImageMerged)!=="false"),o=kt(Wt(Fe.localSettings,Ou));if(!o.wsAddress){const _=o;if(_.host||_.port||_.path){const W=_.host||"localhost",V=_.port?`:${_.port}`:"",G=_.path||"/ws",ne=_.protocol||"ws";o.wsAddress=`${ne}://${W}${V}${G}`}}const i=kt(Wt(Fe.remoteSettings,qu));if(!i.wsAddress){const _=i;if(_.host||_.wsPort||_.wsPath){const W=_.host||"localhost",V=_.wsPort?`:${_.wsPort}`:"",G=_.wsPath||"/ws/request";i.wsAddress=`${W}${V}${G}`}}const l=ae("disconnected"),d=ae("disconnected"),c=ae(""),m=ae(""),x=kt(Wt(Fe.localPrintOptions,Ys)),v=kt(Wt(Fe.remotePrintOptions,Ys)),S=ae(localStorage.getItem(Fe.remoteAuthToken)||""),p=ae(localStorage.getItem(Fe.remoteSelectedClientId)||""),f=ae([]),g=ae([]),C=ae([]),y=kt({}),E=ae(null),z=ae(null),k=[],U=[];let K=null,j=null;const D=ae(0),O=ae(0),Q=ae(null),H=ae(null),P=ae(!1),q=ae(!1),h=3e3,$=10,Z=me(()=>{const _=Ks(o.wsAddress);return Xs(_,"key",o.secretKey.trim())}),F=me(()=>{const _=Ks(i.wsAddress);return Xs(_,"token",S.value.trim())});ze(e,_=>{if(localStorage.setItem(Fe.printMode,_),_!=="browser"){localStorage.setItem(Fe.preferredPrintMode,_);return}localStorage.removeItem(Fe.preferredPrintMode)}),ze(t,_=>{localStorage.setItem(Fe.silentPrint,String(_))}),ze(s,_=>{localStorage.setItem(Fe.exportImageMerged,String(_))}),ze(o,_=>{Gt(Fe.localSettings,_),l.value="disconnected",c.value=""},{deep:!0}),ze(i,_=>{Gt(Fe.remoteSettings,_),d.value="disconnected",m.value=""},{deep:!0}),ze(x,_=>{Gt(Fe.localPrintOptions,_)},{deep:!0}),ze(v,_=>{Gt(Fe.remotePrintOptions,_)},{deep:!0}),ze(S,_=>{localStorage.setItem(Fe.remoteAuthToken,_)}),ze(p,_=>{localStorage.setItem(Fe.remoteSelectedClientId,_)});const ee=()=>{const _=localStorage.getItem(Fe.preferredPrintMode);!_||_==="browser"||e.value==="browser"&&(_==="local"&&l.value==="connected"&&(e.value="local"),_==="remote"&&d.value==="connected"&&(e.value="remote"))},Y=()=>{const _=l.value==="connected",W=d.value==="connected";if(e.value==="local"&&!_){e.value="browser";return}if(e.value==="remote"&&!W){e.value="browser";return}!_&&!W&&(e.value="browser")};ze([l,d],()=>{Y(),ee()},{immediate:!0});const R=(_,W)=>{_.slice().forEach(V=>{V.match(W)&&(window.clearTimeout(V.timeoutId),_.splice(_.indexOf(V),1),V.resolve(W))})},A=(_,W)=>{_.slice().forEach(V=>{window.clearTimeout(V.timeoutId),_.splice(_.indexOf(V),1),V.reject(W)})},L=()=>{Q.value&&(window.clearTimeout(Q.value),Q.value=null),D.value=0},te=()=>{H.value&&(window.clearTimeout(H.value),H.value=null),O.value=0},B=()=>{P.value=!0,L(),E.value&&E.value.close(),E.value=null,l.value="disconnected",c.value=""},J=()=>{q.value=!0,te(),z.value&&z.value.close(),z.value=null,d.value="disconnected",m.value=""},ge=()=>{if(!P.value&&!Q.value){if(D.value>=$){l.value="error",c.value="Local connection failed",D.value=0;return}D.value+=1,l.value="connecting",Q.value=window.setTimeout(()=>{Q.value=null,oe()},h)}},_e=()=>{if(!q.value&&!H.value){if(O.value>=$){d.value="error",m.value="Remote connection failed",O.value=0;return}O.value+=1,d.value="connecting",H.value=window.setTimeout(()=>{H.value=null,he()},h)}},de=(_,W,V,G,ne=5e3)=>new Promise((pe,se)=>{const we=_.value;if(!we||we.readyState!==WebSocket.OPEN){se(new Error("WebSocket not connected"));return}const fe=window.setTimeout(()=>{const le=W.findIndex(re=>re.resolve===pe);le>=0&&W.splice(le,1),se(new Error("WebSocket timeout"))},ne);W.push({match:G,resolve:pe,reject:se,timeoutId:fe}),we.send(JSON.stringify(V))}),xe=_=>{_.onmessage=W=>{try{const V=JSON.parse(W.data);(V==null?void 0:V.type)==="printer_list"&&(f.value=Array.isArray(V.data)?V.data:[]),(V==null?void 0:V.type)==="printer_caps"&&V.printer&&(y[V.printer]=(V==null?void 0:V.data)||{}),R(k,V)}catch(V){A(k,V)}},_.onclose=()=>{E.value=null,l.value!=="error"&&(l.value="disconnected"),A(k,new Error("WebSocket closed")),ge()},_.onerror=()=>{l.value="error",c.value="Local connection failed",A(k,new Error("WebSocket error")),ge()}},Se=_=>{_.onmessage=W=>{try{const V=JSON.parse(W.data);if((V==null?void 0:V.cmd)==="clients_list")if(C.value=Array.isArray(V.clients)?V.clients:[],C.value.length>0){if(!C.value.some(ne=>ne.client_id===p.value)){const ne=C.value.find(pe=>pe.online)||C.value[0];p.value=(ne==null?void 0:ne.client_id)||""}}else p.value="";(V==null?void 0:V.cmd)==="printers_list"&&(g.value=Array.isArray(V.printers)?V.printers:[]),R(U,V)}catch(V){A(U,V)}},_.onclose=()=>{z.value=null,d.value!=="error"&&(d.value="disconnected"),A(U,new Error("WebSocket closed")),_e()},_.onerror=()=>{d.value="error",m.value="Remote connection failed",A(U,new Error("WebSocket error")),_e()}},oe=async()=>{if(K)return K;if(E.value&&E.value.readyState===WebSocket.OPEN)return l.value="connected",Promise.resolve();P.value=!1,l.value="connecting",c.value="";const _=new WebSocket(Z.value);return E.value=_,xe(_),K=new Promise((W,V)=>{_.addEventListener("open",()=>{l.value="connected",L(),K=null,_.send(JSON.stringify({type:"get_printers"})),W()}),_.addEventListener("error",()=>{l.value="error",c.value="Local connection failed",K=null,ge(),V(new Error("WebSocket error"))})}),K},ce=()=>{P.value=!0,L(),E.value&&E.value.close(),E.value=null,l.value="disconnected",c.value=""},he=async()=>j||(z.value&&z.value.readyState===WebSocket.OPEN?(d.value="connected",Promise.resolve()):(q.value=!1,d.value="connecting",m.value="",j=(async()=>{try{if(!i.apiBaseUrl||!i.username||!i.password){d.value="error",m.value="Missing remote connection fields";return}const _=await fetch(i.apiBaseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i.username,password:i.password})});if(!_.ok){const G=await _.text();throw new Error(G||`HTTP ${_.status}`)}const W=await _.json();if(!(W!=null&&W.token))throw new Error("Missing auth token");S.value=W.token;const V=new WebSocket(F.value);z.value=V,Se(V),await new Promise((G,ne)=>{V.addEventListener("open",()=>{d.value="connected",te(),V.send(JSON.stringify({cmd:"get_clients"})),G()}),V.addEventListener("error",()=>{d.value="error",m.value="Remote connection failed",_e(),ne(new Error("WebSocket error"))})})}catch(_){d.value="error",m.value=_.message||"Remote connection failed",_e()}finally{j=null}})(),j));return{printMode:e,silentPrint:t,exportImageMerged:s,localSettings:o,remoteSettings:i,localStatus:l,remoteStatus:d,localStatusMessage:c,remoteStatusMessage:m,localRetryCount:D,remoteRetryCount:O,localPrintOptions:x,remotePrintOptions:v,localWsUrl:Z,remoteWsUrl:F,remoteAuthToken:S,localPrinters:f,remotePrinters:g,remoteClients:C,remoteSelectedClientId:p,localPrinterCaps:y,fetchLocalPrinters:async()=>{await oe();const _=await de(E,k,{type:"get_printers"},W=>(W==null?void 0:W.type)==="printer_list");return f.value=Array.isArray(_.data)?_.data:[],f.value},fetchRemoteClients:async()=>{await he();const _=await de(z,U,{cmd:"get_clients"},W=>(W==null?void 0:W.cmd)==="clients_list");if(C.value=Array.isArray(_.clients)?_.clients:[],C.value.length>0){if(!C.value.some(V=>V.client_id===p.value)){const V=C.value.find(G=>G.online)||C.value[0];p.value=(V==null?void 0:V.client_id)||""}}else p.value="";return C.value},fetchRemotePrinters:async _=>{const W=_||p.value;if(!W)return g.value=[],g.value;await he();const V=await de(z,U,{cmd:"get_printers",client_id:W},G=>(G==null?void 0:G.cmd)==="printers_list");return g.value=Array.isArray(V.printers)?V.printers:[],g.value},fetchLocalPrinterCaps:async _=>{if(!_)return;if(y[_])return y[_];await oe();const W=await de(E,k,{type:"get_printer_caps",printer:_},V=>(V==null?void 0:V.type)==="printer_caps");return y[_]=(W==null?void 0:W.data)||{},y[_]},cancelLocalRetry:B,cancelRemoteRetry:J,connectLocal:oe,disconnectLocal:ce,connectRemote:he,disconnectRemote:()=>{q.value=!0,te(),z.value&&z.value.close(),z.value=null,d.value="disconnected",m.value=""}}},ar=()=>(ha||(ha=ju()),ha),Nu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Hu(r,e){return M(),N("svg",Nu,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M13.05 22v-2.05q.85-.125 1.663-.45t1.537-.85l1.4 1.45q-1.05.8-2.2 1.287t-2.4.613m-2 0q-3.45-.45-5.725-2.988T3.05 13.05q0-1.875.713-3.512t1.925-2.85t2.85-1.925t3.512-.713h.15L10.65 2.5l1.4-1.45l4 4l-4 4l-1.4-1.4l1.6-1.6h-.2q-2.925 0-4.962 2.038T5.05 13.05q0 2.6 1.7 4.563t4.3 2.337zm8.05-3.35l-1.45-1.4q.525-.725.85-1.537t.45-1.663H21q-.125 1.25-.612 2.4t-1.288 2.2m1.9-6.6h-2.05q-.125-.85-.45-1.662t-.85-1.538l1.45-1.4q.8.975 1.275 2.15T21 12.05"},null,-1)])])}const Uu=Ee({name:"material-symbols-rotate-right",render:Hu}),Vu={key:0,"data-print-exclude":"true",class:"absolute -top-3 -right-3 bg-red-500 rounded-full p-1 shadow-md z-50"},Wu=["title"],Zs=Le({__name:"ElementWrapper",props:{element:{},isSelected:{type:Boolean},zoom:{},pageIndex:{},readOnly:{type:Boolean}},setup(r){const e=r,{t}=Ne(),s=Be(),o=ae(null),i=Xe("designer-root",ae(null)),l=()=>{var K;return((K=i==null?void 0:i.value)==null?void 0:K.getRootNode())||document},d=me(()=>{const K=!e.isSelected&&s.selectedElementIds.includes(e.element.id),j=!e.readOnly&&(e.isSelected||K),D={left:`${e.element.x}px`,top:`${e.element.y}px`,width:`${e.element.width}px`,height:`${e.element.height}px`,zIndex:e.element.style.zIndex||1,transform:`rotate(${e.element.style.rotate||0}deg)`,...e.element.style},O=[be.TABLE,be.LINE,be.RECT,be.CIRCLE];return O.includes(e.element.type)&&(delete D.backgroundColor,delete D.border,delete D.borderWidth,delete D.borderStyle,delete D.borderColor,delete D.borderRadius),j?D.border=e.element.locked?"2px solid #ef4444":"2px solid var(--brand-500)":!O.includes(e.element.type)&&e.element.style.borderStyle&&e.element.style.borderStyle!=="none"?(D.borderStyle=e.element.style.borderStyle,D.borderWidth=`${e.element.style.borderWidth||1}px`,D.borderColor=e.element.style.borderColor||"#000",delete D.border):!O.includes(e.element.type)&&e.element.style.border?D.border=e.element.style.border:D.border="1px dashed transparent",D});let c=0,m=0,x=0,v=0,S=!1,p=!1;const f=K=>{e.readOnly||K.button!==0||K.target.closest(".resize-handle")||K.target.closest(".rotate-handle")||(K.ctrlKey||K.metaKey?s.selectElement(e.element.id,!0):s.selectedElementIds.includes(e.element.id)||s.selectElement(e.element.id,!1),e.element.locked)||(S=!0,s.setDragging(!0),p=!1,c=K.clientX,m=K.clientY,x=e.element.x,v=e.element.y,window.addEventListener("mousemove",g),window.addEventListener("mouseup",C))},g=K=>{if(!S)return;const j=(K.clientX-c)/e.zoom,D=(K.clientY-m)/e.zoom;(Math.abs(j)>2||Math.abs(D)>2)&&(p||(s.snapshot(),p=!0),s.selectedElementIds.length>1&&s.selectedElementIds.includes(e.element.id)?s.moveSelectedElements(e.element.id,x+j,v+D,!1,!1):s.moveElementWithSnap(e.element.id,x+j,v+D,!1,!1))},C=K=>{if(S&&p){const j=l(),O=j.elementsFromPoint(K.clientX,K.clientY).find(Q=>Q.classList.contains("print-page"));if(O){const Q=O.id,H=parseInt(Q.replace("page-",""),10);if(!isNaN(H)&&H!==e.pageIndex){const P=j.getElementById(`page-${e.pageIndex}`);if(P){const q=P.getBoundingClientRect(),h=O.getBoundingClientRect(),$=(q.left-h.left)/e.zoom,Z=(q.top-h.top)/e.zoom;(s.selectedElementIds.length>1&&s.selectedElementIds.includes(e.element.id)?[...s.selectedElementIds]:[e.element.id]).forEach(ee=>{const R=s.pages[e.pageIndex].elements.find(A=>A.id===ee);R&&s.moveElementToPage(ee,H,R.x+$,R.y+Z)})}}else s.selectedElementIds.length>1&&s.selectedElementIds.includes(e.element.id)?s.moveSelectedElements(e.element.id,e.element.x,e.element.y,!1,!0):s.moveElementWithSnap(e.element.id,e.element.x,e.element.y,!1,!0)}}S&&!p&&(K.ctrlKey||K.metaKey||s.selectElement(e.element.id,!1)),S=!1,s.setDragging(!1),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",C),s.setHighlightedGuide(null),s.setHighlightedEdge(null)},y=ae(!1),E=ae(!1),z=ae(0),k=K=>{if(K.stopPropagation(),K.preventDefault(),!o.value)return;y.value=!0,E.value=!1,p=!1,z.value=e.element.style.rotate||0;const j=o.value.getBoundingClientRect(),D=j.left+j.width/2,O=j.top+j.height/2,Q=Math.atan2(K.clientY-O,K.clientX-D),H=e.element.style.rotate||0,P=h=>{const Z=(Math.atan2(h.clientY-O,h.clientX-D)-Q)*(180/Math.PI);let F=H+Z;if(F=F%360,F<0&&(F+=360),E.value=!1,h.shiftKey)F=Math.round(F/45)*45,E.value=!0;else if(!h.ctrlKey){const Y=[0,90,180,270,360];for(const R of Y)if(Math.abs(F-R)<=5){F=R===360?0:R,E.value=!0;break}}F=Math.round(F),F===360&&(F=0),z.value=F,p||(s.snapshot(),p=!0),s.updateElement(e.element.id,{style:{...e.element.style,rotate:F}},!1)},q=()=>{y.value=!1,window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",q)};window.addEventListener("mousemove",P),window.addEventListener("mouseup",q)},U=K=>{K.stopPropagation(),K.preventDefault();const j=K.clientX,D=K.clientY,O=e.element.width,Q=e.element.height;p=!1;const H=q=>{const h=(q.clientX-j)/e.zoom,$=(q.clientY-D)/e.zoom;p||(s.snapshot(),p=!0);let Z=O+h,F=Q+$;if(q.shiftKey){const ee=O/Q;Math.abs(Z/O-1)>Math.abs(F/Q-1)?F=Z/ee:Z=F*ee}s.updateElement(e.element.id,{width:Math.max(10,Z),height:Math.max(10,F)},!1)},P=()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",P)};window.addEventListener("mousemove",H),window.addEventListener("mouseup",P)};return(K,j)=>(M(),N("div",{ref_key:"elementRef",ref:o,class:Ce(["element-wrapper absolute select-none",[r.readOnly?"cursor-not-allowed":"group theme-outline-hover",!r.readOnly&&r.element.locked?"cursor-not-allowed":"",!r.readOnly&&!r.element.locked?"cursor-move":""]]),style:ke(d.value),onMousedown:f},[mi(K.$slots,"default"),!r.readOnly&&r.element.locked&&r.isSelected?(M(),N("div",Vu,[ue(n(or),{class:"w-3 h-3 text-white"})])):ve("",!0),!r.readOnly&&r.isSelected&&n(s).selectedElementIds.length<=1&&!r.element.locked?(M(),N($e,{key:1},[a("div",{"data-print-exclude":"true",class:"resize-handle absolute bottom-0 right-0 w-3 h-3 bg-blue-600 cursor-se-resize z-50",onMousedown:U},null,32),a("div",{"data-print-exclude":"true",class:"rotate-handle absolute -top-4 -right-5 w-5 h-5 flex items-center justify-center cursor-grab z-50 theme-text theme-text-hover",title:n(t)("common.rotate"),onMousedown:k},[ue(n(Uu),{class:"w-3 h-3"}),y.value?(M(),N("div",{key:0,class:Ce(["absolute top-6 left-1/2 transform -translate-x-1/2 text-xs px-2 py-1 rounded whitespace-nowrap z-50 pointer-events-none font-sans font-normal not-italic leading-none tracking-normal normal-case",E.value?"theme-bg-strong text-white":"theme-bg-soft text-white"])},I(z.value)+"° ",3)):ve("",!0)],40,Wu)],64)):ve("",!0)],38))}}),Ft=r=>{const e=r.trim();return e?e.startsWith("@")?e.slice(1).trim():e.startsWith("{#")&&e.endsWith("}")?e.slice(2,-1).trim():e:""},Yi=r=>[be.TEXT,be.BARCODE,be.QRCODE,be.TABLE].includes(r.type),Gu=r=>{if(Array.isArray(r.data)&&r.data.length>0)return Ie(r.data);const e=r.columns||[];if(e.length===0)return[];const t={};return e.forEach(s=>{t[s.field]=""}),[t]},fa=(r,e={})=>{const t={...e};if(!Yi(r))return t;const s=r.variable||"",o=Ft(s);return!o||Object.prototype.hasOwnProperty.call(t,o)?t:r.type===be.TABLE?(t[o]=Gu(r),t):(t[o]=r.content??"",t)},Yu=(r=[],e={})=>{let t={...e};return r.forEach(s=>{s.elements.forEach(o=>{t=fa(o,t)})}),t},Ku={sections:[{title:"properties.section.content",tab:"properties",fields:[{label:"properties.label.content",type:"textarea",target:"element",key:"content",placeholder:"properties.label.textContentPlaceholder"},{label:"properties.label.variable",type:"text",target:"element",key:"variable",placeholder:"@variable"}]},{title:"properties.section.typography",tab:"style",fields:[{label:"properties.label.writingMode",type:"select",target:"style",key:"writingMode",options:[{label:"properties.option.horizontal",value:"horizontal-tb"},{label:"properties.option.vertical",value:"vertical-rl"}]},{label:"properties.label.fontSize",type:"number",target:"style",key:"fontSize",min:8,max:96,step:1},{label:"properties.label.color",type:"color",target:"style",key:"color"},{label:"properties.label.textAlign",type:"select",target:"style",key:"textAlign",options:[{label:"properties.option.default",value:""},{label:"properties.option.left",value:"left"},{label:"properties.option.center",value:"center"},{label:"properties.option.right",value:"right"}]},{label:"properties.label.fontFamily",type:"select",target:"style",key:"fontFamily",options:[{label:"properties.option.default",value:""},{label:"properties.option.arial",value:"Arial, sans-serif"},{label:"properties.option.timesNewRoman",value:'"Times New Roman", serif'},{label:"properties.option.courierNew",value:'"Courier New", monospace'},{label:"properties.option.simSun",value:"SimSun, serif"},{label:"properties.option.simHei",value:"SimHei, sans-serif"}]},{label:"properties.label.fontWeight",type:"select",target:"style",key:"fontWeight",options:[{label:"properties.option.default",value:""},{label:"properties.option.normal",value:"400"},{label:"properties.option.medium",value:"500"},{label:"properties.option.bold",value:"700"}]}]},{title:"properties.section.border",tab:"style",fields:[{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:20,step:1},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor"}]}]},Js=Le({__name:"TextElement",props:{element:{}},setup(r){const e=r,t=Be(),s=me(()=>{const o=e.element.variable||"";if(t.isExporting&&o){const i=Ft(o);if(i&&Object.prototype.hasOwnProperty.call(t.testData,i)){const l=t.testData[i];if(l!=null)return String(l)}}return e.element.variable||e.element.content||"Double click to edit"});return(o,i)=>(M(),N("div",{class:"w-full h-full overflow-hidden",style:ke({fontSize:`${r.element.style.fontSize}px`,fontFamily:r.element.style.fontFamily,fontWeight:r.element.style.fontWeight,fontStyle:r.element.style.fontStyle,textAlign:r.element.style.textAlign,textDecoration:r.element.style.textDecoration,color:r.element.style.color,padding:`${r.element.style.padding}px`,writingMode:r.element.style.writingMode||"horizontal-tb"})},I(s.value),5))}}),Xu={class:"w-full h-full overflow-hidden bg-gray-50 flex items-center justify-center"},Zu=["src"],Ju={key:1,class:"text-gray-400 text-xs"},Qu={sections:[{title:"properties.section.imageSource",tab:"properties",fields:[{label:"properties.label.imageSource",type:"image",target:"element",key:"content"}]},{title:"properties.section.border",tab:"style",fields:[{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:20,step:1},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor"}]}]},eh=Le({__name:"ImageElement",props:{element:{}},setup(r){return(e,t)=>(M(),N("div",Xu,[r.element.content?(M(),N("img",{key:0,src:r.element.content,class:"w-full h-full object-contain pointer-events-none",alt:"Element"},null,8,Zu)):(M(),N("span",Ju,"No Image"))]))}}),th=["data-tfoot-repeat","data-auto-paginate","data-custom-script"],rh=["onDblclick"],oh=["onMousedown"],ah=["rowspan","colspan","data-field","onMousedown","onMouseover"],nh={key:0},sh=["colspan"],ih={key:1,class:"h-full border-none bg-transparent"},lh=["colspan"],dh={key:0},ch=["rowspan","colspan","data-field","data-value","onMousedown","onMouseover","onDblclick"],uh={class:"text-sm font-semibold text-gray-700"},hh={class:"flex flex-col gap-1"},ph={class:"text-xs text-gray-500"},gh=["placeholder"],fh={class:"flex flex-col gap-1"},mh={class:"text-xs text-gray-500"},bh=["placeholder"],vh={class:"flex flex-col gap-1"},yh={class:"text-xs text-gray-500"},wh=["placeholder"],xh={class:"flex flex-col gap-1"},kh={class:"text-xs text-gray-500"},_h=["placeholder"],Sh={class:"flex justify-end gap-2 mt-1"},Ch={sections:[{title:"properties.section.dataBehavior",tab:"properties",fields:[{label:"properties.label.autoPaginate",type:"switch",target:"element",key:"autoPaginate"},{label:"properties.label.repeatFooter",type:"switch",target:"element",key:"tfootRepeat"},{label:"properties.label.showFooter",type:"switch",target:"element",key:"showFooter"},{label:"properties.label.variable",type:"text",target:"element",key:"variable",placeholder:"@variable"},{label:"properties.label.columns",type:"code",language:"json",target:"element",key:"columns",placeholder:"properties.label.columnsPlaceholder"},{label:"properties.label.data",type:"code",language:"json",target:"element",key:"data",placeholder:"properties.label.dataPlaceholder"},{label:"properties.label.footerData",type:"code",language:"json",target:"element",key:"footerData",placeholder:"properties.label.footerDataPlaceholder"},{label:"properties.label.customScript",type:"code",language:"javascript",target:"element",key:"customScript",placeholder:"properties.label.customScriptPlaceholder"}]},{title:"properties.section.layoutDimensions",tab:"style",fields:[{label:"properties.label.headerHeight",type:"number",target:"style",key:"headerHeight",min:20,max:200,step:1},{label:"properties.label.rowHeight",type:"number",target:"style",key:"rowHeight",min:20,max:200,step:1},{label:"properties.label.footerHeight",type:"number",target:"style",key:"footerHeight",min:20,max:200,step:1}]},{title:"properties.section.appearance",tab:"style",fields:[{label:"properties.label.backgroundColor",type:"color",target:"style",key:"backgroundColor"},{label:"properties.label.textColor",type:"color",target:"style",key:"color"}]},{title:"properties.section.headerStyle",tab:"style",fields:[{label:"properties.label.background",type:"color",target:"style",key:"headerBackgroundColor"},{label:"properties.label.textColor",type:"color",target:"style",key:"headerColor"},{label:"properties.label.fontSize",type:"number",target:"style",key:"headerFontSize",min:8,max:72,step:1}]},{title:"properties.section.footerStyle",tab:"style",fields:[{label:"properties.label.background",type:"color",target:"style",key:"footerBackgroundColor"},{label:"properties.label.textColor",type:"color",target:"style",key:"footerColor"},{label:"properties.label.fontSize",type:"number",target:"style",key:"footerFontSize",min:8,max:72,step:1}]},{title:"properties.section.border",tab:"style",fields:[{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:20,step:1},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor"}]}]},Eh=Le({__name:"TableElement",props:{element:{}},setup(r){const e=r,{t}=Ne(),s=Be(),o=Xe("modal-container",ae(null));function i(R,A,L="body"){var te;return s.tableSelection&&s.tableSelection.elementId!==e.element.id?!1:((te=s.tableSelection)==null?void 0:te.cells.some(B=>B.rowIndex===R&&B.colField===A&&(B.section||"body")===L))??!1}const l=ae(null),d=ae(null),c=ae({header:"",field:"",value:"",variable:""}),m=ae({top:0,left:0}),x=ae(null),v=async(R,A)=>{if(s.selectedElementId!==e.element.id||e.element.locked)return;const L=E.value.columns[A];if(L){if(l.value=A,d.value=null,c.value={header:L.header,field:L.field,value:"",variable:""},m.value={top:R.clientY+10,left:R.clientX+10},await Qe(),x.value){const te=x.value.getBoundingClientRect(),B=window.innerWidth,J=window.innerHeight;m.value.left+te.width>B&&(m.value.left=B-te.width-20),m.value.top+te.height>J&&(m.value.top=J-te.height-20)}setTimeout(()=>{window.addEventListener("click",p)},100)}},S=async(R,A,L)=>{if(s.selectedElementId!==e.element.id||e.element.locked)return;const te=E.value.footerData[A];if(!te)return;const B=te[L];let J="",ge="";if(B&&typeof B=="object"&&(J=B.value||"",ge=B.field||""),d.value={rowIndex:A,colField:L},l.value=null,c.value={header:"",field:L,value:J,variable:ge},m.value={top:R.clientY+10,left:R.clientX+10},await Qe(),x.value){const _e=x.value.getBoundingClientRect(),de=window.innerWidth,xe=window.innerHeight;m.value.left+_e.width>de&&(m.value.left=de-_e.width-20),m.value.top+_e.height>xe&&(m.value.top=xe-_e.height-20)}setTimeout(()=>{window.addEventListener("click",p)},100)},p=R=>{x.value&&!x.value.contains(R.target)&&f()},f=()=>{l.value=null,d.value=null,window.removeEventListener("click",p)},g=()=>{if(l.value!==null){const R=e.element.columns?[...e.element.columns]:[];if(R.length===0&&E.value.columns.length>0){const A=JSON.parse(JSON.stringify(E.value.columns));A[l.value]&&(A[l.value].header=c.value.header,A[l.value].field=c.value.field,s.updateElement(e.element.id,{columns:A})),f();return}l.value<R.length&&(R[l.value]={...R[l.value],header:c.value.header,field:c.value.field},s.updateElement(e.element.id,{columns:R}))}else if(d.value){const{rowIndex:R,colField:A}=d.value,L=e.element.footerData?JSON.parse(JSON.stringify(e.element.footerData)):[];if(!L[R])return;const te=L[R],B=te[A];B&&typeof B=="object"?(B.value=c.value.value,B.field=c.value.variable):te[A]={value:c.value.value,field:c.value.variable},s.updateElement(e.element.id,{footerData:L})}f()},C=ae(!1),y=ae(null),E=me(()=>{const R=e.element.columns||[];let A=e.element.data||[],L=e.element.footerData||[];if(s.isExporting&&e.element.variable){const J=Ft(e.element.variable),ge=s.testData||{},_e=J?ge[J]:void 0;Array.isArray(_e)&&(A=Ie(_e))}if(e.element.customScript)try{const ge=new Function("data","footerData","columns","type",e.element.customScript)(Ie(A),Ie(L),Ie(R),"global");if(ge&&(ge.data&&(A=ge.data),ge.footerData&&(L=ge.footerData),ge.columns))return{...ge,columns:ge.columns}}catch(J){console.error("Custom script error",J)}const te=Ie(L),B=R.map(J=>J.field);return te.forEach(J=>{Object.keys(J).forEach(ge=>{const _e=J[ge];if(_e&&typeof _e=="object"&&_e.field&&B.includes(_e.field)){const de=_e.field,xe=A.reduce((Se,oe)=>{const ce=parseFloat(oe[de]);return Se+(isNaN(ce)?0:ce)},0);_e.result=xe}})}),{columns:R,data:A,footerData:te}}),z=me(()=>({color:e.element.style.color||"#000000",fontFamily:e.element.style.fontFamily,borderColor:e.element.style.borderColor||"#000",borderWidth:(e.element.style.borderWidth||1)+"px",borderStyle:e.element.style.borderStyle||"solid"})),k=(R,A)=>{if(!R)return"";const L=R[A];if(L&&typeof L=="object"){const te=L.value||"",B=L.printValue!==void 0?L.printValue:L.result!==void 0?L.result:"";return te+B}return L},U=(R,A)=>{if(!R)return"";const L=R[A];if(L&&typeof L=="object"){const te=L.value||"",B=L.result!==void 0?L.result:L.printValue!==void 0?L.printValue:"";return te+B}return L},K=(R,A)=>{const L=R[A];return L&&typeof L=="object"&&"rowSpan"in L?L.rowSpan:1},j=(R,A)=>{const L=R[A];return L&&typeof L=="object"&&"colSpan"in L?L.colSpan:1},D=(R,A)=>{const L=R[A];return!(L&&typeof L=="object"&&(L.rowSpan===0||L.colSpan===0))},O=(R,A)=>{const L=R[A];return L&&typeof L=="object"&&L.style?L.style:{}},Q=ae({}),H=ae(null),P=ae(0),q=ae(0),h=(R,A)=>{if(e.element.locked)return;R.preventDefault(),R.stopPropagation(),H.value=A,P.value=R.clientX;const L=E.value.columns[A];q.value=L.width||100,window.addEventListener("mousemove",$),window.addEventListener("mouseup",Z)},$=R=>{if(H.value===null)return;const A=R.clientX-P.value,L=Math.max(20,q.value+A),te=E.value.columns[H.value];Q.value[te.field]=L},Z=()=>{if(H.value!==null){const R=E.value.columns[H.value],A=Q.value[R.field];if(A){const L=[...e.element.columns||[]];L[H.value]&&(L[H.value]={...L[H.value],width:A},s.updateElement(e.element.id,{columns:L}))}}H.value=null,Q.value={},window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",Z)},F=(R,A,L,te="body")=>{s.selectedElementId===e.element.id&&(R.stopPropagation(),C.value=!0,y.value={rowIndex:A,colField:L,section:te},s.setTableSelection(e.element.id,{rowIndex:A,colField:L,section:te},!1))},ee=(R,A,L="body")=>{if(!C.value||!y.value||y.value.section!==L)return;const te=y.value.rowIndex,B=R,J=E.value.columns.findIndex(ce=>ce.field===y.value.colField),ge=E.value.columns.findIndex(ce=>ce.field===A);if(J===-1||ge===-1)return;const _e=Math.min(te,B),de=Math.max(te,B),xe=Math.min(J,ge),Se=Math.max(J,ge),oe=[];for(let ce=_e;ce<=de;ce++)for(let he=xe;he<=Se;he++)oe.push({rowIndex:ce,colField:E.value.columns[he].field,section:L});s.setTableSelectionCells(e.element.id,oe)},Y=()=>{C.value=!1,y.value=null};return Ye(()=>{window.addEventListener("mouseup",Y)}),Ke(()=>{window.removeEventListener("mouseup",Y)}),(R,A)=>(M(),N("div",{class:"w-full h-full overflow-hidden",style:ke({backgroundColor:r.element.style.backgroundColor||"transparent"})},[a("table",{class:Ce(["w-full border-collapse",{"h-full":!n(s).isExporting}]),"data-tfoot-repeat":r.element.tfootRepeat,"data-auto-paginate":r.element.autoPaginate,"data-custom-script":r.element.customScript},[a("thead",null,[a("tr",null,[(M(!0),N($e,null,De(E.value.columns,(L,te)=>(M(),N("th",{key:L.field,class:"p-1 text-left font-bold text-sm relative group select-none",style:ke({...z.value,width:`${Q.value[L.field]||L.width}px`,height:r.element.style.headerHeight?`${r.element.style.headerHeight}px`:void 0,backgroundColor:r.element.style.headerBackgroundColor||"#f3f4f6",color:r.element.style.headerColor||"#000000",fontSize:r.element.style.headerFontSize?`${r.element.style.headerFontSize}px`:void 0,cursor:n(s).selectedElementId===r.element.id?"pointer":"default"}),onDblclick:B=>v(B,te)},[Te(I(L.header)+" ",1),n(s).selectedElementId===r.element.id&&te<E.value.columns.length-1&&!r.element.locked?(M(),N("div",{key:0,class:Ce(["absolute -right-1 top-0 bottom-0 w-2 cursor-col-resize hover:bg-blue-400 opacity-0 hover:opacity-100 z-10 transition-opacity",{"bg-blue-400 opacity-100":H.value===te}]),onMousedown:B=>h(B,te),onClick:A[0]||(A[0]=je(()=>{},["stop"]))},null,42,oh)):ve("",!0)],44,rh))),128))])]),a("tbody",null,[(M(!0),N($e,null,De(n(s).isExporting?E.value.data:E.value.data.slice(0,5),(L,te)=>(M(),N("tr",{key:te},[(M(!0),N($e,null,De(E.value.columns,B=>(M(),N($e,{key:B.field},[D(L,B.field)?(M(),N("td",{key:0,class:Ce(["p-1 text-sm select-none",{"bg-blue-100 ring-1 ring-blue-400":i(te,B.field)}]),style:ke({...z.value,...O(L,B.field),height:r.element.style.rowHeight?`${r.element.style.rowHeight}px`:void 0}),rowspan:K(L,B.field),colspan:j(L,B.field),"data-field":B.field,onMousedown:J=>F(J,te,B.field),onMouseover:J=>ee(te,B.field)},I(U(L,B.field)),47,ah)):ve("",!0)],64))),128))]))),128)),!n(s).isExporting&&E.value.data.length>5?(M(),N("tr",nh,[a("td",{colspan:E.value.columns.length,class:"p-1 text-center text-gray-500 select-none",style:ke({...z.value,height:r.element.style.rowHeight?`${r.element.style.rowHeight}px`:void 0})}," ... ",12,sh)])):ve("",!0),n(s).isExporting?ve("",!0):(M(),N("tr",ih,[a("td",{colspan:E.value.columns.length||1,class:"border-none p-0"},null,8,lh)]))]),r.element.showFooter?(M(),N("tfoot",dh,[(M(!0),N($e,null,De(E.value.footerData,(L,te)=>(M(),N("tr",{key:te},[(M(!0),N($e,null,De(E.value.columns,B=>(M(),N($e,{key:B.field},[D(L,B.field)?(M(),N("td",{key:0,class:Ce(["p-1 text-sm font-bold select-none",{"!bg-blue-100 ring-1 ring-blue-400":i(te,B.field,"footer")}]),style:ke({...z.value,...O(L,B.field),height:r.element.style.footerHeight?`${r.element.style.footerHeight}px`:void 0,backgroundColor:r.element.style.footerBackgroundColor||"#f9fafb",color:r.element.style.footerColor||"#000000",fontSize:r.element.style.footerFontSize?`${r.element.style.footerFontSize}px`:void 0,cursor:n(s).selectedElementId===r.element.id?"pointer":"default"}),rowspan:K(L,B.field),colspan:j(L,B.field),"data-field":B.field,"data-value":k(L,B.field),onMousedown:J=>F(J,te,B.field,"footer"),onMouseover:J=>ee(te,B.field,"footer"),onDblclick:J=>S(J,te,B.field)},I(U(L,B.field)),47,ch)):ve("",!0)],64))),128))]))),128))])):ve("",!0)],10,th),(M(),Me(ot,{to:n(o)||"body"},[l.value!==null||d.value?(M(),N("div",{key:0,ref_key:"editFormRef",ref:x,class:"fixed z-[9999] bg-white shadow-xl border border-gray-200 rounded-lg p-4 w-64 flex flex-col gap-3 pointer-events-auto",style:ke({top:`${m.value.top}px`,left:`${m.value.left}px`}),onClick:A[5]||(A[5]=je(()=>{},["stop"]))},[a("h4",uh,I(d.value?n(t)("properties.label.editCell"):n(t)("properties.label.editColumn")),1),l.value!==null?(M(),N($e,{key:0},[a("div",hh,[a("label",ph,I(n(t)("properties.label.headerText")),1),Ae(a("input",{"onUpdate:modelValue":A[1]||(A[1]=L=>c.value.header=L),class:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 focus:outline-none",placeholder:n(t)("properties.label.headerNamePlaceholder"),onKeydown:_t(g,["enter"]),autoFocus:""},null,40,gh),[[Oe,c.value.header]])]),a("div",fh,[a("label",mh,I(n(t)("properties.label.fieldKey")),1),Ae(a("input",{"onUpdate:modelValue":A[2]||(A[2]=L=>c.value.field=L),class:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 focus:outline-none",placeholder:n(t)("properties.label.fieldKey"),onKeydown:_t(g,["enter"])},null,40,bh),[[Oe,c.value.field]])])],64)):ve("",!0),d.value?(M(),N($e,{key:1},[a("div",vh,[a("label",yh,I(n(t)("properties.label.content")),1),Ae(a("input",{"onUpdate:modelValue":A[3]||(A[3]=L=>c.value.value=L),class:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 focus:outline-none",placeholder:n(t)("properties.label.displayTextPlaceholder"),onKeydown:_t(g,["enter"]),autoFocus:""},null,40,wh),[[Oe,c.value.value]])]),a("div",xh,[a("label",kh,I(n(t)("properties.label.variableField")),1),Ae(a("input",{"onUpdate:modelValue":A[4]||(A[4]=L=>c.value.variable=L),class:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 focus:outline-none",placeholder:n(t)("properties.label.dataFieldPlaceholder"),onKeydown:_t(g,["enter"])},null,40,_h),[[Oe,c.value.variable]])])],64)):ve("",!0),a("div",Sh,[a("button",{onClick:f,class:"px-3 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded"},I(n(t)("common.cancel")),1),a("button",{onClick:g,class:"px-3 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 rounded"},I(n(t)("common.save")),1)])],4)):ve("",!0)],8,["to"]))],4))}}),Th={class:"page-number-text"},Ih={sections:[{title:"properties.section.labelContent",tab:"properties",fields:[{label:"properties.label.labelText",type:"text",target:"element",key:"labelText",placeholder:"properties.label.labelTextPlaceholder"},{label:"properties.label.labelPosition",type:"select",target:"element",key:"labelPosition",options:[{label:"properties.option.before",value:"before"},{label:"properties.option.after",value:"after"}]},{label:"properties.label.pageFormat",type:"select",target:"element",key:"format",options:[{label:"properties.option.numberOnly",value:"1"},{label:"properties.option.page1",value:"Page 1"},{label:"properties.option.oneTotal",value:"1/Total"}]}]},{title:"properties.section.paginationTypography",tab:"style",fields:[{label:"properties.label.fontSize",type:"number",target:"style",key:"fontSize",min:8,max:96,step:1},{label:"properties.label.color",type:"color",target:"style",key:"color"},{label:"properties.label.textAlign",type:"select",target:"style",key:"textAlign",options:[{label:"properties.option.default",value:""},{label:"properties.option.left",value:"left"},{label:"properties.option.center",value:"center"},{label:"properties.option.right",value:"right"}]},{label:"properties.label.fontFamily",type:"select",target:"style",key:"fontFamily",options:[{label:"properties.option.default",value:""},{label:"properties.option.arial",value:"Arial, sans-serif"},{label:"properties.option.timesNewRoman",value:'"Times New Roman", serif'},{label:"properties.option.courierNew",value:'"Courier New", monospace'},{label:"properties.option.simSun",value:"SimSun, serif"},{label:"properties.option.simHei",value:"SimHei, sans-serif"}]},{label:"properties.label.fontWeight",type:"select",target:"style",key:"fontWeight",options:[{label:"properties.option.default",value:""},{label:"properties.option.normal",value:"400"},{label:"properties.option.medium",value:"500"},{label:"properties.option.bold",value:"700"}]}]},{title:"properties.section.labelStyle",tab:"style",fields:[{label:"properties.label.labelFontSize",type:"number",target:"element",key:"labelFontSize",min:8,max:96,step:1},{label:"properties.label.labelColor",type:"color",target:"element",key:"labelColor"},{label:"properties.label.labelFontFamily",type:"select",target:"element",key:"labelFontFamily",options:[{label:"properties.option.default",value:""},{label:"properties.option.arial",value:"Arial, sans-serif"},{label:"properties.option.timesNewRoman",value:'"Times New Roman", serif'},{label:"properties.option.courierNew",value:'"Courier New", monospace'},{label:"properties.option.simSun",value:"SimSun, serif"},{label:"properties.option.simHei",value:"SimHei, sans-serif"}]},{label:"properties.label.labelFontWeight",type:"select",target:"element",key:"labelFontWeight",options:[{label:"properties.option.default",value:""},{label:"properties.option.normal",value:"400"},{label:"properties.option.medium",value:"500"},{label:"properties.option.bold",value:"700"}]},{label:"properties.label.labelBackgroundColor",type:"color",target:"element",key:"labelBackgroundColor"},{label:"properties.label.labelBorderStyle",type:"select",target:"element",key:"labelBorderStyle",options:[{label:"properties.option.none",value:""},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.labelBorderWidth",type:"number",target:"element",key:"labelBorderWidth",min:0,max:20,step:1},{label:"properties.label.labelBorderColor",type:"color",target:"element",key:"labelBorderColor"}]},{title:"properties.section.frameBorder",tab:"style",fields:[{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:20,step:1},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor"}]}]},$h=Le({__name:"PageNumberElement",props:{element:{},pageIndex:{},totalPages:{}},setup(r){const e=r,{t}=Ne(),s=me(()=>{const o=e.pageIndex+1,i=e.totalPages||1;switch(e.element.format||"1/Total"){case"1":return`${o}`;case"Page 1":return t("properties.option.page1").replace("1",o.toString());case"1/Total":return`${o}/${i}`;default:return`${o}/${i}`}});return(o,i)=>(M(),N("div",{class:"w-full h-full overflow-hidden","data-print-type":"page-number",style:ke({fontSize:`${r.element.style.fontSize}px`,fontFamily:r.element.style.fontFamily,fontWeight:r.element.style.fontWeight,fontStyle:r.element.style.fontStyle,textAlign:r.element.style.textAlign,color:r.element.style.color,padding:`${r.element.style.padding||0}px`})},[r.element.labelText&&r.element.labelPosition!=="after"?(M(),N("span",{key:0,style:ke({fontSize:r.element.labelFontSize?`${r.element.labelFontSize}px`:void 0,fontFamily:r.element.labelFontFamily||void 0,fontWeight:r.element.labelFontWeight||void 0,color:r.element.labelColor||void 0,backgroundColor:r.element.labelBackgroundColor||"transparent",borderStyle:r.element.labelBorderStyle||"none",borderWidth:`${r.element.labelBorderWidth||0}px`,borderColor:r.element.labelBorderColor||"transparent",marginRight:"4px",padding:"0 4px"})},I(r.element.labelText),5)):ve("",!0),a("span",Th,I(s.value),1),r.element.labelText&&r.element.labelPosition==="after"?(M(),N("span",{key:1,style:ke({fontSize:r.element.labelFontSize?`${r.element.labelFontSize}px`:void 0,fontFamily:r.element.labelFontFamily||void 0,fontWeight:r.element.labelFontWeight||void 0,color:r.element.labelColor||void 0,backgroundColor:r.element.labelBackgroundColor||"transparent",borderStyle:r.element.labelBorderStyle||"none",borderWidth:`${r.element.labelBorderWidth||0}px`,borderColor:r.element.labelBorderColor||"transparent",marginLeft:"4px",padding:"0 4px"})},I(r.element.labelText),5)):ve("",!0)],4))}});var Ah=cl();const Ki=Ct(Ah),zh={class:"w-full h-full flex items-center justify-center overflow-hidden"},Ph={sections:[{title:"properties.section.content",tab:"properties",fields:[{label:"properties.label.content",type:"text",target:"element",key:"content",placeholder:"properties.label.barcodeContentPlaceholder"},{label:"properties.label.variable",type:"text",target:"element",key:"variable",placeholder:"@variable"}]},{title:"properties.section.barcodeSettings",tab:"style",fields:[{label:"properties.label.format",type:"select",target:"style",key:"barcodeFormat",options:[{label:"properties.option.code128",value:"CODE128"},{label:"properties.option.ean13",value:"EAN13"},{label:"properties.option.upc",value:"UPC"},{label:"properties.option.code39",value:"CODE39"},{label:"properties.option.itf14",value:"ITF14"},{label:"properties.option.msi",value:"MSI"},{label:"properties.option.pharmacode",value:"pharmacode"}]},{label:"properties.label.showText",type:"select",target:"style",key:"showText",options:[{label:"properties.option.yes",value:!0},{label:"properties.option.no",value:!1}]},{label:"properties.label.color",type:"color",target:"style",key:"color"},{label:"properties.label.lineWidth",type:"number",target:"style",key:"barcodeWidth",placeholder:"2"},{label:"properties.label.barcodeHeight",type:"number",target:"style",key:"barcodeHeight",placeholder:"40"},{label:"properties.label.margin",type:"number",target:"style",key:"margin",placeholder:"0"},{label:"properties.label.fontSize",type:"number",target:"style",key:"fontSize",placeholder:"20"},{label:"properties.label.textPosition",type:"select",target:"style",key:"textPosition",options:[{label:"properties.option.bottom",value:"bottom"},{label:"properties.option.top",value:"top"}]},{label:"properties.label.textAlign",type:"select",target:"style",key:"textAlign",options:[{label:"properties.option.left",value:"left"},{label:"properties.option.center",value:"center"},{label:"properties.option.right",value:"right"}]}]}]},Lh=Le({__name:"BarcodeElement",props:{element:{}},setup(r){const e=r,t=Be(),s=ae(null),o=me(()=>{const l=e.element.variable||"";if(t.isExporting&&l){const d=Ft(l);if(d&&Object.prototype.hasOwnProperty.call(t.testData,d)){const c=t.testData[d];if(c!=null)return String(c)}}return e.element.variable||e.element.content||"12345678"}),i=()=>{if(s.value)try{const l=o.value,d=e.element.style;Ki(s.value,l,{format:d.barcodeFormat||"CODE128",lineColor:d.color||"#000000",width:Number(d.barcodeWidth)||2,height:Number(d.barcodeHeight)||40,displayValue:d.showText!==!1&&d.showText!=="false",fontOptions:d.fontOptions||"",font:d.font||"monospace",textAlign:d.textAlign||"center",textPosition:d.textPosition||"bottom",textMargin:Number(d.textMargin)||2,fontSize:Number(d.fontSize)||20,background:"transparent",margin:Number(d.margin)||0})}catch(l){console.error("Barcode render error",l)}};return Ye(()=>{Qe(i)}),ze(()=>[e.element.content,e.element.variable,e.element.style,t.isExporting,t.testData],()=>{Qe(i)},{deep:!0}),(l,d)=>(M(),N("div",zh,[a("img",{ref_key:"barcodeRef",ref:s,class:"w-full h-full object-contain pointer-events-none"},null,512)]))}});var Mh=ul();const Xi=Ct(Mh),Rh={class:"w-full h-full flex items-center justify-center overflow-hidden"},Dh=["src"],Bh={sections:[{title:"properties.section.content",tab:"properties",fields:[{label:"properties.label.content",type:"text",target:"element",key:"content",placeholder:"properties.label.qrContentPlaceholder"},{label:"properties.label.variable",type:"text",target:"element",key:"variable",placeholder:"@variable"}]},{title:"properties.section.qrSettings",tab:"style",fields:[{label:"properties.label.errorCorrection",type:"select",target:"style",key:"qrErrorCorrection",options:[{label:"properties.option.eccLow",value:"L"},{label:"properties.option.eccMedium",value:"M"},{label:"properties.option.eccQuartile",value:"Q"},{label:"properties.option.eccHigh",value:"H"}]},{label:"properties.label.color",type:"color",target:"style",key:"color"}]}]},Oh=Le({__name:"QRCodeElement",props:{element:{}},setup(r){const e=r,t=Be(),s=ae(""),o=me(()=>{const l=e.element.variable||"";if(t.isExporting&&l){const d=Ft(l);if(d&&Object.prototype.hasOwnProperty.call(t.testData,d)){const c=t.testData[d];if(c!=null)return String(c)}}return e.element.variable||e.element.content||"https://example.com"}),i=async()=>{try{const l=o.value;s.value=await Xi.toDataURL(l,{margin:0,color:{dark:e.element.style.color||"#000000",light:"#00000000"},errorCorrectionLevel:e.element.style.qrErrorCorrection||"M"})}catch(l){console.error("QR render error",l)}};return Ye(()=>Qe(i)),ze(()=>[e.element.content,e.element.variable,e.element.style,t.isExporting,t.testData],()=>Qe(i),{deep:!0}),(l,d)=>(M(),N("div",Rh,[s.value?(M(),N("img",{key:0,src:s.value,class:"w-full h-full object-contain pointer-events-none",draggable:"false"},null,8,Dh)):ve("",!0)]))}}),qh={class:"w-full h-full flex items-center justify-center"},Fh={sections:[{title:"properties.section.lineStyle",tab:"style",fields:[{label:"properties.label.color",type:"color",target:"style",key:"borderColor",defaultValue:"#000000"},{label:"properties.label.thickness",type:"number",target:"style",key:"borderWidth",min:1,max:100,step:1,defaultValue:1},{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",defaultValue:"solid",options:[{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]}]}]},jh=Le({__name:"LineElement",props:{element:{}},setup(r){return(e,t)=>(M(),N("div",qh,[a("div",{class:"w-full",style:ke({borderTopWidth:`${r.element.style.borderWidth||1}px`,borderTopStyle:r.element.style.borderStyle||"solid",borderTopColor:r.element.style.borderColor||"#000000"})},null,4)]))}}),Nh={sections:[{title:"properties.section.appearance",tab:"style",fields:[{label:"properties.label.background",type:"color",target:"style",key:"backgroundColor",defaultValue:"transparent"},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor",defaultValue:"#000000"},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:100,defaultValue:1},{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",defaultValue:"solid",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.cornerRadius",type:"number",target:"style",key:"borderRadius",min:0,max:1e3}]}]},Hh=Le({__name:"RectElement",props:{element:{}},setup(r){return(e,t)=>(M(),N("div",{class:"w-full h-full",style:ke({backgroundColor:r.element.style.backgroundColor||"transparent",borderWidth:`${r.element.style.borderWidth||1}px`,borderStyle:r.element.style.borderStyle||"solid",borderColor:r.element.style.borderColor||"#000000",borderRadius:`${r.element.style.borderRadius||0}px`})},null,4))}}),Uh={sections:[{title:"properties.section.appearance",tab:"style",fields:[{label:"properties.label.background",type:"color",target:"style",key:"backgroundColor",defaultValue:"transparent"},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor",defaultValue:"#000000"},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:100,defaultValue:1},{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",defaultValue:"solid",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]}]}]},Vh=Le({__name:"CircleElement",props:{element:{}},setup(r){return(e,t)=>(M(),N("div",{class:"w-full h-full rounded-full",style:ke({backgroundColor:r.element.style.backgroundColor||"transparent",borderWidth:`${r.element.style.borderWidth||1}px`,borderStyle:r.element.style.borderStyle||"solid",borderColor:r.element.style.borderColor||"#000000"})},null,4))}}),Wh={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Gh(r,e){return M(),N("svg",Wh,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"},null,-1)])])}const Pa=Ee({name:"material-symbols-add",render:Gh}),Yh={class:"absolute top-0 -right-12 flex flex-col gap-2 z-10"},Kh=["title"],Xh=["title","onClick"],Zh=["title","onClick"],Jh=["title","onClick"],Qh=["id","onDrop","onMousedown","onContextmenu"],ep={key:0,"data-print-exclude":"true",class:"absolute inset-0 pointer-events-none opacity-50",style:{"background-image":"linear-gradient(#e5e7eb 1px, transparent 1px), linear-gradient(90deg, #e5e7eb 1px, transparent 1px)","background-size":"20px 20px"}},tp=["onMousedown"],rp=["onMousedown"],op={key:5,"data-print-exclude":"true",class:"marker absolute inset-0 pointer-events-none z-50 opacity-50"},ap={key:6,"data-print-exclude":"true",class:"margin-guides absolute inset-0 pointer-events-none z-40"},Zi=Le({__name:"Canvas",setup(r){const e=Be(),t=Xe("designer-root",ae(null)),s=()=>{var R;return((R=t==null?void 0:t.value)==null?void 0:R.getRootNode())||document},{t:o}=Ne(),i=me(()=>e.pages),l=me(()=>e.zoom),d=me(()=>e.pageSpacingX||0),c=me(()=>e.pageSpacingX||0),m=me(()=>e.pageSpacingY||0),x=me(()=>e.pageSpacingY||0),v=ae(!1),S=ae(null),p=ae(null),f=(R,A)=>{R.preventDefault(),R.stopPropagation(),v.value=!0,S.value=A;const L=R.target;p.value=L.closest(".print-page"),window.addEventListener("mousemove",g),window.addEventListener("mouseup",C)},g=R=>{if(!v.value||!p.value)return;const A=p.value.getBoundingClientRect(),L=(R.clientY-A.top)/e.zoom,te=Math.max(0,Math.min(e.canvasSize.height,L));if(S.value==="header"){const B=e.pageSpacingY||0,J=Math.max(0,te-B);e.setHeaderHeight(Math.round(J))}else if(S.value==="footer"){const B=e.pageSpacingY||0,J=Math.max(0,e.canvasSize.height-te-B);e.setFooterHeight(Math.round(J))}},C=()=>{v.value=!1,S.value=null,p.value=null,window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",C)};Ke(()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",C)});const y=me(()=>{const R={width:`${e.canvasSize.width}px`,height:`${e.canvasSize.height}px`,backgroundColor:e.canvasBackground};return z.value?{...R,...z.value}:R}),E=R=>R.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),z=me(()=>{const R=e.watermark;if(!R||!R.enabled||!R.text)return null;const A=E(R.text),L=Number.isFinite(R.angle)?R.angle:-30,te=Math.max(6,R.size||24),B=Math.max(40,R.density||160),J=R.color||"#000000",ge=Math.min(1,Math.max(0,R.opacity??.1)),_e=`<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" width="${B}" height="${B}"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="${J}" fill-opacity="${ge}" font-size="${te}" transform="rotate(${L} ${B/2} ${B/2})">${A}</text></svg>`;return{backgroundImage:`url("data:image/svg+xml,${encodeURIComponent(_e)}")`,backgroundRepeat:"repeat",backgroundSize:`${B}px ${B}px`}}),k=me(()=>!e.isDragging||!e.selectedElementId?-1:e.pages.findIndex(R=>R.elements.some(A=>A.id===e.selectedElementId))),U=ae(!1),K=ae({x:0,y:0}),j=ae({x:0,y:0}),D=ae(null),O=ae(!1),Q=me(()=>{if(!U.value)return{display:"none"};const R=Math.min(K.value.x,j.value.x),A=Math.min(K.value.y,j.value.y),L=Math.abs(j.value.x-K.value.x),te=Math.abs(j.value.y-K.value.y);return{position:"absolute",left:`${R}px`,top:`${A}px`,width:`${L}px`,height:`${te}px`,border:"1px solid var(--brand-500)",backgroundColor:"var(--brand-500-alpha-10)",pointerEvents:"none",zIndex:1e3}}),H=R=>{switch(R){case be.TEXT:return Js;case be.IMAGE:return eh;case be.TABLE:return Eh;case be.PAGE_NUMBER:return $h;case be.BARCODE:return Lh;case be.QRCODE:return Oh;case be.LINE:return jh;case be.RECT:return Hh;case be.CIRCLE:return Vh;default:return Js}},P=(R,A)=>{var oe;R.preventDefault();const L=(oe=R.dataTransfer)==null?void 0:oe.getData("application/json");if(!L)return;const{type:te,payload:B}=JSON.parse(L),J=R.currentTarget.getBoundingClientRect(),ge=(R.clientX-J.left)/e.zoom,_e=(R.clientY-J.top)/e.zoom;if(B){e.addElement({...B,x:ge,y:_e,locked:!1},A);return}const de={[be.PAGE_NUMBER]:52,[be.BARCODE]:200,[be.QRCODE]:100,[be.LINE]:200,[be.RECT]:100,[be.CIRCLE]:100},xe={[be.PAGE_NUMBER]:20,[be.BARCODE]:80,[be.QRCODE]:100,[be.TABLE]:150,[be.LINE]:20,[be.RECT]:100,[be.CIRCLE]:100},Se={type:te,x:ge,y:_e,width:de[te]||200,height:xe[te]||100,variable:"",style:{fontSize:14,color:"#000000",...te===be.RECT||te===be.CIRCLE||te===be.PAGE_NUMBER?{backgroundColor:"transparent"}:{},...te===be.TABLE?{headerBackgroundColor:"#f3f4f6",headerColor:"#000000",footerBackgroundColor:"#f9fafb",footerColor:"#000000"}:{}},content:te===be.TEXT?o("canvas.newText"):te===be.BARCODE?"12345678":te===be.QRCODE?"https://example.com":"",format:te===be.PAGE_NUMBER?"1/Total":void 0,columns:te===be.TABLE?[{field:"id",header:o("canvas.defaultTableHeaders.id"),width:50},{field:"name",header:o("canvas.defaultTableHeaders.name"),width:100},{field:"qty",header:o("canvas.defaultTableHeaders.qty"),width:60},{field:"price",header:o("canvas.defaultTableHeaders.price"),width:80},{field:"total",header:o("canvas.defaultTableHeaders.total"),width:80}]:void 0,data:te===be.TABLE?Array.from({length:30},(ce,he)=>({id:he+1,name:`${o("canvas.defaultTableData.item")} ${he+1}`,qty:he%5+1,price:100+he*10,total:(he%5+1)*(100+he*10)})):void 0,showFooter:te===be.TABLE?!0:void 0,tfootRepeat:te===be.TABLE?!0:void 0,autoPaginate:te===be.TABLE?!0:void 0,footerData:te===be.TABLE?[{id:{value:o("canvas.defaultTableData.pageSum")},qty:{value:"",field:"{#pageQty}"},total:{value:"",field:"{#pageSum}"}},{id:{value:o("canvas.defaultTableData.total")},qty:{value:"",field:"{#totalQty}"},total:{value:"",field:"{#totalSum}"}},{id:{value:o("canvas.defaultTableData.inWords")},total:{value:"",field:"{#totalCap}"}}]:void 0,customScript:te===be.TABLE?`// RMB Uppercase Conversion
try {
  function digitUppercase(n) {
      var fraction = ['角', '分'];
      var digit = [
          '零', '壹', '贰', '叁', '肆',
          '伍', '陆', '柒', '捌', '玖'
      ];
      var unit = [
          ['元', '万', '亿'],
          ['', '拾', '佰', '仟']
      ];
      var head = n < 0 ? '欠' : '';
      n = Math.abs(n);
      var s = '';
      for (var i = 0; i < fraction.length; i++) {
          s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, '');
      }
      s = s || '整';
      n = Math.floor(n);
      for (var i = 0; i < unit[0].length && n > 0; i++) {
          var p = '';
          for (var j = 0; j < unit[1].length && n > 0; j++) {
              p = digit[n % 10] + unit[1][j] + p;
              n = Math.floor(n / 10);
          }
          s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s;
      }
      return head + s.replace(/(零.)*零元/, '元')
          .replace(/(零.)+/g, '零')
          .replace(/^整$/, '零元整');
  }

  // 1. Calculate Total (works for both Global and Page data)
  let totalAmount = 0;
  let totalQty = 0;
  if (data && Array.isArray(data)) {
    data.forEach(row => {
      // Ensure numeric values
      const val = Number(row.total) || 0;
      const qty = Number(row.qty) || 0;
      totalAmount += val;
      totalQty += qty;
    });
  }

  // 2. Update Footer Data
  if (footerData && Array.isArray(footerData)) {
    footerData.forEach(row => {
      Object.keys(row).forEach(key => {
        const val = row[key];
        const processValue = (v) => {
           if (typeof v !== 'string') return v;
           
           // Global replacements (Grand Total)
           if (typeof type === 'undefined' || type !== 'page') {
               if (v.includes('{#totalSum}')) return v.replace('{#totalSum}', totalAmount.toFixed(2));
               if (v.includes('{#totalQty}')) return v.replace('{#totalQty}', String(totalQty));
               if (v.includes('{#totalCap}')) return v.replace('{#totalCap}', digitUppercase(totalAmount));
               
               // For {#pageSum}, we want to show the Grand Total in the Designer (visual feedback),
               // but pass the original {#pageSum} token to the Print logic (via data-value).
               if (v.includes('{#pageSum}')) {
                   const displayVal = v.replace('{#pageSum}', totalAmount.toFixed(2));
                   // printValue keeps {#pageSum} but resolves other globals
                   const printVal = v.replace('{#totalSum}', totalAmount.toFixed(2))
                                   .replace('{#totalQty}', String(totalQty))
                                   .replace('{#totalCap}', digitUppercase(totalAmount)); 
                   
                   return { value: displayVal, printValue: printVal };
               }

               // For {#pageQty}
               if (v.includes('{#pageQty}')) {
                   const displayVal = v.replace('{#pageQty}', String(totalQty));
                   // printValue keeps {#pageQty} but resolves other globals
                   const printVal = v.replace('{#totalSum}', totalAmount.toFixed(2))
                                   .replace('{#totalQty}', String(totalQty))
                                   .replace('{#totalCap}', digitUppercase(totalAmount)); 
                   
                   return { value: displayVal, printValue: printVal };
               }
           }
           
           // Page replacements (Page Sum)
           if (typeof type !== 'undefined' && type === 'page') {
               if (v.includes('{#pageSum}')) return v.replace('{#pageSum}', totalAmount.toFixed(2));
               if (v.includes('{#pageQty}')) return v.replace('{#pageQty}', String(totalQty));
           }
           return v;
        };

        // Handle object values
        if (val && typeof val === 'object') {
           // If it has a 'field' property, check if it contains a variable
           if (val.field && typeof val.field === 'string') {
               const processed = processValue(val.field);
               // If processed is different from field (meaning a replacement happened)
               // OR if processValue returned an object (for {#pageSum})
               if (processed !== val.field || typeof processed === 'object') {
                   if (typeof processed === 'object') {
                       val.result = processed.value; // Store in result, keep val.value as text
                       val.printValue = processed.printValue;
                   } else {
                       val.result = processed;
                   }
               }
           }
           // Also check 'value' if it was set manually and looks like a variable
           else if (val.value && typeof val.value === 'string') {
               // Only process if value looks like a variable, otherwise it's just text
               if (val.value.includes('{#')) {
                  const processed = processValue(val.value);
                  if (typeof processed === 'object') {
                       val.result = processed.value;
                       val.printValue = processed.printValue;
                   } else {
                       val.result = processed;
                   }
               }
           }
        }
      });
    });
  }

  return { data, footerData };
} catch (e) {
  console.error('Script Execution Error:', e);
  return { data, footerData };
}`:void 0};e.addElement(Se,A)},q=R=>{R.preventDefault()},h=R=>{!R.ctrlKey&&!R.metaKey&&!O.value&&e.selectElement(null)},$=(R,A)=>{if(R.button!==0||R.ctrlKey||R.metaKey||R.target.closest(".element-wrapper"))return;R.preventDefault(),U.value=!0,D.value=A;const B=R.currentTarget.getBoundingClientRect();K.value={x:(R.clientX-B.left)/l.value,y:(R.clientY-B.top)/l.value},j.value={...K.value},window.addEventListener("mousemove",Z),window.addEventListener("mouseup",F)},Z=R=>{if(!U.value||D.value===null)return;const L=s().getElementById(`page-${D.value}`);if(!L)return;const te=L.getBoundingClientRect();j.value={x:(R.clientX-te.left)/l.value,y:(R.clientY-te.top)/l.value}},F=()=>{if(!U.value)return;const R=Math.min(K.value.x,j.value.x),A=Math.min(K.value.y,j.value.y),L=Math.abs(j.value.x-K.value.x),te=Math.abs(j.value.y-K.value.y),B=[];if(D.value!==null){const J=i.value[D.value];if(J)for(const ge of J.elements){const _e=ge.x+ge.width,de=ge.y+ge.height,xe=R+L,Se=A+te;ge.x<xe&&_e>R&&ge.y<Se&&de>A&&B.push(ge.id)}}e.setSelection(B),U.value=!1,D.value=null,O.value=!0,setTimeout(()=>{O.value=!1},50),window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",F)},ee=(R,A)=>{var xe;const te=R.currentTarget.getBoundingClientRect(),B=(R.clientX-te.left)/l.value,J=(R.clientY-te.top)/l.value,ge=i.value[A];if(!ge)return;let _e=null,de=-1/0;for(let Se=0;Se<ge.elements.length;Se++){const oe=ge.elements[Se];if(B>=oe.x&&B<=oe.x+oe.width&&J>=oe.y&&J<=oe.y+oe.height){const he=((xe=oe.style)==null?void 0:xe.zIndex)??1;he>=de&&(de=he,_e=oe.id)}}_e&&e.selectElement(_e,!1)},Y=()=>{if(i.value.length===0)return[];const R=i.value[0],A=e.pageSpacingY||0,L=e.pageSpacingY||0;return R.elements.filter(te=>e.showHeaderLine&&te.y<e.headerHeight+A||e.showFooterLine&&te.y>=e.canvasSize.height-(e.footerHeight+L))};return(R,A)=>(M(),N("div",{class:"flex flex-col",style:ke({transform:`scale(${l.value})`,transformOrigin:"top left",width:"fit-content",rowGap:"20px"})},[(M(!0),N($e,null,De(i.value,(L,te)=>(M(),N("div",{key:L.id,class:"relative group"},[a("div",Yh,[a("button",{class:"w-8 h-8 flex items-center justify-center bg-white border border-gray-200 rounded shadow hover:bg-blue-50 hover:text-blue-600 text-gray-600 transition-colors",title:n(o)("canvas.addPage"),onClick:A[0]||(A[0]=B=>n(e).addPage())},[ue(n(Pa))],8,Kh),a("button",{class:"w-8 h-8 flex items-center justify-center bg-white border border-gray-200 rounded shadow hover:bg-blue-50 hover:text-blue-600 text-gray-600 transition-colors",title:n(o)("canvas.copyPage"),onClick:B=>n(e).copyPage(te)},[ue(n(It))],8,Xh),n(e).copiedPage?(M(),N("button",{key:0,class:"w-8 h-8 flex items-center justify-center bg-white border border-gray-200 rounded shadow hover:bg-blue-50 hover:text-blue-600 text-gray-600 transition-colors",title:n(o)("canvas.pastePage"),onClick:B=>n(e).pastePage(te)},[ue(n(Aa))],8,Zh)):ve("",!0),te>0?(M(),N("button",{key:1,class:"w-8 h-8 flex items-center justify-center bg-white border border-gray-200 rounded shadow hover:bg-red-50 hover:text-red-600 text-gray-600 transition-colors",title:n(o)("canvas.deletePage"),onClick:B=>n(e).removePage(te)},[ue(n(Tt))],8,Jh)):ve("",!0)]),a("div",{id:`page-${te}`,class:"print-page shadow-lg relative overflow-hidden transition-all",style:ke([y.value,{overflow:k.value===te?"visible":"hidden",zIndex:k.value===te?50:1}]),onDrop:B=>P(B,te),onDragover:q,onMousedown:B=>$(B,te),onContextmenu:B=>ee(B,te),onClick:je(h,["self"])},[n(e).showGrid?(M(),N("div",ep)):ve("",!0),U.value&&D.value===te?(M(),N("div",{key:1,"data-print-exclude":"true",style:ke(Q.value)},null,4)):ve("",!0),n(e).showHeaderLine?(M(),N("div",{key:2,"data-print-exclude":"true",class:Ce(["absolute left-0 w-full z-20 group flex flex-col justify-center items-center",te===0?"cursor-row-resize":"cursor-default"]),style:ke({top:`${n(e).headerHeight+m.value}px`,left:`${d.value}px`,width:`${n(e).canvasSize.width-d.value-c.value}px`,height:"12px",marginTop:"-6px"}),onMousedown:B=>te===0&&f(B,"header")},[a("div",{class:"w-full h-px",style:ke({backgroundImage:te===0?"linear-gradient(to right, #f87171 60%, transparent 40%)":"linear-gradient(to right, #d1d5db 60%, transparent 40%)",backgroundSize:"20px 1px",backgroundRepeat:"repeat-x"})},null,4),a("div",{class:Ce(["absolute right-0 -top-4 text-xs bg-white/80 px-1 pointer-events-none",te===0?"text-red-400":"text-gray-400"])},I(n(o)("canvas.headerLabel")),3)],46,tp)):ve("",!0),n(e).showFooterLine?(M(),N("div",{key:3,"data-print-exclude":"true",class:Ce(["absolute left-0 w-full z-20 group flex flex-col justify-center items-center",te===0?"cursor-row-resize":"cursor-default"]),style:ke({bottom:`${n(e).footerHeight+x.value}px`,left:`${d.value}px`,width:`${n(e).canvasSize.width-d.value-c.value}px`,height:"12px",marginBottom:"-6px"}),onMousedown:B=>te===0&&f(B,"footer")},[a("div",{class:"w-full h-px",style:ke({backgroundImage:te===0?"linear-gradient(to right, #f87171 60%, transparent 40%)":"linear-gradient(to right, #d1d5db 60%, transparent 40%)",backgroundSize:"20px 1px",backgroundRepeat:"repeat-x"})},null,4),a("div",{class:Ce(["absolute right-0 -bottom-4 text-xs bg-white/80 px-1 pointer-events-none",te===0?"text-red-400":"text-gray-400"])},I(n(o)("canvas.footerLabel")),3)],46,rp)):ve("",!0),te>0&&i.value.length>0?(M(!0),N($e,{key:4},De(Y(),B=>(M(),Me(Zs,{key:`global-${B.id}`,element:B,"is-selected":n(e).selectedElementId===B.id||n(e).selectedElementIds.includes(B.id),zoom:l.value,"page-index":0,"read-only":!0},{default:gt(()=>[(M(),Me(Bt(H(B.type)),{element:B,"page-index":te,"total-pages":i.value.length},null,8,["element","page-index","total-pages"]))]),_:2},1032,["element","is-selected","zoom"]))),128)):ve("",!0),(M(!0),N($e,null,De(L.elements,B=>(M(),Me(Zs,{key:B.id,element:B,"is-selected":n(e).selectedElementId===B.id||n(e).selectedElementIds.includes(B.id),zoom:l.value,"page-index":te},{default:gt(()=>[(M(),Me(Bt(H(B.type)),{element:B,"page-index":te,"total-pages":i.value.length},null,8,["element","page-index","total-pages"]))]),_:2},1032,["element","is-selected","zoom","page-index"]))),128)),n(e).showCornerMarkers?(M(),N("div",op,[a("div",{class:"absolute w-3 h-3 border-t-2 border-l-2 border-gray-300",style:ke({top:`${m.value}px`,left:`${d.value}px`})},null,4),a("div",{class:"absolute w-3 h-3 border-t-2 border-r-2 border-gray-300",style:ke({top:`${m.value}px`,right:`${c.value}px`})},null,4),a("div",{class:"absolute w-3 h-3 border-b-2 border-l-2 border-gray-300",style:ke({bottom:`${x.value}px`,left:`${d.value}px`})},null,4),a("div",{class:"absolute w-3 h-3 border-b-2 border-r-2 border-gray-300",style:ke({bottom:`${x.value}px`,right:`${c.value}px`})},null,4)])):ve("",!0),n(e).showMarginLines&&(d.value>0||m.value>0)?(M(),N("div",ap,[m.value>0?(M(),N("div",{key:0,class:"absolute border-t border-dashed border-gray-400 w-full",style:ke({top:`${m.value}px`})},null,4)):ve("",!0),x.value>0?(M(),N("div",{key:1,class:"absolute border-b border-dashed border-gray-400 w-full",style:ke({bottom:`${x.value}px`})},null,4)):ve("",!0),d.value>0?(M(),N("div",{key:2,class:"absolute border-l border-dashed border-gray-400 h-full",style:ke({left:`${d.value}px`})},null,4)):ve("",!0),c.value>0?(M(),N("div",{key:3,class:"absolute border-r border-dashed border-gray-400 h-full",style:ke({right:`${c.value}px`})},null,4)):ve("",!0)])):ve("",!0)],44,Qh)]))),128))],4))}}),np=Le({__name:"PrintRenderer",props:{payload:{},token:{}},setup(r){const e=r,t=ae(null),s=Be(),o=e.token||new URLSearchParams(window.location.search).get("printToken")||"",i=window.location.origin,l=()=>{var p;return((p=t.value)==null?void 0:p.ownerDocument)||document},d=()=>l().defaultView||window,c=p=>{const f=d();f.parent&&f.parent!==f&&f.parent.postMessage({type:p,token:o},i),window.dispatchEvent(new CustomEvent(`print-renderer:${p}`,{detail:{token:o}}))},m=async(p=2e3)=>{const g=l().fonts;!g||!g.ready||await Promise.race([g.ready,new Promise(C=>setTimeout(C,p))])},x=async(p=2e3)=>{const f=l(),C=Array.from(f.images||[]).filter(y=>!y.complete);C.length!==0&&await Promise.race([Promise.all(C.map(y=>new Promise(E=>{const z=()=>{y.removeEventListener("load",z),y.removeEventListener("error",z),E()};y.addEventListener("load",z,{once:!0}),y.addEventListener("error",z,{once:!0})}))),new Promise(y=>setTimeout(y,p))])},v=async p=>{s.$patch({pages:Ie(p.pages||[]),canvasSize:p.canvasSize||s.canvasSize,canvasBackground:p.canvasBackground||s.canvasBackground,headerHeight:p.headerHeight??s.headerHeight,footerHeight:p.footerHeight??s.footerHeight,pageSpacingX:p.pageSpacingX??s.pageSpacingX,pageSpacingY:p.pageSpacingY??s.pageSpacingY,showHeaderLine:p.showHeaderLine??!1,showFooterLine:p.showFooterLine??!1,showGrid:!1,showCornerMarkers:!1,zoom:1,currentPageIndex:0,selectedElementId:null,selectedElementIds:[],guides:[],testData:p.testData||{}}),p.watermark&&(s.watermark=Ie(p.watermark)),p.unit&&(s.unit=p.unit),s.setIsExporting(!0),l().body.classList.add("exporting"),await Qe(),await m(),await x(),requestAnimationFrame(()=>{c("print-renderer-rendered")})},S=p=>{if(p.origin!==i)return;const f=p.data;!f||f.type!=="print-renderer-payload"||f.token!==o||v(f.payload||{})};return Ye(()=>{const p=l(),f=d();p.body.style.margin="0",p.body.style.background="#ffffff",f.addEventListener("message",S),e.payload?v(e.payload):c("print-renderer-ready")}),Ke(()=>{d().removeEventListener("message",S)}),(p,f)=>(M(),N("div",{class:"print-renderer",ref_key:"root",ref:t},[ue(Zi)],512))}}),$t=(r,e)=>{const t=r.__vccOpts||r;for(const[s,o]of e)t[s]=o;return t},Ji=$t(np,[["__scopeId","data-v-7d814419"]]),sp=`*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(147 197 253 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(147 197 253 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}:root{--brand-50: #eff6ff;--brand-100: #dbeafe;--brand-200: #bfdbfe;--brand-300: #93c5fd;--brand-400: #60a5fa;--brand-500: #3b82f6;--brand-600: #2563eb;--brand-700: #1d4ed8;--brand-800: #1e40af;--brand-900: #1e3a8a;--brand-950: #172554;--brand-500-alpha-10: rgb(59 130 246 / .1)}input[type=radio]{accent-color:var(--brand-600)}.theme-outline-hover:hover{outline:1px solid var(--brand-300)}.theme-hover-bg:hover{background-color:var(--brand-50)}.theme-hover-border:hover{border-color:var(--brand-500)}.theme-text{color:var(--brand-500)}.theme-text-hover:hover{color:var(--brand-700)}.theme-border{border-color:var(--brand-500)}.theme-border-strong{border-color:var(--brand-600)}.theme-border-hover{border-color:var(--brand-500)}.group:hover .theme-border-hover{border-color:var(--brand-400)}.theme-bg{background-color:var(--brand-500)}.theme-bg-strong{background-color:var(--brand-600)}.theme-bg-soft{background-color:#000000b3}.exporting .marker{display:none!important}.exporting,.previewing{overflow:hidden!important}html{color-scheme:light}.dark{color-scheme:dark}.dark body{background-color:#0f172a;color:#e5e7eb}.dark .bg-white{background-color:#1f2937!important}.dark .bg-gray-50{background-color:#111827!important}.dark :not(.canvas-scroll).bg-gray-100{background-color:#1f2937!important}.dark .canvas-scroll.bg-gray-100{background-color:#334155!important}.dark .hover\\\\:bg-gray-50:hover{background-color:#1f2937!important}.dark .hover\\\\:bg-gray-100:hover{background-color:#374151!important}.dark .bg-gray-200{background-color:#374151!important}.dark .hover\\:bg-gray-200:hover{background-color:#4b5563!important}.dark .hover\\:bg-blue-50:hover,.dark .theme-hover-bg:hover{background-color:color-mix(in srgb,var(--brand-500) 16%,transparent)!important}.dark .hover\\:border-blue-500:hover{border-color:#3b82f680!important}.dark .text-gray-800{color:#f3f4f6!important}.dark .text-gray-700{color:#e5e7eb!important}.dark .text-gray-600{color:#d1d5db!important}.dark .text-gray-500{color:#cbd5e1!important}.dark .text-gray-400{color:#9ca3af!important}.dark .text-gray-900{color:#f9fafb!important}.dark .border-gray-100{border-color:#1f2937!important}.dark .border-gray-200{border-color:#374151!important}.dark .border-gray-300{border-color:#4b5563!important}.dark select,.dark option{background-color:#1f2937;color:#e5e7eb}.dark .shadow-sm,.dark .shadow,.dark .shadow-xl,.dark .\\!shadow{box-shadow:0 1px 2px #0009,0 1px 1px #0006!important}.dark .print-page{color-scheme:light}.dark .print-page .bg-white{background-color:#fff!important}.dark .print-page .border-gray-100{border-color:#f3f4f6!important}.dark .print-page .border-gray-200{border-color:#e5e7eb!important}.dark .print-page .border-gray-300{border-color:#d1d5db!important}.dark .print-page .text-gray-500{color:#6b7280!important}.dark .print-page .text-gray-600{color:#4b5563!important}.dark .print-page .text-gray-700{color:#374151!important}.dark .print-page .text-gray-800{color:#1f2937!important}.dark .print-page .text-gray-900{color:#111827!important}::-webkit-scrollbar{width:12px;height:12px}::-webkit-scrollbar-track{background:#f3f4f6;border-radius:0}::-webkit-scrollbar-thumb{background-color:#d1d5db;border-radius:0;border:2px solid #f3f4f6}::-webkit-scrollbar-corner{background:#f3f4f6}*{scrollbar-width:thin;scrollbar-color:#d1d5db #f3f4f6}.dark ::-webkit-scrollbar-track{background:#1f2937}.dark ::-webkit-scrollbar-thumb{background-color:#4b5563;border:2px solid #1f2937}.dark ::-webkit-scrollbar-thumb:hover{background-color:#6b7280}.dark *{scrollbar-color:#4b5563 #1f2937}.\\!container{width:100%!important}.container{width:100%}@media(min-width:640px){.\\!container{max-width:640px!important}.container{max-width:640px}}@media(min-width:768px){.\\!container{max-width:768px!important}.container{max-width:768px}}@media(min-width:1024px){.\\!container{max-width:1024px!important}.container{max-width:1024px}}@media(min-width:1280px){.\\!container{max-width:1280px!important}.container{max-width:1280px}}@media(min-width:1536px){.\\!container{max-width:1536px!important}.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.-bottom-4{bottom:-1rem}.-left-2{left:-.5rem}.-left-4{left:-1rem}.-right-1{right:-.25rem}.-right-12{right:-3rem}.-right-3{right:-.75rem}.-right-5{right:-1.25rem}.-top-3{top:-.75rem}.-top-4{top:-1rem}.-top-6{top:-1.5rem}.bottom-0{bottom:0}.bottom-4{bottom:1rem}.left-0{left:0}.left-1\\/2{left:50%}.left-2{left:.5rem}.right-0{right:0}.right-1{right:.25rem}.right-4{right:1rem}.top-0{top:0}.top-1{top:.25rem}.top-1\\/2{top:50%}.top-2{top:.5rem}.top-6{top:1.5rem}.top-8{top:2rem}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.z-\\[-1\\]{z-index:-1}.z-\\[100000\\]{z-index:100000}.z-\\[1000\\]{z-index:1000}.z-\\[100\\]{z-index:100}.z-\\[2000\\]{z-index:2000}.z-\\[2001\\]{z-index:2001}.z-\\[99999\\]{z-index:99999}.z-\\[9999\\]{z-index:9999}.z-\\[999\\]{z-index:999}.col-span-2{grid-column:span 2 / span 2}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-auto{margin-left:auto;margin-right:auto}.my-0\\.5{margin-top:.125rem;margin-bottom:.125rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.my-4{margin-top:1rem;margin-bottom:1rem}.-ml-1\\.5{margin-left:-.375rem}.-mt-1\\.5{margin-top:-.375rem}.mb-1{margin-bottom:.25rem}.mb-1\\.5{margin-bottom:.375rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-8{margin-bottom:2rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.box-content{box-sizing:content-box}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.h-0\\.5{height:.125rem}.h-1\\.5{height:.375rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-2{height:.5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\\.5{height:.875rem}.h-32{height:8rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-\\[1px\\]{height:1px}.h-\\[500px\\]{height:500px}.h-\\[56px\\]{height:56px}.h-\\[60px\\]{height:60px}.h-\\[80vh\\]{height:80vh}.h-\\[90vh\\]{height:90vh}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.max-h-\\[300px\\]{max-height:300px}.max-h-\\[500px\\]{max-height:500px}.max-h-\\[90vh\\]{max-height:90vh}.w-1{width:.25rem}.w-1\\.5{width:.375rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:.5rem}.w-3{width:.75rem}.w-3\\.5{width:.875rem}.w-32{width:8rem}.w-4{width:1rem}.w-40{width:10rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-9{width:2.25rem}.w-96{width:24rem}.w-\\[220px\\]{width:220px}.w-\\[240px\\]{width:240px}.w-\\[380px\\]{width:380px}.w-\\[60vw\\]{width:60vw}.w-\\[640px\\]{width:640px}.w-\\[700px\\]{width:700px}.w-\\[90vw\\]{width:90vw}.w-full{width:100%}.w-max{width:-moz-max-content;width:max-content}.w-px{width:1px}.w-screen{width:100vw}.min-w-0{min-width:0px}.min-w-\\[160px\\]{min-width:160px}.max-w-full{max-width:100%}.flex-1{flex:1 1 0%}.flex-none{flex:none}.flex-shrink-0{flex-shrink:0}.shrink{flex-shrink:1}.shrink-0{flex-shrink:0}.border-collapse{border-collapse:collapse}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-full{--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-4{--tw-translate-x: 1rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-5{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-150{--tw-scale-x: 1.5;--tw-scale-y: 1.5;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-col-resize{cursor:col-resize}.cursor-crosshair{cursor:crosshair}.cursor-default{cursor:default}.cursor-grab{cursor:grab}.cursor-move{cursor:move}.cursor-not-allowed{cursor:not-allowed}.cursor-ns-resize{cursor:ns-resize}.cursor-pointer{cursor:pointer}.cursor-row-resize{cursor:row-resize}.cursor-se-resize{cursor:se-resize}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.select-all{-webkit-user-select:all;-moz-user-select:all;user-select:all}.resize-y{resize:vertical}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-9{grid-template-columns:repeat(9,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.25rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(229 231 235 / var(--tw-divide-opacity, 1))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-\\[1px\\]{border-radius:1px}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-sm{border-radius:.125rem}.rounded-b-lg{border-bottom-right-radius:.5rem;border-bottom-left-radius:.5rem}.rounded-l-md{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.rounded-r-md{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.rounded-br-lg{border-bottom-right-radius:.5rem}.border{border-width:1px}.border-2{border-width:2px}.border-\\[0\\.5px\\]{border-width:.5px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-l-2{border-left-width:2px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-r-2{border-right-width:2px}.border-t{border-top-width:1px}.border-t-2{border-top-width:2px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-blue-200{border-color:var(--brand-200)}.border-blue-500{border-color:var(--brand-500)}.border-blue-600{border-color:var(--brand-600)}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-400{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity, 1))}.border-red-100{--tw-border-opacity: 1;border-color:rgb(254 226 226 / var(--tw-border-opacity, 1))}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.\\!bg-blue-100{background-color:var(--brand-100)!important}.bg-black\\/50{background-color:#00000080}.bg-blue-100{background-color:var(--brand-100)}.bg-blue-200{background-color:var(--brand-200)}.bg-blue-400{background-color:var(--brand-400)}.bg-blue-50{background-color:var(--brand-50)}.bg-blue-500{background-color:var(--brand-500)}.bg-blue-600{background-color:var(--brand-600)}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-slate-200{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\\/80{background-color:#fffc}.bg-\\[url\\(\\'data\\:image\\/png\\;base64\\,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ\\+5wNisxL\\/\\/8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII\\=\\'\\)\\]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=)}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top,var(--tw-gradient-stops))}.bg-gradient-to-tl{background-image:linear-gradient(to top left,var(--tw-gradient-stops))}.from-black{--tw-gradient-from: #000 var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-gray-300{--tw-gradient-from: #d1d5db var(--tw-gradient-from-position);--tw-gradient-to: rgb(209 213 219 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white{--tw-gradient-from: #fff var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-transparent{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.bg-\\[length\\:6px_6px\\]{background-size:6px 6px}.bg-repeat{background-repeat:repeat}.object-contain{-o-object-fit:contain;object-fit:contain}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-0\\.5{padding:.125rem}.p-1{padding:.25rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.pb-1{padding-bottom:.25rem}.pb-20{padding-bottom:5rem}.pt-2{padding-top:.5rem}.pt-3{padding-top:.75rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.normal-case{text-transform:none}.italic{font-style:italic}.not-italic{font-style:normal}.leading-none{line-height:1}.tracking-normal{letter-spacing:0em}.tracking-wider{letter-spacing:.05em}.text-blue-400{color:var(--brand-400)}.text-blue-600{color:var(--brand-600)}.text-blue-700{color:var(--brand-700)}.text-blue-900{color:var(--brand-900)}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-slate-900{--tw-text-opacity: 1;color:rgb(15 23 42 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.overline{text-decoration-line:overline}.line-through{text-decoration-line:line-through}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-50{opacity:.5}.\\!shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1) !important;--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color) !important;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)!important}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-400{--tw-ring-color: var(--brand-400)}.ring-blue-500{--tw-ring-color: var(--brand-500)}.ring-red-500{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.ring-offset-1{--tw-ring-offset-width: 1px}.ring-offset-gray-900{--tw-ring-offset-color: #111827}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.\\[-moz-appearance\\:textfield\\]{-moz-appearance:textfield}.\\[appearance\\:textfield\\]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.dark .hover\\:bg-gray-50:hover{background-color:#111827!important}.dark .hover\\:bg-gray-100:hover:not(.canvas-scroll){background-color:#1f2937!important}.dark .hover\\:bg-gray-100:hover.canvas-scroll{background-color:#334155!important}.dark .hover\\:bg-gray-200:hover{background-color:#374151!important}.dark .hover\\:text-gray-800:hover{color:#f3f4f6!important}.dark .hover\\:text-gray-700:hover{color:#e5e7eb!important}.dark .hover\\:text-gray-600:hover{color:#d1d5db!important}.dark .print-page .hover\\:text-gray-600:hover{color:#4b5563!important}.dark .print-page .hover\\:text-gray-700:hover{color:#374151!important}.dark .print-page .hover\\:text-gray-800:hover{color:#1f2937!important}.dark .disabled\\:bg-gray-50:disabled{background-color:#111827!important}.dark .disabled\\:bg-gray-100:disabled:not(.canvas-scroll){background-color:#1f2937!important}.dark .disabled\\:bg-gray-100:disabled.canvas-scroll{background-color:#334155!important}.dark .disabled\\:text-gray-500:disabled{color:#cbd5e1!important}.dark .disabled\\:text-gray-400:disabled{color:#9ca3af!important}.dark .disabled\\:border-gray-200:disabled{border-color:#374151!important}.dark .print-page .disabled\\:border-gray-200:disabled{border-color:#e5e7eb!important}.dark .print-page .disabled\\:text-gray-500:disabled{color:#6b7280!important}.dark .disabled\\:hover\\:bg-white:hover:disabled{background-color:#1f2937!important}.dark .disabled\\:hover\\:bg-gray-100:hover:disabled:not(.canvas-scroll){background-color:#1f2937!important}.dark .disabled\\:hover\\:bg-gray-100:hover:disabled.canvas-scroll{background-color:#334155!important}.dark .print-page .disabled\\:hover\\:bg-white:hover:disabled{background-color:#fff!important}.dark .dark\\:bg-gray-100:is(.dark *):not(.canvas-scroll){background-color:#1f2937!important}.dark .dark\\:bg-gray-100:is(.dark *).canvas-scroll{background-color:#334155!important}.dark .dark\\:text-gray-500:is(.dark *){color:#cbd5e1!important}.dark .dark\\:text-gray-400:is(.dark *){color:#9ca3af!important}.dark .print-page .dark\\:text-gray-500:is(.dark *){color:#6b7280!important}.dark .dark\\:disabled\\:text-gray-600:disabled:is(.dark *){color:#d1d5db!important}.dark .dark\\:disabled\\:text-gray-400:disabled:is(.dark *){color:#9ca3af!important}.dark .print-page .dark\\:disabled\\:text-gray-600:disabled:is(.dark *){color:#4b5563!important}.first\\:border-0:first-child{border-width:0px}.first\\:pt-0:first-child{padding-top:0}.last\\:border-0:last-child{border-width:0px}.last\\:border-b-0:last-child{border-bottom-width:0px}.focus-within\\:border-blue-500:focus-within{border-color:var(--brand-500)}.focus-within\\:ring-1:focus-within{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-within\\:ring-blue-500:focus-within{--tw-ring-color: var(--brand-500)}.hover\\:z-10:hover{z-index:10}.hover\\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:border-blue-200:hover{border-color:var(--brand-200)}.hover\\:border-blue-400:hover{border-color:var(--brand-400)}.hover\\:border-blue-500:hover{border-color:var(--brand-500)}.hover\\:border-gray-400:hover{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity, 1))}.hover\\:bg-blue-100:hover{background-color:var(--brand-100)}.hover\\:bg-blue-300:hover{background-color:var(--brand-300)}.hover\\:bg-blue-400:hover{background-color:var(--brand-400)}.hover\\:bg-blue-50:hover{background-color:var(--brand-50)}.hover\\:bg-blue-700:hover{background-color:var(--brand-700)}.hover\\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\\:bg-red-100:hover{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.hover\\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\\:bg-slate-300:hover{--tw-bg-opacity: 1;background-color:rgb(203 213 225 / var(--tw-bg-opacity, 1))}.hover\\:text-blue-600:hover{color:var(--brand-600)}.hover\\:text-blue-700:hover{color:var(--brand-700)}.hover\\:text-gray-600:hover{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover\\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\\:text-gray-800:hover{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.hover\\:text-red-600:hover{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.hover\\:text-red-800:hover{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.hover\\:opacity-100:hover{opacity:1}.hover\\:outline:hover{outline-style:solid}.hover\\:outline-1:hover{outline-width:1px}.hover\\:outline-blue-300:hover{outline-color:var(--brand-300)}.focus\\:border-blue-500:focus{border-color:var(--brand-500)}.focus\\:border-blue-600:focus{border-color:var(--brand-600)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-0:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-blue-500:focus{--tw-ring-color: var(--brand-500)}.focus\\:ring-blue-600:focus{--tw-ring-color: var(--brand-600)}.focus\\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:border-gray-200:disabled{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.disabled\\:bg-gray-100:disabled{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.disabled\\:bg-gray-400:disabled{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.disabled\\:bg-gray-50:disabled{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.disabled\\:text-gray-400:disabled{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.disabled\\:text-gray-500:disabled{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.disabled\\:opacity-30:disabled{opacity:.3}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:hover\\:bg-blue-600:hover:disabled{background-color:var(--brand-600)}.disabled\\:hover\\:bg-gray-100:hover:disabled{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.disabled\\:hover\\:bg-white:hover:disabled{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.group:hover .group-hover\\:text-blue-600{color:var(--brand-600)}.group:hover .group-hover\\:text-blue-700{color:var(--brand-700)}.group:hover .group-hover\\:opacity-100{opacity:1}.dark\\:border-blue-800:is(.dark *){border-color:var(--brand-800)}.dark\\:border-gray-600:is(.dark *){--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.dark\\:border-gray-700:is(.dark *){--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.dark\\:border-gray-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(31 41 55 / var(--tw-border-opacity, 1))}.dark\\:border-red-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(153 27 27 / var(--tw-border-opacity, 1))}.dark\\:bg-blue-400:is(.dark *){background-color:var(--brand-400)}.dark\\:bg-blue-500:is(.dark *){background-color:var(--brand-500)}.dark\\:bg-blue-700:is(.dark *){background-color:var(--brand-700)}.dark\\:bg-blue-950:is(.dark *){background-color:var(--brand-950)}.dark\\:bg-gray-100:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.dark\\:bg-gray-600:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.dark\\:bg-gray-700:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\\:bg-gray-700\\/50:is(.dark *){background-color:#37415180}.dark\\:bg-gray-800:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\\:bg-gray-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\\:bg-red-900\\/30:is(.dark *){background-color:#7f1d1d4d}.dark\\:bg-slate-700:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(51 65 85 / var(--tw-bg-opacity, 1))}.dark\\:text-blue-100:is(.dark *){color:var(--brand-100)}.dark\\:text-blue-400:is(.dark *){color:var(--brand-400)}.dark\\:text-gray-100:is(.dark *){--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.dark\\:text-gray-200:is(.dark *){--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\\:text-gray-400:is(.dark *){--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\\:text-gray-500:is(.dark *){--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.dark\\:text-green-400:is(.dark *){--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.dark\\:text-red-400:is(.dark *){--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.dark\\:text-slate-100:is(.dark *){--tw-text-opacity: 1;color:rgb(241 245 249 / var(--tw-text-opacity, 1))}.dark\\:text-white:is(.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\\:ring-blue-400:is(.dark *){--tw-ring-color: var(--brand-400)}.dark\\:ring-offset-gray-900:is(.dark *){--tw-ring-offset-color: #111827}.dark\\:hover\\:border-blue-400:hover:is(.dark *){border-color:var(--brand-400)}.dark\\:hover\\:border-blue-500:hover:is(.dark *){border-color:var(--brand-500)}.dark\\:hover\\:border-gray-500:hover:is(.dark *){--tw-border-opacity: 1;border-color:rgb(107 114 128 / var(--tw-border-opacity, 1))}.dark\\:hover\\:bg-blue-400:hover:is(.dark *){background-color:var(--brand-400)}.dark\\:hover\\:bg-blue-600:hover:is(.dark *){background-color:var(--brand-600)}.dark\\:hover\\:bg-gray-600:hover:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.dark\\:hover\\:bg-gray-700:hover:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\\:hover\\:bg-gray-800:hover:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\\:hover\\:bg-red-900\\/30:hover:is(.dark *){background-color:#7f1d1d4d}.dark\\:hover\\:bg-red-900\\/50:hover:is(.dark *){background-color:#7f1d1d80}.dark\\:hover\\:bg-slate-600:hover:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(71 85 105 / var(--tw-bg-opacity, 1))}.dark\\:hover\\:text-blue-400:hover:is(.dark *){color:var(--brand-400)}.dark\\:hover\\:text-gray-200:hover:is(.dark *){--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\\:hover\\:text-gray-300:hover:is(.dark *){--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\\:hover\\:text-red-300:hover:is(.dark *){--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.dark\\:focus\\:border-blue-400:focus:is(.dark *){border-color:var(--brand-400)}.dark\\:disabled\\:border-gray-700:disabled:is(.dark *){--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.dark\\:disabled\\:bg-gray-700:disabled:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\\:disabled\\:bg-gray-800:disabled:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\\:disabled\\:text-gray-400:disabled:is(.dark *){--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\\:disabled\\:text-gray-600:disabled:is(.dark *){--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.\\[\\&\\:\\:-moz-range-thumb\\]\\:h-4::-moz-range-thumb{height:1rem}.\\[\\&\\:\\:-moz-range-thumb\\]\\:w-4::-moz-range-thumb{width:1rem}.\\[\\&\\:\\:-moz-range-thumb\\]\\:cursor-pointer::-moz-range-thumb{cursor:pointer}.\\[\\&\\:\\:-moz-range-thumb\\]\\:rounded-full::-moz-range-thumb{border-radius:9999px}.\\[\\&\\:\\:-moz-range-thumb\\]\\:border-none::-moz-range-thumb{border-style:none}.\\[\\&\\:\\:-moz-range-thumb\\]\\:bg-blue-600::-moz-range-thumb{background-color:var(--brand-600)}.\\[\\&\\:\\:-moz-range-thumb\\]\\:transition-all::-moz-range-thumb{-moz-transition-property:all;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.\\[\\&\\:\\:-moz-range-thumb\\]\\:hover\\:scale-110:hover::-moz-range-thumb{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.dark\\:\\[\\&\\:\\:-moz-range-thumb\\]\\:bg-blue-500:is(.dark *)::-moz-range-thumb{background-color:var(--brand-500)}.\\[\\&\\:\\:-webkit-inner-spin-button\\]\\:appearance-none::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none}.\\[\\&\\:\\:-webkit-outer-spin-button\\]\\:appearance-none::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:h-4::-webkit-slider-thumb{height:1rem}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:w-4::-webkit-slider-thumb{width:1rem}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:cursor-pointer::-webkit-slider-thumb{cursor:pointer}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:appearance-none::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:rounded-full::-webkit-slider-thumb{border-radius:9999px}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:bg-blue-600::-webkit-slider-thumb{background-color:var(--brand-600)}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:transition-all::-webkit-slider-thumb{-webkit-transition-property:all;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:hover\\:scale-110:hover::-webkit-slider-thumb{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.dark\\:\\[\\&\\:\\:-webkit-slider-thumb\\]\\:bg-blue-500:is(.dark *)::-webkit-slider-thumb{background-color:var(--brand-500)}`,Qi=()=>{const r=Be(),{printMode:e,localSettings:t,remoteSettings:s,localStatus:o,remoteStatus:i,localPrintOptions:l,remotePrintOptions:d,localWsUrl:c,remoteWsUrl:m,remoteSelectedClientId:x,exportImageMerged:v}=ar(),S=oe=>{const ce=Ie(oe),he=r.headerHeight>0&&r.showHeaderLine,u=r.footerHeight>0&&r.showFooterLine;if(!he&&!u)return ce;const X=ce[0],T=r.canvasSize.height,b=r.pageSpacingY||0,w=r.pageSpacingY||0,_=he?X.elements.filter(G=>G.y+G.height<=r.headerHeight+b):[],W=u?X.elements.filter(G=>G.y>=T-(r.footerHeight+w)):[],V=Ie(ce);for(let G=0;G<V.length;G++){if(G===0)continue;const ne=V[G];for(const pe of _)ne.elements.push({...Ie(pe),id:Ve()});for(const pe of W)ne.elements.push({...Ie(pe),id:Ve()})}return V},p=async(oe={})=>{const ce=oe.mutateStore===!0,he=oe.setExporting===!0,u=r.selectedElementId,X=r.showGrid,T=r.zoom,b=Ie(r.pages),w=r.showHeaderLine,_=r.showFooterLine,W=r.showCornerMarkers,V=!!r.isExporting,G=document.body.classList.contains("exporting"),ne=document.documentElement.style.overflowX,pe=document.documentElement.style.overflowY,se=document.body.style.overflowX,we=document.body.style.overflowY;return ce&&(r.selectElement(null),r.setShowGrid(!1),r.setZoom(1),r.pages=S(r.pages),r.setShowHeaderLine(!1),r.setShowFooterLine(!1),r.showCornerMarkers=!1),he&&(r.setIsExporting(!0),document.body.classList.add("exporting")),(ce||he)&&(document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",await Qe(),await new Promise(fe=>setTimeout(fe,500))),()=>{document.body.classList.contains("exporting")&&!G&&document.body.classList.remove("exporting"),r.isExporting!==V&&r.setIsExporting(V),r.showCornerMarkers!==W&&(r.showCornerMarkers=W),(ce||he)&&(document.documentElement.style.overflowX=ne,document.documentElement.style.overflowY=pe,document.body.style.overflowX=se,document.body.style.overflowY=we),ce&&(r.setShowGrid(X),r.selectElement(u),r.setZoom(T),r.pages=b,r.setShowHeaderLine(w),r.setShowFooterLine(_))}},f=oe=>{oe.classList.remove("group","cursor-move","select-none","ring-2","ring-blue-500","ring-red-500","hover:outline","hover:outline-1","hover:outline-blue-300");const ce=[];oe.classList.forEach(u=>{(u.startsWith("hover:")||u.startsWith("focus:")||u.startsWith("active:"))&&ce.push(u)}),ce.forEach(u=>oe.classList.remove(u)),(oe.style.borderColor==="transparent"||oe.style.border.includes("transparent")||oe.style.borderStyle==="dashed"&&(oe.style.borderColor==="transparent"||!oe.style.borderColor&&oe.style.border.includes("transparent")))&&(oe.style.border="none",oe.style.outline="none",oe.style.boxShadow="none"),Array.from(oe.children).forEach(u=>f(u))},g={enabled:!1,text:"",angle:-30,color:"#000000",opacity:.1,size:24,density:160},C=()=>({pages:S(r.pages),canvasSize:{...r.canvasSize},canvasBackground:r.canvasBackground,headerHeight:r.headerHeight,footerHeight:r.footerHeight,pageSpacingX:r.pageSpacingX||0,pageSpacingY:r.pageSpacingY||0,showHeaderLine:r.showHeaderLine,showFooterLine:r.showFooterLine,watermark:Ie(r.watermark||g),unit:r.unit||"mm",testData:Ie(r.testData||{})}),y=(oe,ce,he=15e3)=>new Promise((u,X)=>{const T=window.location.origin,b=window.setTimeout(()=>{window.removeEventListener("message",w),window.removeEventListener(`print-renderer:${ce}`,_),X(new Error(`Print renderer timeout: ${ce}`))},he),w=W=>{if(W.origin!==T)return;const V=W.data;!V||V.type!==ce||V.token!==oe||(window.clearTimeout(b),window.removeEventListener("message",w),window.removeEventListener(`print-renderer:${ce}`,_),u(V))},_=W=>{W.detail&&W.detail.token===oe&&(window.clearTimeout(b),window.removeEventListener("message",w),window.removeEventListener(`print-renderer:${ce}`,_),u({type:ce,token:oe}))};window.addEventListener("message",w),window.addEventListener(`print-renderer:${ce}`,_)}),E=async()=>{const oe=Ve(),ce=document.createElement("iframe");ce.setAttribute("data-print-renderer","true"),ce.style.cssText="position:fixed;left:0;top:0;width:0;height:0;border:0;visibility:hidden;",document.body.appendChild(ce);const he=ce.contentDocument,u=ce.contentWindow;if(!he||!u)throw new Error("Print renderer not available");const X=he.createElement("style");X.textContent=sp,he.head.appendChild(X);const T=he.createElement("div");T.id="app",he.body.appendChild(T);const b=C(),w=bi({render:()=>nl(Ji,{payload:b,token:oe})});w.use(vi()),w.use(wi),w.mount(T);const _=()=>{w.unmount(),ce.parentNode&&ce.parentNode.removeChild(ce)};try{return await y(oe,"print-renderer-rendered"),{pages:Array.from(he.querySelectorAll(".print-page")),cleanup:_,getComputedStyleFn:u.getComputedStyle.bind(u)}}catch(W){throw _(),W}},z=async oe=>{if(typeof oe=="string")return{content:oe,cleanup:null,getComputedStyleFn:window.getComputedStyle};const ce=await E();return{content:ce.pages,cleanup:ce.cleanup,getComputedStyleFn:ce.getComputedStyleFn}},k=async oe=>{const ce=oe||Array.from(document.querySelectorAll(".print-page")),he=await p({mutateStore:!1,setExporting:!1}),u=r.canvasSize.width,X=r.canvasSize.height;let T=null,b=null,w=null;try{const _=await z(ce);w=_.cleanup;const W=await H(_.content,u,X,!0,_.getComputedStyleFn);T=W.container,b=W.tempWrapper;const V=document.createElement("div");return V.style.width="100%",V.style.display="flex",V.style.flexDirection="column",V.style.alignItems="center",Array.from(T.children).filter(ne=>!["STYLE","LINK","SCRIPT"].includes(ne.tagName)).forEach((ne,pe)=>{const se=ne.cloneNode(!0);se.style.position="relative",se.style.left="auto",se.style.top="auto",se.style.width=`${u}px`,se.style.height=`${X}px`,se.style.margin="0 0 20px 0",se.style.backgroundColor=r.canvasBackground,se.style.transform="none",V.appendChild(se)}),V.outerHTML}finally{b&&b.parentNode&&b.parentNode.removeChild(b),w&&w(),he()}},U=oe=>{oe.querySelectorAll("svg").forEach(he=>{const u=he.parentElement;if(!u)return;const X=getComputedStyle(u),T=parseFloat(X.width),b=parseFloat(X.height),w=document.createElement("canvas");w.width=Number.isFinite(T)?Math.max(1,Math.round(T)):10,w.height=Number.isFinite(b)?Math.max(1,Math.round(b)):10;const _=w.getContext("2d");if(!_)return;const W=new XMLSerializer;he.setAttribute("width",`${T}px`),he.setAttribute("height",`${b}px`);const V=W.serializeToString(he);sl.fromString(_,V).render();const ne=document.createElement("img");ne.src=w.toDataURL("image/png"),ne.style.width=`${T}px`,ne.style.height=`${b}px`,ne.style.display="block",he.before(ne),u.removeChild(he)})},K=(oe,ce)=>{Array.from(oe.children).filter(u=>!["STYLE","LINK","SCRIPT"].includes(u.tagName)).forEach((u,X)=>{u.querySelectorAll('[data-print-type="page-number"]').forEach(b=>{const w=b.querySelector(".page-number-text");w&&(w.textContent=`${X+1}/${ce}`)})})},j=(oe,ce,he,u,X,T,b)=>{const w=oe.querySelectorAll("[data-print-wrapper]"),_=r.pageSpacingY||0,W=r.pageSpacingY||0;w.forEach(V=>{const G=V,ne=parseFloat(G.style.top)||0;parseFloat(G.style.height)||G.offsetHeight;const pe=T&&ne<he+_,se=b&&ne>=X-u-W;if(pe||se){const we=G.cloneNode(!0);ce.appendChild(we)}})},D=oe=>{const ce=oe.querySelector("tfoot");if(!ce)return;const he=oe.getAttribute("data-custom-script");if(he)try{const u=oe.querySelector("tbody"),X=[];u&&Array.from(u.querySelectorAll("tr")).forEach(W=>{const V={};Array.from(W.querySelectorAll("td")).forEach(ne=>{const pe=ne.getAttribute("data-field");pe&&(V[pe]=ne.textContent||"")}),Object.keys(V).length>0&&X.push(V)});const T=[];Array.from(ce.querySelectorAll("tr")).forEach(_=>{const W={};Array.from(_.querySelectorAll("td")).forEach(G=>{const ne=G.getAttribute("data-field");ne&&(W[ne]={value:G.getAttribute("data-value")||G.textContent||""})}),T.push(W)}),new Function("data","footerData","columns","type",he)(X,T,[],"page"),T.length>0&&Array.from(ce.querySelectorAll("tr")).forEach((W,V)=>{T[V]&&Array.from(W.querySelectorAll("td")).forEach(ne=>{const pe=ne.getAttribute("data-field");if(pe&&T[V][pe]!==void 0){let se=T[V][pe];se&&typeof se=="object"&&(se.result!==void 0?se=se.result:se.value!==void 0&&(se=se.value)),ne.textContent=String(se)}})});return}catch(u){console.error("Page sum script error:",u)}},O=(oe,ce,he,u,X,T)=>{let b=Array.from(oe.children).filter(w=>!["STYLE","LINK","SCRIPT"].includes(w.tagName));for(let w=0;w<b.length;w++){const _=b[w];_.querySelectorAll("table").forEach(V=>{const G=V.closest("[data-print-wrapper]");if(!G||!(V.getAttribute("data-auto-paginate")==="true"))return;const se=window.getComputedStyle(G).transform;if(se&&se!=="none"&&se.startsWith("matrix")){const qe=se.substring(7,se.length-1).split(",");if(qe.length>=4){const Ze=parseFloat(qe[1]),st=parseFloat(qe[2]);if(Math.abs(Ze)>.001||Math.abs(st)>.001)return}}G.style.height="auto",V.style.height="auto";const we=V.querySelector("tbody");we&&(we.style.height="auto");const fe=V.parentElement;fe&&(fe.classList.remove("h-full","overflow-hidden"),fe.style.height="auto",fe.style.overflow="visible");const le=_.getBoundingClientRect(),re=r.pageSpacingY||0,ie=T?u:0,ye=le.top+ce-ie-re,Pe=G.getBoundingClientRect().top;if(V.getBoundingClientRect().bottom<=ye+1){D(V);return}let Ge=-1;const Ue=V.querySelector("tbody");if(!Ue)return;const nt=Array.from(Ue.querySelectorAll("tr")),dt=V.querySelector("tfoot"),ft=V.getAttribute("data-tfoot-repeat")==="true";let ct=0;dt&&ft&&(ct=dt.getBoundingClientRect().height);for(let qe=0;qe<nt.length;qe++)if(nt[qe].getBoundingClientRect().bottom+ct>ye+1){if(Ge=qe,Ge===0){const Ht=r.pageSpacingY||0,Ut=X&&he>0?he+Ht+10:Ht;Pe<=Ut+5&&(Ge=1)}break}if(Ge!==-1){const qe=document.createElement("div");qe.className=_.className,qe.style.cssText=_.style.cssText,qe.innerHTML="",j(_,qe,he,u,ce,X,T),w===b.length-1?oe.appendChild(qe):oe.insertBefore(qe,b[w+1]),b=Array.from(oe.children).filter(lt=>!["STYLE","LINK","SCRIPT"].includes(lt.tagName));const Ze=G.cloneNode(!0),st=r.pageSpacingY||0,Ht=X&&he>0?he+st+10:st;Ze.style.removeProperty("top"),Ze.style.setProperty("top",`${Ht}px`,"important");const Ut=nt;for(let lt=Ge;lt<Ut.length;lt++)Ut[lt].remove();Ge===0&&G.remove();const Ma=V.querySelector("tfoot"),rl=V.getAttribute("data-tfoot-repeat")==="true";Ma&&(rl?D(V):Ma.remove());const Ra=Ze.querySelector("table");Ra.style.height="auto";const nr=Ra.querySelector("tbody");nr&&(nr.style.height="auto");const ol=Array.from(nr.querySelectorAll("tr"));for(let lt=0;lt<Ge;lt++)ol[lt].remove();qe.appendChild(Ze)}else D(V)})}return b=Array.from(oe.children).filter(w=>!["STYLE","LINK","SCRIPT"].includes(w.tagName)),b.forEach((w,_)=>{w.style.top=`${_*ce}px`}),b.length},Q=(oe,ce=window.getComputedStyle)=>{const he=oe.cloneNode(!0),u=[[oe,he]];for(;u.length>0;){const[X,T]=u.shift();if(X.nodeType===1){const b=ce(X),w=T.style;for(let _=0;_<b.length;_++){const W=b[_];w.setProperty(W,b.getPropertyValue(W),b.getPropertyPriority(W))}}for(let b=0;b<X.children.length;b++)T.children[b]&&u.push([X.children[b],T.children[b]])}return he},H=async(oe,ce,he,u=!0,X=window.getComputedStyle)=>{const T=document.createElement("div");T.style.position="fixed",T.style.left="-10000px",T.style.top="0",T.style.width=`${ce}px`,T.style.height=`${he}px`,T.style.zIndex="-9999",T.className="print_temp_container",document.body.appendChild(T),document.head.querySelectorAll('style, link[rel="stylesheet"]').forEach(W=>{T.appendChild(W.cloneNode(!0))});let w=[];typeof oe=="string"?(T.innerHTML=oe,w=Array.from(T.children).filter(W=>!["STYLE","LINK","SCRIPT"].includes(W.tagName))):Array.isArray(oe)?w=oe:oe.classList.contains("design-workspace")?w=Array.from(oe.children):w=[oe],w.forEach((W,V)=>{const G=Q(W,X);G.style.position="absolute",G.style.left="0",G.style.top=`${V*he}px`,G.style.width=`${ce}px`,G.style.height=`${he}px`,G.style.transform="none",G.style.backgroundColor=r.canvasBackground,G.querySelectorAll('[data-print-exclude="true"]').forEach(se=>se.remove()),G.querySelectorAll(".element-wrapper").forEach(se=>se.setAttribute("data-print-wrapper","true")),f(G),G.querySelectorAll("svg").forEach(se=>{const we=se.getBoundingClientRect();if(we.width===0||we.height===0){const fe=se.getAttribute("width"),le=se.getAttribute("height");fe&&(se.style.width=fe.includes("px")?fe:`${fe}px`),le&&(se.style.height=le.includes("px")?le:`${le}px`)}}),T.appendChild(G)}),await new Promise(W=>setTimeout(W,200)),u&&U(T);const _=O(T,he,r.headerHeight,r.footerHeight,r.showHeaderLine,r.showFooterLine);return K(T,_),T.style.height=`${he*_}px`,{container:T,tempWrapper:T,pagesCount:_}},P=async(oe,ce,he)=>{const u=Array.from(oe.children).filter(w=>!["STYLE","LINK","SCRIPT"].includes(w.tagName));u.forEach(w=>{w.style.top="0px"});const X=async w=>{const _=await Mu.toCanvas(w,{scale:1.5,width:ce,height:he,useCORS:!0,bgcolor:r.canvasBackground}),W=_.getContext("2d");return W&&(W.mozImageSmoothingEnabled=!1,W.webkitImageSmoothingEnabled=!1,W.msImageSmoothingEnabled=!1,W.imageSmoothingEnabled=!1),_.toDataURL("image/jpeg",.5)},T=3,b=[];for(let w=0;w<u.length;w+=T){const _=u.slice(w,w+T),W=await Promise.all(_.map(V=>X(V)));b.push(...W)}return b},q=async oe=>{const ce=await p({mutateStore:!1,setExporting:!1}),he=r.canvasSize.width,u=r.canvasSize.height,X=ga(he),T=ga(u);let b=null,w=null;try{const _=await z(oe);w=_.cleanup;const{container:W,tempWrapper:V}=await H(_.content,he,u,!0,_.getComputedStyleFn);b=V;const G=new dl({orientation:he>u?"l":"p",unit:"mm",format:[X,T],hotfixes:["px_scaling"]});return(await P(W,he,u)).forEach((pe,se)=>{se>0&&G.addPage([X,T]),G.addImage(pe,"JPEG",0,0,X,T)}),G}finally{b&&b.parentNode&&b.parentNode.removeChild(b),w&&w(),ce()}},h=async(oe,ce="print-design.pdf")=>{try{const he=oe||Array.from(document.querySelectorAll(".print-page"));(await q(he)).save(ce)}catch(he){console.error("Export PDF failed",he),alert("Export PDF failed")}},$=async oe=>{try{const he=(await q(oe)).output("blob"),u=URL.createObjectURL(he);if(/Edg\//.test(navigator.userAgent)){const b=window.open(u,"_blank","noopener,noreferrer");if(!b){URL.revokeObjectURL(u);return}b.addEventListener("beforeunload",()=>{URL.revokeObjectURL(u)}),b.onload=()=>{try{b.focus(),b.print()}finally{setTimeout(()=>{URL.revokeObjectURL(u)},1e3)}};return}const T=document.createElement("iframe");T.style.position="fixed",T.style.left="0",T.style.top="0",T.style.width="0px",T.style.height="0px",T.style.border="0",T.style.visibility="hidden",T.src=u,document.body.appendChild(T),T.onload=()=>{const b=T.contentWindow;b&&(b.focus(),setTimeout(()=>{b.print()},100)),setTimeout(()=>{document.body.removeChild(T),URL.revokeObjectURL(u)},1e3)}}catch(ce){console.error("Print failed",ce),alert("Print failed")}},Z=oe=>new Promise((ce,he)=>{const u=new FileReader;u.onloadend=()=>ce(u.result),u.onerror=()=>he(new Error("Failed to read PDF blob")),u.readAsDataURL(oe)}),F=(oe,ce,he)=>{const u={printer:oe.printer,content:ce};return he&&(u.key=he),(oe.jobName||oe.copies||oe.intervalMs)&&(u.job={...oe.jobName?{name:oe.jobName}:{},...oe.copies?{copies:oe.copies}:{},...oe.intervalMs?{intervalMs:oe.intervalMs}:{}}),(oe.pageRange||oe.pageSet)&&(u.pages={...oe.pageRange?{range:oe.pageRange}:{},...oe.pageSet?{set:oe.pageSet}:{}}),(oe.scale||oe.orientation)&&(u.layout={...oe.scale?{scale:oe.scale}:{},...oe.orientation?{orientation:oe.orientation}:{}}),oe.colorMode&&(u.color={mode:oe.colorMode}),oe.sidesMode&&(u.sides={mode:oe.sidesMode}),oe.paperSize&&(u.paper={size:oe.paperSize}),oe.trayBin&&(u.tray={bin:oe.trayBin}),u},ee=(oe,ce,he)=>new Promise((u,X)=>{let T=!1;const b=new WebSocket(oe),w=window.setTimeout(()=>{T||(T=!0,b.close(),X(new Error("Print request timeout")))},3e4);b.onopen=()=>{b.send(JSON.stringify(ce))},b.onmessage=_=>{if(!T)try{const W=JSON.parse(_.data);if(he==="status"&&(W.status==="success"||W.status),he==="task_result"&&W.cmd==="task_result"){T=!0,window.clearTimeout(w),b.close(),u();return}}catch(W){T=!0,window.clearTimeout(w),b.close(),X(W instanceof Error?W:new Error("Print failed"))}},b.onerror=()=>{T||(T=!0,window.clearTimeout(w),b.close(),X(new Error("Print connection failed")))}});let Y=null,R="",A=null,L=Promise.resolve();const te=()=>{Y&&Y.readyState===WebSocket.OPEN&&Y.close(),Y=null,R="",A=null},B=oe=>Y&&Y.readyState===WebSocket.OPEN&&R===oe?Promise.resolve(Y):A||(R=oe,A=new Promise((ce,he)=>{const u=new WebSocket(oe),X=()=>{u.removeEventListener("open",X),u.removeEventListener("error",T),Y=u,A=null,ce(u)},T=()=>{u.removeEventListener("open",X),u.removeEventListener("error",T),te(),he(new Error("Print connection failed"))};u.addEventListener("open",X),u.addEventListener("error",T)}),A),J=(oe,ce,he)=>(L=L.then(()=>new Promise(async(u,X)=>{let T=!1,b=null;const w=window.setTimeout(()=>{T||(T=!0,te(),X(new Error("Print request timeout")))},3e4),_=()=>{b&&(b.removeEventListener("message",W),b.removeEventListener("error",V),b.removeEventListener("close",G))},W=ne=>{if(!T)try{const pe=JSON.parse(ne.data);(pe.status==="success"||pe.status==="error")&&(T=!0,window.clearTimeout(w),_(),pe.status==="success"?u():X(new Error(pe.message||"Print failed")))}catch(pe){T=!0,window.clearTimeout(w),_(),X(pe instanceof Error?pe:new Error("Print failed"))}},V=()=>{T||(T=!0,window.clearTimeout(w),_(),te(),X(new Error("Print connection failed")))},G=()=>{T||(T=!0,window.clearTimeout(w),_(),te(),X(new Error("Print connection closed")))};try{b=await B(oe),b.addEventListener("message",W),b.addEventListener("error",V),b.addEventListener("close",G),b.send(JSON.stringify(ce))}catch(ne){T=!0,window.clearTimeout(w),_(),X(ne instanceof Error?ne:new Error("Print connection failed"))}})),L),ge=async(oe,ce)=>{const he=(ce==null?void 0:ce.mode)||e.value;if(he==="browser"){await $(oe);return}if(!(he==="local"?o.value==="connected":i.value==="connected")){await $(oe);return}const X=(ce==null?void 0:ce.options)||(he==="local"?l:d);if(!X.printer){alert("Printer is required");return}try{const T=await Se(oe),b=await Z(T);if(he==="local"){const _=F(X,b,t.secretKey.trim());await J(c.value,_,"status");return}if(!x.value){alert("Client is required");return}const w=F(X,b);w.cmd="submit_task",w.client_id=x.value,await ee(m.value,w,"task_result")}catch(T){console.error("Print failed",T),alert("Print failed")}},_e=async oe=>{if(oe.length===0)return"";const ce=await new Promise((w,_)=>{const W=new Image;W.onload=()=>w(W),W.onerror=_,W.src=oe[0]}),he=ce.width,u=ce.height,X=u*oe.length,T=document.createElement("canvas");T.width=he,T.height=X;const b=T.getContext("2d");if(!b)throw new Error("Could not get canvas context");b.drawImage(ce,0,0);for(let w=1;w<oe.length;w++)await new Promise((_,W)=>{const V=new Image;V.onload=()=>{b.drawImage(V,0,w*u),_()},V.onerror=W,V.src=oe[w]});return T.toDataURL("image/jpeg",.8)},de=async(oe,ce="print-design")=>{try{const he=oe||Array.from(document.querySelectorAll(".print-page")),u=await p({mutateStore:!1,setExporting:!1}),X=r.canvasSize.width,T=r.canvasSize.height;let b=null;const w=await z(he);b=w.cleanup;const{container:_,tempWrapper:W}=await H(w.content,X,T,!0,w.getComputedStyleFn);try{const V=await P(_,X,T);if(V.length===0)return;if(v.value){const G=await _e(V),ne=document.createElement("a");ne.href=G,ne.download=`${ce}.jpg`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)}else{const G=new Bu;await Promise.all(V.map(async(we,fe)=>{const re=await(await fetch(we)).blob();G.file(`${ce}-${fe+1}.jpg`,re)}));const ne=await G.generateAsync({type:"blob"}),pe=URL.createObjectURL(ne),se=document.createElement("a");se.href=pe,se.download=`${ce}.zip`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(pe)}}finally{W&&W.parentNode&&W.parentNode.removeChild(W),b&&b(),u()}}catch(he){console.error("Export Images failed",he),alert("Export Images failed")}},xe=async oe=>{try{const ce=oe||Array.from(document.querySelectorAll(".print-page")),he=await p({mutateStore:!1,setExporting:!1}),u=r.canvasSize.width,X=r.canvasSize.height;let T=null;const b=await z(ce);T=b.cleanup;const{container:w,tempWrapper:_}=await H(b.content,u,X,!0,b.getComputedStyleFn);try{const W=await P(w,u,X);if(W.length===0)throw new Error("No images generated");const V=await _e(W);return await(await fetch(V)).blob()}finally{_&&_.parentNode&&_.parentNode.removeChild(_),T&&T(),he()}}catch(ce){throw console.error("Get Image Blob failed",ce),ce}},Se=async oe=>{try{return(await q(oe)).output("blob")}catch(ce){throw console.error("Get PDF Blob failed",ce),ce}};return{getPrintHtml:k,print:ge,exportPdf:h,exportImages:de,getPdfBlob:Se,getImageBlob:xe}},ip={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function lp(r,e){return M(),N("svg",ip,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6z"},null,-1)])])}const wt=Ee({name:"material-symbols-close",render:lp}),dp={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function cp(r,e){return M(),N("svg",dp,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M14 20v-2h3q.425 0 .713-.288T18 17v-2q0-.95.55-1.725t1.45-1.1v-.35q-.9-.325-1.45-1.1T18 9V7q0-.425-.288-.712T17 6h-3V4h3q1.25 0 2.125.875T20 7v2q0 .425.288.713T21 10h1v4h-1q-.425 0-.712.288T20 15v2q0 1.25-.875 2.125T17 20zm-7 0q-1.25 0-2.125-.875T4 17v-2q0-.425-.288-.712T3 14H2v-4h1q.425 0 .713-.288T4 9V7q0-1.25.875-2.125T7 4h3v2H7q-.425 0-.712.288T6 7v2q0 .95-.55 1.725T4 11.825v.35q.9.325 1.45 1.1T6 15v2q0 .425.288.713T7 18h3v2z"},null,-1)])])}const pt=Ee({name:"material-symbols-data-object",render:cp}),up={class:"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-[60vw] h-[80vh] flex flex-col overflow-hidden animate-fade-in"},hp={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-800 shrink-0"},pp={class:"flex items-center gap-2"},gp={class:"text-lg font-semibold text-gray-800 dark:text-gray-100"},fp={class:"px-2 py-0.5 rounded bg-gray-200 dark:bg-gray-800 text-gray-600 dark:text-gray-400 text-xs font-mono"},mp={class:"flex-1 overflow-hidden relative"},bp={class:"p-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800 flex justify-end rounded-b-lg"},vp=Le({__name:"CodeEditorModal",props:{visible:{type:Boolean},title:{},value:{},language:{},readOnly:{type:Boolean}},emits:["update:visible","update:value","close"],setup(r,{emit:e}){const{t}=Ne(),{isDark:s}=yt(),o=Xe("modal-container",ae(null)),i=r,l=e,d=Be(),c=me(()=>({minimap:{enabled:!0},lineNumbers:"on",glyphMargin:!1,folding:!0,wordWrap:"on",automaticLayout:!0,scrollBeyondLastLine:!1,theme:s.value?"vs-dark":"vs",fontSize:14,fontFamily:'Consolas, "Courier New", monospace',renderLineHighlight:"none",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,contextmenu:!0})),m=S=>{l("update:value",S||"")},x=()=>{l("update:visible",!1),l("close")},v=S=>{i.visible&&S.key==="Escape"&&x()};return ze(()=>i.visible,S=>{d.setDisableGlobalShortcuts(S)}),Ye(()=>{window.addEventListener("keydown",v)}),Ke(()=>{window.removeEventListener("keydown",v),i.visible&&d.setDisableGlobalShortcuts(!1)}),(S,p)=>(M(),Me(ot,{to:n(o)||"body"},[r.visible?(M(),N("div",{key:0,class:Ce([{dark:n(s)},"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto"]),onClick:je(x,["self"])},[a("div",up,[a("div",hp,[a("div",pp,[a("h3",gp,I(r.title),1),a("span",fp,I(r.language),1)]),a("button",{onClick:x,class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-500 dark:text-gray-400"},[ue(n(wt),{class:"w-4 h-4"})])]),a("div",mp,[ue(n(yi),{value:r.value,language:r.language,options:{...c.value,readOnly:r.readOnly},"onUpdate:value":m,class:"w-full h-full"},null,8,["value","language","options"])]),a("div",bp,[a("button",{onClick:x,class:"px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors text-sm"},I(n(t)("common.close")),1)])])],2)):ve("",!0)],8,["to"]))}}),jt=$t(vp,[["__scopeId","data-v-3de6c8f6"]]),yp={class:"bg-white rounded-lg shadow-xl w-[90vw] h-[90vh] flex flex-col overflow-hidden"},wp={class:"relative flex items-center justify-between p-4 border-b border-gray-200"},xp={class:"text-lg font-semibold text-gray-800"},kp={class:"absolute left-1/2 -translate-x-1/2 flex items-center gap-2"},_p=["title"],Sp=["title"],Cp={class:"text-xs text-gray-600 w-9 text-right select-none"},Ep=["innerHTML"],Tp={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3 rounded-b-lg"},Ip=Le({__name:"PreviewModal",props:{visible:{type:Boolean},htmlContent:{},width:{}},emits:["update:visible"],setup(r,{emit:e}){const t=r,s=e,{t:o}=Ne(),i=Be(),l=Xe("modal-container",ae(null)),{exportPdf:d,getPdfBlob:c,exportImages:m,getImageBlob:x}=Qi(),v=rr(),S=ae(null),p=ae(null),f=ae(100),g=ae(!1),C=ae(""),y=ae(""),E=ae("json"),z=ee=>{document.documentElement.classList.toggle("previewing",ee),document.body.classList.toggle("previewing",ee)};ze(()=>t.visible,ee=>{ee||(f.value=100),i.setDisableGlobalShortcuts(ee),z(ee)});const k=()=>{s("update:visible",!1)},U=()=>{const ee={pages:Ie(i.pages),canvasSize:Ie(i.canvasSize),guides:Ie(i.guides),zoom:i.zoom,showGrid:i.showGrid,headerHeight:i.headerHeight,footerHeight:i.footerHeight,showHeaderLine:i.showHeaderLine,showFooterLine:i.showFooterLine,showMinimap:i.showMinimap,canvasBackground:i.canvasBackground};C.value=JSON.stringify(ee,null,2),y.value=o("preview.templateJson"),E.value="json",g.value=!0},K=async()=>{try{if(!S.value)return;const ee=Array.from(S.value.querySelectorAll(".print-page")),Y=await x(ee),R=new FileReader;R.readAsDataURL(Y),R.onloadend=()=>{C.value=R.result,y.value=o("editor.viewImageBlob"),E.value="text",g.value=!0}}catch(ee){console.error(ee),alert("Failed to generate blob")}},j=async()=>{try{if(!S.value)return;const ee=Array.from(S.value.querySelectorAll(".print-page")),Y=await c(ee),R=new FileReader;R.readAsDataURL(Y),R.onloadend=()=>{C.value=R.result,y.value=o("editor.viewPdfBlob"),E.value="text",g.value=!0}}catch(ee){console.error(ee),alert("Failed to generate PDF blob")}},D=()=>{window.dispatchEvent(new CustomEvent("designer:print"))},O=()=>{if(S.value){const ee=Array.from(S.value.querySelectorAll(".print-page"));d(ee,`${H()}.pdf`)}},Q=async()=>{if(S.value){const ee=Array.from(S.value.querySelectorAll(".print-page"));await m(ee,H())}},H=()=>{const ee=v.templates.find(J=>J.id===v.currentTemplateId),R=((ee==null?void 0:ee.name)||"print-design").trim().replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g," ").trim()||"print-design",A=new Date,L=A.getFullYear(),te=String(A.getMonth()+1).padStart(2,"0"),B=String(A.getDate()).padStart(2,"0");return`${R}-${L}${te}${B}`},P=()=>{f.value=Math.min(500,f.value+10)},q=()=>{f.value=Math.max(20,f.value-10)},h=ee=>{ee.ctrlKey&&(ee.preventDefault(),ee.deltaY<0?P():q())},$=ee=>{var Y,R;(ee.key==="Control"||ee.key==="Meta")&&(ee.type==="keydown"&&!ee.repeat?(Y=p.value)==null||Y.addEventListener("wheel",h,{passive:!1}):ee.type==="keyup"&&((R=p.value)==null||R.removeEventListener("wheel",h)))},Z=()=>{var ee;(ee=p.value)==null||ee.removeEventListener("wheel",h)},F=ee=>{t.visible&&ee.key==="Escape"&&k(),$(ee)};return Ye(()=>{window.addEventListener("keydown",F),window.addEventListener("keyup",$),window.addEventListener("blur",Z)}),Ke(()=>{var ee;window.removeEventListener("keydown",F),window.removeEventListener("keyup",$),window.removeEventListener("blur",Z),(ee=p.value)==null||ee.removeEventListener("wheel",h),t.visible&&i.setDisableGlobalShortcuts(!1),z(!1)}),(ee,Y)=>(M(),N($e,null,[(M(),Me(ot,{to:n(l)||"body"},[r.visible?(M(),N("div",{key:0,class:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:je(k,["self"])},[a("div",yp,[a("div",wp,[a("h3",xp,I(n(o)("preview.title")),1),a("div",kp,[a("button",{onClick:q,class:"p-1 hover:bg-gray-100 rounded text-gray-600 transition-colors",title:n(o)("preview.zoomOut")},[ue(n(Hi),{class:"w-4 h-4"})],8,_p),Ae(a("input",{type:"range",min:"20",max:"500",step:"10","onUpdate:modelValue":Y[0]||(Y[0]=R=>f.value=R),class:"w-32 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:hover:scale-110 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 [&::-moz-range-thumb]:border-none [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:transition-all [&::-moz-range-thumb]:hover:scale-110"},null,512),[[Oe,f.value,void 0,{number:!0}]]),a("button",{onClick:P,class:"p-1 hover:bg-gray-100 rounded text-gray-600 transition-colors",title:n(o)("preview.zoomIn")},[ue(n(Ni),{class:"w-4 h-4"})],8,Sp),a("span",Cp,I(f.value)+"%",1)]),a("button",{onClick:k,class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(n(wt),{class:"w-4 h-4"})])]),a("div",{class:"flex-1 overflow-auto bg-gray-100 p-8 flex justify-center",ref_key:"wrapperRef",ref:p},[a("div",{ref_key:"previewContainer",ref:S,class:"preview-content",style:ke(`width: ${r.width}px; zoom: ${f.value/100}`),innerHTML:r.htmlContent},null,12,Ep)],512),a("div",Tp,[a("button",{onClick:D,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600"},[ue(n(Ia),{class:"text-lg"}),Te(" "+I(n(o)("editor.print")),1)]),a("button",{onClick:O,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600"},[ue(n(Kt),{class:"text-lg"}),Te(" "+I(n(o)("editor.exportPdf")),1)]),a("button",{onClick:Q,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600"},[ue(n(Kt),{class:"text-lg"}),Te(" "+I(n(o)("editor.exportImage")),1)]),a("button",{onClick:K,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700 flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100"},[ue(n(pt),{class:"text-lg"}),Te(" "+I(n(o)("editor.viewImageBlob")),1)]),a("button",{onClick:j,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700 flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100"},[ue(n(pt),{class:"text-lg"}),Te(" "+I(n(o)("editor.viewPdfBlob")),1)]),a("button",{onClick:U,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700 flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100"},[ue(n(pt),{class:"text-lg"}),Te(" "+I(n(o)("editor.viewJson")),1)]),a("button",{onClick:k,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700 flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100"},I(n(o)("common.close")),1)])])])):ve("",!0)],8,["to"])),ue(jt,{visible:g.value,"onUpdate:visible":Y[1]||(Y[1]=R=>g.value=R),title:y.value,value:C.value,language:E.value,"read-only":""},null,8,["visible","title","value","language"])],64))}}),$p=$t(Ip,[["__scopeId","data-v-43107376"]]),Ap={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function zp(r,e){return M(),N("svg",Ap,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m9.55 18l-5.7-5.7l1.425-1.425L9.55 15.15l9.175-9.175L20.15 7.4z"},null,-1)])])}const Pp=Ee({name:"material-symbols-check",render:zp}),Lp={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Mp(r,e){return M(),N("svg",Lp,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M19.25 16.4L8.4 5.55L12 2l5.65 5.55q1.1 1.05 1.725 2.488T20 13.1q0 .9-.2 1.725t-.55 1.575m.55 6.2l-3.1-3.1q-1.025.725-2.2 1.113T12 21q-3.325 0-5.663-2.312T4 13.1q0-1.275.4-2.45T5.6 8.4L1.4 4.2l1.4-1.4l18.4 18.4z"},null,-1)])])}Ee({name:"material-symbols-format-color-reset",render:Mp});const Rp={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Dp(r,e){return M(),N("svg",Rp,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m20.475 23.3l-2.3-2.3h-1.85v-1.85l-2-2V21h-4.65v-4.675H13.5l-2-2H9.675v-1.85l-2-2v3.85H3v-4.65h3.875l-2-2H3V5.8L.7 3.5l1.4-1.4l19.8 19.8zM5 21q-.825 0-1.412-.587T3 19v-2.675h4.675V21zm16-2.9l-1.775-1.775H21zm-3.775-3.775l-.9-.9v-3.75H21v4.65zm-2.9-2.9l-1.75-1.75h1.75zm-3.75-3.75l-.9-.9V3h4.65v4.675zm5.75 0V3H19q.825 0 1.413.588T21 5v2.675zm-8.65-2.9L5.9 3h1.775z"},null,-1)])])}Ee({name:"material-symbols-grid-off",render:Dp});const Bp={key:0,class:"w-full h-[1px] bg-red-500 rotate-45 absolute"},Op={key:1,class:"w-full h-full bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50"},qp={class:"flex gap-2 mb-3"},Fp={class:"flex-1 flex flex-col gap-2"},jp={class:"relative h-3 rounded bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] border border-gray-200 dark:border-gray-700"},Np={class:"w-8 h-8 rounded border border-gray-200 dark:border-gray-700 overflow-hidden relative"},Hp={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none"},Up={class:"flex gap-2 mb-3"},Vp={class:"flex-1"},Wp={class:"w-16 text-right text-xs text-gray-500 dark:text-gray-400 flex items-center justify-end"},Gp={class:"grid grid-cols-9 gap-1.5 mb-3"},Yp=["onClick","title"],Kp={class:"flex justify-between border-t border-gray-100 dark:border-gray-700 pt-2"},Xp={key:0},St=Le({__name:"ColorPicker",props:{modelValue:{},disabled:{type:Boolean},defaultColor:{},allowTransparent:{type:Boolean},teleportToBody:{type:Boolean}},emits:["update:modelValue"],setup(r,{emit:e}){const t=r,s=e,{t:o}=Ne(),{isDark:i}=yt(),l=Xe("modal-container",ae(null)),d=ae(!1),c=ae(null),m=ae(null),x=ae({h:0,s:0,v:0,a:1}),v=ae(null),S=ae(null),p=ae(null),f=me(()=>t.modelValue?t.modelValue==="transparent"?"transparent":t.modelValue:t.defaultColor||"#000000"),g=me(()=>t.modelValue==="transparent"),C=me({get:()=>Vs(x.value.h,x.value.s,x.value.v,x.value.a),set:Z=>{const F=Dt(Z);F&&(x.value=F,D())}}),y=me(()=>{const{r:Z,g:F,b:ee}=Ot(x.value.h,x.value.s,x.value.v);return`rgba(${Z}, ${F}, ${ee}, ${parseFloat(x.value.a.toFixed(2))})`}),E=me(()=>({backgroundColor:`hsl(${x.value.h}, 100%, 50%)`})),z=me(()=>({top:`${(1-x.value.v)*100}%`,left:`${x.value.s*100}%`})),k=me(()=>({left:`${x.value.h/360*100}%`})),U=me(()=>({left:`${x.value.a*100}%`})),K=me(()=>{const{r:Z,g:F,b:ee}=Ot(x.value.h,x.value.s,x.value.v);return{background:`linear-gradient(to right, rgba(${Z},${F},${ee},0) 0%, rgba(${Z},${F},${ee},1) 100%)`}});ze(()=>t.modelValue,Z=>{if(Z){const F=Dt(Z);F&&(x.value=F)}},{immediate:!0});const j=(Z,F)=>{Z.preventDefault();const ee=F==="sv"?v.value:F==="hue"?S.value:p.value;if(!ee)return;const Y=(L,te)=>{const B=ee.getBoundingClientRect();let J=(L-B.left)/B.width,ge=(te-B.top)/B.height;J=Math.max(0,Math.min(1,J)),ge=Math.max(0,Math.min(1,ge)),F==="sv"?(x.value.s=J,x.value.v=1-ge,x.value.a===0&&(x.value.a=1)):F==="hue"?(x.value.h=J*360,x.value.a===0&&(x.value.a=1)):F==="alpha"&&(x.value.a=J),D()};Y(Z.clientX,Z.clientY);const R=L=>{Y(L.clientX,L.clientY)},A=()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",A)};window.addEventListener("mousemove",R),window.addEventListener("mouseup",A)},D=()=>{x.value.a===0&&t.allowTransparent?s("update:modelValue","transparent"):s("update:modelValue",Vs(x.value.h,x.value.s,x.value.v,x.value.a))},O=ae({top:"100%",left:"0",marginTop:"8px"}),Q=()=>{if(!c.value)return;const Z=c.value.getBoundingClientRect(),F=window.innerWidth,ee=window.innerHeight,Y=240,R=350,A={};if(t.teleportToBody){const L=Z.left+Y<=F-20,te=Z.bottom+R<=ee-10;A.position="fixed",A.left=`${L?Z.left:Math.max(8,Z.right-Y)}px`,A.top=`${te?Z.bottom+8:Math.max(8,Z.top-R-8)}px`,O.value=A;return}Z.left+Y>F-20?(A.left="auto",A.right="0"):(A.left="0",A.right="auto"),Z.bottom+R>ee-10?(A.top="auto",A.bottom="100%",A.marginTop="0",A.marginBottom="8px"):(A.top="100%",A.bottom="auto",A.marginTop="8px",A.marginBottom="0"),O.value=A},H=Z=>{if(!d.value)return;const F=Z.target;if(!F)return;const ee=c.value,Y=m.value;if(!ee)return;const R=ee.contains(F)||F.closest(".color-picker-trigger"),A=Y&&Y.contains(F)||F.closest(".color-picker-dropdown");!R&&!A&&(d.value=!1)},P=async Z=>{t.disabled||(Z&&Z.stopPropagation(),d.value=!d.value,d.value&&(await Qe(),Q()))},q=()=>{d.value=!1};ze(d,Z=>{t.teleportToBody&&(Z?(Q(),window.addEventListener("scroll",Q,!0),window.addEventListener("resize",Q)):(window.removeEventListener("scroll",Q,!0),window.removeEventListener("resize",Q)))});const h=["#000000","#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],$=Z=>{const F=Dt(Z);F&&(x.value=F,D())};return Ye(()=>{document.addEventListener("mousedown",H)}),Ke(()=>{document.removeEventListener("mousedown",H)}),(Z,F)=>(M(),N("div",{class:"relative flex",ref_key:"containerRef",ref:c},[a("div",{class:"flex color-picker-trigger",onClick:P,onMousedown:F[0]||(F[0]=je(()=>{},["stop"]))},[mi(Z.$slots,"trigger",{open:d.value,color:f.value,disabled:r.disabled},()=>[a("div",{class:Ce(["w-6 h-6 rounded border border-gray-300 dark:border-gray-600 cursor-pointer flex items-center justify-center overflow-hidden transition-all hover:border-blue-500",{"opacity-50 cursor-not-allowed":r.disabled,"ring-2 ring-blue-500 ring-offset-1":d.value}]),style:ke({backgroundColor:g.value?"transparent":f.value})},[r.modelValue?ve("",!0):(M(),N("div",Bp)),g.value?(M(),N("div",Op)):ve("",!0)],6)])],32),(M(),Me(ot,{to:n(l)||"body",disabled:!r.teleportToBody},[d.value?(M(),N("div",{key:0,ref_key:"dropdownRef",ref:m,class:Ce(["color-picker-dropdown bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-3 w-[240px] pointer-events-auto",[r.teleportToBody?"fixed z-[100000]":"absolute z-[100]",{dark:n(i)}]]),style:ke(O.value),onClick:F[7]||(F[7]=je(()=>{},["stop"])),onMousedown:F[8]||(F[8]=je(()=>{},["stop"]))},[a("div",{ref_key:"svPanelRef",ref:v,class:"w-full h-32 rounded relative cursor-crosshair mb-3",style:ke(E.value),onMousedown:F[1]||(F[1]=je(ee=>j(ee,"sv"),["stop"]))},[F[9]||(F[9]=a("div",{class:"absolute inset-0 bg-gradient-to-r from-white to-transparent rounded"},null,-1)),F[10]||(F[10]=a("div",{class:"absolute inset-0 bg-gradient-to-t from-black to-transparent rounded"},null,-1)),a("div",{class:"absolute w-3 h-3 border-2 border-white rounded-full shadow-sm -ml-1.5 -mt-1.5 pointer-events-none",style:ke(z.value)},null,4)],36),a("div",qp,[a("div",Fp,[a("div",{ref_key:"hueSliderRef",ref:S,class:"h-3 rounded relative cursor-pointer border border-gray-200 dark:border-gray-700",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},onMousedown:F[2]||(F[2]=je(ee=>j(ee,"hue"),["stop"]))},[a("div",{class:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white dark:bg-gray-100 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm -ml-1.5 pointer-events-none",style:ke(k.value)},null,4)],544),a("div",jp,[a("div",{ref_key:"alphaSliderRef",ref:p,class:"absolute inset-0 cursor-pointer rounded",style:ke(K.value),onMousedown:F[3]||(F[3]=je(ee=>j(ee,"alpha"),["stop"]))},[a("div",{class:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white dark:bg-gray-100 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm -ml-1.5 pointer-events-none",style:ke(U.value)},null,4)],36)])]),a("div",Np,[F[12]||(F[12]=a("div",{class:"absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50"},null,-1)),a("div",{class:"absolute inset-0",style:ke({backgroundColor:y.value})},null,4),x.value.a===0?(M(),N("div",Hp,[...F[11]||(F[11]=[a("div",{class:"w-full h-[1px] bg-red-500 rotate-45"},null,-1)])])):ve("",!0)])]),a("div",Up,[a("div",Vp,[Ae(a("input",{type:"text","onUpdate:modelValue":F[4]||(F[4]=ee=>C.value=ee),class:"w-full text-xs px-2 py-1 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded focus:border-blue-500 outline-none font-mono uppercase",placeholder:"#000000"},null,512),[[Oe,C.value]])]),a("div",Wp,I(Math.round(x.value.a*100))+"% ",1)]),a("div",Gp,[(M(),N($e,null,De(h,ee=>a("div",{key:ee,class:Ce(["w-4 h-4 rounded-sm cursor-pointer border border-transparent hover:scale-110 hover:border-gray-400 dark:hover:border-gray-500 hover:z-10 transition-all relative",{"ring-2 ring-blue-500 ring-offset-1 z-10":C.value===ee}]),style:ke({backgroundColor:ee}),onClick:Y=>$(ee),title:ee},null,14,Yp)),64))]),a("div",Kp,[a("button",{onClick:F[5]||(F[5]=ee=>{Z.$emit("update:modelValue",void 0),q()}),class:"text-xs text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30 px-2 py-1 rounded transition-colors"},I(n(o)("colorPicker.clear")),1),r.allowTransparent?(M(),N("div",Xp,[a("button",{onClick:F[6]||(F[6]=ee=>{Z.$emit("update:modelValue","transparent"),q()}),class:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 px-2 py-1 rounded transition-colors"},I(n(o)("colorPicker.transparent")),1)])):ve("",!0)])],38)):ve("",!0)],8,["to","disabled"]))],512))}}),Zp={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Jp(r,e){return M(),N("svg",Zp,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M12 20q-.825 0-1.412-.587T10 18t.588-1.412T12 16t1.413.588T14 18t-.587 1.413T12 20m0-6q-.825 0-1.412-.587T10 12t.588-1.412T12 10t1.413.588T14 12t-.587 1.413T12 14m0-6q-.825 0-1.412-.587T10 6t.588-1.412T12 4t1.413.588T14 6t-.587 1.413T12 8"},null,-1)])])}const el=Ee({name:"material-symbols-more-vert",render:Jp}),Qp={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function eg(r,e){return M(),N("svg",Qp,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M3 21v-4.25L16.2 3.575q.3-.275.663-.425t.762-.15t.775.15t.65.45L20.425 5q.3.275.438.65T21 6.4q0 .4-.137.763t-.438.662L7.25 21zM17.6 7.8L19 6.4L17.6 5l-1.4 1.4z"},null,-1)])])}const ma=Ee({name:"material-symbols-edit",render:eg}),tg={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function rg(r,e){return M(),N("svg",tg,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M8 18h8v-2H8zm0-4h8v-2H8zm-2 8q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h8l6 6v12q0 .825-.587 1.413T18 22zm7-13h5l-5-5z"},null,-1)])])}const og=Ee({name:"material-symbols-description",render:rg}),ag={class:"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-96 animate-in fade-in zoom-in duration-200 flex flex-col overflow-hidden"},ng={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-800 shrink-0"},sg={class:"text-lg font-semibold text-gray-800 dark:text-gray-100"},ig={class:"p-4"},lg={class:"mb-4"},dg=["placeholder"],cg={class:"flex justify-end gap-2"},ug=["disabled"],Nt=Le({__name:"InputModal",props:{show:{type:Boolean},initialValue:{},title:{},placeholder:{}},emits:["close","save"],setup(r,{emit:e}){const t=r,s=e,{t:o}=Ne(),{isDark:i}=yt(),l=Be(),d=Xe("modal-container",ae(null)),c=ae(""),m=ae(null);ze(()=>t.show,v=>{if(v){c.value=t.initialValue||"",setTimeout(()=>{var S;(S=m.value)==null||S.focus()},100),l.setDisableGlobalShortcuts(!0);return}l.setDisableGlobalShortcuts(!1)});const x=()=>{c.value.trim()&&(s("save",c.value.trim()),s("close"))};return Ke(()=>{t.show&&l.setDisableGlobalShortcuts(!1)}),(v,S)=>(M(),Me(ot,{to:n(d)||"body"},[r.show?(M(),N("div",{key:0,class:Ce([{dark:n(i)},"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 pointer-events-auto"])},[a("div",ag,[a("div",ng,[a("h3",sg,I(r.title||n(o)("input.title")),1),a("button",{onClick:S[0]||(S[0]=p=>s("close")),class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-500 dark:text-gray-400"},[ue(n(wt),{class:"w-4 h-4"})])]),a("div",ig,[a("div",lg,[Ae(a("input",{ref_key:"inputRef",ref:m,"onUpdate:modelValue":S[1]||(S[1]=p=>c.value=p),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:r.placeholder||n(o)("input.placeholder"),onKeydown:[_t(x,["enter"]),S[2]||(S[2]=_t(p=>s("close"),["esc"]))]},null,40,dg),[[Oe,c.value]])]),a("div",cg,[a("button",{onClick:S[3]||(S[3]=p=>s("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md transition-colors"},I(n(o)("common.cancel")),1),a("button",{onClick:x,disabled:!c.value.trim(),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},I(n(o)("common.confirm")),9,ug)])])])],2)):ve("",!0)],8,["to"]))}}),hg={class:"flex-1 truncate text-left"},pg={key:0,class:"absolute top-full left-0 mt-2 w-[220px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-[100] flex flex-col max-h-[500px]"},gg={class:"flex-1 overflow-y-auto py-1"},fg={key:0,class:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center"},mg=["onClick"],bg={class:"flex items-center gap-2 overflow-hidden flex-1"},vg={class:"w-2 h-2 flex items-center justify-center flex-shrink-0"},yg={key:0,class:"w-1.5 h-1.5 rounded-full bg-blue-500"},wg=["onClick"],xg={class:"border-t border-gray-100 dark:border-gray-700 p-1"},kg=Le({__name:"TemplateDropdown",setup(r){const{t:e}=Ne(),t=rr(),s=Be(),o=Xe("modal-container",ae(null)),i=ae(!1),l=ae(null),d=ae(null),c=ae({}),m=ae(!1),x=ae("create"),v=ae(""),S=ae(null),p=ae(!1),f=ae(""),g=ae(null),C=ae([]);Ye(async()=>{await t.loadTemplates(),!t.currentTemplateId&&t.templates.length>0&&t.loadTemplate(t.templates[0].id),document.addEventListener("click",y),window.addEventListener("designer:new-template",j)}),Ke(()=>{document.removeEventListener("click",y),window.removeEventListener("designer:new-template",j)});const y=$=>{var A;const Z=$.composedPath(),F=l.value&&Z.includes(l.value),Y=(((A=l.value)==null?void 0:A.getRootNode())||document).querySelector(".row-menu-content"),R=Y&&Z.includes(Y);!F&&!R&&(i.value=!1,d.value=null)},E=me(()=>{const $=t.templates.find(Z=>Z.id===t.currentTemplateId);return $?$.name:e("template.select")}),z=()=>{i.value=!i.value,i.value||(d.value=null)},k=$=>{if(t.currentTemplateId){const Z=t.templates.find(F=>F.id===t.currentTemplateId);Z&&t.saveCurrentTemplate(Z.name)}t.loadTemplate($.id),i.value=!1},U=($,Z)=>{if($.stopPropagation(),d.value===Z)d.value=null;else{const ee=$.currentTarget.getBoundingClientRect();let R=ee.right-128;R<5&&(R=ee.left),window.innerHeight-ee.bottom<150?c.value={bottom:`${window.innerHeight-ee.top+5}px`,left:`${R}px`}:c.value={top:`${ee.bottom+5}px`,left:`${R}px`},d.value=Z}},K=()=>t.templates.find($=>$.id===d.value),j=()=>{d.value=null,x.value="create",v.value="",m.value=!0,i.value=!1},D=$=>{d.value=null,x.value="rename",S.value=$.id,v.value=$.name,m.value=!0,i.value=!1},O=$=>{t.copyTemplate($.id),d.value=null},Q=$=>{confirm(e("template.confirmDelete",{name:$.name}))&&(t.deleteTemplate($.id),!t.currentTemplateId&&t.templates.length>0&&t.loadTemplate(t.templates[0].id)),d.value=null},H=$=>{var Y,R;const Z=t.currentTemplateId===$.id,F=Z?s.testData||{}:((Y=$.data)==null?void 0:Y.testData)||{},ee=Z?s.pages:((R=$.data)==null?void 0:R.pages)||[];return Yu(ee,F)},P=$=>{d.value=null,g.value=$;const Z=H($);C.value=Object.keys(Z),f.value=JSON.stringify(Z,null,2),p.value=!0,i.value=!1},q=()=>{var ee;const $=g.value,Z=new Set(C.value||[]);if(g.value=null,C.value=[],!$)return;let F=null;try{const Y=((ee=f.value)==null?void 0:ee.trim())||"{}",R=JSON.parse(Y);R&&typeof R=="object"&&!Array.isArray(R)&&(F=R)}catch{F=null}if(!F){alert(e("common.invalidJson"));return}if(Z.size>0){const Y=Object.keys(F);if(Y.length!==Z.size||Y.some(A=>!Z.has(A))){alert(e("common.testDataKeyChanged"));return}}$.data={...$.data||{},testData:F},$.updatedAt=Date.now(),t.saveToLocalStorage(),t.currentTemplateId===$.id&&(s.testData=F)},h=$=>{if(x.value==="create"){if(t.currentTemplateId){const F=t.templates.find(ee=>ee.id===t.currentTemplateId);F&&t.saveCurrentTemplate(F.name)}Be().resetCanvas(),t.createTemplate($)}else x.value==="rename"&&S.value&&t.renameTemplate(S.value,$)};return($,Z)=>(M(),N("div",{class:"relative",ref_key:"containerRef",ref:l},[a("button",{onClick:je(z,["stop"]),class:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 transition-colors w-40",title:"Templates"},[ue(n(og),{class:"w-4 h-4 flex-shrink-0"}),a("span",hg,I(E.value),1),ue(n(za),{class:"w-4 h-4 flex-shrink-0"})]),i.value?(M(),N("div",pg,[a("div",gg,[n(t).templates.length===0?(M(),N("div",fg,I(n(e)("template.noTemplates")),1)):ve("",!0),(M(!0),N($e,null,De(n(t).templates,F=>(M(),N("div",{key:F.id,class:"relative group border-b border-gray-100 dark:border-gray-700 last:border-b-0 flex items-center justify-between px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:ee=>k(F)},[a("div",bg,[a("div",vg,[n(t).currentTemplateId===F.id?(M(),N("div",yg)):ve("",!0)]),a("span",{class:Ce(["text-sm text-gray-700 dark:text-gray-200 truncate",{"font-medium text-blue-600 dark:text-blue-400":n(t).currentTemplateId===F.id}])},I(F.name),3)]),a("button",{onClick:ee=>U(ee,F.id),class:Ce(["row-menu-trigger p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 opacity-0 group-hover:opacity-100 transition-opacity",{"opacity-100 bg-gray-200 dark:bg-gray-600":d.value===F.id}])},[ue(n(el),{class:"w-4 h-4"})],10,wg)],8,mg))),128))]),a("div",xg,[a("button",{onClick:j,class:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors"},[ue(n(Pa),{class:"w-4 h-4"}),Te(" "+I(n(e)("template.new")),1)])])])):ve("",!0),(M(),Me(ot,{to:n(o)||"body"},[d.value?(M(),N("div",{key:0,class:"fixed inset-0 z-[2000] pointer-events-auto",onClick:Z[5]||(Z[5]=F=>d.value=null)},[a("div",{class:"row-menu-content absolute w-32 bg-white dark:bg-gray-800 rounded shadow-lg border border-gray-100 dark:border-gray-700 z-[2001] py-1 pointer-events-auto",style:ke(c.value),onClick:Z[4]||(Z[4]=je(()=>{},["stop"]))},[K()?(M(),N($e,{key:0},[a("button",{onClick:Z[0]||(Z[0]=F=>P(K())),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2"},[ue(n(pt),{class:"w-3.5 h-3.5"}),Te(" "+I(n(e)("common.testData")),1)]),a("button",{onClick:Z[1]||(Z[1]=F=>D(K())),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2"},[ue(n(ma),{class:"w-3.5 h-3.5"}),Te(" "+I(n(e)("common.rename")),1)]),a("button",{onClick:Z[2]||(Z[2]=F=>O(K())),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2"},[ue(n(It),{class:"w-3.5 h-3.5"}),Te(" "+I(n(e)("common.copy")),1)]),a("button",{onClick:Z[3]||(Z[3]=F=>Q(K())),class:"w-full text-left px-3 py-1.5 text-xs text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 flex items-center gap-2"},[ue(n(Tt),{class:"w-3.5 h-3.5"}),Te(" "+I(n(e)("common.delete")),1)])],64)):ve("",!0)],4)])):ve("",!0)],8,["to"])),ue(Nt,{show:m.value,"initial-value":v.value,title:x.value==="create"?n(e)("template.new"):n(e)("template.rename"),onClose:Z[6]||(Z[6]=F=>m.value=!1),onSave:h},null,8,["show","initial-value","title"]),ue(jt,{visible:p.value,"onUpdate:visible":Z[7]||(Z[7]=F=>p.value=F),title:n(e)("common.testData"),value:f.value,language:"json","onUpdate:value":Z[8]||(Z[8]=F=>f.value=F),onClose:q},null,8,["visible","title","value"])],512))}}),xt={A3:{width:1123,height:1587},A4:{width:794,height:1123},A5:{width:559,height:794},LETTER:{width:816,height:1056},LEGAL:{width:816,height:1344},"Receipt 58mm":{width:219,height:794},"Receipt 80mm":{width:302,height:794},"241-1 (Full)":{width:911,height:1058},"241-2 (Half)":{width:911,height:529},"241-3 (Third)":{width:911,height:352}},_g={class:"relative"},Sg={class:"flex items-center bg-gray-100 dark:bg-gray-800 rounded-lg p-1"},Cg=["title"],Eg=["title"],Tg={class:"truncate"},Ig=["title"],$g={key:0,class:"absolute top-full left-0 mt-2 w-64 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl rounded-lg p-4 z-[1000]"},Ag={class:"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-3"},zg={class:"space-y-3"},Pg={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},Lg=["value"],Mg={value:"CUSTOM",class:"dark:bg-gray-800 dark:text-gray-200"},Rg={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},Dg=["value"],Bg={value:"mm",class:"dark:bg-gray-800 dark:text-gray-200"},Og={value:"pt",class:"dark:bg-gray-800 dark:text-gray-200"},qg={value:"px",class:"dark:bg-gray-800 dark:text-gray-200"},Fg={class:"grid grid-cols-2 gap-2"},jg={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},Ng=["value"],Hg={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},Ug=["value"],Vg={class:"grid grid-cols-2 gap-2"},Wg={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},Gg=["value"],Yg={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},Kg=["value"],Xg={class:"mt-4 flex items-center justify-between"},Zg={class:"text-sm text-gray-700 dark:text-gray-200 font-medium"},Jg={class:"mt-3 flex items-center justify-between"},Qg={class:"text-sm text-gray-700 dark:text-gray-200 font-medium"},e0={class:"mt-3 flex items-center justify-between"},t0={class:"text-sm text-gray-700 dark:text-gray-200 font-medium"},r0={class:"mt-3 flex items-center justify-between"},o0={class:"text-sm text-gray-700 dark:text-gray-200 font-medium"},a0={class:"mt-3 flex items-center justify-between"},n0={class:"text-sm text-gray-700 dark:text-gray-200 font-medium"},s0={key:0,class:"absolute inset-0 flex items-center justify-center"},i0={class:"border-t border-gray-200 dark:border-gray-700 my-4 pt-3"},l0={class:"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-3"},d0={class:"space-y-3"},c0={class:"flex items-center justify-between"},u0={class:"flex items-center gap-2"},h0={class:"text-xs text-gray-600 dark:text-gray-400"},p0={class:"flex items-center gap-1"},g0=["value"],f0={class:"text-xs text-gray-500 dark:text-gray-400"},m0={class:"flex items-center justify-between"},b0={class:"flex items-center gap-2"},v0={class:"text-xs text-gray-600 dark:text-gray-400"},y0={class:"flex items-center gap-1"},w0=["value"],x0={class:"text-xs text-gray-500 dark:text-gray-400"},k0={class:"border-t border-gray-200 dark:border-gray-700 pt-3 mt-3"},_0={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[640px] max-w-full max-h-[90vh] flex flex-col overflow-hidden border border-gray-200 dark:border-gray-700"},S0={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-700 shrink-0"},C0={class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},E0={class:"p-4 overflow-y-auto space-y-4"},T0={class:"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-3"},I0={class:"space-y-3"},$0={class:"flex items-center justify-between"},A0={class:"text-sm text-gray-700 dark:text-gray-200 font-medium"},z0={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},P0=["placeholder"],L0={class:"grid grid-cols-2 gap-2"},M0={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},R0={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},D0={class:"grid grid-cols-2 gap-2"},B0={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},O0={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},q0={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},F0={class:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-end"},j0=Le({__name:"PaperSettings",setup(r){const{t:e}=Ne(),t=Be(),s=Xe("modal-container",ae(null)),o=ae("A4"),i=ae(xt.A4.width),l=ae(xt.A4.height),d=ae(!1),c=ae(!1),m=me({get:()=>t.canvasBackground,set:j=>t.setCanvasBackground(j)}),x=me({get:()=>{var j;return((j=t.watermark)==null?void 0:j.text)||""},set:j=>t.setWatermark({text:j})}),v=me({get:()=>{var j;return((j=t.watermark)==null?void 0:j.enabled)??!1},set:j=>t.setWatermark({enabled:!!j})}),S=me({get:()=>{var j;return((j=t.watermark)==null?void 0:j.angle)??-30},set:j=>t.setWatermark({angle:Number(j)})}),p=me({get:()=>{var j;return((j=t.watermark)==null?void 0:j.color)||"#000000"},set:j=>t.setWatermark({color:j})}),f=me({get:()=>{var j;return Math.round((((j=t.watermark)==null?void 0:j.opacity)??.1)*100)},set:j=>{const D=Math.max(0,Math.min(100,Number(j)));t.setWatermark({opacity:D/100})}}),g=me({get:()=>{var j;return k(((j=t.watermark)==null?void 0:j.size)??24)},set:j=>t.setWatermark({size:Je(Number(j),t.unit)})}),C=me({get:()=>{var j;return k(((j=t.watermark)==null?void 0:j.density)??160)},set:j=>t.setWatermark({density:Je(Number(j),t.unit)})}),y=me({get:()=>k(t.pageSpacingX||0),set:j=>t.setPageSpacingX(Je(Number(j),t.unit))}),E=me({get:()=>k(t.pageSpacingY||0),set:j=>t.setPageSpacingY(Je(Number(j),t.unit))}),z=me(()=>t.unit==="px"?e("common.px"):t.unit==="pt"?e("common.pt"):e("common.mm")),k=j=>{const D=it(j,t.unit);return t.unit==="px"?Math.round(D):Number(D.toFixed(1))},U=()=>{if(o.value!=="CUSTOM"){const j=xt[o.value];i.value=j.width,l.value=j.height,t.setCanvasSize(j.width,j.height)}},K=()=>{t.setCanvasSize(i.value,l.value),Object.values(xt).some(j=>j.width===i.value&&j.height===l.value)||(o.value="CUSTOM")};return ze(()=>t.canvasSize,j=>{i.value=j.width,l.value=j.height;const D=Object.entries(xt).find(([O,Q])=>Q.width===j.width&&Q.height===j.height);D?o.value=D[0]:o.value="CUSTOM"},{immediate:!0}),ze(c,j=>{t.setDisableGlobalShortcuts(j)}),(j,D)=>(M(),N("div",_g,[a("div",Sg,[a("button",{onClick:D[0]||(D[0]=O=>d.value=!d.value),class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors dark:text-gray-200",title:n(e)("editor.paperSettings")},[ue(n(Xt),{class:"w-4 h-4"})],8,Cg),a("button",{onClick:D[1]||(D[1]=O=>d.value=!d.value),class:"flex items-center justify-center text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 rounded px-1 py-0.5 transition-colors w-16 text-center",title:n(e)("editor.paperSettings")},[a("span",Tg,I(o.value==="CUSTOM"?n(e)("editor.custom"):o.value),1)],8,Eg),a("button",{onClick:D[2]||(D[2]=O=>d.value=!d.value),class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors dark:text-gray-200",title:n(e)("editor.paperSettings")},[ue(n(za),{class:"w-4 h-4"})],8,Ig)]),d.value?(M(),N("div",$g,[a("h3",Ag,I(n(e)("editor.paperSettings")),1),a("div",zg,[a("div",null,[a("label",Pg,I(n(e)("editor.sizePreset")),1),Ae(a("select",{"onUpdate:modelValue":D[3]||(D[3]=O=>o.value=O),onChange:U,class:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},[(M(!0),N($e,null,De(n(xt),(O,Q)=>(M(),N("option",{key:Q,value:Q,class:"dark:bg-gray-800 dark:text-gray-200"},I(Q)+" ("+I(k(O.width))+I(z.value)+" x "+I(k(O.height))+I(z.value)+") ",9,Lg))),128)),a("option",Mg,I(n(e)("editor.custom")),1)],544),[[et,o.value]])]),a("div",null,[a("label",Rg,I(n(e)("editor.unit")),1),a("select",{value:n(t).unit,onChange:D[4]||(D[4]=O=>n(t).setUnit(O.target.value)),class:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},[a("option",Bg,I(n(e)("common.mm")),1),a("option",Og,I(n(e)("common.pt")),1),a("option",qg,I(n(e)("common.px")),1)],40,Dg)]),a("div",Fg,[a("div",null,[a("label",jg,I(n(e)("common.width"))+" ("+I(z.value)+")",1),a("input",{type:"number",value:k(i.value),onChange:D[5]||(D[5]=O=>{i.value=n(Je)(Number(O.target.value),n(t).unit),K()}),class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},null,40,Ng)]),a("div",null,[a("label",Hg,I(n(e)("common.height"))+" ("+I(z.value)+")",1),a("input",{type:"number",value:k(l.value),onChange:D[6]||(D[6]=O=>{l.value=n(Je)(Number(O.target.value),n(t).unit),K()}),class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},null,40,Ug)])]),a("div",Vg,[a("div",null,[a("label",Wg,I(n(e)("editor.spacingX"))+" ("+I(z.value)+")",1),a("input",{type:"number",value:y.value,onChange:D[7]||(D[7]=O=>{y.value=Number(O.target.value)}),class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},null,40,Gg)]),a("div",null,[a("label",Yg,I(n(e)("editor.spacingY"))+" ("+I(z.value)+")",1),a("input",{type:"number",value:E.value,onChange:D[8]||(D[8]=O=>{E.value=Number(O.target.value)}),class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},null,40,Kg)])])]),a("div",Xg,[a("span",Zg,I(n(e)("editor.showMarginLines")),1),a("button",{onClick:D[9]||(D[9]=O=>n(t).setShowMarginLines(!n(t).showMarginLines)),class:Ce(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",n(t).showMarginLines?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700"])},[D[31]||(D[31]=a("span",{class:"sr-only"},"Toggle margin lines",-1)),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white dark:bg-gray-100 shadow ring-0 transition duration-200 ease-in-out",n(t).showMarginLines?"translate-x-5":"translate-x-0"])},null,2)],2)]),a("div",Jg,[a("span",Qg,I(n(e)("editor.showCornerMarkers")),1),a("button",{onClick:D[10]||(D[10]=O=>n(t).setShowCornerMarkers(!n(t).showCornerMarkers)),class:Ce(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",n(t).showCornerMarkers?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700"])},[D[32]||(D[32]=a("span",{class:"sr-only"},"Toggle corner markers",-1)),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white dark:bg-gray-100 shadow ring-0 transition duration-200 ease-in-out",n(t).showCornerMarkers?"translate-x-5":"translate-x-0"])},null,2)],2)]),a("div",e0,[a("span",t0,I(n(e)("editor.showGrid")),1),a("button",{onClick:D[11]||(D[11]=O=>n(t).setShowGrid(!n(t).showGrid)),class:Ce(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",n(t).showGrid?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700"])},[D[33]||(D[33]=a("span",{class:"sr-only"},"Toggle grid",-1)),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white dark:bg-gray-100 shadow ring-0 transition duration-200 ease-in-out",n(t).showGrid?"translate-x-5":"translate-x-0"])},null,2)],2)]),a("div",r0,[a("span",o0,I(n(e)("editor.showMinimap")),1),a("button",{onClick:D[12]||(D[12]=O=>n(t).setShowMinimap(!n(t).showMinimap)),class:Ce(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",n(t).showMinimap?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700"])},[D[34]||(D[34]=a("span",{class:"sr-only"},"Toggle minimap",-1)),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white dark:bg-gray-100 shadow ring-0 transition duration-200 ease-in-out",n(t).showMinimap?"translate-x-5":"translate-x-0"])},null,2)],2)]),a("div",a0,[a("span",n0,I(n(e)("editor.backgroundColor")),1),ue(St,{modelValue:m.value,"onUpdate:modelValue":D[13]||(D[13]=O=>m.value=O),"allow-transparent":!0,"default-color":"#ffffff",placement:"bottom-end","teleport-to-body":!0},{trigger:gt(({color:O,open:Q})=>[a("div",{class:Ce(["w-8 h-6 rounded border border-gray-300 dark:border-gray-600 cursor-pointer relative overflow-hidden hover:border-blue-500 dark:hover:border-blue-400 transition-colors",{"ring-2 ring-blue-500 dark:ring-blue-400 ring-offset-1 dark:ring-offset-gray-900":Q}])},[D[36]||(D[36]=a("div",{class:"absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50"},null,-1)),a("div",{class:"absolute inset-0",style:ke({backgroundColor:O==="transparent"?"transparent":O})},null,4),O==="transparent"?(M(),N("div",s0,[...D[35]||(D[35]=[a("div",{class:"w-full h-[1px] bg-red-500 rotate-45"},null,-1)])])):ve("",!0)],2)]),_:1},8,["modelValue"])]),a("div",i0,[a("h3",l0,I(n(e)("editor.headerFooter")),1),a("div",d0,[a("div",c0,[a("div",u0,[a("button",{onClick:D[14]||(D[14]=O=>n(t).setShowHeaderLine(!n(t).showHeaderLine)),class:Ce(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",n(t).showHeaderLine?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700"])},[D[37]||(D[37]=a("span",{class:"sr-only"},"Toggle header line",-1)),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white dark:bg-gray-100 shadow ring-0 transition duration-200 ease-in-out",n(t).showHeaderLine?"translate-x-4":"translate-x-0"])},null,2)],2),a("label",h0,I(n(e)("editor.headerLine")),1)]),a("div",p0,[a("input",{type:"number",value:k(n(t).headerHeight),onChange:D[15]||(D[15]=O=>n(t).setHeaderHeight(n(Je)(Number(O.target.value),n(t).unit))),class:"w-16 px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none text-right",min:"0"},null,40,g0),a("span",f0,I(z.value),1)])]),a("div",m0,[a("div",b0,[a("button",{onClick:D[16]||(D[16]=O=>n(t).setShowFooterLine(!n(t).showFooterLine)),class:Ce(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",n(t).showFooterLine?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700"])},[D[38]||(D[38]=a("span",{class:"sr-only"},"Toggle footer line",-1)),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white dark:bg-gray-100 shadow ring-0 transition duration-200 ease-in-out",n(t).showFooterLine?"translate-x-4":"translate-x-0"])},null,2)],2),a("label",v0,I(n(e)("editor.footerLine")),1)]),a("div",y0,[a("input",{type:"number",value:k(n(t).footerHeight),onChange:D[17]||(D[17]=O=>n(t).setFooterHeight(n(Je)(Number(O.target.value),n(t).unit))),class:"w-16 px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none text-right",min:"0"},null,40,w0),a("span",x0,I(z.value),1)])])])]),a("div",k0,[a("button",{onClick:D[18]||(D[18]=O=>{n(t).addPage(),d.value=!1}),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-md transition-colors text-sm font-medium"},[ue(n(Pa),{class:"w-4 h-4"}),a("span",null,I(n(e)("editor.addNewPage")),1)]),a("button",{onClick:D[19]||(D[19]=O=>c.value=!0),class:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-2 bg-gray-50 dark:bg-gray-700/50 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors text-sm font-medium"},[ue(n(Xt),{class:"w-4 h-4"}),a("span",null,I(n(e)("editor.advancedSettings")),1)])]),a("div",{class:"fixed inset-0 z-[-1]",onClick:D[20]||(D[20]=O=>d.value=!1)})])):ve("",!0),(M(),Me(ot,{to:n(s)||"body"},[c.value?(M(),N("div",{key:0,class:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:D[30]||(D[30]=je(O=>c.value=!1,["self"]))},[a("div",_0,[a("div",S0,[a("h3",C0,I(n(e)("editor.advancedSettings")),1),a("button",{onClick:D[21]||(D[21]=O=>c.value=!1),class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors text-gray-500 dark:text-gray-400"},[ue(n(wt),{class:"w-4 h-4"})])]),a("div",E0,[a("div",null,[a("h3",T0,I(n(e)("editor.watermark")),1),a("div",I0,[a("div",$0,[a("span",A0,I(n(e)("editor.watermarkEnable")),1),a("button",{onClick:D[22]||(D[22]=O=>v.value=!v.value),class:Ce(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",v.value?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700"])},[D[39]||(D[39]=a("span",{class:"sr-only"},"Toggle watermark",-1)),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white dark:bg-gray-100 shadow ring-0 transition duration-200 ease-in-out",v.value?"translate-x-5":"translate-x-0"])},null,2)],2)]),a("div",null,[a("label",z0,I(n(e)("editor.watermarkText")),1),Ae(a("input",{"onUpdate:modelValue":D[23]||(D[23]=O=>x.value=O),type:"text",class:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none",placeholder:n(e)("editor.watermarkTextPlaceholder")},null,8,P0),[[Oe,x.value]])]),a("div",L0,[a("div",null,[a("label",M0,I(n(e)("editor.watermarkAngle")),1),Ae(a("input",{"onUpdate:modelValue":D[24]||(D[24]=O=>S.value=O),type:"number",class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},null,512),[[Oe,S.value,void 0,{number:!0}]])]),a("div",null,[a("label",R0,I(n(e)("editor.watermarkOpacity")),1),Ae(a("input",{"onUpdate:modelValue":D[25]||(D[25]=O=>f.value=O),type:"number",min:"0",max:"100",class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},null,512),[[Oe,f.value,void 0,{number:!0}]])])]),a("div",D0,[a("div",null,[a("label",B0,I(n(e)("editor.watermarkSize"))+" ("+I(z.value)+")",1),Ae(a("input",{"onUpdate:modelValue":D[26]||(D[26]=O=>g.value=O),type:"number",min:"1",class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},null,512),[[Oe,g.value,void 0,{number:!0}]])]),a("div",null,[a("label",O0,I(n(e)("editor.watermarkDensity"))+" ("+I(z.value)+")",1),Ae(a("input",{"onUpdate:modelValue":D[27]||(D[27]=O=>C.value=O),type:"number",min:"20",class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded focus:border-blue-500 outline-none"},null,512),[[Oe,C.value,void 0,{number:!0}]])])]),a("div",null,[a("label",q0,I(n(e)("editor.watermarkColor")),1),ue(St,{modelValue:p.value,"onUpdate:modelValue":D[28]||(D[28]=O=>p.value=O),"default-color":"#000000",placement:"bottom-end","teleport-to-body":!0},{trigger:gt(({color:O,open:Q})=>[a("div",{class:Ce(["w-8 h-6 rounded border border-gray-300 dark:border-gray-600 cursor-pointer relative overflow-hidden hover:border-blue-500 dark:hover:border-blue-400 transition-colors",{"ring-2 ring-blue-500 dark:ring-blue-400 ring-offset-1 dark:ring-offset-gray-900":Q}])},[a("div",{class:"absolute inset-0",style:ke({backgroundColor:O})},null,4)],2)]),_:1},8,["modelValue"])])])])]),a("div",F0,[a("button",{onClick:D[29]||(D[29]=O=>c.value=!1),class:"px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors text-sm font-medium"},I(n(e)("common.close")),1)])])])):ve("",!0)],8,["to"]))]))}}),N0=()=>typeof navigator>"u"?!1:/Mac|iPod|iPhone|iPad/.test(navigator.platform),Re=r=>{const e=N0();return r.map(t=>{switch(t.toLowerCase()){case"ctrl":case"control":return e?"⌘":"Ctrl";case"alt":return e?"⌥":"Alt";case"shift":return e?"⇧":"Shift";case"enter":return e?"⏎":"Enter";case"backspace":return e?"⌫":"Backspace";case"delete":return e?"⌦":"Del";case"esc":case"escape":return"Esc";default:return t.toUpperCase()}}).join(" + ")},H0={class:"bg-white rounded-lg shadow-xl w-[700px] max-w-full max-h-[90vh] flex flex-col overflow-hidden"},U0={class:"h-[56px] flex items-center justify-between px-4 border-b border-gray-200"},V0={class:"text-lg font-semibold text-gray-800"},W0={class:"flex-1 overflow-y-auto p-6 space-y-5 text-sm text-gray-700"},G0={class:"space-y-3"},Y0={class:"font-medium text-gray-900"},K0={key:0,class:"grid grid-cols-2 gap-4"},X0={class:"flex flex-col gap-1 col-span-2"},Z0={class:"text-xs text-gray-500"},J0=["disabled"],Q0={value:""},ef=["value","disabled"],tf={class:"grid grid-cols-2 gap-4"},rf={class:"flex flex-col gap-1"},of={class:"text-xs text-gray-500"},af=["disabled"],nf={value:""},sf=["value"],lf={class:"flex flex-col gap-1"},df={class:"text-xs text-gray-500"},cf=["placeholder"],uf={key:1,class:"text-xs text-red-600"},hf={key:2,class:"text-xs text-gray-500"},pf={key:3,class:"text-xs text-gray-500"},gf={key:4,class:"text-xs text-gray-500"},ff={class:"grid grid-cols-3 gap-4"},mf={class:"flex flex-col gap-1"},bf={class:"text-xs text-gray-500"},vf={class:"flex flex-col gap-1"},yf={class:"text-xs text-gray-500"},wf={class:"flex flex-col gap-1"},xf={class:"text-xs text-gray-500"},kf=["placeholder"],_f={class:"grid grid-cols-3 gap-4"},Sf={class:"flex flex-col gap-1"},Cf={class:"text-xs text-gray-500"},Ef={value:""},Tf={value:"odd"},If={value:"even"},$f={class:"flex flex-col gap-1"},Af={class:"text-xs text-gray-500"},zf={value:"noscale"},Pf={value:"shrink"},Lf={value:"fit"},Mf={class:"flex flex-col gap-1"},Rf={class:"text-xs text-gray-500"},Df={value:"portrait"},Bf={value:"landscape"},Of={class:"space-y-3"},qf={class:"font-medium text-gray-900"},Ff={class:"grid grid-cols-2 gap-4"},jf={class:"flex flex-col gap-1"},Nf={class:"text-xs text-gray-500"},Hf=["disabled"],Uf={value:"color"},Vf={value:"monochrome"},Wf={class:"flex flex-col gap-1"},Gf={class:"text-xs text-gray-500"},Yf=["disabled"],Kf={value:"simplex"},Xf={value:"duplex"},Zf={value:"duplexshort"},Jf={value:"duplexlong"},Qf={class:"grid grid-cols-2 gap-4"},em={class:"flex flex-col gap-1"},tm={class:"text-xs text-gray-500"},rm=["value"],om=["placeholder"],am={class:"flex flex-col gap-1"},nm={class:"text-xs text-gray-500"},sm=["placeholder"],im={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3 rounded-b-lg"},lm=Le({__name:"PrintDialog",props:{show:{type:Boolean},mode:{},options:{}},emits:["update:show","confirm"],setup(r,{emit:e}){const t=r,s=e,{t:o}=Ne(),i=Be(),l=Xe("modal-container",ae(null)),{localPrinters:d,remotePrinters:c,remoteClients:m,remoteSelectedClientId:x,localPrinterCaps:v,fetchLocalPrinters:S,fetchRemoteClients:p,fetchRemotePrinters:f,fetchLocalPrinterCaps:g}=ar(),C=ae(!1),y=ae(!1),E=ae(""),z=ae(""),k=kt({printer:"",jobName:"",copies:1,intervalMs:0,pageRange:"",pageSet:"",scale:"fit",orientation:"portrait",colorMode:"color",sidesMode:"simplex",paperSize:"",trayBin:""});ze(()=>t.show,Y=>{Y&&(Object.assign(k,JSON.parse(JSON.stringify(t.options))),z.value=x.value||"",q(),i.setDisableGlobalShortcuts(!0))}),ze(()=>t.show,Y=>{Y||i.setDisableGlobalShortcuts(!1)}),ze(()=>t.mode,()=>{t.show&&q()});const U=me(()=>(t.mode==="remote"?c.value:d.value)||[]),K=me(()=>m.value||[]),j=me(()=>{if(!(t.mode!=="local"||!k.printer))return v[k.printer]}),D=me(()=>{var A;if(t.mode!=="local")return[];const Y=j.value,R=(A=Y==null?void 0:Y.printerPaperNames)!=null&&A.length?Y.printerPaperNames:(Y==null?void 0:Y.paperSizes)||[];return Array.from(new Set(R)).filter(Boolean)}),O=me(()=>U.value.map(Y=>{if(t.mode==="local"){const A=Y;return{key:A.name,label:A.name}}const R=Y;return{key:R.printer_name,label:R.printer_name}})),Q=me(()=>{var Y;return t.mode!=="local"?!0:((Y=j.value)==null?void 0:Y.colorSupported)!==!1}),H=me(()=>{var Y;return t.mode!=="local"?!0:((Y=j.value)==null?void 0:Y.duplexSupported)!==!1}),P=me(()=>{if(t.mode==="remote")return(c.value||[]).find(Y=>Y.printer_name===k.printer)}),q=async()=>{C.value=!0,E.value="";try{if(t.mode==="remote"?(await p(),(!z.value||!K.value.some(Y=>Y.client_id===z.value))&&(z.value=x.value||""),z.value?await f(z.value):c.value=[]):t.mode==="local"&&await S(),!k.printer&&U.value.length>0){const Y=t.mode==="local"&&U.value.find(R=>R.isDefault)||U.value[0];k.printer=t.mode==="local"?Y.name:Y.printer_name}t.mode==="local"&&k.printer&&await h(k.printer)}catch(Y){E.value=Y.message||o("printDialog.printerLoadFailed")}finally{C.value=!1}},h=async Y=>{if(!(!Y||t.mode!=="local")){y.value=!0;try{await g(Y)}finally{y.value=!1}}};ze(z,async(Y,R)=>{if(!(!t.show||t.mode!=="remote"||Y===R)){x.value=Y,k.printer="",C.value=!0,E.value="";try{Y?await f(Y):c.value=[]}catch(A){E.value=A.message||o("printDialog.printerLoadFailed")}finally{C.value=!1}}}),ze(()=>k.printer,async(Y,R)=>{if(!(!t.show||Y===R)){if(t.mode==="local")await h(Y),D.value.length&&!k.paperSize&&(k.paperSize=D.value[0]);else if(t.mode==="remote"){const A=(c.value||[]).find(L=>L.printer_name===Y);A!=null&&A.paper_spec&&!k.paperSize&&(k.paperSize=A.paper_spec)}}}),ze(j,Y=>{Y&&(Y.colorSupported===!1&&k.colorMode==="color"&&(k.colorMode="monochrome"),Y.duplexSupported===!1&&k.sidesMode.startsWith("duplex")&&(k.sidesMode="simplex"))});const $=()=>{s("update:show",!1)},Z=Y=>{t.show&&Y.key==="Escape"&&(Y.preventDefault(),$())},F=()=>{s("confirm",JSON.parse(JSON.stringify(k)))},ee=me(()=>t.mode==="local"?o("printDialog.titleLocal"):t.mode==="remote"?o("printDialog.titleRemote"):o("printDialog.title"));return Ye(()=>{window.addEventListener("keydown",Z)}),Ke(()=>{window.removeEventListener("keydown",Z),t.show&&i.setDisableGlobalShortcuts(!1)}),(Y,R)=>(M(),Me(ot,{to:n(l)||"body"},[r.show?(M(),N("div",{key:0,class:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:je($,["self"])},[a("div",H0,[a("div",U0,[a("h3",V0,I(ee.value),1),a("button",{onClick:$,class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(n(wt),{class:"w-4 h-4"})])]),a("div",W0,[a("div",G0,[a("div",Y0,I(n(o)("printDialog.sectionBasic")),1),t.mode==="remote"?(M(),N("div",K0,[a("label",X0,[a("span",Z0,I(n(o)("printDialog.remoteClient")),1),Ae(a("select",{"onUpdate:modelValue":R[0]||(R[0]=A=>z.value=A),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:C.value},[a("option",Q0,I(n(o)("printDialog.remoteClientPlaceholder")),1),(M(!0),N($e,null,De(K.value,A=>(M(),N("option",{key:A.client_id,value:A.client_id,disabled:A.online===!1},I(A.client_name||A.client_id)+I(A.online===!1?" (offline)":""),9,ef))),128))],8,J0),[[et,z.value]])])])):ve("",!0),a("div",tf,[a("label",rf,[a("span",of,I(n(o)("printDialog.printer")),1),Ae(a("select",{"onUpdate:modelValue":R[1]||(R[1]=A=>k.printer=A),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:C.value||y.value||t.mode==="remote"&&!z.value},[a("option",nf,I(n(o)("printDialog.printerSelect")),1),(M(!0),N($e,null,De(O.value,A=>(M(),N("option",{key:A.key,value:A.key},I(A.label),9,sf))),128))],8,af),[[et,k.printer]])]),a("label",lf,[a("span",df,I(n(o)("printDialog.jobName")),1),Ae(a("input",{"onUpdate:modelValue":R[2]||(R[2]=A=>k.jobName=A),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:n(o)("printDialog.jobNamePlaceholder")},null,8,cf),[[Oe,k.jobName]])])]),E.value?(M(),N("div",uf,I(E.value),1)):t.mode==="remote"&&K.value.length===0?(M(),N("div",hf,I(n(o)("printDialog.remoteClientEmpty")),1)):U.value.length===0?(M(),N("div",pf,I(n(o)("printDialog.printerEmpty")),1)):ve("",!0),t.mode==="remote"&&P.value?(M(),N("div",gf,I(n(o)("printDialog.remotePrinterInfo",{type:P.value.printer_type||"-",paper:P.value.paper_spec||"-",format:P.value.supported_format||"-"})),1)):ve("",!0),a("div",ff,[a("label",mf,[a("span",bf,I(n(o)("printDialog.copies")),1),Ae(a("input",{"onUpdate:modelValue":R[3]||(R[3]=A=>k.copies=A),type:"number",min:"1",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,k.copies,void 0,{number:!0}]])]),a("label",vf,[a("span",yf,I(n(o)("printDialog.intervalMs")),1),Ae(a("input",{"onUpdate:modelValue":R[4]||(R[4]=A=>k.intervalMs=A),type:"number",min:"0",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,k.intervalMs,void 0,{number:!0}]])]),a("label",wf,[a("span",xf,I(n(o)("printDialog.pageRange")),1),Ae(a("input",{"onUpdate:modelValue":R[5]||(R[5]=A=>k.pageRange=A),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:n(o)("printDialog.pageRangePlaceholder")},null,8,kf),[[Oe,k.pageRange]])])]),a("div",_f,[a("label",Sf,[a("span",Cf,I(n(o)("printDialog.pageSet")),1),Ae(a("select",{"onUpdate:modelValue":R[6]||(R[6]=A=>k.pageSet=A),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},[a("option",Ef,I(n(o)("printDialog.pageSetAll")),1),a("option",Tf,I(n(o)("printDialog.pageSetOdd")),1),a("option",If,I(n(o)("printDialog.pageSetEven")),1)],512),[[et,k.pageSet]])]),a("label",$f,[a("span",Af,I(n(o)("printDialog.scale")),1),Ae(a("select",{"onUpdate:modelValue":R[7]||(R[7]=A=>k.scale=A),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},[a("option",zf,I(n(o)("printDialog.scaleNo")),1),a("option",Pf,I(n(o)("printDialog.scaleShrink")),1),a("option",Lf,I(n(o)("printDialog.scaleFit")),1)],512),[[et,k.scale]])]),a("label",Mf,[a("span",Rf,I(n(o)("printDialog.orientation")),1),Ae(a("select",{"onUpdate:modelValue":R[8]||(R[8]=A=>k.orientation=A),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},[a("option",Df,I(n(o)("printDialog.portrait")),1),a("option",Bf,I(n(o)("printDialog.landscape")),1)],512),[[et,k.orientation]])])])]),a("div",Of,[a("div",qf,I(n(o)("printDialog.sectionAdvanced")),1),a("div",Ff,[a("label",jf,[a("span",Nf,I(n(o)("printDialog.colorMode")),1),Ae(a("select",{"onUpdate:modelValue":R[9]||(R[9]=A=>k.colorMode=A),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:!Q.value},[a("option",Uf,I(n(o)("printDialog.color")),1),a("option",Vf,I(n(o)("printDialog.monochrome")),1)],8,Hf),[[et,k.colorMode]])]),a("label",Wf,[a("span",Gf,I(n(o)("printDialog.sidesMode")),1),Ae(a("select",{"onUpdate:modelValue":R[10]||(R[10]=A=>k.sidesMode=A),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:!H.value},[a("option",Kf,I(n(o)("printDialog.simplex")),1),a("option",Xf,I(n(o)("printDialog.duplex")),1),a("option",Zf,I(n(o)("printDialog.duplexShort")),1),a("option",Jf,I(n(o)("printDialog.duplexLong")),1)],8,Yf),[[et,k.sidesMode]])])]),a("div",Qf,[a("label",em,[a("span",tm,I(n(o)("printDialog.paperSize")),1),D.value.length?Ae((M(),N("select",{key:0,"onUpdate:modelValue":R[11]||(R[11]=A=>k.paperSize=A),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},[(M(!0),N($e,null,De(D.value,A=>(M(),N("option",{key:A,value:A},I(A),9,rm))),128))],512)),[[et,k.paperSize]]):Ae((M(),N("input",{key:1,"onUpdate:modelValue":R[12]||(R[12]=A=>k.paperSize=A),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:n(o)("printDialog.paperSizePlaceholder")},null,8,om)),[[Oe,k.paperSize]])]),a("label",am,[a("span",nm,I(n(o)("printDialog.trayBin")),1),Ae(a("input",{"onUpdate:modelValue":R[13]||(R[13]=A=>k.trayBin=A),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:n(o)("printDialog.trayBinPlaceholder")},null,8,sm),[[Oe,k.trayBin]])])])])]),a("div",im,[a("button",{onClick:$,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700"},I(n(o)("common.close")),1),a("button",{onClick:F,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm"},I(n(o)("printDialog.confirm")),1)])])])):ve("",!0)],8,["to"]))}}),dm={class:"flex items-center gap-4 text-gray-700 dark:text-gray-200"},cm={class:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 rounded-lg p-1 px-2"},um=["disabled","title"],hm=["value"],pm={class:"flex items-center gap-1"},gm=["disabled"],fm=["disabled"],mm=["disabled"],bm=["disabled","title"],vm=["disabled","title"],ym=["disabled","title"],wm=["disabled","title"],xm=["disabled","title"],km=["disabled","title"],_m={class:"w-1 h-3.5 rounded-[1px] border border-gray-300 dark:border-gray-600 relative overflow-hidden bg-white"},Sm={key:0,class:"absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50 bg-repeat bg-[length:6px_6px]"},Cm={key:1,class:"absolute inset-0 flex items-center justify-center"},Em=["disabled","title"],Tm={class:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1"},Im=["disabled","title"],$m=["disabled","title"],Am=["disabled","title"],zm=["disabled","title"],Pm=["disabled","title"],Lm=["disabled","title"],Mm=["disabled","title"],Rm={class:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1"},Dm=["disabled","title"],Bm=["disabled","title"],Om=["disabled","title"],qm=["disabled","title"],Fm=["disabled","title"],jm=["disabled","title"],Nm={class:"relative"},Hm={class:"flex items-center bg-gray-100 dark:bg-gray-800 rounded-lg p-1"},Um=["title"],Vm=["title"],Wm=["title"],Gm={key:0,class:"absolute top-full left-0 mt-2 w-64 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl rounded-lg p-4 z-[1000]"},Ym={class:"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-3"},Km={class:"space-y-3"},Xm={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},Zm={class:"text-right text-xs text-gray-600 dark:text-gray-400 mt-1"},Jm={class:"relative"},Qm={class:"flex items-center shadow-sm"},eb=["disabled"],tb={key:0,class:"absolute top-full right-0 mt-2 w-max min-w-[160px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl rounded-lg p-1 z-[1000] flex flex-col gap-1"},rb=Le({__name:"HeaderToolbar",emits:["toggleHelp","toggleSettings"],setup(r,{emit:e}){const t=e,{t:s}=Ne(),o=Be(),i=rr(),l=Xe("designer-root",ae(null)),d=()=>{var re;return((re=l==null?void 0:l.value)==null?void 0:re.getRootNode())||document},{printMode:c,silentPrint:m,localPrintOptions:x,remotePrintOptions:v}=ar(),S=me(()=>c.value||"browser"),p=ae(!1),f=ae(""),g=ae(""),C=ae("json"),y=()=>{const re={pages:Ie(o.pages),canvasSize:Ie(o.canvasSize),guides:Ie(o.guides),zoom:o.zoom,showGrid:o.showGrid,headerHeight:o.headerHeight,footerHeight:o.footerHeight,showHeaderLine:o.showHeaderLine,showFooterLine:o.showFooterLine,showMinimap:o.showMinimap,canvasBackground:o.canvasBackground};f.value=JSON.stringify(re,null,2),g.value=s("preview.templateJson"),C.value="json",p.value=!0},E=ae(!1),z=ae(""),k=ae("save"),{getPrintHtml:U,print:K,exportPdf:j,getPdfBlob:D,exportImages:O,getImageBlob:Q}=Qi(),H=async()=>{try{const re=Array.from(d().querySelectorAll(".print-page")),ie=await Q(re),ye=new FileReader;ye.readAsDataURL(ie),ye.onloadend=()=>{f.value=ye.result,g.value=s("editor.viewImageBlob"),C.value="text",p.value=!0}}catch(re){console.error(re),alert("Failed to generate blob")}},P=async()=>{try{const re=Array.from(d().querySelectorAll(".print-page")),ie=await D(re),ye=new FileReader;ye.readAsDataURL(ie),ye.onloadend=()=>{f.value=ye.result,g.value=s("editor.viewPdfBlob"),C.value="text",p.value=!0}}catch(re){console.error(re),alert("Failed to generate PDF blob")}},q=ae(!1),h=ae(""),$=ae(!1),Z=ae(!1),F=ae(null),ee=me(()=>c.value==="remote"?v:x),Y=ae(!1),R=ae(Math.round(o.zoom*100)),A=me({get:()=>o.selectedElement&&o.selectedElement.style.fontFamily||"",set:re=>{o.updateSelectedElementsStyle({fontFamily:re})}}),L=me({get:()=>o.selectedElement&&o.selectedElement.style.fontSize||12,set:re=>{o.updateSelectedElementsStyle({fontSize:re})}}),te=me(()=>{var re,ie;return((re=o.selectedElement)==null?void 0:re.style.fontWeight)==="700"||((ie=o.selectedElement)==null?void 0:ie.style.fontWeight)==="bold"}),B=me(()=>{var re;return((re=o.selectedElement)==null?void 0:re.style.fontStyle)==="italic"}),J=me(()=>{var re;return((re=o.selectedElement)==null?void 0:re.style.textDecoration)==="underline"}),ge=me(()=>{var re;return((re=o.selectedElement)==null?void 0:re.style.writingMode)==="vertical-rl"}),_e=me({get:()=>{if(o.selectedElement)return o.selectedElement.style.color},set:re=>{o.updateSelectedElementsStyle({color:re})}}),de=me({get:()=>{if(o.selectedElement)return o.selectedElement.style.backgroundColor},set:re=>{o.updateSelectedElementsStyle({backgroundColor:re})}}),xe=me(()=>{var re;return o.selectedElementIds.length===0?!1:((re=o.selectedElement)==null?void 0:re.locked)||!1}),Se=me(()=>{var re;return!o.selectedElementId||xe.value||((re=o.selectedElement)==null?void 0:re.type)===be.IMAGE}),oe=()=>{o.updateSelectedElementsStyle({fontWeight:te.value?"400":"700"})},ce=()=>{o.updateSelectedElementsStyle({fontStyle:B.value?"normal":"italic"})},he=()=>{o.updateSelectedElementsStyle({textDecoration:J.value?"none":"underline"})},u=()=>{o.updateSelectedElementsStyle({writingMode:ge.value?"horizontal-tb":"vertical-rl"})},X=()=>{o.updateSelectedElementsStyle({rotate:0})},T=me(()=>[{label:s("editor.fonts.default"),value:""},{label:s("editor.fonts.arial"),value:"Arial, sans-serif"},{label:s("editor.fonts.timesNewRoman"),value:'"Times New Roman", serif'},{label:s("editor.fonts.courierNew"),value:'"Courier New", monospace'},{label:s("editor.fonts.simSun"),value:"SimSun, serif"},{label:s("editor.fonts.simHei"),value:"SimHei, sans-serif"}]),b=()=>{const re=Math.round(o.zoom*100),ie=Math.min(re+10,500);o.setZoom(ie/100),R.value=ie},w=()=>{const re=Math.round(o.zoom*100),ie=Math.max(re-10,20);o.setZoom(ie/100),R.value=ie};ze(()=>o.zoom,re=>{R.value=Math.round(re*100)});const _=()=>{const re=Math.max(20,Math.min(500,R.value));R.value=re,o.setZoom(re/100)},W=async()=>{try{const re=Array.from(d().querySelectorAll(".print-page"));h.value=await U(re),q.value=!0}catch(re){console.error(re),alert("Preview generation failed")}},V=async()=>{const re=Array.from(d().querySelectorAll(".print-page"));if(c.value!=="browser"&&!m.value){F.value=re,Z.value=!0;return}await K(re,{mode:S.value})},G=async re=>{c.value==="local"&&Object.assign(x,re),c.value==="remote"&&Object.assign(v,re);const ie=F.value||Array.from(d().querySelectorAll(".print-page"));F.value=null,Z.value=!1,await K(ie,{mode:S.value,options:re})},ne=async()=>{const re=le();await j(void 0,`${re}.pdf`)},pe=async()=>{const re=le();await O(void 0,re)},se=()=>{if(i.currentTemplateId){const re=i.templates.find(ie=>ie.id===i.currentTemplateId);if(re){i.saveCurrentTemplate(re.name);return}}k.value="save",z.value="",E.value=!0},we=()=>{k.value="saveAs";const re=i.templates.find(ie=>ie.id===i.currentTemplateId);z.value=re?`${re.name} Copy`:"",E.value=!0},fe=re=>{k.value==="saveAs"?i.createTemplate(re):i.saveCurrentTemplate(re),E.value=!1},le=()=>{const re=i.templates.find(Ue=>Ue.id===i.currentTemplateId),ye=((re==null?void 0:re.name)||"print-design").trim().replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g," ").trim()||"print-design",We=new Date,Pe=We.getFullYear(),He=String(We.getMonth()+1).padStart(2,"0"),Ge=String(We.getDate()).padStart(2,"0");return`${ye}-${Pe}${He}${Ge}`};return Ye(()=>{window.addEventListener("designer:preview",W),window.addEventListener("designer:save",se),window.addEventListener("designer:save-as",we),window.addEventListener("designer:print",V),window.addEventListener("designer:export-pdf",ne),window.addEventListener("designer:view-json",y),window.addEventListener("designer:view-blob",H)}),Ke(()=>{window.removeEventListener("designer:preview",W),window.removeEventListener("designer:save",se),window.removeEventListener("designer:save-as",we),window.removeEventListener("designer:print",V),window.removeEventListener("designer:export-pdf",ne),window.removeEventListener("designer:view-json",y),window.removeEventListener("designer:view-blob",H)}),(re,ie)=>(M(),N($e,null,[a("div",dm,[ue(kg),ue(Nt,{show:E.value,title:k.value==="saveAs"?n(s)("editor.saveAsTemplate"):n(s)("editor.saveTemplate"),"initial-value":z.value,onClose:ie[0]||(ie[0]=ye=>E.value=!1),onSave:fe},null,8,["show","title","initial-value"]),a("div",cm,[Ae(a("select",{"onUpdate:modelValue":ie[1]||(ie[1]=ye=>A.value=ye),disabled:Se.value,class:"w-32 text-sm bg-transparent border-none outline-none focus:ring-0 cursor-pointer disabled:cursor-not-allowed disabled:opacity-50 dark:text-gray-200",title:n(s)("editor.fontFamily")},[(M(!0),N($e,null,De(T.value,ye=>(M(),N("option",{key:ye.value,value:ye.value,class:"dark:bg-gray-800 dark:text-gray-200"},I(ye.label),9,hm))),128))],8,um),[[et,A.value]]),ie[39]||(ie[39]=a("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-700"},null,-1)),a("div",pm,[a("button",{onClick:ie[2]||(ie[2]=ye=>L.value--),disabled:Se.value,class:"w-6 h-6 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"},"-",8,gm),Ae(a("input",{type:"number","onUpdate:modelValue":ie[3]||(ie[3]=ye=>L.value=ye),disabled:Se.value,class:"w-12 text-center text-sm bg-transparent dark:bg-gray-800 border-none outline-none focus:ring-0 p-0 disabled:opacity-50 disabled:cursor-not-allowed [appearance:textfield] [-moz-appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none dark:text-gray-200",min:"1",max:"200"},null,8,fm),[[Oe,L.value]]),a("button",{onClick:ie[4]||(ie[4]=ye=>L.value++),disabled:Se.value,class:"w-6 h-6 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"},"+",8,mm)]),ie[40]||(ie[40]=a("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-700"},null,-1)),a("button",{onClick:oe,disabled:Se.value,class:Ce(["p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-300 dark:bg-gray-700 text-blue-700 dark:text-blue-400":te.value}]),title:n(s)("editor.bold")},[ue(n(tu),{class:"w-4 h-4"})],10,bm),a("button",{onClick:ce,disabled:Se.value,class:Ce(["p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-300 dark:bg-gray-700 text-blue-700 dark:text-blue-400":B.value}]),title:n(s)("editor.italic")},[ue(n(au),{class:"w-4 h-4"})],10,vm),a("button",{onClick:he,disabled:Se.value,class:Ce(["p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-300 dark:bg-gray-700 text-blue-700 dark:text-blue-400":J.value}]),title:n(s)("editor.underline")},[ue(n(iu),{class:"w-4 h-4"})],10,ym),a("button",{onClick:u,disabled:Se.value,class:Ce(["p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-300 dark:bg-gray-700 text-blue-700 dark:text-blue-400":ge.value}]),title:n(s)("editor.verticalText")},[ue(n(cu),{class:"w-4 h-4"})],10,wm),ue(St,{modelValue:_e.value,"onUpdate:modelValue":ie[5]||(ie[5]=ye=>_e.value=ye),disabled:Se.value,"default-color":"#000000"},{trigger:gt(({color:ye})=>[a("button",{type:"button",class:"flex items-center gap-1 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:Se.value,title:n(s)("editor.textColor")},[ue(n(vu),{class:"w-4 h-4"}),a("div",{class:"w-1 h-3.5 rounded-[1px] border border-gray-300 dark:border-gray-600",style:ke({backgroundColor:ye})},null,4)],8,xm)]),_:1},8,["modelValue","disabled"]),ue(St,{modelValue:de.value,"onUpdate:modelValue":ie[6]||(ie[6]=ye=>de.value=ye),disabled:Se.value,"allow-transparent":!0,"default-color":"transparent"},{trigger:gt(({color:ye})=>[a("button",{type:"button",class:"flex items-center gap-1 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:Se.value,title:n(s)("editor.backgroundColor")},[ue(n(xu),{class:"w-4 h-4"}),a("div",_m,[ye==="transparent"?(M(),N("div",Sm)):ve("",!0),a("div",{class:"absolute inset-0",style:ke({backgroundColor:ye==="transparent"?"transparent":ye})},null,4),ye==="transparent"?(M(),N("div",Cm,[...ie[38]||(ie[38]=[a("div",{class:"w-full h-[1px] bg-red-500 rotate-90 transform scale-150"},null,-1)])])):ve("",!0)])],8,km)]),_:1},8,["modelValue","disabled"]),ie[41]||(ie[41]=a("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-700"},null,-1)),a("button",{onClick:X,disabled:xe.value||!n(o).selectedElementId,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:n(s)("editor.resetRotation")},[ue(n(pu),{class:"w-4 h-4"})],8,Em)]),ie[47]||(ie[47]=a("div",{class:"h-6 w-px bg-gray-300 dark:bg-gray-700"},null,-1)),a("div",Tm,[a("button",{onClick:ie[7]||(ie[7]=ye=>n(o).alignSelectedElements("left")),disabled:!n(o).selectedElementId||xe.value,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("editor.alignLeft")},[ue(n(Bc),{class:"w-4 h-4"})],8,Im),a("button",{onClick:ie[8]||(ie[8]=ye=>n(o).alignSelectedElements("center")),disabled:!n(o).selectedElementId||xe.value,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("editor.alignCenter")},[ue(n(Fc),{class:"w-4 h-4"})],8,$m),a("button",{onClick:ie[9]||(ie[9]=ye=>n(o).alignSelectedElements("right")),disabled:!n(o).selectedElementId||xe.value,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("editor.alignRight")},[ue(n(Hc),{class:"w-4 h-4"})],8,Am),ie[43]||(ie[43]=a("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-700 mx-1"},null,-1)),a("button",{onClick:ie[10]||(ie[10]=ye=>n(o).alignSelectedElements("top")),disabled:!n(o).selectedElementId||xe.value,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("editor.alignTop")},[ue(n(Wc),{class:"w-4 h-4"})],8,zm),a("button",{onClick:ie[11]||(ie[11]=ye=>n(o).alignSelectedElements("middle")),disabled:!n(o).selectedElementId||xe.value,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("editor.alignMiddle")},[ue(n(Kc),{class:"w-4 h-4"})],8,Pm),a("button",{onClick:ie[12]||(ie[12]=ye=>n(o).alignSelectedElements("bottom")),disabled:!n(o).selectedElementId||xe.value,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("editor.alignBottom")},[ue(n(Jc),{class:"w-4 h-4"})],8,Lm),n(o).selectedElementIds.length>1?(M(),N($e,{key:0},[ie[42]||(ie[42]=a("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-700 mx-1"},null,-1)),a("button",{onClick:ie[13]||(ie[13]=ye=>n(o).groupSelectedElements()),disabled:xe.value,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("editor.group")},[ue(n(Eu),{class:"w-4 h-4"})],8,Mm)],64)):ve("",!0)]),ie[48]||(ie[48]=a("div",{class:"h-6 w-px bg-gray-300 dark:bg-gray-700"},null,-1)),a("div",Rm,[a("button",{onClick:ie[14]||(ie[14]=ye=>n(o).undo()),disabled:n(o).historyPast.length===0,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("common.undo")+" ("+n(Re)(["Ctrl","Z"])+")"},[ue(n(Vi),{class:"w-4 h-4"})],8,Dm),a("button",{onClick:ie[15]||(ie[15]=ye=>n(o).redo()),disabled:n(o).historyFuture.length===0,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("common.redo")+" ("+n(Re)(["Ctrl","Y"])+")"},[ue(n(Wi),{class:"w-4 h-4"})],8,Bm),ie[44]||(ie[44]=a("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-700 mx-1"},null,-1)),a("button",{onClick:ie[16]||(ie[16]=ye=>n(o).copy()),disabled:!n(o).selectedElementId||xe.value,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("common.copy")+" ("+n(Re)(["Ctrl","C"])+")"},[ue(n(It),{class:"w-4 h-4"})],8,Om),a("button",{onClick:ie[17]||(ie[17]=ye=>n(o).paste()),disabled:n(o).clipboard.length===0,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("common.paste")+" ("+n(Re)(["Ctrl","V"])+")"},[ue(n(Aa),{class:"w-4 h-4"})],8,qm),ie[45]||(ie[45]=a("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-700 mx-1"},null,-1)),a("button",{onClick:ie[18]||(ie[18]=ye=>n(o).toggleLock()),disabled:!n(o).selectedElementId,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:(xe.value?n(s)("editor.unlock"):n(s)("editor.lock"))+" ("+n(Re)(["Ctrl","L"])+")"},[xe.value?(M(),Me(n(Gi),{key:0,class:"w-4 h-4 text-red-500"})):(M(),Me(n(or),{key:1,class:"w-4 h-4"}))],8,Fm),a("button",{onClick:ie[19]||(ie[19]=ye=>n(o).removeSelectedElements()),disabled:!n(o).selectedElementId||xe.value,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:n(s)("common.delete")+" ("+n(Re)(["Del"])+")"},[ue(n(Tt),{class:"w-4 h-4"})],8,jm)]),ie[49]||(ie[49]=a("div",{class:"h-6 w-px bg-gray-300 dark:bg-gray-700"},null,-1)),ue(j0),a("div",Nm,[a("div",Hm,[a("button",{onClick:w,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:n(s)("editor.zoomOut")},[ue(n(Hi),{class:"w-4 h-4"})],8,Um),a("button",{onClick:ie[20]||(ie[20]=ye=>Y.value=!Y.value),class:"text-xs w-12 text-center hover:bg-gray-200 dark:hover:bg-gray-700 rounded px-1 py-0.5",title:n(s)("editor.zoomSettings")},I(Math.round(n(o).zoom*100))+"% ",9,Vm),a("button",{onClick:b,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:n(s)("editor.zoomIn")},[ue(n(Ni),{class:"w-4 h-4"})],8,Wm)]),Y.value?(M(),N("div",Gm,[a("h3",Ym,I(n(s)("editor.zoomLevel")),1),a("div",Km,[a("div",null,[a("label",Xm,I(n(s)("editor.zoomLevel"))+" (20% - 500%)",1),Ae(a("input",{type:"range",min:"20",max:"500",step:"10","onUpdate:modelValue":ie[21]||(ie[21]=ye=>R.value=ye),onInput:_,class:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-blue-600 dark:[&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:hover:scale-110 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 dark:[&::-moz-range-thumb]:bg-blue-500 [&::-moz-range-thumb]:border-none [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:transition-all [&::-moz-range-thumb]:hover:scale-110"},null,544),[[Oe,R.value,void 0,{number:!0}]]),a("div",Zm,I(R.value)+"%",1)])]),a("div",{class:"fixed inset-0 z-[-1]",onClick:ie[22]||(ie[22]=ye=>Y.value=!1)})])):ve("",!0)]),ie[50]||(ie[50]=a("div",{class:"h-6 w-px bg-gray-300 dark:bg-gray-700"},null,-1)),a("div",Jm,[a("div",Qm,[a("button",{onClick:se,disabled:n(i).isSaving,class:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-l-md hover:bg-blue-700 transition-colors text-sm border-r border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[n(i).isSaving?(M(),Me(n(Cc),{key:0,class:"w-4 h-4 animate-spin"})):(M(),Me(n($a),{key:1,class:"w-4 h-4"})),a("span",null,I(n(s)("common.save")),1)],8,eb),a("button",{onClick:ie[23]||(ie[23]=ye=>$.value=!$.value),class:"px-2 py-1.5 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 transition-colors text-sm flex items-center"},[ue(n(za),{class:"w-5 h-5"})])]),$.value?(M(),N("div",tb,[a("button",{onClick:ie[24]||(ie[24]=ye=>{we(),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(Ui),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.saveAsTemplate")),1)]),a("button",{onClick:ie[25]||(ie[25]=ye=>{W(),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(sc),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.preview")),1)]),a("button",{onClick:ie[26]||(ie[26]=ye=>{V(),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(Ia),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.print")),1)]),a("button",{onClick:ie[27]||(ie[27]=ye=>{ne(),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(Kt),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.exportPdf")),1)]),a("button",{onClick:ie[28]||(ie[28]=ye=>{pe(),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(Kt),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.exportImage")),1)]),a("button",{onClick:ie[29]||(ie[29]=ye=>{H(),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(pt),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.viewImageBlob")),1)]),a("button",{onClick:ie[30]||(ie[30]=ye=>{P(),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(pt),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.viewPdfBlob")),1)]),a("button",{onClick:ie[31]||(ie[31]=ye=>{y(),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(pt),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.viewJson")),1)]),ie[46]||(ie[46]=a("div",{class:"h-px bg-gray-200 dark:bg-gray-700 my-0.5"},null,-1)),a("button",{onClick:ie[32]||(ie[32]=ye=>{t("toggleHelp"),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(Mc),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.help")),1)]),a("button",{onClick:ie[33]||(ie[33]=ye=>{t("toggleSettings"),$.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(n(Xt),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",null,I(n(s)("editor.settings")),1)])])):ve("",!0),$.value?(M(),N("div",{key:1,class:"fixed inset-0 z-[999]",onClick:ie[34]||(ie[34]=ye=>$.value=!1)})):ve("",!0)])]),ue($p,{visible:q.value,"onUpdate:visible":ie[35]||(ie[35]=ye=>q.value=ye),"html-content":h.value,width:n(o).canvasSize.width},null,8,["visible","html-content","width"]),ue(lm,{show:Z.value,"onUpdate:show":ie[36]||(ie[36]=ye=>Z.value=ye),mode:S.value,options:ee.value,onConfirm:G},null,8,["show","mode","options"]),ue(jt,{visible:p.value,"onUpdate:visible":ie[37]||(ie[37]=ye=>p.value=ye),title:g.value,value:f.value,language:C.value,"read-only":""},null,8,["visible","title","value","language"])],64))}}),tl="/Vue-Print-Designer/assets/logo-D22CyW4G.png";var ob=il();const ab={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function nb(r,e){return M(),N("svg",ab,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M4 19q-.825 0-1.412-.587T2 17V7q0-.825.588-1.412T4 5h16q.825 0 1.413.588T22 7v10q0 .825-.587 1.413T20 19zm4-3h8v-2H8zm-3-3h2v-2H5zm3 0h2v-2H8zm3 0h2v-2h-2zm3 0h2v-2h-2zm3 0h2v-2h-2zM5 10h2V8H5zm3 0h2V8H8zm3 0h2V8h-2zm3 0h2V8h-2zm3 0h2V8h-2z"},null,-1)])])}const sb=Ee({name:"material-symbols-keyboard",render:nb}),ib={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function lb(r,e){return M(),N("svg",ib,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M11 17h2v-6h-2zm1-8q.425 0 .713-.288T13 8t-.288-.712T12 7t-.712.288T11 8t.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"},null,-1)])])}const db=Ee({name:"material-symbols-info",render:lb}),cb="vue-print-designer",ub="0.9.90",hb={"@guolao/vue-monaco-editor":"^1.6.0",canvg:"^4.0.3","dom-to-image-more":"^3.7.2",jszip:"^3.10.1",jsbarcode:"^3.12.3",jspdf:"^2.5.2",lodash:"^4.17.21",pinia:"^2.3.0",qrcode:"^1.5.4",uuid:"^11.0.3",vue:"^3.5.13","vue-i18n":"^11.2.8"},pa={name:cb,version:ub,dependencies:hb},pb={class:"bg-white rounded-lg shadow-xl w-[700px] max-w-full h-[500px] flex overflow-hidden"},gb={class:"w-48 bg-gray-50 border-r border-gray-200 flex flex-col"},fb={class:"h-[60px] flex items-center px-4 border-b border-gray-200"},mb={class:"text-lg font-semibold text-gray-800"},bb={class:"flex-1 py-2"},vb={class:"flex-1 flex flex-col min-w-0"},yb={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200"},wb={class:"text-lg font-semibold text-gray-800"},xb={class:"flex-1 overflow-y-auto p-6"},kb={key:0,class:"space-y-6"},_b={class:"grid grid-cols-1 gap-6 text-sm"},Sb={class:"font-medium text-gray-900 mb-3 border-b pb-1"},Cb={class:"space-y-2 text-gray-600"},Eb={class:"flex justify-between items-center"},Tb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Ib={class:"flex justify-between items-center"},$b={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Ab={class:"flex justify-between items-center"},zb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Pb={class:"flex justify-between items-center"},Lb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Mb={class:"flex justify-between items-center"},Rb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Db={class:"flex justify-between items-center"},Bb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Ob={class:"flex justify-between items-center"},qb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Fb={class:"flex justify-between items-center"},jb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Nb={class:"flex justify-between items-center"},Hb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Ub={class:"flex justify-between items-center"},Vb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Wb={class:"flex justify-between items-center"},Gb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Yb={class:"flex justify-between items-center"},Kb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Xb={class:"flex justify-between items-center"},Zb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Jb={class:"font-medium text-gray-900 mb-3 border-b pb-1"},Qb={class:"space-y-2 text-gray-600"},ev={class:"flex justify-between items-center"},tv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},rv={class:"flex justify-between items-center"},ov={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},av={class:"flex justify-between items-center"},nv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},sv={class:"flex justify-between items-center"},iv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},lv={class:"flex justify-between items-center"},dv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},cv={class:"flex justify-between items-center"},uv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},hv={class:"flex justify-between items-center"},pv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},gv={class:"flex justify-between items-center"},fv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},mv={class:"flex justify-between items-center"},bv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},vv={class:"flex justify-between items-center"},yv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},wv={class:"font-medium text-gray-900 mb-3 border-b pb-1"},xv={class:"space-y-2 text-gray-600"},kv={class:"flex justify-between items-center"},_v={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Sv={class:"flex justify-between items-center"},Cv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Ev={class:"flex justify-between items-center"},Tv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Iv={class:"flex justify-between items-center"},$v={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Av={key:1,class:"space-y-6"},zv={class:"text-center mb-8"},Pv={class:"text-xl font-bold text-gray-800"},Lv={class:"mt-4 flex justify-center"},Mv=["title"],Rv={class:"text-gray-600"},Dv={class:"font-medium text-gray-900 mb-3 border-b pb-1"},Bv={class:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden"},Ov={class:"w-full text-sm text-left"},qv={class:"bg-gray-100 text-gray-700 font-medium"},Fv={class:"px-4 py-2 border-b"},jv={class:"px-4 py-2 border-b"},Nv={class:"divide-y divide-gray-200"},Hv={class:"px-4 py-2 text-gray-700 font-mono"},Uv={class:"px-4 py-2 text-gray-500"},Vv={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end rounded-br-lg"},Wv=Le({__name:"HelpModal",props:{show:{type:Boolean}},emits:["update:show"],setup(r,{emit:e}){const t=r,s=e,{t:o}=Ne(),i=Be(),l=Xe("modal-container",ae(null)),d=ae("shortcuts"),c=()=>{s("update:show",!1)},m=p=>{t.show&&p.key==="Escape"&&(p.preventDefault(),c())};Ye(()=>{window.addEventListener("keydown",m)}),ze(()=>t.show,p=>{i.setDisableGlobalShortcuts(p)}),Ke(()=>{window.removeEventListener("keydown",m),t.show&&i.setDisableGlobalShortcuts(!1)});const x=Object.entries(pa.dependencies).map(([p,f])=>({name:p,version:f})),v=pa.version,S=ob.startCase(pa.name);return(p,f)=>(M(),Me(ot,{to:n(l)||"body"},[r.show?(M(),N("div",{key:0,class:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:je(c,["self"])},[a("div",pb,[a("div",gb,[a("div",fb,[a("h3",mb,I(n(o)("help.title")),1)]),a("div",bb,[a("button",{onClick:f[0]||(f[0]=g=>d.value="shortcuts"),class:Ce(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",d.value==="shortcuts"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(n(sb),{class:"w-5 h-5"}),Te(" "+I(n(o)("shortcuts.title")),1)],2),a("button",{onClick:f[1]||(f[1]=g=>d.value="about"),class:Ce(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",d.value==="about"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(n(db),{class:"w-5 h-5"}),Te(" "+I(n(o)("help.about")),1)],2)])]),a("div",vb,[a("div",yb,[a("h3",wb,I(d.value==="shortcuts"?n(o)("shortcuts.keyboardShortcuts"):n(o)("help.aboutProject",{name:n(S)})),1),a("button",{onClick:c,class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(n(wt),{class:"w-4 h-4"})])]),a("div",xb,[d.value==="shortcuts"?(M(),N("div",kb,[a("div",_b,[a("div",null,[a("h4",Sb,I(n(o)("shortcuts.general")),1),a("ul",Cb,[a("li",Eb,[a("span",null,I(n(o)("common.save")),1),f[2]||(f[2]=Te()),a("kbd",Tb,I(n(Re)(["Ctrl","S"])),1)]),a("li",Ib,[a("span",null,I(n(o)("shortcuts.saveAsTemplate")),1),f[3]||(f[3]=Te()),a("kbd",$b,I(n(Re)(["Ctrl","Shift","S"])),1)]),a("li",Ab,[a("span",null,I(n(o)("editor.print")),1),f[4]||(f[4]=Te()),a("kbd",zb,I(n(Re)(["Ctrl","P"])),1)]),a("li",Pb,[a("span",null,I(n(o)("editor.exportPdf")),1),f[5]||(f[5]=Te()),a("kbd",Lb,I(n(Re)(["Ctrl","Shift","E"])),1)]),a("li",Mb,[a("span",null,I(n(o)("editor.preview")),1),f[6]||(f[6]=Te()),a("kbd",Rb,I(n(Re)(["Ctrl","Shift","P"])),1)]),a("li",Db,[a("span",null,I(n(o)("editor.viewJson")),1),f[7]||(f[7]=Te()),a("kbd",Bb,I(n(Re)(["Ctrl","Shift","J"])),1)]),a("li",Ob,[a("span",null,I(n(o)("shortcuts.newTemplate")),1),f[8]||(f[8]=Te()),a("kbd",qb,I(n(Re)(["Ctrl","Alt","N"])),1)]),a("li",Fb,[a("span",null,I(n(o)("shortcuts.openSettings")),1),f[9]||(f[9]=Te()),a("kbd",jb,I(n(Re)(["Ctrl",","])),1)]),a("li",Nb,[a("span",null,I(n(o)("common.undo")),1),f[10]||(f[10]=Te()),a("kbd",Hb,I(n(Re)(["Ctrl","Z"])),1)]),a("li",Ub,[a("span",null,I(n(o)("common.redo")),1),f[11]||(f[11]=Te()),a("kbd",Vb,I(n(Re)(["Ctrl","Y"])),1)]),a("li",Wb,[a("span",null,I(n(o)("shortcuts.openHelp")),1),f[12]||(f[12]=Te()),a("kbd",Gb,I(n(Re)(["Ctrl","H"])),1)]),a("li",Yb,[a("span",null,I(n(o)("shortcuts.zoom")),1),f[13]||(f[13]=Te()),a("kbd",Kb,I(n(Re)(["Ctrl","Wheel"])),1)]),a("li",Xb,[a("span",null,I(n(o)("shortcuts.closeModal")),1),f[14]||(f[14]=Te()),a("kbd",Zb,I(n(Re)(["Esc"])),1)])])]),a("div",null,[a("h4",Jb,I(n(o)("shortcuts.editing")),1),a("ul",Qb,[a("li",ev,[a("span",null,I(n(o)("common.copy")),1),f[15]||(f[15]=Te()),a("kbd",tv,I(n(Re)(["Ctrl","C"])),1)]),a("li",rv,[a("span",null,I(n(o)("common.cut")),1),f[16]||(f[16]=Te()),a("kbd",ov,I(n(Re)(["Ctrl","X"])),1)]),a("li",av,[a("span",null,I(n(o)("common.paste")),1),f[17]||(f[17]=Te()),a("kbd",nv,I(n(Re)(["Ctrl","V"])),1)]),a("li",sv,[a("span",null,I(n(o)("common.delete")),1),f[18]||(f[18]=Te()),a("kbd",iv,I(n(Re)(["Delete"])),1)]),a("li",lv,[a("span",null,I(n(o)("shortcuts.selectAll")),1),f[19]||(f[19]=Te()),a("kbd",dv,I(n(Re)(["Ctrl","A"])),1)]),a("li",cv,[a("span",null,I(n(o)("shortcuts.multiSelect")),1),f[20]||(f[20]=Te()),a("kbd",uv,I(n(Re)(["Ctrl","Click"])),1)]),a("li",hv,[a("span",null,I(n(o)("common.lock"))+"/"+I(n(o)("common.unlock")),1),f[21]||(f[21]=Te()),a("kbd",pv,I(n(Re)(["Ctrl","L"])),1)]),a("li",gv,[a("span",null,I(n(o)("shortcuts.customEditSave")),1),f[22]||(f[22]=Te()),a("kbd",fv,I(n(Re)(["Ctrl","S"])),1)]),a("li",mv,[a("span",null,I(n(o)("shortcuts.customEditSaveAs")),1),f[23]||(f[23]=Te()),a("kbd",bv,I(n(Re)(["Ctrl","Shift","S"])),1)]),a("li",vv,[a("span",null,I(n(o)("shortcuts.customEditExit")),1),f[24]||(f[24]=Te()),a("kbd",yv,I(n(Re)(["Ctrl","Q"])),1)])])]),a("div",null,[a("h4",wv,I(n(o)("shortcuts.manipulation")),1),a("ul",xv,[a("li",kv,[a("span",null,I(n(o)("shortcuts.move")),1),f[25]||(f[25]=Te()),a("kbd",_v,I(n(o)("shortcuts.arrow")),1)]),a("li",Sv,[a("span",null,I(n(o)("shortcuts.fastMove")),1),f[26]||(f[26]=Te()),a("kbd",Cv,I(n(Re)(["Shift",n(o)("shortcuts.arrow")])),1)]),a("li",Ev,[a("span",null,I(n(o)("shortcuts.snapRotate")),1),f[27]||(f[27]=Te()),a("kbd",Tv,I(n(Re)(["Shift",n(o)("shortcuts.drag")])),1)]),a("li",Iv,[a("span",null,I(n(o)("shortcuts.resize")),1),f[28]||(f[28]=Te()),a("kbd",$v,I(n(Re)(["Shift",n(o)("shortcuts.resize")])),1)])])])])])):ve("",!0),d.value==="about"?(M(),N("div",Av,[a("div",zv,[f[32]||(f[32]=a("img",{src:tl,alt:"Vue Print Designer",class:"w-12 h-12 mx-auto mb-2"},null,-1)),a("h2",Pv,I(n(S)),1),a("div",Lv,[a("a",{href:"https://github.com/0ldFive/Vue-Print-Designer",target:"_blank",rel:"noopener noreferrer",class:"group inline-flex items-center gap-2 rounded-full border border-gray-200 bg-gray-50 px-2.5 py-1 text-[11px] text-gray-700 shadow-sm transition-colors hover:border-blue-200 hover:bg-blue-50 hover:text-blue-700",title:n(o)("help.github")},[f[29]||(f[29]=a("span",{class:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-white text-gray-700 shadow-sm transition-colors group-hover:text-blue-700"},[a("svg",{viewBox:"0 0 16 16","aria-hidden":"true",class:"w-3.5 h-3.5"},[a("path",{fill:"currentColor",d:"M8 0C3.58 0 0 3.73 0 8.35c0 3.7 2.29 6.83 5.47 7.94.4.08.55-.18.55-.4 0-.2-.01-.86-.01-1.56-2.01.38-2.53-.5-2.69-.96-.09-.24-.48-.96-.82-1.16-.28-.16-.68-.56-.01-.57.63-.01 1.08.6 1.23.85.72 1.25 1.87.9 2.33.69.07-.54.28-.9.51-1.11-1.78-.21-3.64-.92-3.64-4.08 0-.9.31-1.64.82-2.22-.08-.21-.36-1.06.08-2.2 0 0 .67-.22 2.2.85.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.07 2.2-.85 2.2-.85.44 1.14.16 1.99.08 2.2.51.58.82 1.32.82 2.22 0 3.17-1.87 3.87-3.65 4.08.29.26.54.77.54 1.56 0 1.12-.01 2.03-.01 2.32 0 .22.15.48.55.4C13.71 15.18 16 12.04 16 8.35 16 3.73 12.42 0 8 0z"})])],-1)),f[30]||(f[30]=a("span",{class:"text-gray-500 group-hover:text-blue-600"},"0ldFive/Vue-Print-Designer",-1)),f[31]||(f[31]=a("span",{class:"text-gray-400"},"|",-1)),a("span",Rv,I(n(o)("help.version"))+" "+I(n(v)),1)],8,Mv)])]),a("div",null,[a("h4",Dv,I(n(o)("help.dependencies")),1),a("div",Bv,[a("table",Ov,[a("thead",qv,[a("tr",null,[a("th",Fv,I(n(o)("help.package")),1),a("th",jv,I(n(o)("help.version")),1)])]),a("tbody",Nv,[(M(!0),N($e,null,De(n(x),g=>(M(),N("tr",{key:g.name,class:"hover:bg-gray-50"},[a("td",Hv,I(g.name),1),a("td",Uv,I(g.version),1)]))),128))])])])])])):ve("",!0)]),a("div",Vv,[a("button",{onClick:c,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm"},I(n(o)("common.close")),1)])])])])):ve("",!0)],8,["to"]))}}),Gv={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Yv(r,e){return M(),N("svg",Gv,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m11.9 22l4.55-12h2.1l4.55 12H21l-1.075-3.05h-4.85L14 22zM4 19l-1.4-1.4l5.05-5.05q-.875-.875-1.588-2T4.75 8h2.1q.5.975 1 1.7t1.2 1.45q.825-.825 1.713-2.313T12.1 6H1V4h7V2h2v2h7v2h-2.9q-.525 1.8-1.575 3.7t-2.075 2.9l2.4 2.45l-.75 2.05l-3.05-3.125zm11.7-1.8h3.6l-1.8-5.1z"},null,-1)])])}const Kv=Ee({name:"material-symbols-translate",render:Yv}),Xv={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Zv(r,e){return M(),N("svg",Xv,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M6.5 20q-2.275 0-3.887-1.575T1 14.575q0-1.95 1.175-3.475T5.25 9.15q.625-2.3 2.5-3.725T12 4q2.925 0 4.963 2.038T19 11q1.725.2 2.863 1.488T23 15.5q0 1.875-1.312 3.188T18.5 20z"},null,-1)])])}const Jv=Ee({name:"material-symbols-cloud",render:Zv}),Qv={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function e1(r,e){return M(),N("svg",Qv,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M11 17H7q-2.075 0-3.537-1.463T2 12t1.463-3.537T7 7h4v2H7q-1.25 0-2.125.875T4 12t.875 2.125T7 15h4zm-3-4v-2h8v2zm5 4v-2h4q1.25 0 2.125-.875T20 12t-.875-2.125T17 9h-4V7h4q2.075 0 3.538 1.463T22 12t-1.463 3.538T17 17z"},null,-1)])])}const Qs=Ee({name:"material-symbols-link",render:e1}),t1={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function r1(r,e){return M(),N("svg",t1,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m19.25 16.45l-1.5-1.55q1-.275 1.625-1.063T20 12q0-1.25-.875-2.125T17 9h-4V7h4q2.075 0 3.538 1.463T22 12q0 1.425-.737 2.625T19.25 16.45M15.85 13l-2-2H16v2zm3.95 9.6L1.4 4.2l1.4-1.4l18.4 18.4zM11 17H7q-2.075 0-3.537-1.463T2 12q0-1.725 1.05-3.075t2.7-1.775L7.6 9H7q-1.25 0-2.125.875T4 12t.875 2.125T7 15h4zm-3-4v-2h1.625l1.975 2z"},null,-1)])])}const ei=Ee({name:"material-symbols-link-off",render:r1}),o1={class:"bg-white rounded-lg shadow-xl w-[700px] max-w-full h-[500px] flex overflow-hidden"},a1={class:"w-48 bg-gray-50 border-r border-gray-200 flex flex-col"},n1={class:"h-[60px] flex items-center px-4 border-b border-gray-200"},s1={class:"text-lg font-semibold text-gray-800"},i1={class:"flex-1 py-2"},l1={class:"flex-1 flex flex-col min-w-0 relative"},d1={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200"},c1={class:"text-lg font-semibold text-gray-800"},u1={class:"flex-1 overflow-y-auto p-6"},h1={key:0,class:"space-y-4 text-sm text-gray-700"},p1={class:"mb-2 font-medium text-gray-900"},g1={class:"flex items-center gap-3"},f1={class:"text-xs text-gray-500 mt-2"},m1={class:"border-t border-gray-200 pt-4"},b1={class:"mb-2 font-medium text-gray-900"},v1={class:"flex flex-wrap gap-2"},y1=["onClick"],w1={class:"text-xs text-gray-500 mt-2"},x1={class:"border-t border-gray-200 pt-4"},k1={class:"flex items-center justify-between"},_1={class:"font-medium text-gray-900"},S1={class:"sr-only"},C1={class:"text-xs text-gray-500 mt-2"},E1={class:"border-t border-gray-200 pt-4"},T1={class:"flex items-center justify-between"},I1={class:"font-medium text-gray-900"},$1={class:"sr-only"},A1={class:"text-xs text-gray-500 mt-2"},z1={class:"border-t border-gray-200 pt-4 space-y-3"},P1={class:"mb-2 font-medium text-gray-900"},L1={class:"flex items-center gap-3"},M1=["disabled"],R1=["disabled"],D1={class:"text-xs text-gray-500 mt-2"},B1={class:"flex items-center justify-between"},O1={class:"font-medium text-gray-900"},q1={class:"sr-only"},F1={class:"text-xs text-gray-500"},j1={key:1,class:"space-y-4 text-sm text-gray-700"},N1={class:"mb-2 font-medium text-gray-900"},H1={class:"flex items-center gap-3"},U1={class:"text-xs text-gray-500 mt-2"},V1={key:2,class:"space-y-4 text-sm text-gray-700"},W1={class:"space-y-2"},G1={class:"font-medium text-gray-900"},Y1={class:"text-xs text-gray-500"},K1={class:"grid grid-cols-2 gap-4"},X1={class:"flex flex-col gap-1 col-span-2"},Z1={class:"text-xs text-gray-500"},J1=["placeholder"],Q1={class:"flex flex-col gap-1 col-span-2"},ey={class:"text-xs text-gray-500"},ty={class:"rounded bg-gray-100 px-3 py-2 text-xs text-gray-600 break-all"},ry={class:"font-medium text-gray-700"},oy={class:"w-full pt-2"},ay=["disabled"],ny={key:0,class:"mt-2 flex items-center justify-between text-xs text-gray-500"},sy={key:3,class:"space-y-4 text-sm text-gray-700"},iy={class:"space-y-2"},ly={class:"font-medium text-gray-900"},dy={class:"text-xs text-gray-500"},cy={class:"grid grid-cols-2 gap-4"},uy={class:"flex flex-col gap-1 col-span-2"},hy={class:"text-xs text-gray-500"},py=["placeholder"],gy={class:"flex flex-col gap-1"},fy={class:"text-xs text-gray-500"},my={class:"flex flex-col gap-1"},by={class:"text-xs text-gray-500"},vy={class:"space-y-2 pt-2 border-t border-gray-200"},yy={class:"font-medium text-gray-900"},wy={class:"text-xs text-gray-500"},xy={class:"grid grid-cols-2 gap-4"},ky={class:"flex flex-col gap-1 col-span-2"},_y={class:"text-xs text-gray-500"},Sy=["placeholder"],Cy={class:"flex flex-col gap-1 col-span-2"},Ey={class:"text-xs text-gray-500"},Ty=["disabled"],Iy={value:""},$y=["value","disabled"],Ay={class:"rounded bg-gray-100 px-3 py-2 text-xs text-gray-600 break-all"},zy={class:"font-medium text-gray-700"},Py={class:"text-xs text-gray-500"},Ly={class:"w-full pt-2"},My=["disabled"],Ry={key:0,class:"mt-2 flex items-center justify-between text-xs text-gray-500"},Dy={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end rounded-br-lg"},By=Le({__name:"SettingsModal",props:{show:{type:Boolean}},emits:["update:show"],setup(r,{emit:e}){const t=r,s=e,{t:o,locale:i}=Ne(),{theme:l,setTheme:d}=yt(),{autoSave:c}=Oi(),m=Be(),x=Xe("modal-container",ae(null)),{printMode:v,silentPrint:S,exportImageMerged:p,localSettings:f,remoteSettings:g,localStatus:C,remoteStatus:y,localRetryCount:E,remoteRetryCount:z,remoteClients:k,remoteSelectedClientId:U,localWsUrl:K,remoteWsUrl:j,cancelLocalRetry:D,cancelRemoteRetry:O,connectLocal:Q,disconnectLocal:H,connectRemote:P,disconnectRemote:q,fetchRemoteClients:h}=ar(),$=ae("basic"),Z=ae(i.value),F=ae(localStorage.getItem("print-designer-brand-key")||"default"),ee=ae(localStorage.getItem("print-designer-brand-custom-hex")||"#3b82f6"),Y=me(()=>C.value||"disconnected"),R=me(()=>y.value||"disconnected"),A=me(()=>E.value||0),L=me(()=>z.value||0),te=me(()=>k.value||[]),B=me(()=>Y.value==="connected"),J=me(()=>R.value==="connected"),ge=me(()=>Y.value==="connecting"),_e=me(()=>R.value==="connecting"),de=me(()=>!!f.wsAddress),xe=me(()=>!!(g.apiBaseUrl&&g.username&&g.password)),Se=me(()=>B.value?o("settings.status.connected"):o("settings.status.disconnected")),oe=me(()=>J.value?o("settings.status.connected"):o("settings.status.disconnected")),ce=fe=>fe==="connected"?"bg-blue-600 hover:bg-blue-700 text-white border border-blue-600":"bg-transparent text-blue-600 border border-blue-600 hover:bg-blue-50",he=(fe,le=0,re=255)=>Math.min(Math.max(fe,le),re),u=(fe,le,re)=>{const ie=ye=>he(Math.round(ye)).toString(16).padStart(2,"0");return`#${ie(fe)}${ie(le)}${ie(re)}`},X=(fe,le,re)=>({r:fe.r+(le.r-fe.r)*re,g:fe.g+(le.g-fe.g)*re,b:fe.b+(le.b-fe.b)*re}),T=fe=>{const le=Dt(fe);if(!le)return null;const re=Ot(le.h,le.s,le.v),ie={r:255,g:255,b:255},ye={r:0,g:0,b:0},We=X(re,ie,.92),Pe=X(re,ie,.84),He=X(re,ie,.68),Ge=X(re,ie,.5),Ue=X(re,ie,.32),nt=X(re,ie,.16),dt=X(re,ye,.12),ft=X(re,ye,.24),ct=X(re,ye,.36),qe=X(re,ye,.5);return{"--brand-50":u(We.r,We.g,We.b),"--brand-100":u(Pe.r,Pe.g,Pe.b),"--brand-200":u(He.r,He.g,He.b),"--brand-300":u(Ge.r,Ge.g,Ge.b),"--brand-400":u(Ue.r,Ue.g,Ue.b),"--brand-500":u(nt.r,nt.g,nt.b),"--brand-600":u(re.r,re.g,re.b),"--brand-700":u(dt.r,dt.g,dt.b),"--brand-800":u(ft.r,ft.g,ft.b),"--brand-900":u(ct.r,ct.g,ct.b),"--brand-950":u(qe.r,qe.g,qe.b)}},b=me(()=>T(ee.value)||{}),w=me(()=>[{key:"default",labelKey:"settings.themePresetDefault",colors:{"--brand-50":"#eff6ff","--brand-100":"#dbeafe","--brand-200":"#bfdbfe","--brand-300":"#93c5fd","--brand-400":"#60a5fa","--brand-500":"#3b82f6","--brand-600":"#2563eb","--brand-700":"#1d4ed8","--brand-800":"#1e40af","--brand-900":"#1e3a8a","--brand-950":"#172554"}},{key:"emerald",labelKey:"settings.themePresetEmerald",colors:{"--brand-50":"#ecfdf5","--brand-100":"#d1fae5","--brand-200":"#a7f3d0","--brand-300":"#6ee7b7","--brand-400":"#34d399","--brand-500":"#10b981","--brand-600":"#059669","--brand-700":"#047857","--brand-800":"#065f46","--brand-900":"#064e3b","--brand-950":"#022c22"}},{key:"amber",labelKey:"settings.themePresetAmber",colors:{"--brand-50":"#fffbeb","--brand-100":"#fef3c7","--brand-200":"#fde68a","--brand-300":"#fcd34d","--brand-400":"#fbbf24","--brand-500":"#f59e0b","--brand-600":"#d97706","--brand-700":"#b45309","--brand-800":"#92400e","--brand-900":"#78350f","--brand-950":"#451a03"}},{key:"rose",labelKey:"settings.themePresetRose",colors:{"--brand-50":"#fff1f2","--brand-100":"#ffe4e6","--brand-200":"#fecdd3","--brand-300":"#fda4af","--brand-400":"#fb7185","--brand-500":"#f43f5e","--brand-600":"#e11d48","--brand-700":"#be123c","--brand-800":"#9f1239","--brand-900":"#881337","--brand-950":"#4c0519"}},{key:"custom",labelKey:"settings.themePresetCustom",colors:b.value}]),_=fe=>{const le=document.documentElement;Object.entries(fe).forEach(([re,ie])=>{le.style.setProperty(re,ie)}),window.dispatchEvent(new CustomEvent("brand-theme-updated"))},W=fe=>{localStorage.setItem("print-designer-brand-vars",JSON.stringify(fe))},V=fe=>{const le=w.value.find(re=>re.key===fe)||w.value[0];le.colors&&(_(le.colors),W(le.colors),localStorage.setItem("print-designer-brand-key",le.key))};(()=>{const fe=localStorage.getItem("print-designer-brand-vars");if(fe)try{const le=JSON.parse(fe);le&&typeof le=="object"&&_(le)}catch{}})();const ne=async()=>{try{if(ge.value)return;if(B.value){H();return}await Q()}catch(fe){console.error("Local connection error:",fe)}},pe=async()=>{try{if(_e.value)return;if(J.value){q();return}await P()}catch(fe){console.error("Remote connection error:",fe)}};ze(Z,fe=>{i.value=fe,localStorage.setItem("print-designer-language",fe)}),ze(i,fe=>{Z.value!==fe&&(Z.value=fe)}),ze(l,fe=>{d(fe)}),ze(()=>t.show,fe=>{m.setDisableGlobalShortcuts(fe)}),ze(ee,fe=>{fe&&(localStorage.setItem("print-designer-brand-custom-hex",fe),F.value==="custom"&&V("custom"))}),ze(F,fe=>{V(fe)},{immediate:!0}),ze([$,y],([fe,le])=>{fe!=="remote"||le!=="connected"||h()});const se=()=>{try{s("update:show",!1)}catch(fe){console.error("Error closing modal:",fe)}},we=fe=>{try{if(!t.show)return;fe.key==="Escape"&&(fe.preventDefault(),se())}catch(le){console.error("Error in keydown handler:",le)}};return Ye(()=>{window.addEventListener("keydown",we)}),Ke(()=>{window.removeEventListener("keydown",we),t.show&&m.setDisableGlobalShortcuts(!1)}),(fe,le)=>(M(),Me(ot,{to:n(x)||"body"},[r.show?(M(),N("div",{key:0,class:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:je(se,["self"])},[a("div",o1,[a("div",a1,[a("div",n1,[a("h3",s1,I(n(o)("settings.title")),1)]),a("div",i1,[a("button",{onClick:le[0]||(le[0]=re=>$.value="basic"),class:Ce(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",$.value==="basic"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(n(Xt),{class:"w-5 h-5"}),Te(" "+I(n(o)("settings.basic")),1)],2),a("button",{onClick:le[1]||(le[1]=re=>$.value="language"),class:Ce(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",$.value==="language"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(n(Kv),{class:"w-5 h-5"}),Te(" "+I(n(o)("settings.language")),1)],2),a("button",{onClick:le[2]||(le[2]=re=>$.value="local"),class:Ce(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",$.value==="local"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(n(Ia),{class:"w-5 h-5"}),Te(" "+I(n(o)("settings.localConnection")),1)],2),a("button",{onClick:le[3]||(le[3]=re=>$.value="remote"),class:Ce(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",$.value==="remote"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(n(Jv),{class:"w-5 h-5"}),Te(" "+I(n(o)("settings.remoteConnection")),1)],2)])]),a("div",l1,[a("div",d1,[a("h3",c1,I($.value==="basic"?n(o)("settings.basic"):$.value==="language"?n(o)("settings.language"):$.value==="local"?n(o)("settings.localConnection"):n(o)("settings.remoteConnection")),1),a("button",{onClick:se,class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(n(wt),{class:"w-4 h-4"})])]),a("div",u1,[$.value==="basic"?(M(),N("div",h1,[a("div",null,[a("div",p1,I(n(o)("settings.theme")),1),a("div",g1,[a("label",{class:Ce(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",n(l)==="system"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(a("input",{type:"radio",value:"system","onUpdate:modelValue":le[4]||(le[4]=re=>mt(l)?l.value=re:null)},null,512),[[ut,n(l)]]),a("span",null,I(n(o)("settings.themeSystem")),1)],2),a("label",{class:Ce(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",n(l)==="light"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(a("input",{type:"radio",value:"light","onUpdate:modelValue":le[5]||(le[5]=re=>mt(l)?l.value=re:null)},null,512),[[ut,n(l)]]),a("span",null,I(n(o)("settings.themeLight")),1)],2),a("label",{class:Ce(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",n(l)==="dark"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(a("input",{type:"radio",value:"dark","onUpdate:modelValue":le[6]||(le[6]=re=>mt(l)?l.value=re:null)},null,512),[[ut,n(l)]]),a("span",null,I(n(o)("settings.themeDark")),1)],2)]),a("p",f1,I(n(o)("settings.themeDesc")),1)]),a("div",m1,[a("div",b1,I(n(o)("settings.themeColor")),1),a("div",v1,[(M(!0),N($e,null,De(w.value.filter(re=>re.key!=="custom"),re=>(M(),N("button",{key:re.key,type:"button",class:Ce(["flex items-center gap-2 px-3 py-2 border rounded text-xs transition-colors",F.value===re.key?"border-blue-600 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"]),onClick:ie=>F.value=re.key},[a("span",{class:"inline-block w-3.5 h-3.5 rounded-full",style:ke({backgroundColor:re.colors["--brand-600"]})},null,4),a("span",null,I(n(o)(re.labelKey)),1)],10,y1))),128)),ue(St,{"model-value":ee.value,"onUpdate:modelValue":le[8]||(le[8]=re=>{re&&(ee.value=re,F.value="custom")}),"default-color":ee.value,"teleport-to-body":!0},{trigger:gt(({color:re,open:ie})=>[a("button",{type:"button",class:Ce(["flex items-center gap-2 px-3 py-2 border rounded text-xs transition-colors",F.value==="custom"?"border-blue-600 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"]),onClick:le[7]||(le[7]=ye=>F.value="custom")},[a("span",{class:Ce(["inline-block w-3.5 h-3.5 rounded-full border border-gray-200",{"ring-2 ring-blue-500 ring-offset-1":ie}]),style:ke({backgroundColor:re||ee.value})},null,6),a("span",null,I(n(o)("settings.themePresetCustom")),1)],2)]),_:1},8,["model-value","default-color"])]),a("p",w1,I(n(o)("settings.themeColorDesc")),1)]),a("div",x1,[a("div",k1,[a("div",_1,I(n(o)("settings.autoSave")),1),a("button",{onClick:le[9]||(le[9]=re=>c.value=!n(c)),class:Ce(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",n(c)?"bg-blue-600":"bg-gray-200"])},[a("span",S1,I(n(o)("settings.autoSave")),1),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",n(c)?"translate-x-5":"translate-x-0"])},null,2)],2)]),a("p",C1,I(n(o)("settings.autoSaveDesc")),1)]),a("div",E1,[a("div",T1,[a("div",I1,I(n(o)("settings.exportImageMerged")),1),a("button",{onClick:le[10]||(le[10]=re=>p.value=!n(p)),class:Ce(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",n(p)?"bg-blue-600":"bg-gray-200"])},[a("span",$1,I(n(o)("settings.exportImageMerged")),1),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",n(p)?"translate-x-5":"translate-x-0"])},null,2)],2)]),a("p",A1,I(n(o)("settings.exportImageMergedDesc")),1)]),a("div",z1,[a("div",null,[a("div",P1,I(n(o)("settings.printMode")),1),a("div",L1,[a("label",{class:Ce(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",n(v)==="browser"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(a("input",{type:"radio",value:"browser","onUpdate:modelValue":le[11]||(le[11]=re=>mt(v)?v.value=re:null)},null,512),[[ut,n(v)]]),a("span",null,I(n(o)("settings.printModeBrowser")),1)],2),a("label",{class:Ce(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",n(v)==="local"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(a("input",{type:"radio",value:"local","onUpdate:modelValue":le[12]||(le[12]=re=>mt(v)?v.value=re:null),disabled:!B.value},null,8,M1),[[ut,n(v)]]),a("span",null,I(n(o)("settings.printModeLocal")),1)],2),a("label",{class:Ce(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",n(v)==="remote"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(a("input",{type:"radio",value:"remote","onUpdate:modelValue":le[13]||(le[13]=re=>mt(v)?v.value=re:null),disabled:!J.value},null,8,R1),[[ut,n(v)]]),a("span",null,I(n(o)("settings.printModeRemote")),1)],2)]),a("p",D1,I(n(o)("settings.printModeDesc")),1)]),a("div",B1,[a("div",O1,I(n(o)("settings.silentPrint")),1),a("button",{onClick:le[14]||(le[14]=re=>S.value=!n(S)),class:Ce(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",n(S)?"bg-blue-600":"bg-gray-200"])},[a("span",q1,I(n(o)("settings.silentPrint")),1),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",n(S)?"translate-x-5":"translate-x-0"])},null,2)],2)]),a("p",F1,I(n(o)("settings.silentPrintDesc")),1)])])):ve("",!0),$.value==="language"?(M(),N("div",j1,[a("div",N1,I(n(o)("settings.selectLanguage")),1),a("div",H1,[a("label",{class:Ce(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",Z.value==="zh"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(a("input",{type:"radio",value:"zh","onUpdate:modelValue":le[15]||(le[15]=re=>Z.value=re)},null,512),[[ut,Z.value]]),a("span",null,I(n(o)("settings.zhLabel")),1)],2),a("label",{class:Ce(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",Z.value==="en"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(a("input",{type:"radio",value:"en","onUpdate:modelValue":le[16]||(le[16]=re=>Z.value=re)},null,512),[[ut,Z.value]]),a("span",null,I(n(o)("settings.enLabel")),1)],2)]),a("p",U1,I(n(o)("settings.languageDesc")),1)])):ve("",!0),$.value==="local"?(M(),N("div",V1,[a("div",W1,[a("div",G1,I(n(o)("settings.localClientTitle")),1),a("p",Y1,I(n(o)("settings.localClientDesc")),1)]),a("div",K1,[a("label",X1,[a("span",Z1,I(n(o)("settings.wsAddress")),1),Ae(a("input",{"onUpdate:modelValue":le[17]||(le[17]=re=>n(f).wsAddress=re),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:n(o)("settings.localWsAddressPlaceholder")},null,8,J1),[[Oe,n(f).wsAddress]])]),a("label",Q1,[a("span",ey,I(n(o)("settings.secretKey")),1),Ae(a("input",{"onUpdate:modelValue":le[18]||(le[18]=re=>n(f).secretKey=re),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,n(f).secretKey]])])]),a("div",ty,[a("span",ry,I(n(o)("settings.connectionUrl"))+": ",1),a("span",null,I(n(K)),1)]),a("div",oy,[a("button",{onClick:ne,disabled:ge.value||A.value>0||!B.value&&!de.value,class:Ce(["w-full inline-flex items-center justify-center gap-2 px-3 h-9 rounded transition-colors text-sm shadow-sm disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",ce(Y.value)])},[B.value?(M(),Me(n(Qs),{key:0,class:"w-4 h-4"})):(M(),Me(n(ei),{key:1,class:"w-4 h-4"})),a("span",null,I(Se.value),1)],10,ay),A.value>0&&!B.value?(M(),N("div",ny,[a("span",null,I(n(o)("settings.retrying",{count:A.value,max:10})),1),a("button",{onClick:le[19]||(le[19]=(...re)=>n(D)&&n(D)(...re)),class:"text-blue-600 hover:text-blue-700"},I(n(o)("settings.cancelRetry")),1)])):ve("",!0)])])):ve("",!0),$.value==="remote"?(M(),N("div",sy,[a("div",iy,[a("div",ly,I(n(o)("settings.remoteLoginTitle")),1),a("p",dy,I(n(o)("settings.remoteLoginDesc")),1)]),a("div",cy,[a("label",uy,[a("span",hy,I(n(o)("settings.apiBaseUrl")),1),Ae(a("input",{"onUpdate:modelValue":le[20]||(le[20]=re=>n(g).apiBaseUrl=re),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:n(o)("settings.apiBasePlaceholder")},null,8,py),[[Oe,n(g).apiBaseUrl]])]),a("label",gy,[a("span",fy,I(n(o)("settings.username")),1),Ae(a("input",{"onUpdate:modelValue":le[21]||(le[21]=re=>n(g).username=re),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,n(g).username]])]),a("label",my,[a("span",by,I(n(o)("settings.password")),1),Ae(a("input",{"onUpdate:modelValue":le[22]||(le[22]=re=>n(g).password=re),type:"password",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,n(g).password]])])]),a("div",vy,[a("div",yy,I(n(o)("settings.remoteWsTitle")),1),a("p",wy,I(n(o)("settings.remoteWsDesc")),1)]),a("div",xy,[a("label",ky,[a("span",_y,I(n(o)("settings.wsAddress")),1),Ae(a("input",{"onUpdate:modelValue":le[23]||(le[23]=re=>n(g).wsAddress=re),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:n(o)("settings.wsAddressPlaceholder")},null,8,Sy),[[Oe,n(g).wsAddress]])]),a("label",Cy,[a("span",Ey,I(n(o)("settings.remoteClient")),1),Ae(a("select",{"onUpdate:modelValue":le[24]||(le[24]=re=>mt(U)?U.value=re:null),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:R.value!=="connected"||te.value.length===0},[a("option",Iy,I(n(o)("settings.remoteClientPlaceholder")),1),(M(!0),N($e,null,De(te.value,re=>(M(),N("option",{key:re.client_id,value:re.client_id,disabled:re.online===!1},I(re.client_name||re.client_id)+I(re.online===!1?" (offline)":""),9,$y))),128))],8,Ty),[[et,n(U)]])])]),a("div",Ay,[a("span",zy,I(n(o)("settings.connectionUrl"))+": ",1),a("span",null,I(n(j)),1)]),a("p",Py,I(n(o)("settings.remoteAuthHint")),1),a("div",Ly,[a("button",{onClick:pe,disabled:_e.value||L.value>0||!J.value&&!xe.value,class:Ce(["w-full inline-flex items-center justify-center gap-2 px-3 h-9 rounded transition-colors text-sm shadow-sm disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",ce(R.value)])},[J.value?(M(),Me(n(Qs),{key:0,class:"w-4 h-4"})):(M(),Me(n(ei),{key:1,class:"w-4 h-4"})),a("span",null,I(oe.value),1)],10,My),L.value>0&&!J.value?(M(),N("div",Ry,[a("span",null,I(n(o)("settings.retrying",{count:L.value,max:10})),1),a("button",{onClick:le[25]||(le[25]=(...re)=>n(O)&&n(O)(...re)),class:"text-blue-600 hover:text-blue-700"},I(n(o)("settings.cancelRetry")),1)])):ve("",!0)])])):ve("",!0)]),a("div",Dy,[a("button",{onClick:se,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm"},I(n(o)("common.close")),1)])])])])):ve("",!0)],8,["to"]))}}),Oy={class:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 z-[2000] relative shadow-sm"},qy={class:"flex items-center gap-2"},Fy=["src"],jy={key:1,class:"font-semibold text-gray-700"},Ny=Le({__name:"Header",setup(r){const{t:e}=Ne(),t=Be(),s=me(()=>{var d;return((d=t.branding)==null?void 0:d.showLogo)!==!1}),o=me(()=>{var d;return((d=t.branding)==null?void 0:d.showTitle)!==!1}),i=me(()=>{var d;return((d=t.branding)==null?void 0:d.logoUrl)||tl}),l=me(()=>{var d;return((d=t.branding)==null?void 0:d.title)||e("common.appTitle")});return(d,c)=>(M(),N("header",Oy,[a("div",qy,[s.value?(M(),N("img",{key:0,src:i.value,alt:"Logo",class:"w-8 h-8 object-contain"},null,8,Fy)):ve("",!0),o.value?(M(),N("h1",jy,I(l.value),1)):ve("",!0)]),ue(rb,{onToggleHelp:c[0]||(c[0]=m=>n(t).setShowHelp(!0)),onToggleSettings:c[1]||(c[1]=m=>n(t).setShowSettings(!0))}),ue(Wv,{show:n(t).showHelp,"onUpdate:show":c[2]||(c[2]=m=>n(t).setShowHelp(m))},null,8,["show"]),ue(By,{show:n(t).showSettings,"onUpdate:show":c[3]||(c[3]=m=>n(t).setShowSettings(m))},null,8,["show"])]))}}),Hy={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Uy(r,e){return M(),N("svg",Hy,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M7 20V7H2V4h13v3h-5v13zm9 0v-8h-3V9h9v3h-3v8z"},null,-1)])])}const ti=Ee({name:"material-symbols-text-fields",render:Uy}),Vy={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Wy(r,e){return M(),N("svg",Vy,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m6 20l1-4H3l.5-2h4l1-4h-4L5 8h4l1-4h2l-1 4h4l1-4h2l-1 4h4l-.5 2h-4l-1 4h4l-.5 2h-4l-1 4h-2l1-4H9l-1 4zm3.5-6h4l1-4h-4z"},null,-1)])])}const ri=Ee({name:"material-symbols-numbers",render:Wy}),Gy={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Yy(r,e){return M(),N("svg",Gy,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M3 8V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v3zm2 13q-.825 0-1.412-.587T3 19v-9h4.5v11zm11.5 0V10H21v9q0 .825-.587 1.413T19 21zm-7 0V10h5v11z"},null,-1)])])}const oi=Ee({name:"material-symbols-table-chart",render:Yy}),Ky={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Xy(r,e){return M(),N("svg",Ky,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M1 19V5h2v14zm3 0V5h2v14zm3 0V5h1v14zm3 0V5h2v14zm3 0V5h3v14zm4 0V5h1v14zm3 0V5h3v14z"},null,-1)])])}const ai=Ee({name:"material-symbols-barcode",render:Xy}),Zy={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Jy(r,e){return M(),N("svg",Zy,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M3 11V3h8v8zm2-2h4V5H5zM3 21v-8h8v8zm2-2h4v-4H5zm8-8V3h8v8zm2-2h4V5h-4zm4 12v-2h2v2zm-6-6v-2h2v2zm2 2v-2h2v2zm-2 2v-2h2v2zm2 2v-2h2v2zm2-2v-2h2v2zm0-4v-2h2v2zm2 2v-2h2v2z"},null,-1)])])}const ni=Ee({name:"material-symbols-qr-code",render:Jy}),Qy={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ew(r,e){return M(),N("svg",Qy,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M4 13v-2h16v2z"},null,-1)])])}const si=Ee({name:"material-symbols-horizontal-rule",render:ew}),tw={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function rw(r,e){return M(),N("svg",tw,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5H5z"},null,-1)])])}const ii=Ee({name:"material-symbols-check-box-outline-blank",render:rw}),ow={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function aw(r,e){return M(),N("svg",ow,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20"},null,-1)])])}const li=Ee({name:"material-symbols-radio-button-unchecked",render:aw}),nw={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function sw(r,e){return M(),N("svg",nw,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m5.825 21l1.625-7.025L2 9.25l7.2-.625L12 2l2.8 6.625l7.2.625l-5.45 4.725L18.175 21L12 17.275z"},null,-1)])])}const iw=Ee({name:"material-symbols-star",render:sw}),lw={class:"w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col h-full z-40"},dw={class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},cw={class:"font-semibold text-gray-700 dark:text-gray-200"},uw={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},hw={class:"flex border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"},pw={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400"},gw={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400"},fw={class:"flex-1 overflow-y-auto"},mw={class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 px-1"},bw={class:"grid grid-cols-2 gap-3"},vw=["onDragstart"],yw={class:"text-sm font-medium text-gray-700 dark:text-gray-200"},ww={key:0,class:"p-6 text-center"},xw={class:"text-sm text-gray-500 dark:text-gray-400"},kw={key:1,class:"p-4 grid grid-cols-2 gap-3"},_w=["onDragstart"],Sw=["title"],Cw=["onClick","title"],Ew=["onClick"],Tw=["onClick"],Iw=["onClick"],$w=["onClick"],Aw=["onClick"],zw=Le({__name:"Sidebar",setup(r){const{t:e}=Ne(),t=Be(),s=Xe("modal-container",ae(null)),o=ae("standard"),i=me(()=>t.customElements),l=ae(null),d=ae({}),c=ae(!1),m=ae(null),x=ae(""),v=ae(!1),S=ae(""),p=ae(null),f=ae([]),g=[{title:"sidebar.general",items:[{type:be.TEXT,label:"sidebar.text",icon:ti},{type:be.IMAGE,label:"sidebar.image",icon:Ws},{type:be.PAGE_NUMBER,label:"sidebar.pagination",icon:ri}]},{title:"sidebar.dataCodes",items:[{type:be.TABLE,label:"sidebar.table",icon:oi},{type:be.BARCODE,label:"sidebar.barcode",icon:ai},{type:be.QRCODE,label:"sidebar.qrcode",icon:ni}]},{title:"sidebar.shapes",items:[{type:be.LINE,label:"sidebar.line",icon:si},{type:be.RECT,label:"sidebar.rect",icon:ii},{type:be.CIRCLE,label:"sidebar.circle",icon:li}]}],C=(q,h)=>{q.dataTransfer&&(q.dataTransfer.setData("application/json",JSON.stringify({type:h})),q.dataTransfer.effectAllowed="copy")},y=(q,h)=>{q.dataTransfer&&(q.dataTransfer.setData("application/json",JSON.stringify({type:h.element.type,payload:h.element})),q.dataTransfer.effectAllowed="copy")},E=q=>{switch(q){case be.TEXT:return ti;case be.IMAGE:return Ws;case be.TABLE:return oi;case be.PAGE_NUMBER:return ri;case be.BARCODE:return ai;case be.QRCODE:return ni;case be.LINE:return si;case be.RECT:return ii;case be.CIRCLE:return li;default:return iw}},z=(q,h)=>{if(q.stopPropagation(),l.value===h)l.value=null;else{const Z=q.currentTarget.getBoundingClientRect();let F=Z.right-128;F<5&&(F=Z.left),window.innerHeight-Z.bottom<210?d.value={bottom:`${window.innerHeight-Z.top+5}px`,left:`${F}px`}:d.value={top:`${Z.bottom+5}px`,left:`${F}px`},l.value=h}},k=q=>{if(!l.value)return;q.composedPath().some(Z=>Z instanceof Element?Z.classList.contains("sidebar-context-menu"):!1)||(l.value=null)},U=q=>{l.value=null,m.value=q.id,x.value=q.name,c.value=!0},K=q=>{m.value&&q&&t.renameCustomElement(m.value,q)},j=q=>{l.value=null,t.addCustomElement(`${q.name} Copy`,q.element)},D=q=>{l.value=null,confirm(e("sidebar.confirmDelete",{name:q.name}))&&t.removeCustomElement(q.id)},O=q=>{if(l.value=null,t.editingCustomElementId!==q.id){if(t.editingCustomElementId&&t.editingCustomElementId!==q.id){const h=t.customElements.find(Z=>Z.id===t.editingCustomElementId),$=h?h.name:"";if(!confirm(e("sidebar.confirmSwitchEdit",{name:$})))return;t.cancelCustomElementEdit()}t.startCustomElementEdit(q.id)}},Q=q=>Yi(q.element),H=q=>{l.value=null,p.value=q;const h=q.testData||{},$=fa(q.element,h);f.value=Object.keys($),S.value=JSON.stringify($,null,2),v.value=!0},P=()=>{var ee;const q=p.value,h=new Set(f.value||[]);if(p.value=null,f.value=[],!q)return;let $=null;try{const Y=((ee=S.value)==null?void 0:ee.trim())||"{}",R=JSON.parse(Y);R&&typeof R=="object"&&!Array.isArray(R)&&($=R)}catch{$=null}if(!$){alert(e("common.invalidJson"));return}if(h.size>0){const Y=Object.keys($);if(Y.length!==h.size||Y.some(A=>!h.has(A))){alert(e("common.testDataKeyChanged"));return}}const Z=fa(q.element,q.testData||{}),F={};Object.keys(Z).forEach(Y=>{(h.size===0||h.has(Y))&&(F[Y]=Object.prototype.hasOwnProperty.call($,Y)?$[Y]:Z[Y])}),q.testData=F,t.saveCustomElements()};return Ye(()=>{window.addEventListener("mousedown",k)}),Ke(()=>{window.removeEventListener("mousedown",k)}),(q,h)=>(M(),N("aside",lw,[a("div",dw,[a("h2",cw,I(n(e)("sidebar.elements")),1),a("p",uw,I(n(e)("sidebar.dragToCanvas")),1)]),a("div",hw,[a("button",{onClick:h[0]||(h[0]=$=>o.value="standard"),class:Ce(["flex-1 py-3 text-sm font-medium transition-colors relative",o.value==="standard"?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800"])},[Te(I(n(e)("sidebar.standard"))+" ",1),o.value==="standard"?(M(),N("div",pw)):ve("",!0)],2),a("button",{onClick:h[1]||(h[1]=$=>o.value="custom"),class:Ce(["flex-1 py-3 text-sm font-medium transition-colors relative",o.value==="custom"?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800"])},[Te(I(n(e)("sidebar.custom"))+" ",1),o.value==="custom"?(M(),N("div",gw)):ve("",!0)],2)]),a("div",fw,[o.value==="standard"?(M(),N($e,{key:0},De(g,$=>a("div",{key:$.title,class:"p-4 border-b border-gray-100 dark:border-gray-800 last:border-0"},[a("h3",mw,I(n(e)($.title)),1),a("div",bw,[(M(!0),N($e,null,De($.items,Z=>(M(),N("div",{key:Z.type,class:"flex flex-col items-center justify-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg theme-hover-border theme-hover-bg cursor-move transition-all dark:bg-gray-800 dark:hover:bg-gray-700",draggable:"true",onDragstart:F=>C(F,Z.type)},[(M(),Me(Bt(Z.icon),{class:"w-8 h-8 text-gray-600 dark:text-gray-300 mb-2"})),a("span",yw,I(n(e)(Z.label)),1)],40,vw))),128))])])),64)):ve("",!0),o.value==="custom"?(M(),N($e,{key:1},[i.value.length===0?(M(),N("div",ww,[a("p",xw,I(n(e)("sidebar.noCustomElements")),1)])):(M(),N("div",kw,[(M(!0),N($e,null,De(i.value,$=>(M(),N("div",{key:$.id,class:"group relative flex flex-col items-center justify-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg theme-hover-border theme-hover-bg cursor-move transition-all dark:bg-gray-800 dark:hover:bg-gray-700",draggable:"true",onDragstart:Z=>y(Z,$)},[(M(),Me(Bt(E($.element.type)),{class:"w-8 h-8 text-gray-600 dark:text-gray-300 mb-2"})),a("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-200 truncate w-full text-center",title:$.name},I($.name),9,Sw),a("button",{onClick:Z=>z(Z,$.id),class:Ce(["absolute top-1 right-1 p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 opacity-0 group-hover:opacity-100 transition-opacity",{"opacity-100 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300":l.value===$.id}]),title:n(e)("sidebar.moreOptions")},[ue(n(el),{class:"w-4 h-4"})],10,Cw)],40,_w))),128))]))],64)):ve("",!0)]),(M(),Me(ot,{to:n(s)||"body"},[l.value?(M(),N("div",{key:0,class:"fixed inset-0 z-[2000] pointer-events-auto",onClick:h[3]||(h[3]=$=>l.value=null)},[a("div",{class:"sidebar-context-menu absolute w-32 bg-white dark:bg-gray-800 rounded shadow-lg border border-gray-100 dark:border-gray-700 z-[2001] py-1 pointer-events-auto",style:ke(d.value),onClick:h[2]||(h[2]=je(()=>{},["stop"]))},[(M(!0),N($e,null,De(i.value,$=>(M(),N($e,{key:$.id},[$.id===l.value?(M(),N($e,{key:0},[a("button",{onClick:Z=>O($),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2"},[ue(n(ma),{class:"w-3.5 h-3.5"}),Te(" "+I(n(e)("sidebar.editElement")),1)],8,Ew),Q($)?(M(),N("button",{key:0,onClick:Z=>H($),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2"},[ue(n(pt),{class:"w-3.5 h-3.5"}),Te(" "+I(n(e)("common.testData")),1)],8,Tw)):ve("",!0),a("button",{onClick:Z=>U($),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2"},[ue(n(ma),{class:"w-3.5 h-3.5"}),Te(" "+I(n(e)("sidebar.rename")),1)],8,Iw),a("button",{onClick:Z=>j($),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2"},[ue(n(It),{class:"w-3.5 h-3.5"}),Te(" "+I(n(e)("sidebar.copy")),1)],8,$w),a("button",{onClick:Z=>D($),class:"w-full text-left px-3 py-1.5 text-xs text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 flex items-center gap-2"},[ue(n(Tt),{class:"w-3.5 h-3.5"}),Te(" "+I(n(e)("sidebar.delete")),1)],8,Aw)],64)):ve("",!0)],64))),128))],4)])):ve("",!0)],8,["to"])),ue(Nt,{show:c.value,"initial-value":x.value,title:n(e)("sidebar.renameModalTitle"),placeholder:n(e)("sidebar.enterNamePlaceholder"),onClose:h[4]||(h[4]=$=>c.value=!1),onSave:K},null,8,["show","initial-value","title","placeholder"]),ue(jt,{visible:v.value,"onUpdate:visible":h[5]||(h[5]=$=>v.value=$),title:n(e)("common.testData"),value:S.value,language:"json","onUpdate:value":h[6]||(h[6]=$=>S.value=$),onClose:P},null,8,["visible","title","value"])]))}}),Pw={key:0,class:"flex items-center justify-between"},Lw={class:"text-sm text-gray-700 dark:text-gray-200 font-medium"},Mw=["disabled"],Rw={class:"sr-only"},Dw={key:1},Bw={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},Ow=["value","disabled","placeholder"],qw=["type","value","disabled","placeholder","min","max","step"],At=Le({__name:"PropertyInput",props:{label:{},value:{type:[String,Number,Boolean]},type:{},placeholder:{},min:{},max:{},step:{},disabled:{type:Boolean}},emits:["update:value"],setup(r,{emit:e}){const t=e,s=o=>{const i=o.target;t("update:value",i.value)};return(o,i)=>r.type==="switch"?(M(),N("div",Pw,[a("label",Lw,I(r.label),1),a("button",{type:"button",disabled:r.disabled,onClick:i[0]||(i[0]=l=>o.$emit("update:value",!r.value)),class:Ce(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",r.value?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700"])},[a("span",Rw,"Toggle "+I(r.label),1),a("span",{"aria-hidden":"true",class:Ce(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white dark:bg-gray-100 shadow ring-0 transition duration-200 ease-in-out",r.value?"translate-x-5":"translate-x-0"])},null,2)],10,Mw)])):(M(),N("div",Dw,[a("label",Bw,I(r.label),1),r.type==="textarea"?(M(),N("textarea",{key:0,value:r.value===void 0||r.value===null?"":String(r.value),disabled:r.disabled,placeholder:r.placeholder,onInput:s,class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 rounded focus:border-blue-500 dark:focus:border-blue-400 outline-none h-24 resize-y disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:text-gray-500 dark:disabled:text-gray-400 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200"},null,40,Ow)):(M(),N("input",{key:1,type:r.type||"text",value:r.value===void 0||r.value===null?"":String(r.value),disabled:r.disabled,placeholder:r.placeholder,min:r.min,max:r.max,step:r.step,onChange:s,class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 rounded focus:border-blue-500 dark:focus:border-blue-400 outline-none disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:text-gray-500 dark:disabled:text-gray-400 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200"},null,40,qw))]))}}),Fw={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},jw=["value","disabled"],Nw=["value"],Hw=Le({__name:"PropertySelect",props:{label:{},value:{type:[String,Number,Boolean]},options:{},disabled:{type:Boolean}},emits:["update:value"],setup(r,{emit:e}){const t=r,s=e,o=i=>{const d=i.target.value,c=t.options.find(m=>String(m.value)===d);s("update:value",c?c.value:d)};return(i,l)=>(M(),N("div",null,[a("label",Fw,I(r.label),1),a("select",{value:r.value,disabled:r.disabled,onChange:o,class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 rounded focus:border-blue-500 dark:focus:border-blue-400 outline-none disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:text-gray-500 dark:disabled:text-gray-400 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200"},[(M(!0),N($e,null,De(r.options,d=>(M(),N("option",{key:String(d.value),value:d.value,class:"dark:bg-gray-800 dark:text-gray-200"},I(d.label),9,Nw))),128))],40,jw)]))}}),Uw={class:"flex items-center justify-between"},Vw={class:"text-xs text-gray-500 dark:text-gray-400"},Ww={class:"flex items-center gap-2"},Gw={key:0,class:"absolute inset-0 flex items-center justify-center"},di=Le({__name:"PropertyColor",props:{label:{},value:{},disabled:{type:Boolean}},emits:["update:value"],setup(r,{emit:e}){const t=e;return(s,o)=>(M(),N("div",Uw,[a("label",Vw,I(r.label),1),a("div",Ww,[ue(St,{"model-value":r.value,"onUpdate:modelValue":o[0]||(o[0]=i=>t("update:value",i)),disabled:r.disabled,"allow-transparent":!0},{trigger:gt(({color:i,open:l})=>[a("div",{class:Ce(["w-8 h-6 rounded border border-gray-300 dark:border-gray-600 cursor-pointer relative overflow-hidden hover:border-blue-500 dark:hover:border-blue-400 transition-colors",{"ring-2 ring-blue-500 dark:ring-blue-400 ring-offset-1 dark:ring-offset-gray-900":l,"opacity-50 cursor-not-allowed":r.disabled}])},[o[2]||(o[2]=a("div",{class:"absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50"},null,-1)),a("div",{class:"absolute inset-0",style:ke({backgroundColor:i==="transparent"?"transparent":i})},null,4),i==="transparent"?(M(),N("div",Gw,[...o[1]||(o[1]=[a("div",{class:"w-full h-[1px] bg-red-500 rotate-45"},null,-1)])])):ve("",!0)],2)]),_:1},8,["model-value","disabled"])])]))}}),Yw={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Kw(r,e){return M(),N("svg",Yw,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M3 21v-8h2v4.6L17.6 5H13V3h8v8h-2V6.4L6.4 19H11v2z"},null,-1)])])}const Xw=Ee({name:"material-symbols-open-in-full",render:Kw}),Zw={class:"flex flex-col gap-1"},Jw={class:"flex justify-between items-center"},Qw={class:"text-xs text-gray-500 font-medium"},e2={class:"flex items-center gap-2"},t2={class:"text-[10px] text-gray-400 uppercase"},r2=Le({__name:"PropertyCode",props:{label:{},value:{},language:{},disabled:{type:Boolean},height:{}},emits:["update:value"],setup(r,{emit:e}){const t=e;Be();const{isDark:s}=yt(),o=ae(!1),i=me(()=>({minimap:{enabled:!1},lineNumbers:"on",glyphMargin:!1,folding:!0,wordWrap:"on",automaticLayout:!0,scrollBeyondLastLine:!1,theme:s.value?"vs-dark":"vs",fontSize:12,fontFamily:'Consolas, "Courier New", monospace',renderLineHighlight:"none",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,contextmenu:!1})),l=x=>{t("update:value",x||"")},d=()=>{o.value=!o.value},c=()=>{o.value=!1},m=x=>{t("update:value",x)};return(x,v)=>(M(),N("div",Zw,[a("div",Jw,[a("label",Qw,I(r.label),1),a("div",e2,[a("span",t2,I(r.language),1),a("button",{onClick:d,class:"text-gray-400 hover:text-blue-600 transition-colors p-0.5 rounded hover:bg-gray-100",title:"Expand Editor"},[ue(n(Xw),{class:"w-3.5 h-3.5"})])])]),a("div",{class:"border border-gray-300 rounded overflow-hidden focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 resize-y relative group",style:ke({height:`${r.height||200}px`,minHeight:"100px",maxHeight:"600px"})},[ue(n(yi),{value:r.value,language:r.language,options:{...i.value,readOnly:r.disabled},"onUpdate:value":l,class:"w-full h-full"},null,8,["value","language","options"]),v[1]||(v[1]=a("div",{class:"absolute bottom-0 right-0 w-3 h-3 cursor-ns-resize pointer-events-none bg-gradient-to-tl from-gray-300 to-transparent opacity-50 group-hover:opacity-100"},null,-1))],4),ue(jt,{visible:o.value,"onUpdate:visible":v[0]||(v[0]=S=>o.value=S),title:r.label,value:r.value,language:r.language,"read-only":r.disabled,"onUpdate:value":m,onClose:c},null,8,["visible","title","value","language","read-only"])]))}}),o2=$t(r2,[["__scopeId","data-v-44208768"]]),a2={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},n2={class:"space-y-2"},s2=["value","disabled","placeholder"],i2={class:"flex flex-col gap-1"},l2=["disabled"],d2={class:"text-[10px] text-gray-400 dark:text-gray-500 text-center"},c2={key:0,class:"text-xs text-red-500 mt-1"},u2=Le({__name:"PropertyImage",props:{label:{},value:{},disabled:{type:Boolean},placeholder:{}},emits:["update:value"],setup(r,{emit:e}){const t=r,s=e,{t:o}=Ne(),i=ae(null),l=ae(""),d=()=>{var x;t.disabled||(x=i.value)==null||x.click()},c=x=>{var f;const v=x.target,S=(f=v.files)==null?void 0:f[0];if(!S)return;if(l.value="",S.size>2*1024*1024){l.value=o("properties.image.sizeError"),v.value="";return}const p=new FileReader;p.onload=g=>{var y;const C=(y=g.target)==null?void 0:y.result;s("update:value",C)},p.onerror=()=>{l.value=o("properties.image.readError")},p.readAsDataURL(S),v.value=""},m=x=>{const v=x.target;s("update:value",v.value)};return(x,v)=>(M(),N("div",null,[a("label",a2,I(r.label),1),a("div",n2,[a("input",{type:"text",value:r.value||"",disabled:r.disabled,placeholder:r.placeholder||n(o)("properties.image.urlPlaceholder"),onInput:m,class:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-700 rounded focus:border-blue-500 dark:focus:border-blue-400 outline-none disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:text-gray-500 dark:disabled:text-gray-400 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200"},null,40,s2),a("div",i2,[a("button",{type:"button",onClick:d,disabled:r.disabled,class:"w-full py-1.5 px-3 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-colors"},[v[0]||(v[0]=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),Te(" "+I(n(o)("properties.image.uploadBtn")),1)],8,l2),a("span",d2,I(n(o)("properties.image.uploadTip")),1)]),l.value?(M(),N("p",c2,I(l.value),1)):ve("",!0),a("input",{ref_key:"fileInput",ref:i,type:"file",accept:"image/*",class:"hidden",onChange:c},null,544)])]))}}),h2={class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex items-center justify-between"},p2={class:"font-semibold text-gray-700 dark:text-gray-200"},g2={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},f2={key:0,class:"flex items-center text-red-500 dark:text-red-400 gap-1 text-xs font-medium bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded border border-red-100 dark:border-red-800"},m2={key:0,class:"p-6 text-center"},b2={class:"mb-4"},v2={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},y2={class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},w2={class:"font-medium text-gray-700 dark:text-gray-200"},x2={key:1,class:"flex flex-col h-full overflow-hidden"},k2={class:"flex border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"},_2=["onClick"],S2={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400"},C2={class:"p-4 space-y-6 overflow-y-auto flex-1 custom-scrollbar dark:bg-gray-900"},E2={key:0,class:"space-y-3"},T2={class:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},I2={class:"grid grid-cols-2 gap-3"},$2={key:1,class:"space-y-3 pt-2 border-t border-gray-100 dark:border-gray-800"},A2={class:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},z2={class:"grid grid-cols-2 gap-3"},P2=["disabled"],L2=["disabled"],M2={class:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},R2={class:"space-y-3"},D2={key:0},B2=["onClick","disabled"],O2={key:6},q2={class:"block text-xs text-gray-500 dark:text-gray-400 mb-1 font-medium"},F2=["placeholder","disabled","value","onChange"],j2={key:2,class:"space-y-3 pt-2 border-t border-gray-100 dark:border-gray-800"},N2={class:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},H2={key:3,class:"space-y-4"},U2={class:"p-4 bg-gray-50 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700"},V2={class:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-3"},W2={class:"space-y-3"},G2={class:"text-xs text-gray-500 dark:text-gray-400 mb-1.5 font-medium"},Y2={class:"flex items-center gap-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded px-2 py-1.5 hover:border-blue-400 dark:hover:border-blue-500 transition-colors"},K2=["title"],X2=["title"],Z2={class:"text-xs text-gray-500 flex items-center justify-between border-t border-gray-100 pt-2"},J2={class:"font-medium"},Q2={class:"px-2 py-0.5 bg-gray-100 rounded text-gray-600"},ex=["disabled"],tx={key:2,class:"p-6 text-center"},rx={class:"mb-4"},ox={class:"text-lg font-semibold text-gray-900"},ax={class:"text-sm text-gray-500 mt-2"},nx=Le({__name:"PropertiesPanel",setup(r){const{t:e}=Ne(),t=Be(),s=me(()=>t.selectedElement),o=me(()=>t.selectedElementIds.length>1),i=me(()=>{var B;return((B=s.value)==null?void 0:B.locked)||!1}),l=ae(!1),d=ae(""),c=me(()=>s.value?[be.LINE,be.RECT,be.CIRCLE].includes(s.value.type):!1),m=me(()=>t.tableSelection?t.tableSelection.cells.length>1:!1),x=me(()=>{if(!t.tableSelection||t.tableSelection.cells.length!==1)return!1;const B=t.tableSelection.cells[0],J=t.selectedElement;if(!J||J.type!==be.TABLE)return!1;const _e=(B.section||"body")==="footer"?J.footerData:J.data;if(!_e)return!1;const de=_e[B.rowIndex];if(!de)return!1;const xe=de[B.colField];return xe&&typeof xe=="object"?(xe.rowSpan||1)>1||(xe.colSpan||1)>1:!1}),v=ae("properties"),S=ae(!1),p=me(()=>t.unit||"mm"),f=me(()=>t.unit||"mm"),g=new Set(["fontSize","borderWidth","barcodeWidth","barcodeHeight","margin","borderRadius","headerHeight","rowHeight","footerHeight","labelFontSize","labelBorderWidth"]),C=B=>B.type!=="number"||!B.key?!1:g.has(B.key),y=B=>{const J=e(B.label);return C(B)?`${J} (${f.value})`:J},E=B=>{const J=ee(B);return C(B)&&typeof J=="number"?it(J,p.value):J},z=(B,J)=>C(B)?Je(Number(J),p.value):J,k=B=>{if(!(B.min===void 0||B.min===null))return C(B)?it(B.min,p.value):B.min},U=B=>{if(!(B.max===void 0||B.max===null))return C(B)?it(B.max,p.value):B.max},K=B=>{if(!(B.step===void 0||B.step===null))return C(B)?it(B.step,p.value):B.step},j=()=>{s.value&&(navigator.clipboard.writeText(s.value.id),S.value=!0,setTimeout(()=>{S.value=!1},2e3))},D=()=>{s.value&&(d.value=s.value.type,l.value=!0)},O=B=>{s.value&&B&&t.addCustomElement(B,s.value)},Q=(B,J)=>{s.value&&t.updateElement(s.value.id,{[B]:J})},H=(B,J)=>{s.value&&t.updateElement(s.value.id,{style:{...s.value.style,[B]:J}})},P=(B,J)=>{try{const ge=J.target.value;Q(B,JSON.parse(ge))}catch{window.alert("Invalid JSON")}},q=B=>{const J=ee(B);return B.language==="json"&&typeof J=="object"?JSON.stringify(J,null,2):J||""},h=(B,J)=>{if(B.language==="json")try{const ge=JSON.parse(J);Q(B.key,ge)}catch{}else Q(B.key,J)},$=B=>{switch(B){case be.TEXT:return Ku;case be.IMAGE:return Qu;case be.TABLE:return Ch;case be.PAGE_NUMBER:return Ih;case be.BARCODE:return Ph;case be.QRCODE:return Bh;case be.LINE:return Fh;case be.RECT:return Nh;case be.CIRCLE:return Uh;default:return null}},Z=me(()=>s.value?$(s.value.type):null),F=me(()=>Z.value?Z.value.sections.filter(B=>(B.tab||"properties")===v.value):[]),ee=B=>s.value?(B.target==="style"?s.value.style:s.value)[B.key]??B.defaultValue:B.defaultValue,Y=(B,J)=>{s.value&&(B.target==="style"&&B.key?H(B.key,J):B.target==="element"&&B.key&&Q(B.key,J))},R=B=>{!s.value||!B.actionName||(B.actionName==="paginateTable"?t.paginateTable(s.value.id):B.actionName==="removeBorder"&&t.updateElement(s.value.id,{style:{...s.value.style,borderStyle:void 0,borderWidth:void 0,borderColor:void 0,border:"none"}}))},A=()=>{o.value?t.removeSelectedElements():s.value&&t.removeElement(s.value.id)},L=B=>{B.relatedTarget&&B.currentTarget.contains(B.relatedTarget)||t.setDisableGlobalShortcuts(!0)},te=B=>{B.relatedTarget&&B.currentTarget.contains(B.relatedTarget)||t.setDisableGlobalShortcuts(!1)};return(B,J)=>(M(),N($e,null,[a("aside",{class:"w-[380px] bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 flex flex-col h-full z-40 overflow-hidden",onFocusin:L,onFocusout:te},[a("div",h2,[a("div",null,[a("h2",p2,I(n(e)("properties.title")),1),a("p",g2,I(n(e)("properties.subtitle")),1)]),i.value?(M(),N("div",f2,[ue(n(or),{class:"w-3 h-3"}),a("span",null,I(n(e)("properties.locked")),1)])):ve("",!0)]),o.value?(M(),N("div",m2,[a("div",b2,[a("h3",v2,I(n(e)("properties.multiSelectMode")),1),a("p",y2,[a("span",w2,I(n(t).selectedElementIds.length),1),Te(" "+I(n(e)("properties.selectedElements",{n:""}).replace("{n}","")),1)])]),a("button",{onClick:A,class:"w-full py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded border border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/50 transition-colors text-sm font-medium"},I(n(e)("properties.deleteSelected")),1)])):s.value?(M(),N("div",x2,[a("div",k2,[(M(),N($e,null,De(["properties","style","advanced"],ge=>a("button",{key:ge,onClick:_e=>v.value=ge,class:Ce(["flex-1 py-3 text-sm font-medium transition-colors relative",v.value===ge?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800"])},[Te(I(n(e)(`properties.tab.${ge}`))+" ",1),v.value===ge?(M(),N("div",S2)):ve("",!0)],10,_2)),64))]),a("div",C2,[v.value==="properties"?(M(),N("div",E2,[a("h3",T2,I(n(e)("properties.section.positionSize")),1),a("div",I2,[ue(At,{label:`${n(e)("properties.label.x")} (${f.value})`,type:"number",disabled:i.value,value:n(it)(s.value.x,p.value),"onUpdate:value":J[0]||(J[0]=ge=>Q("x",n(Je)(Number(ge),p.value)))},null,8,["label","disabled","value"]),ue(At,{label:`${n(e)("properties.label.y")} (${f.value})`,type:"number",disabled:i.value,value:n(it)(s.value.y,p.value),"onUpdate:value":J[1]||(J[1]=ge=>Q("y",n(Je)(Number(ge),p.value)))},null,8,["label","disabled","value"]),ue(At,{label:`${n(e)("properties.label.width")} (${f.value})`,type:"number",disabled:i.value,value:n(it)(s.value.width,p.value),"onUpdate:value":J[2]||(J[2]=ge=>Q("width",n(Je)(Number(ge),p.value)))},null,8,["label","disabled","value"]),ue(At,{label:`${n(e)("properties.label.height")} (${f.value})`,type:"number",disabled:i.value,value:n(it)(s.value.height,p.value),"onUpdate:value":J[3]||(J[3]=ge=>Q("height",n(Je)(Number(ge),p.value)))},null,8,["label","disabled","value"])])])):ve("",!0),v.value==="properties"&&s.value.type==="table"&&n(t).tableSelection?(M(),N("div",$2,[a("h3",A2,I(n(e)("properties.section.cellOperations")),1),a("div",z2,[a("button",{onClick:J[4]||(J[4]=ge=>n(t).mergeSelectedCells()),disabled:!m.value||i.value,class:"w-full py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded border border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors text-xs font-medium disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:text-gray-400 dark:disabled:text-gray-600 disabled:border-gray-200 dark:disabled:border-gray-700"},I(n(e)("properties.action.mergeCells")),9,P2),a("button",{onClick:J[5]||(J[5]=ge=>n(t).splitSelectedCells()),disabled:!x.value||i.value,class:"w-full py-2 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-xs font-medium disabled:opacity-50 disabled:cursor-not-allowed"},I(n(e)("properties.action.splitCells")),9,L2)])])):ve("",!0),(M(!0),N($e,null,De(F.value,(ge,_e)=>(M(),N("div",{key:_e,class:"space-y-3 pt-2 first:pt-0 border-t first:border-0 border-gray-100 dark:border-gray-800"},[a("h3",M2,I(n(e)(ge.title)),1),a("div",R2,[(M(!0),N($e,null,De(ge.fields,(de,xe)=>(M(),N($e,{key:xe},[de.type==="action"?(M(),N("div",D2,[a("button",{onClick:Se=>R(de),disabled:i.value,class:"w-full py-2 bg-blue-600 dark:bg-blue-500 text-white rounded hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors text-sm font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400 dark:disabled:bg-gray-700"},I(n(e)(de.label)),9,B2)])):de.type==="text"||de.type==="number"||de.type==="switch"?(M(),Me(At,{key:1,label:y(de),type:de.type,min:k(de),max:U(de),step:K(de),disabled:i.value,placeholder:de.placeholder?de.placeholder.startsWith("properties.")?n(e)(de.placeholder):de.placeholder:"",value:E(de),"onUpdate:value":Se=>Y(de,z(de,Se))},null,8,["label","type","min","max","step","disabled","placeholder","value","onUpdate:value"])):de.type==="select"?(M(),Me(Hw,{key:2,label:n(e)(de.label),options:(de.options||[]).map(Se=>({...Se,label:n(e)(Se.label)})),disabled:i.value,value:ee(de),"onUpdate:value":Se=>Y(de,Se)},null,8,["label","options","disabled","value","onUpdate:value"])):de.type==="color"?(M(),Me(di,{key:3,label:n(e)(de.label),disabled:i.value,value:ee(de),"onUpdate:value":Se=>Y(de,Se)},null,8,["label","disabled","value","onUpdate:value"])):de.type==="image"?(M(),Me(u2,{key:4,label:n(e)(de.label),disabled:i.value,placeholder:de.placeholder?de.placeholder.startsWith("properties.")?n(e)(de.placeholder):de.placeholder:void 0,value:ee(de),"onUpdate:value":Se=>Y(de,Se)},null,8,["label","disabled","placeholder","value","onUpdate:value"])):de.type==="code"?(M(),Me(o2,{key:5,label:n(e)(de.label),language:de.language||"javascript",disabled:i.value,value:q(de),"onUpdate:value":Se=>h(de,Se)},null,8,["label","language","disabled","value","onUpdate:value"])):de.type==="textarea"?(M(),N("div",O2,[a("label",q2,I(n(e)(de.label)),1),a("textarea",{placeholder:de.placeholder?de.placeholder.startsWith("properties.")?n(e)(de.placeholder):de.placeholder:"",disabled:i.value,value:["data","columns","footerData"].includes(de.key)?JSON.stringify(s.value[de.key],null,2):ee(de),onChange:Se=>["data","columns","footerData"].includes(de.key)?P(de.key,Se):Y(de,Se.target.value),class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded focus:border-blue-500 outline-none h-24 resize-y font-mono disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:text-gray-500 dark:disabled:text-gray-400 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200"},null,40,F2)])):ve("",!0)],64))),128))])]))),128)),v.value==="style"&&!c.value?(M(),N("div",j2,[a("h3",N2,I(n(e)("properties.section.appearance")),1),ue(di,{label:n(e)("properties.label.backgroundColor"),disabled:i.value,value:s.value.style.backgroundColor||"#ffffff","onUpdate:value":J[6]||(J[6]=ge=>H("backgroundColor",ge))},null,8,["label","disabled","value"])])):ve("",!0),v.value==="advanced"?(M(),N("div",H2,[a("div",U2,[a("h4",V2,I(n(e)("properties.section.elementInfo")),1),a("div",W2,[a("div",null,[a("p",G2,I(n(e)("properties.label.id")),1),a("div",Y2,[a("span",{class:"font-mono text-xs text-gray-600 dark:text-gray-400 flex-1 truncate select-all",title:s.value.id},I(s.value.id),9,K2),a("button",{onClick:j,class:"text-gray-400 dark:text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 flex-shrink-0",title:S.value?n(e)("properties.action.copied"):n(e)("properties.action.copyId")},[S.value?(M(),Me(n(Pp),{key:0,class:"w-3.5 h-3.5 text-green-500 dark:text-green-400"})):(M(),Me(n(It),{key:1,class:"w-3.5 h-3.5"}))],8,X2)])]),a("div",Z2,[a("span",J2,I(n(e)("properties.label.type")),1),a("span",Q2,I(n(e)("elements."+s.value.type)),1)])])]),a("button",{onClick:D,class:"w-full py-2 bg-white text-blue-600 rounded border border-blue-200 hover:bg-blue-50 transition-colors text-sm font-medium flex items-center justify-center gap-2 mb-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white"},[ue(n($a),{class:"w-4 h-4"}),Te(" "+I(n(e)("properties.action.saveCustom")),1)]),a("button",{onClick:A,disabled:i.value,class:"w-full py-2 bg-white text-red-600 rounded border border-red-200 hover:bg-red-50 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white"},[ue(n(Tt),{class:"w-4 h-4"}),Te(" "+I(n(e)("properties.action.deleteElement")),1)],8,ex)])):ve("",!0)])])):(M(),N("div",tx,[a("div",rx,[a("h3",ox,I(n(e)("properties.empty.noSelection")),1),a("p",ax,I(n(e)("properties.empty.selectInstruction")),1)])]))],32),ue(Nt,{show:l.value,"initial-value":d.value,title:n(e)("properties.action.saveCustomModal"),placeholder:n(e)("sidebar.enterNamePlaceholder"),onClose:J[7]||(J[7]=ge=>l.value=!1),onSave:O},null,8,["show","initial-value","title","placeholder"])],64))}}),sx=$t(nx,[["__scopeId","data-v-0bce654d"]]),ci=Le({__name:"Ruler",props:{type:{},zoom:{},scroll:{},offset:{},thick:{},indicators:{},unit:{}},emits:["guide-drag-start"],setup(r,{emit:e}){const t=r,{isDark:s}=yt(),o=ae(null),i=t.thick||20,l=()=>{const x=o.value;if(!x)return;const v=x.getContext("2d");if(!v)return;const S=x.width,p=x.height,{zoom:f,scroll:g,offset:C,type:y,indicators:E}=t,z=s.value;if(v.clearRect(0,0,S,p),v.fillStyle=z?"#1f2937":"#F9FAFB",v.fillRect(0,0,S,p),E&&E.length>0)for(const h of E){const $=C+h.position*f-g;v.fillStyle=h.color,y==="horizontal"?v.fillRect($-2,0,4,i):v.fillRect(0,$-2,i,4)}v.strokeStyle=z?"#6b7280":"#9CA3AF",v.fillStyle=z?"#9ca3af":"#6B7280",v.lineWidth=1,v.font="10px sans-serif",v.beginPath();const k=t.unit==="mm"?Fi:t.unit==="pt"?ji:1,j=50/(k*f),D=[1,2,5,10,20,50,100,200,500,1e3];let O=D[D.length-1];for(const h of D)if(h>=j-.001){O=h;break}const Q=y==="horizontal"?S:p,H=(-C+g)/(f*k),P=(Q-C+g)/(f*k),q=Math.floor(H/O)*O;for(let h=q;h<=P;h+=O){const $=C+h*k*f-g,Z=Number(h.toFixed(1)).toString();y==="horizontal"?(v.moveTo($,0),v.lineTo($,i),v.fillText(Z,$+2,10)):(v.moveTo(0,$),v.lineTo(i,$),v.save(),v.translate(10,$+2),v.rotate(-Math.PI/2),v.fillText(Z,0,0),v.restore());const F=O/5;for(let ee=1;ee<5;ee++){const Y=h+F*ee,R=C+Y*k*f-g;y==="horizontal"?(v.moveTo(R,i-5),v.lineTo(R,i)):(v.moveTo(i-5,R),v.lineTo(i,R))}}v.stroke()},d=new ResizeObserver(x=>{for(const v of x){const S=o.value;if(S){const{width:p,height:f}=v.contentRect;S.width=p,S.height=f,l()}}});Ye(()=>{o.value&&(d.observe(o.value.parentElement),l())}),Ke(()=>{d.disconnect()}),ze(()=>[t.zoom,t.scroll,t.offset,t.indicators,t.unit,s.value],l,{deep:!0});const c=e,m=x=>{c("guide-drag-start",x)};return(x,v)=>(M(),N("div",{class:"w-full h-full overflow-hidden bg-gray-50 dark:bg-gray-800 relative",onMousedown:m},[a("canvas",{ref_key:"canvasRef",ref:o,class:"block"},null,512)],32))}}),ix={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function lx(r,e){return M(),N("svg",ix,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"m19 21l-7-7l-2.35 2.35q.2.375.275.8T10 18q0 1.65-1.175 2.825T6 22t-2.825-1.175T2 18t1.175-2.825T6 14q.425 0 .85.075t.8.275L10 12L7.65 9.65q-.375.2-.8.275T6 10q-1.65 0-2.825-1.175T2 6t1.175-2.825T6 2t2.825 1.175T10 6q0 .425-.075.85t-.275.8L22 20v1zm-4-10l-2-2l6-6h3v1zM6 8q.825 0 1.413-.587T8 6t-.587-1.412T6 4t-1.412.588T4 6t.588 1.413T6 8m6 4.5q.2 0 .35-.15t.15-.35t-.15-.35t-.35-.15t-.35.15t-.15.35t.15.35t.35.15M6 20q.825 0 1.413-.587T8 18t-.587-1.412T6 16t-1.412.588T4 18t.588 1.413T6 20"},null,-1)])])}const dx=Ee({name:"material-symbols-content-cut",render:lx}),cx={class:"bg-white border border-gray-200 shadow-xl rounded-md min-w-[160px] py-1"},ux=["disabled"],hx=["disabled"],px=["disabled"],gx=["disabled"],fx=["disabled"],mx=Le({__name:"Shortcuts",setup(r){const{t:e}=Ne(),t=Be(),s=Xe("designer-root"),o=ae(!1),i=ae(0),l=ae(0),d=ae(0),c=ae(0),m=ae(null),x=ae(!1),v=ae(0),S=ae(0),p=k=>{v.value=k.clientX,S.value=k.clientY},f=()=>{var k;return((k=s==null?void 0:s.value)==null?void 0:k.getRootNode())||document},g=(k,U)=>{const K=f().querySelectorAll(".print-page");if(K.length===0)return;let j=null,D=1/0,O=0;for(let Q=0;Q<K.length;Q++){const H=K[Q],P=H.getBoundingClientRect();if(k>=P.left&&k<=P.right&&U>=P.top&&U<=P.bottom)return{pageIndex:Q,x:(k-P.left)/t.zoom,y:(U-P.top)/t.zoom};const q=Math.max(P.left-k,0,k-P.right),h=Math.max(P.top-U,0,U-P.bottom),$=Math.sqrt(q*q+h*h);$<D&&(D=$,j=H,O=Q)}if(j){const Q=j.getBoundingClientRect();let H=(k-Q.left)/t.zoom,P=(U-Q.top)/t.zoom;return H=Math.max(0,Math.min(t.canvasSize.width,H)),P=Math.max(0,Math.min(t.canvasSize.height,P)),{pageIndex:O,x:H,y:P}}},C=k=>{if(t.disableGlobalShortcuts)return;if((k.ctrlKey||k.metaKey)&&k.altKey&&k.key.toLowerCase()==="n"){k.preventDefault(),k.stopPropagation(),window.dispatchEvent(new CustomEvent("designer:new-template"));return}if((k.ctrlKey||k.metaKey)&&k.key===","){k.preventDefault(),k.stopPropagation(),t.setShowSettings(!0);return}const U=k.target;if(U&&U.closest('input, textarea, select, [contenteditable="true"]'))return;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(k.key)){const D=k.shiftKey?10:1;if(t.selectedGuideId){const O=t.guides.find(Q=>Q.id===t.selectedGuideId);if(O){k.preventDefault();const Q=O.position;let H=Q;if(O.type==="vertical")if(k.key==="ArrowLeft")H-=D;else if(k.key==="ArrowRight")H+=D;else return;else if(k.key==="ArrowUp")H-=D;else if(k.key==="ArrowDown")H+=D;else return;(Q>0&&H<0||Q<0&&H>0||H===0)&&(H=0),t.updateGuide(O.id,H),t.setHighlightedGuide(O.id)}}else if(t.selectedElementIds.length>0){k.preventDefault();const O=k.key==="ArrowLeft"?-D:k.key==="ArrowRight"?D:0,Q=k.key==="ArrowUp"?-D:k.key==="ArrowDown"?D:0;t.nudgeSelectedElements(O,Q)}return}if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="a"){if(k.preventDefault(),t.pages[t.currentPageIndex]){const D=t.pages[t.currentPageIndex].elements.map(O=>O.id);t.setSelection(D)}return}if(k.key==="Delete"){t.selectedElementIds.length>1?(k.preventDefault(),t.removeSelectedElements()):t.selectedElementId?(k.preventDefault(),t.removeElement(t.selectedElementId)):t.selectedGuideId&&(k.preventDefault(),t.removeGuide(t.selectedGuideId));return}if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="c"){t.selectedElementId&&(k.preventDefault(),t.copy());return}if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="x"){t.selectedElementId&&(k.preventDefault(),t.cut());return}if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="v"){t.clipboard.length>0&&(k.preventDefault(),t.paste(g(v.value,S.value)));return}if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="h"){k.preventDefault(),t.setShowHelp(!0);return}if(t.showHelp&&k.key==="Escape"){k.preventDefault(),t.setShowHelp(!1);return}if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="z"&&!k.shiftKey){k.preventDefault(),t.undo();return}if((k.ctrlKey||k.metaKey)&&(k.key.toLowerCase()==="y"||k.key.toLowerCase()==="z"&&k.shiftKey)){k.preventDefault(),t.redo();return}if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="l"){k.preventDefault(),t.toggleLock();return}if((k.ctrlKey||k.metaKey)&&k.shiftKey&&k.key.toLowerCase()==="p"){k.preventDefault(),window.dispatchEvent(new CustomEvent("designer:preview"));return}const K=k.ctrlKey||k.metaKey,j=k.key.toLowerCase();if(!(t.editingCustomElementId&&K&&(j==="s"||j==="q"))){if(K&&k.shiftKey&&j==="s"){k.preventDefault(),window.dispatchEvent(new CustomEvent("designer:save-as"));return}if(K&&j==="s"){k.preventDefault(),window.dispatchEvent(new CustomEvent("designer:save"));return}if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="p"&&!k.shiftKey){k.preventDefault(),window.dispatchEvent(new CustomEvent("designer:print"));return}if((k.ctrlKey||k.metaKey)&&k.shiftKey&&k.key.toLowerCase()==="e"){k.preventDefault(),window.dispatchEvent(new CustomEvent("designer:export-pdf"));return}if((k.ctrlKey||k.metaKey)&&k.shiftKey&&k.key.toLowerCase()==="j"){k.preventDefault(),window.dispatchEvent(new CustomEvent("designer:view-json"));return}}},y=k=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(k.key)&&(t.setHighlightedGuide(null),t.setHighlightedEdge(null))},E=async k=>{const U=k.target,K=f().querySelector(".overflow-auto");if(!K||!K.contains(U))return;if(k.preventDefault(),o.value=!0,i.value=k.clientX,l.value=k.clientY,d.value=k.clientX,c.value=k.clientY,await Qe(),m.value){const O=m.value.getBoundingClientRect(),Q=window.innerWidth,H=window.innerHeight;k.clientX+O.width>Q&&(i.value=Q-O.width-5),k.clientY+O.height>H&&(l.value=H-O.height-5)}const j=f().querySelectorAll(".print-page");let D=!1;j.forEach(O=>{const Q=O.getBoundingClientRect();k.clientX>=Q.left&&k.clientX<=Q.right&&k.clientY>=Q.top&&k.clientY<=Q.bottom&&(D=!0)}),x.value=D,window.addEventListener("click",z)},z=()=>{o.value=!1,window.removeEventListener("click",z)};return Ye(()=>{window.addEventListener("keydown",C,{capture:!0}),window.addEventListener("contextmenu",E),window.addEventListener("keyup",y),window.addEventListener("mousemove",p)}),Ke(()=>{window.removeEventListener("keydown",C,{capture:!0}),window.removeEventListener("contextmenu",E),window.removeEventListener("click",z),window.removeEventListener("keyup",y),window.removeEventListener("mousemove",p)}),(k,U)=>{var K,j,D,O,Q;return o.value?(M(),N("div",{key:0,ref_key:"menuRef",ref:m,class:"fixed z-[9999]",style:ke({left:`${i.value}px`,top:`${l.value}px`})},[a("div",cx,[a("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:n(t).selectedElementIds.length===0&&!n(t).selectedGuideId||((K=n(t).selectedElement)==null?void 0:K.locked),onClick:U[0]||(U[0]=()=>{n(t).selectedElementIds.length>1?n(t).removeSelectedElements():n(t).selectedElementId?n(t).removeElement(n(t).selectedElementId):n(t).selectedGuideId&&n(t).removeGuide(n(t).selectedGuideId),o.value=!1})},[ue(n(Tt),{class:"w-4 h-4"}),a("span",null,I(n(e)("common.delete"))+I(n(t).selectedElementIds.length>1?` (${n(t).selectedElementIds.length})`:""),1)],8,ux),a("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:!n(t).selectedElementId||((j=n(t).selectedElement)==null?void 0:j.locked),onClick:U[1]||(U[1]=()=>{n(t).cut(),o.value=!1})},[ue(n(dx),{class:"w-4 h-4"}),a("span",null,I(n(e)("common.cut")),1)],8,hx),a("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:!n(t).selectedElementId||((D=n(t).selectedElement)==null?void 0:D.locked),onClick:U[2]||(U[2]=()=>{n(t).copy(),o.value=!1})},[ue(n(It),{class:"w-4 h-4"}),a("span",null,I(n(e)("common.copy")),1)],8,px),a("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:n(t).clipboard.length===0,onClick:U[3]||(U[3]=()=>{n(t).paste(g(d.value,c.value)),o.value=!1})},[ue(n(Aa),{class:"w-4 h-4"}),a("span",null,I(n(e)("common.paste")),1)],8,gx),a("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:n(t).selectedElementIds.length===0,onClick:U[4]||(U[4]=()=>{n(t).toggleLock(),o.value=!1})},[(M(),Me(Bt((O=n(t).selectedElement)!=null&&O.locked?n(Gi):n(or)),{class:"w-4 h-4"})),a("span",null,I((Q=n(t).selectedElement)!=null&&Q.locked?n(e)("common.unlock"):n(e)("common.lock")),1)],8,fx),U[7]||(U[7]=a("div",{class:"border-t border-gray-200 my-1"},null,-1)),a("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",onClick:U[5]||(U[5]=H=>{n(t).undo(),o.value=!1})},[ue(n(Vi),{class:"w-4 h-4"}),a("span",null,I(n(e)("common.undo")),1)]),a("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",onClick:U[6]||(U[6]=H=>{n(t).redo(),o.value=!1})},[ue(n(Wi),{class:"w-4 h-4"}),a("span",null,I(n(e)("common.redo")),1)])])],4)):ve("",!0)}}}),bx={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm leading-none text-gray-300 z-10"},vx={key:2,class:"w-full h-full bg-gray-200 flex items-center justify-center overflow-hidden"},yx=["src"],wx={key:3,class:"w-full h-full bg-gray-100 flex items-center justify-center overflow-hidden"},xx=["src"],kx={key:4,class:"w-full h-full bg-gray-100 flex items-center justify-center overflow-hidden"},_x=["src"],Sx={key:2,class:"w-full h-full bg-gray-200 flex items-center justify-center overflow-hidden"},Cx=["src"],Ex={key:3,class:"w-full h-full bg-gray-100 flex items-center justify-center overflow-hidden"},Tx=["src"],Ix={key:4,class:"w-full h-full bg-gray-100 flex items-center justify-center overflow-hidden"},$x=["src"],ui=180,hi=120,pi=300,Ax=32,zx=Le({__name:"Minimap",props:{scrollWidth:{},scrollHeight:{},viewportWidth:{},viewportHeight:{},scrollLeft:{},scrollTop:{},pages:{},pageWidth:{},pageHeight:{},zoom:{},contentOffsetX:{},contentOffsetY:{},canvasBackground:{},showHeaderLine:{type:Boolean},showFooterLine:{type:Boolean},headerHeight:{},footerHeight:{},watermark:{}},emits:["update:scroll"],setup(r,{emit:e}){const t=r,s=e,o=me(()=>{if(t.scrollWidth<=0||t.scrollHeight<=0)return .1;let H=ui/t.scrollWidth;return t.scrollHeight*H>pi&&(H=pi/t.scrollHeight),t.scrollWidth*H<hi&&(H=hi/t.scrollWidth),H}),i=me(()=>t.scrollHeight*o.value),l=me(()=>({left:`${t.scrollLeft*o.value}px`,top:`${t.scrollTop*o.value}px`,width:`${t.viewportWidth*o.value}px`,height:`${t.viewportHeight*o.value}px`})),d=H=>H.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),c=me(()=>{const H=t.watermark;if(!H||!H.enabled||!H.text)return null;const P=d(H.text),q=Number.isFinite(H.angle)?H.angle:-30,h=Math.max(6,H.size||24),$=Math.max(40,H.density||160),Z=H.color||"#000000",F=Math.min(1,Math.max(0,H.opacity??.1)),ee=`<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" width="${$}" height="${$}"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="${Z}" fill-opacity="${F}" font-size="${h}" transform="rotate(${q} ${$/2} ${$/2})">${P}</text></svg>`;return{backgroundImage:`url("data:image/svg+xml,${encodeURIComponent(ee)}")`,backgroundRepeat:"repeat",backgroundSize:`${$}px ${$}px`}}),m=H=>{const P={left:`${t.contentOffsetX*o.value}px`,top:`${(t.contentOffsetY+H*(t.pageHeight+Ax)*t.zoom)*o.value}px`,width:`${t.pageWidth*t.zoom*o.value}px`,height:`${t.pageHeight*t.zoom*o.value}px`,backgroundColor:t.canvasBackground||"#ffffff"};return c.value?{...P,...c.value}:P},x=()=>{if(!t.pages||t.pages.length===0)return[];const H=t.pages[0];return H!=null&&H.elements?H.elements.filter(P=>t.showHeaderLine&&P.y<t.headerHeight||t.showFooterLine&&P.y>=t.pageHeight-t.footerHeight):[]},v=H=>{const P=Math.max(1,H.width*t.zoom*o.value),q=Math.max(1,H.height*t.zoom*o.value);return{width:P,height:q}},S=H=>{var $,Z,F,ee,Y,R,A,L,te,B,J,ge;const{width:P,height:q}=v(H),h={left:`${H.x*t.zoom*o.value}px`,top:`${H.y*t.zoom*o.value}px`,width:`${P}px`,height:`${q}px`,fontSize:`${((($=H.style)==null?void 0:$.fontSize)||12)*t.zoom*o.value}px`,zIndex:((Z=H.style)==null?void 0:Z.zIndex)||1,transform:`rotate(${((F=H.style)==null?void 0:F.rotate)||0}deg)`};if(H.type===be.LINE){const _e=((ee=H.style)==null?void 0:ee.borderColor)||"#111827",de=Math.max(1,(((Y=H.style)==null?void 0:Y.borderWidth)||1)*t.zoom*o.value);return{...h,height:`${de}px`,backgroundColor:_e,top:`${H.y*t.zoom*o.value+(q-de)/2}px`}}if(H.type===be.RECT||H.type===be.CIRCLE){const _e=((R=H.style)==null?void 0:R.borderColor)||"#111827",de=Math.max(1,(((A=H.style)==null?void 0:A.borderWidth)||1)*t.zoom*o.value);return{...h,backgroundColor:((L=H.style)==null?void 0:L.backgroundColor)||"transparent",borderColor:_e,borderWidth:`${de}px`,borderStyle:((te=H.style)==null?void 0:te.borderStyle)||"solid",borderRadius:H.type===be.CIRCLE?"9999px":`${((B=H.style)==null?void 0:B.borderRadius)||0}px`}}return H.type===be.BARCODE||H.type===be.QRCODE?{...h,backgroundColor:"rgba(17, 24, 39, 0.15)",border:"1px solid rgba(17, 24, 39, 0.3)"}:H.type===be.PAGE_NUMBER?{...h,color:((J=H.style)==null?void 0:J.color)||"#111827",backgroundColor:((ge=H.style)==null?void 0:ge.backgroundColor)||"transparent"}:{...h,backgroundColor:H.type===be.IMAGE?"#e5e7eb":void 0}},p=(H,P)=>{var Z;const q=P+1,h=((Z=t.pages)==null?void 0:Z.length)||1,$=H.format||"1/Total";return $==="1"?`${q}`:$==="Page 1"?`Page ${q}`:`${q}/${h}`},f=H=>{const P=H.style?JSON.stringify(H.style):"";return`${H.id}:${H.type}:${H.variable||""}:${H.content||""}:${P}`},g=ae({}),C=ae({});let y=0;const E=H=>H.type===be.BARCODE?H.variable||H.content||"12345678":H.type===be.QRCODE?H.variable||H.content||"https://example.com":H.variable||H.content||"",z=H=>{try{const P=document.createElement("canvas"),q=H.style||{};return Ki(P,E(H),{format:q.barcodeFormat||"CODE128",lineColor:q.color||"#000000",width:Number(q.barcodeWidth)||2,height:Number(q.barcodeHeight)||40,displayValue:q.showText!==!1&&q.showText!=="false",fontOptions:q.fontOptions||"",font:q.font||"monospace",textAlign:q.textAlign||"center",textPosition:q.textPosition||"bottom",textMargin:Number(q.textMargin)||2,fontSize:Number(q.fontSize)||20,background:"transparent",margin:Number(q.margin)||0}),P.toDataURL("image/png")}catch{return""}},k=async H=>{var P,q;try{return await Xi.toDataURL(E(H),{margin:0,color:{dark:((P=H.style)==null?void 0:P.color)||"#000000",light:"#00000000"},errorCorrectionLevel:((q=H.style)==null?void 0:q.qrErrorCorrection)||"M"})}catch{return""}},U=async()=>{const H=++y,P={},q={},h=t.pages||[];for(const $ of h){const Z=($==null?void 0:$.elements)||[];for(const F of Z){const ee=f(F);if(F.type===be.BARCODE){const Y=z(F);Y&&(P[ee]=Y)}else if(F.type===be.QRCODE){const Y=await k(F);Y&&(q[ee]=Y)}}}H===y&&(g.value=P,C.value=q)},K=H=>g.value[f(H)]||"",j=H=>C.value[f(H)]||"";ze(()=>t.pages,()=>{U()},{deep:!0,immediate:!0});const D=ae(!1),O=ae(null);ze(()=>t.scrollTop,()=>{if(!O.value)return;const H=t.scrollTop*o.value,P=t.viewportHeight*o.value,q=O.value.clientHeight,h=O.value.scrollTop;H<h?O.value.scrollTop=H:H+P>h+q&&(O.value.scrollTop=H+P-q)});const Q=H=>{H.preventDefault();const P=H.currentTarget,q=P.getBoundingClientRect(),h=H.clientX-q.left,$=H.clientY-q.top,Z=t.scrollLeft*o.value,F=t.scrollTop*o.value,ee=t.viewportWidth*o.value,Y=t.viewportHeight*o.value;let R=0,A=0;if(h>=Z&&h<=Z+ee&&$>=F&&$<=F+Y)R=h-Z,A=$-F;else{const B=h/o.value-t.viewportWidth/2,J=$/o.value-t.viewportHeight/2;s("update:scroll",{left:B,top:J}),R=ee/2,A=Y/2}D.value=!0;const L=B=>{const J=P.getBoundingClientRect(),ge=B.clientX-J.left,_e=B.clientY-J.top,de=ge-R,xe=_e-A;s("update:scroll",{left:de/o.value,top:xe/o.value})},te=()=>{D.value=!1,window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",te)};window.addEventListener("mousemove",L),window.addEventListener("mouseup",te)};return(H,P)=>(M(),N("div",{ref_key:"scrollContainer",ref:O,class:"bg-white border border-gray-200 shadow-lg rounded max-h-[300px] overflow-y-auto overflow-x-hidden box-content no-scrollbar",style:ke({width:`${t.scrollWidth*o.value}px`,maxWidth:`${ui}px`})},[a("div",{class:"relative select-none box-content overflow-hidden",style:ke({width:`${t.scrollWidth*o.value}px`,height:`${i.value}px`}),onMousedown:Q},[P[0]||(P[0]=a("div",{class:"absolute inset-0 bg-gray-100"},null,-1)),(M(!0),N($e,null,De(r.pages,(q,h)=>(M(),N("div",{key:h,class:"absolute shadow-sm border border-gray-300 overflow-hidden",style:ke(m(h))},[a("div",bx,I(h+1),1),(M(!0),N($e,null,De(q.elements,$=>{var Z,F;return M(),N("div",{key:$.id,class:"absolute",style:ke(S($))},[$.type===n(be).TEXT?(M(),N("div",{key:0,class:"w-full h-full overflow-hidden whitespace-nowrap",style:ke({color:$.style.color||"#000000",fontFamily:$.style.fontFamily,fontWeight:$.style.fontWeight,fontStyle:$.style.fontStyle,textAlign:$.style.textAlign,lineHeight:1})},I($.variable||$.content),5)):$.type===n(be).PAGE_NUMBER?(M(),N("div",{key:1,class:"w-full h-full overflow-hidden whitespace-nowrap",style:ke({color:$.style.color||"#000000",fontFamily:$.style.fontFamily,fontWeight:$.style.fontWeight,fontStyle:$.style.fontStyle,textAlign:$.style.textAlign,lineHeight:1})},I(p($,h)),5)):$.type===n(be).IMAGE?(M(),N("div",vx,[$.content?(M(),N("img",{key:0,src:$.content,class:"w-full h-full object-cover"},null,8,yx)):ve("",!0)])):$.type===n(be).BARCODE?(M(),N("div",wx,[K($)?(M(),N("img",{key:0,src:K($),class:"w-full h-full object-contain"},null,8,xx)):ve("",!0)])):$.type===n(be).QRCODE?(M(),N("div",kx,[j($)?(M(),N("img",{key:0,src:j($),class:"w-full h-full object-contain"},null,8,_x)):ve("",!0)])):$.type===n(be).TABLE?(M(),N("div",{key:5,class:"w-full h-full border border-gray-300 bg-white grid",style:ke({gridTemplateColumns:`repeat(${((Z=$.columns)==null?void 0:Z.length)||2}, 1fr)`})},[(M(!0),N($e,null,De(Math.min(6,(((F=$.columns)==null?void 0:F.length)||2)*2),ee=>(M(),N("div",{key:ee,class:"border-[0.5px] border-gray-100"}))),128))],4)):ve("",!0)],4)}),128)),h>0?(M(!0),N($e,{key:0},De(x(),$=>{var Z,F;return M(),N("div",{key:`global-${h}-${$.id}`,class:"absolute",style:ke(S($))},[$.type===n(be).TEXT?(M(),N("div",{key:0,class:"w-full h-full overflow-hidden whitespace-nowrap",style:ke({color:$.style.color||"#000000",fontFamily:$.style.fontFamily,fontWeight:$.style.fontWeight,fontStyle:$.style.fontStyle,textAlign:$.style.textAlign,lineHeight:1})},I($.variable||$.content),5)):$.type===n(be).PAGE_NUMBER?(M(),N("div",{key:1,class:"w-full h-full overflow-hidden whitespace-nowrap",style:ke({color:$.style.color||"#000000",fontFamily:$.style.fontFamily,fontWeight:$.style.fontWeight,fontStyle:$.style.fontStyle,textAlign:$.style.textAlign,lineHeight:1})},I(p($,h)),5)):$.type===n(be).IMAGE?(M(),N("div",Sx,[$.content?(M(),N("img",{key:0,src:$.content,class:"w-full h-full object-cover"},null,8,Cx)):ve("",!0)])):$.type===n(be).BARCODE?(M(),N("div",Ex,[K($)?(M(),N("img",{key:0,src:K($),class:"w-full h-full object-contain"},null,8,Tx)):ve("",!0)])):$.type===n(be).QRCODE?(M(),N("div",Ix,[j($)?(M(),N("img",{key:0,src:j($),class:"w-full h-full object-contain"},null,8,$x)):ve("",!0)])):$.type===n(be).TABLE?(M(),N("div",{key:5,class:"w-full h-full border border-gray-300 bg-white grid",style:ke({gridTemplateColumns:`repeat(${((Z=$.columns)==null?void 0:Z.length)||2}, 1fr)`})},[(M(!0),N($e,null,De(Math.min(6,(((F=$.columns)==null?void 0:F.length)||2)*2),ee=>(M(),N("div",{key:ee,class:"border-[0.5px] border-gray-100"}))),128))],4)):ve("",!0)],4)}),128)):ve("",!0)],4))),128)),a("div",{class:"absolute border-2 border-blue-500 bg-blue-500/10 cursor-move z-[1000]",style:ke(l.value)},null,4)],36)],4))}}),Px=$t(zx,[["__scopeId","data-v-5a8ed346"]]),Lx={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Mx(r,e){return M(),N("svg",Lx,[...e[0]||(e[0]=[a("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h7v2H5v14h7v2zm11-4l-1.375-1.45l2.55-2.55H9v-2h8.175l-2.55-2.55L16 7l5 5z"},null,-1)])])}const Rx=Ee({name:"material-symbols-logout",render:Mx}),Dx={class:"flex-1 flex overflow-hidden"},Bx={class:"flex-1 overflow-hidden relative flex flex-col"},Ox={key:0,class:"flex items-center justify-between px-4 py-2 bg-blue-50 border-b border-blue-200 text-blue-900 dark:bg-blue-950 dark:border-blue-800 dark:text-blue-100"},qx={class:"text-sm font-medium"},Fx={class:"flex items-center gap-2"},jx={class:"relative w-full h-full flex flex-col overflow-hidden"},Nx={class:"flex-none h-5 bg-gray-50 border-b border-gray-300 flex z-20"},Hx={class:"flex-1 relative overflow-hidden"},Ux={class:"flex-1 flex overflow-hidden relative"},Vx={class:"w-5 flex-none bg-gray-50 border-r border-gray-300 h-full relative z-20 overflow-hidden"},Wx=["onMousedown"],Gx={class:"absolute left-2 -top-4 theme-bg text-white text-[10px] px-1 rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap"},Yx=["onMousedown"],Kx={class:"absolute top-2 -left-4 theme-bg text-white text-[10px] px-1 rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap"},Xx={key:2,class:"absolute pointer-events-none"},Zx={key:1,class:"absolute bottom-4 right-4 z-50"},Jx=Le({__name:"PrintDesigner",setup(r){const e=Be(),t=rr(),{autoSave:s}=Oi(),{isDark:o}=yt(),{t:i}=Ne(),l=ae(null),d=ae(null),c=ae(null);let m=null;const x=ae(null);Da("designer-root",d),Da("modal-container",c);const v=ae(null),S=ae(!1),p=ae(0),f=()=>{p.value+=1},g=(T,b)=>{const w=getComputedStyle(document.documentElement).getPropertyValue(T).trim(),_=Dt(w);return _?tc(_.h,_.s,_.v,b):`rgba(59, 130, 246, ${b})`},C=me(()=>e.editingCustomElement),y=me(()=>C.value?`${C.value.name} Copy`:"");Ye(()=>{e.setIsExporting(!1),Qe(()=>{R()}),m=new ResizeObserver(()=>{R()}),l.value&&m.observe(l.value),window.addEventListener("resize",R),window.addEventListener("keydown",Se),window.addEventListener("keydown",j),window.addEventListener("keyup",Se),window.addEventListener("blur",oe),window.addEventListener("brand-theme-updated",f),ze([()=>e.pages.length,()=>e.canvasSize.width,()=>e.canvasSize.height,()=>e.zoom,()=>e.showMinimap],()=>{Qe(R)}),ze(o,T=>{d.value&&d.value.classList.toggle("dark",T)},{immediate:!0}),ze([()=>e.pages,()=>e.canvasSize,()=>e.guides,()=>e.headerHeight,()=>e.footerHeight,()=>e.showHeaderLine,()=>e.showFooterLine,()=>e.canvasBackground,()=>e.pageSpacingX,()=>e.pageSpacingY,()=>e.watermark,()=>e.showMinimap],()=>{E()},{deep:!0})});const E=Kd(()=>{if(!e.editingCustomElementId&&s.value&&t.currentTemplateId&&!t.isSaving){const T=t.templates.find(b=>b.id===t.currentTemplateId);T&&t.saveCurrentTemplate(T.name)}},1e3),z=()=>{if(!e.commitCustomElementEdit()){alert(i("sidebar.editSaveFailed"));return}e.cancelCustomElementEdit()},k=T=>{const b=T.trim();if(!b)return;if(!e.saveCustomElementEditAs(b)){alert(i("sidebar.editSaveFailed"));return}e.cancelCustomElementEdit()},U=()=>{confirm(i("sidebar.confirmExitEdit"))&&(e.cancelCustomElementEdit(),requestAnimationFrame(()=>{var T,b;(b=(T=l.value)==null?void 0:T.focus)==null||b.call(T)}))},K=T=>{var _;const b=T;if(!b)return!1;if(b.isContentEditable)return!0;const w=(_=b.tagName)==null?void 0:_.toLowerCase();return w==="input"||w==="textarea"||w==="select"},j=T=>{if(e.disableGlobalShortcuts||!e.editingCustomElementId||S.value||K(T.target)||!(T.ctrlKey||T.metaKey))return;const w=T.key.toLowerCase();if(w==="s"&&T.shiftKey){T.preventDefault(),T.stopPropagation(),S.value=!0;return}if(w==="s"){T.preventDefault(),T.stopPropagation(),z();return}w==="q"&&(T.preventDefault(),T.stopPropagation(),U())},D=ae(0),O=ae(0),Q=ae(0),H=ae(0),P=T=>{const b=T.target;D.value=b.scrollLeft,O.value=b.scrollTop},q=ae(0),h=ae(0),$=ae(0),Z=ae(0),F=me(()=>e.unit||"mm"),ee=T=>{const b=it(T,e.unit||"mm");return e.unit==="px"?Math.round(b):Number(b.toFixed(1))},Y=me(()=>{const T=e.pages.length,b=e.canvasSize.height,w=e.canvasSize.width,W=T>0?T*b+(T-1)*20:0;return{width:`${w*e.zoom}px`,height:`${W*e.zoom}px`}}),R=()=>{if(l.value&&v.value){const T=l.value.clientWidth,b=l.value.clientHeight;$.value=T,Z.value=b;const w=parseFloat(Y.value.width),_=parseFloat(Y.value.height),W=64,V=64;q.value=Math.max(T,w+W),h.value=Math.max(b,_+V),w+W<=T&&(q.value=T),_+V<=b&&(h.value=b);const G=l.value.getBoundingClientRect(),ne=v.value.getBoundingClientRect(),pe=l.value.clientLeft||0,se=l.value.clientTop||0;D.value=l.value.scrollLeft,O.value=l.value.scrollTop,Q.value=ne.left-G.left+l.value.scrollLeft-pe,H.value=ne.top-G.top+l.value.scrollTop-se}};Ke(()=>{var T;E.cancel(),m&&(m.disconnect(),m=null),window.removeEventListener("resize",R),window.removeEventListener("mousemove",_e),window.removeEventListener("mouseup",de),window.removeEventListener("keydown",Se),window.removeEventListener("keydown",j),window.removeEventListener("keyup",Se),window.removeEventListener("blur",oe),window.removeEventListener("brand-theme-updated",f),(T=l.value)==null||T.removeEventListener("wheel",xe)});const A=ae(!1),L=ae(null),te=ae("horizontal"),B=ae(0),J=(T,b,w=null)=>{A.value=!0,L.value=w,te.value=b,ge(T),window.addEventListener("mousemove",_e),window.addEventListener("mouseup",de)},ge=T=>{if(!l.value)return;const b=l.value.getBoundingClientRect(),w=e.zoom;if(te.value==="horizontal"){const _=T.clientY-b.top+l.value.scrollTop;B.value=(_-H.value)/w}else{const _=T.clientX-b.left+l.value.scrollLeft;B.value=(_-Q.value)/w}},_e=T=>{A.value&&(T.preventDefault(),ge(T),L.value&&e.updateGuide(L.value,B.value))},de=T=>{if(!A.value)return;const b=l.value.getBoundingClientRect();let w=!1;te.value==="horizontal"?T.clientY<b.top&&(w=!0):T.clientX<b.left&&(w=!0),w?L.value&&e.removeGuide(L.value):L.value?e.updateGuide(L.value,B.value):e.addGuide({type:te.value,position:B.value}),A.value=!1,L.value=null,window.removeEventListener("mousemove",_e),window.removeEventListener("mouseup",de)},xe=T=>{T.ctrlKey&&(T.preventDefault(),T.deltaY<0?e.setZoom(Math.min(5,e.zoom+.1)):e.setZoom(Math.max(.2,e.zoom-.1)))},Se=T=>{var b,w;e.disableGlobalShortcuts||(T.key==="Control"||T.key==="Meta")&&(T.type==="keydown"&&!T.repeat?(b=l.value)==null||b.addEventListener("wheel",xe,{passive:!1}):T.type==="keyup"&&((w=l.value)==null||w.removeEventListener("wheel",xe)))},oe=()=>{var T;(T=l.value)==null||T.removeEventListener("wheel",xe)},ce=T=>{l.value&&l.value.scrollTo({left:T.left,top:T.top,behavior:"auto"})},he=T=>{var le;const b=((le=T.style)==null?void 0:le.rotate)||0;if(b===0)return{minX:T.x,maxX:T.x+T.width,minY:T.y,maxY:T.y+T.height};const w=T.x+T.width/2,_=T.y+T.height/2,W=b*Math.PI/180,V=Math.cos(W),G=Math.sin(W),ne=[{x:T.x,y:T.y},{x:T.x+T.width,y:T.y},{x:T.x,y:T.y+T.height},{x:T.x+T.width,y:T.y+T.height}];let pe=1/0,se=-1/0,we=1/0,fe=-1/0;for(const re of ne){const ie=w+(re.x-w)*V-(re.y-_)*G,ye=_+(re.x-w)*G+(re.y-_)*V;ie<pe&&(pe=ie),ie>se&&(se=ie),ye<we&&(we=ye),ye>fe&&(fe=ye)}return{minX:pe,maxX:se,minY:we,maxY:fe}},u=me(()=>{if(!e.isDragging||e.selectedElementIds.length===0)return null;const T=[];for(const pe of e.selectedElementIds)for(let se=0;se<e.pages.length;se++){const fe=e.pages[se].elements.find(le=>le.id===pe);fe&&T.push({el:fe,pageIndex:se})}if(T.length===0)return null;let b=1/0,w=-1/0,_=1/0,W=-1/0;const V=20;for(const{el:pe,pageIndex:se}of T){const we=he(pe),fe=se*(e.canvasSize.height+V);we.minY+=fe,we.maxY+=fe,we.minX<b&&(b=we.minX),we.maxX>w&&(w=we.maxX),we.minY<_&&(_=we.minY),we.maxY>W&&(W=we.maxY)}const G=(b+w)/2,ne=(_+W)/2;return{minX:b,maxX:w,minY:_,maxY:W,centerX:G,centerY:ne}}),X=me(()=>{if(!u.value)return{h:[],v:[]};p.value;const T=g("--brand-500",.5),{minX:b,maxX:w,minY:_,maxY:W}=u.value;return{h:[{position:b,color:T},{position:w,color:T}],v:[{position:_,color:T},{position:W,color:T}]}});return(T,b)=>{var w;return M(),N("div",{ref_key:"rootContainer",ref:d,class:"h-full w-full flex flex-col bg-gray-100 overflow-hidden"},[ue(Ny),a("div",Dx,[ue(zw),a("main",Bx,[n(e).editingCustomElementId?(M(),N("div",Ox,[a("div",qx,I(n(i)("sidebar.editingElement",{name:((w=C.value)==null?void 0:w.name)||""})),1),a("div",Fx,[a("button",{onClick:z,class:"px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-400 inline-flex items-center gap-1.5"},[ue(n($a),{class:"w-4 h-4"}),Te(" "+I(n(i)("sidebar.saveEdit")),1)]),a("button",{onClick:b[0]||(b[0]=_=>S.value=!0),class:"px-3 py-1.5 text-xs font-medium bg-blue-200 text-blue-900 rounded hover:bg-blue-300 dark:bg-blue-700 dark:hover:bg-blue-600 dark:text-white inline-flex items-center gap-1.5"},[ue(n(Ui),{class:"w-4 h-4"}),Te(" "+I(n(i)("sidebar.saveAs")),1)]),a("button",{onClick:U,class:"px-3 py-1.5 text-xs font-medium bg-slate-200 text-slate-900 rounded hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-100 inline-flex items-center gap-1.5"},[ue(n(Rx),{class:"w-4 h-4"}),Te(" "+I(n(i)("sidebar.exitEdit")),1)])])])):ve("",!0),ue(mx),a("div",jx,[a("div",Nx,[b[5]||(b[5]=a("div",{class:"w-5 flex-none bg-gray-100 border-r border-gray-300"},null,-1)),a("div",Hx,[ue(ci,{type:"horizontal",zoom:n(e).zoom,scroll:D.value,offset:Q.value,thick:20,unit:n(e).unit||"mm",indicators:X.value.h,onGuideDragStart:b[1]||(b[1]=_=>J(_,"horizontal"))},null,8,["zoom","scroll","offset","unit","indicators"])])]),a("div",Ux,[a("div",Vx,[ue(ci,{type:"vertical",zoom:n(e).zoom,scroll:O.value,offset:H.value,thick:20,unit:n(e).unit||"mm",indicators:X.value.v,onGuideDragStart:b[2]||(b[2]=_=>J(_,"vertical"))},null,8,["zoom","scroll","offset","unit","indicators"])]),a("div",{ref_key:"scrollContainer",ref:l,tabindex:"-1",class:"flex-1 overflow-auto p-8 flex relative canvas-scroll bg-gray-100 focus:outline-none",onScroll:P,onClick:b[3]||(b[3]=_=>{(_.target===l.value||_.target===_.currentTarget)&&n(e).selectGuide(null)})},[a("div",{ref_key:"canvasWrapper",ref:v,style:ke(Y.value),class:"mx-auto relative"},[ue(Zi,{ref_key:"canvasContainer",ref:x,class:"absolute top-0 left-0"},null,512)],4),a("div",{class:"absolute top-0 left-0 pointer-events-none z-50",style:ke({width:`${q.value}px`,height:`${h.value}px`})},[u.value?(M(),N($e,{key:0},[a("div",{class:"absolute w-full border-t border-blue-500 border-dashed",style:ke({top:`${H.value+Math.round(u.value.minY*n(e).zoom)}px`,left:0})},[a("div",{class:"absolute -top-6 bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded shadow-sm",style:ke({left:`${D.value+10}px`})},I(ee(u.value.minY))+" "+I(F.value),5)],4),a("div",{class:"absolute w-full border-t border-dashed theme-border",style:ke({top:`${H.value+Math.round(u.value.maxY*n(e).zoom)}px`,left:0})},[a("div",{class:"absolute -top-6 theme-bg text-white text-xs px-1.5 py-0.5 rounded shadow-sm",style:ke({left:`${D.value+10}px`})},I(ee(u.value.maxY))+" "+I(F.value),5)],4),a("div",{class:"absolute h-full border-l border-dashed theme-border",style:ke({left:`${Q.value+Math.round(u.value.minX*n(e).zoom)}px`,top:0})},[a("div",{class:"absolute -left-2 transform -translate-x-full theme-bg text-white text-xs px-1.5 py-0.5 rounded shadow-sm whitespace-nowrap",style:ke({top:`${O.value+10}px`})},I(ee(u.value.minX))+" "+I(F.value),5)],4),a("div",{class:"absolute h-full border-l border-dashed theme-border",style:ke({left:`${Q.value+Math.round(u.value.maxX*n(e).zoom)}px`,top:0})},[a("div",{class:"absolute -left-2 transform -translate-x-full theme-bg text-white text-xs px-1.5 py-0.5 rounded shadow-sm whitespace-nowrap",style:ke({top:`${O.value+10}px`})},I(ee(u.value.maxX))+" "+I(F.value),5)],4)],64)):ve("",!0),(M(!0),N($e,null,De(n(e).guides,_=>(M(),N($e,{key:_.id},[_.type==="horizontal"?(M(),N("div",{key:0,class:"absolute left-0 w-full h-3 -mt-1.5 cursor-row-resize pointer-events-auto group flex flex-col justify-center",style:ke({top:`${H.value+_.position*n(e).zoom}px`}),onMousedown:je(W=>{n(e).selectGuide(_.id),J(W,"horizontal",_.id)},["stop"])},[a("div",{class:Ce(["w-full",n(e).highlightedGuideId===_.id?"border-t-2 theme-border-strong":"border-t theme-border","theme-border-hover"])},null,2),a("div",Gx,I(ee(_.position))+I(F.value),1)],44,Wx)):(M(),N("div",{key:1,class:"absolute top-0 h-full w-3 -ml-1.5 cursor-col-resize pointer-events-auto group flex flex-row justify-center",style:ke({left:`${Q.value+_.position*n(e).zoom}px`}),onMousedown:je(W=>{n(e).selectGuide(_.id),J(W,"vertical",_.id)},["stop"])},[a("div",{class:Ce(["h-full",n(e).highlightedGuideId===_.id?"border-l-2 theme-border-strong":"border-l theme-border","theme-border-hover"])},null,2),a("div",Kx,I(ee(_.position))+I(F.value),1)],44,Yx))],64))),128)),A.value&&!L.value?(M(),N("div",{key:1,class:Ce(["absolute border-dashed pointer-events-none theme-border",te.value==="horizontal"?"left-0 w-full border-t":"top-0 h-full border-l"]),style:ke({top:te.value==="horizontal"?`${H.value+B.value*n(e).zoom}px`:void 0,left:te.value==="vertical"?`${Q.value+B.value*n(e).zoom}px`:void 0})},[a("div",{class:Ce(["absolute theme-bg text-white text-[10px] px-1 rounded",te.value==="horizontal"?"left-2 -top-4":"top-2 -left-4"])},I(ee(B.value))+I(F.value),3)],6)):ve("",!0),n(e).highlightedEdge?(M(),N("div",Xx,[n(e).highlightedEdge==="top"?(M(),N("div",{key:0,class:"absolute left-0 w-full border-t theme-border",style:ke({top:`${H.value}px`})},null,4)):n(e).highlightedEdge==="bottom"?(M(),N("div",{key:1,class:"absolute left-0 w-full border-t theme-border",style:ke({top:`${H.value+n(e).canvasSize.height*n(e).zoom}px`})},null,4)):n(e).highlightedEdge==="left"?(M(),N("div",{key:2,class:"absolute top-0 h-full border-l theme-border",style:ke({left:`${Q.value}px`})},null,4)):n(e).highlightedEdge==="right"?(M(),N("div",{key:3,class:"absolute top-0 h-full border-l theme-border",style:ke({left:`${Q.value+n(e).canvasSize.width*n(e).zoom}px`})},null,4)):ve("",!0)])):ve("",!0)],4)],544)])]),n(e).showMinimap?(M(),N("div",Zx,[ue(Px,{"scroll-width":q.value,"scroll-height":h.value,"viewport-width":$.value,"viewport-height":Z.value,"scroll-left":D.value,"scroll-top":O.value,pages:n(e).pages,"page-width":n(e).canvasSize.width,"page-height":n(e).canvasSize.height,zoom:n(e).zoom,"content-offset-x":Q.value,"content-offset-y":H.value,"canvas-background":n(e).canvasBackground,"show-header-line":n(e).showHeaderLine,"show-footer-line":n(e).showFooterLine,"header-height":n(e).headerHeight,"footer-height":n(e).footerHeight,watermark:n(e).watermark||null,"onUpdate:scroll":ce},null,8,["scroll-width","scroll-height","viewport-width","viewport-height","scroll-left","scroll-top","pages","page-width","page-height","zoom","content-offset-x","content-offset-y","canvas-background","show-header-line","show-footer-line","header-height","footer-height","watermark"])])):ve("",!0)]),ue(sx)]),ue(Nt,{show:S.value,"initial-value":y.value,title:n(i)("sidebar.saveAsCustomElement"),placeholder:n(i)("sidebar.enterNamePlaceholder"),onClose:b[4]||(b[4]=_=>S.value=!1),onSave:k},null,8,["show","initial-value","title","placeholder"]),a("div",{ref_key:"modalContainer",ref:c,class:"print-designer-modals fixed inset-0 pointer-events-none z-[9999]"},null,512)],512)}}}),Qx={key:1,class:"h-screen w-screen overflow-hidden"},e5=Le({__name:"App",setup(r){const e=new URLSearchParams(window.location.search).get("print")==="1";return(t,s)=>e?(M(),Me(Ji,{key:0})):(M(),N("div",Qx,[ue(Jx)]))}}),t5=vi(),La=bi(e5),r5=()=>{const r=localStorage.getItem("print-designer-brand-vars");if(r)try{const e=JSON.parse(r);if(!e||typeof e!="object")return;const t=document.documentElement;Object.entries(e).forEach(([s,o])=>{t.style.setProperty(s,o)})}catch{}};r5();La.use(t5);La.use(wi);La.mount("#app");
