import{b as Qi,e as ci,r as se,w as Ie,c as fe,m as Se,f as z,g as H,i as n,j as xt,d as ze,u as je,k as ye,l as xe,p as ui,q as ue,t as a,v as be,F as Te,x as E,a as We,o as Ge,y as Le,z as Ce,A as Ke,B as Pe,C as Ae,D as Oe,E as _t,T as tt,G as at,n as Xe,H as pt,I as Dt,J as hi,h as el,K as pi,L as Je,M as ct,N as gt,O as tl}from"./vendor-P78Bp_cp.js";import{c as ut,g as St,C as rl}from"./canvg-0PdlMh_v.js";import{v as He,r as ol}from"./utils-CRAcIz2K.js";import{r as nl,E as al}from"./pdf-DGXcMhCb.js";import{r as sl,a as il}from"./barcode-BoWGE6Vo.js";import{V as fi}from"./monaco-CMx3ukNg.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const ll={common:{save:"Save",cancel:"Cancel",confirm:"Confirm",close:"Close",delete:"Delete",edit:"Edit",copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",rename:"Rename",loading:"Loading...",success:"Success",input:"Input",actions:"Actions",width:"Width",height:"Height",mm:"mm",px:"px",pt:"pt",rotate:"Rotate",lock:"Lock",unlock:"Unlock",appTitle:"Print Designer",testData:"Test Data",invalidJson:"Invalid JSON. Changes were not saved.",testDataKeyChanged:"Test data keys cannot be changed. Please only edit values."},template:{select:"Select Template",noTemplates:"No templates yet",new:"New Template",rename:"Rename Template",confirmDelete:'Are you sure you want to delete "{name}"?'},editor:{preview:"Print Preview",exportPdf:"Export PDF",exportImage:"Export Image",print:"Print",viewJson:"View JSON",viewBlob:"View Blob",viewImageBlob:"View Image Blob",viewPdfBlob:"View PDF Blob",zoomIn:"Zoom In",zoomOut:"Zoom Out",zoomLevel:"Zoom Level",zoomSettings:"Zoom Settings",unit:"Unit",advancedSettings:"Advanced Settings",watermark:"Watermark",watermarkEnable:"Enable",watermarkText:"Text",watermarkTextPlaceholder:"Enter watermark text",watermarkAngle:"Angle",watermarkColor:"Color",watermarkOpacity:"Opacity (%)",watermarkSize:"Size",watermarkDensity:"Density",template:"Template",newTemplate:"New Template",saveTemplate:"Save Template",saveAsTemplate:"Save As Template",templates:"Templates",shortcuts:"Shortcuts",help:"Help",about:"About",paperSettings:"Paper Settings",sizePreset:"Size Preset",custom:"Custom",spacingX:"Horizontal Margin",spacingY:"Vertical Margin",showCornerMarkers:"Show Corner Markers",showGrid:"Show Grid",showMinimap:"Show Minimap",headerFooter:"Header & Footer",headerLine:"Header Line",footerLine:"Footer Line",addNewPage:"Add New Page",fonts:{default:"Default",arial:"Arial",timesNewRoman:"Times New Roman",courierNew:"Courier New",simSun:"SimSun (宋体)",simHei:"SimHei (黑体)"},bold:"Bold",italic:"Italic",underline:"Underline",verticalText:"Vertical Text",textColor:"Text Color",backgroundColor:"Background Color",resetRotation:"Reset Rotation",alignLeft:"Align Left",alignCenter:"Align Center",alignRight:"Align Right",alignTop:"Align Top",alignMiddle:"Align Middle",alignBottom:"Align Bottom",group:"Group",lock:"Lock",unlock:"Unlock",fontFamily:"Font Family",settings:"Settings"},canvas:{addPage:"Add Page",copyPage:"Copy Page",pastePage:"Paste Page",deletePage:"Delete Page",newText:"New Text",headerLabel:"Header",footerLabel:"Footer",defaultTableHeaders:{id:"ID",name:"Name",qty:"Qty",price:"Price",total:"Total"},defaultTableData:{item:"Item",pageSum:"Page Sum",total:"Total",inWords:"In Words"}},sidebar:{elements:"Elements",dragToCanvas:"Drag elements to the canvas",standard:"Standard",custom:"Custom",general:"General",dataCodes:"Data & Codes",shapes:"Shapes",text:"Text",image:"Image",pagination:"Pagination",table:"Table",barcode:"Barcode",qrcode:"QR Code",line:"Line",rect:"Rect",circle:"Circle",noCustomElements:"No custom elements saved yet.",moreOptions:"More options",editElement:"Edit Element",rename:"Rename",copy:"Copy",delete:"Delete",renameModalTitle:"Rename Custom Element",enterNamePlaceholder:"Enter element name...",confirmDelete:'Are you sure you want to delete "{name}"?',confirmSwitchEdit:'Exit current edit for "{name}"?',confirmExitEdit:"You have unsaved changes. Exit anyway?",editingElement:"Editing custom element: {name}",saveEdit:"Save",saveAs:"Save As",exitEdit:"Exit",saveAsCustomElement:"Save as Custom Element",editSaveFailed:"Nothing to save. Please select an element."},elements:{text:"Text",image:"Image",table:"Table",line:"Line",rect:"Rect",circle:"Circle",barcode:"Barcode",qrcode:"QR Code",pageNumber:"Page Number",custom:"Custom",layers:"Layers"},properties:{title:"Properties",subtitle:"Edit element properties",locked:"Locked",multiSelectMode:"Multi-select mode",selectedElements:"{n} elements selected",deleteSelected:"Delete Selected Elements",tab:{properties:"Properties",style:"Style",advanced:"Advanced"},section:{positionSize:"Position & Size",dataBehavior:"Data & Behavior",layoutDimensions:"Layout & Dimensions",headerStyle:"Header Style",footerStyle:"Footer Style",cellOperations:"Cell Operations",appearance:"Appearance",elementInfo:"Element Info",content:"Content",typography:"Typography",border:"Border",barcodeSettings:"Barcode Settings",qrSettings:"QR Settings",labelContent:"Label Content",paginationTypography:"Pagination Typography",labelStyle:"Label Style",frameBorder:"Frame Border",lineStyle:"Line Style",imageSource:"Image Source"},action:{mergeCells:"Merge Cells",splitCells:"Split Cells",copyId:"Copy ID",copied:"Copied!",saveCustom:"Save as Custom Element",deleteElement:"Delete Current Element",saveCustomModal:"Save Custom Element"},empty:{noSelection:"No Selection",selectInstruction:"Select an element to edit properties"},label:{type:"Type",x:"X",y:"Y",width:"Width",height:"Height",content:"Content",variable:"Variable",writingMode:"Writing Mode",fontSize:"Font Size",color:"Color",textAlign:"Text Align",fontFamily:"Font Family",fontWeight:"Font Weight",borderStyle:"Border Style",borderWidth:"Border Width",borderColor:"Border Color",backgroundColor:"Background Color",imageSource:"Image Source",format:"Format",showText:"Show Text",lineWidth:"Line Width",barcodeHeight:"Height",margin:"Margin",textPosition:"Text Position",errorCorrection:"Error Correction",thickness:"Thickness",cornerRadius:"Corner Radius",background:"Background",autoPaginate:"Auto Paginate",repeatFooter:"Repeat Footer",showFooter:"Show Footer",columns:"Columns (JSON)",data:"Data (JSON)",footerData:"Footer Data (JSON)",customScript:"Custom Script",headerHeight:"Header Height",rowHeight:"Row Height",footerHeight:"Footer Height",textColor:"Text Color",editCell:"Edit Cell",editColumn:"Edit Column",headerText:"Header Text",fieldKey:"Field Key",variableField:"Variable Field",headerNamePlaceholder:"Header Name",displayTextPlaceholder:"Display Text (e.g. Total:)",dataFieldPlaceholder:"Data Field (e.g. {#amount})",id:"ID",labelBorderColor:"Label Border Color",barcodeContentPlaceholder:"Barcode Value",qrContentPlaceholder:"QR Code Value",textContentPlaceholder:"Enter text content",variablePlaceholder:"Variable Name (e.g. @name)",labelText:"Label Text",labelPosition:"Label Position",labelFontSize:"Label Font Size",labelColor:"Label Color",labelFontFamily:"Label Font Family",labelFontWeight:"Label Font Weight",labelBackgroundColor:"Label Background Color",labelBorderStyle:"Label Border Style",labelBorderWidth:"Label Border Width",pageFormat:"Page Format",labelTextPlaceholder:"e.g. Page",columnsPlaceholder:'[{ "field": "name", "header": "Name", "width": 100 }]',dataPlaceholder:"[{...}]",footerDataPlaceholder:'[{ "id": { "value": "Total" }, "amount": { "value": "Total:", "field": "{#sum}" } }]',customScriptPlaceholder:"return { data: ... };",fontStyle:"Font Style",padding:"Padding (px)"},option:{horizontal:"Horizontal",vertical:"Vertical",default:"Default",left:"Left",center:"Center",right:"Right",normal:"Normal",medium:"Medium",bold:"Bold",none:"None",solid:"Solid",dashed:"Dashed",dotted:"Dotted",yes:"Yes",no:"No",top:"Top",bottom:"Bottom",before:"Before",after:"After",eccLow:"Low (7%)",eccMedium:"Medium (15%)",eccQuartile:"Quartile (25%)",eccHigh:"High (30%)",arial:"Arial",timesNewRoman:"Times New Roman",courierNew:"Courier New",simSun:"SimSun (宋体)",simHei:"SimHei (黑体)",page1:"Page 1",oneTotal:"1/Total",code128:"CODE128",ean13:"EAN-13",upc:"UPC",code39:"CODE39",itf14:"ITF-14",msi:"MSI",pharmacode:"Pharmacode",numberOnly:"Number (1)"},image:{urlPlaceholder:"https://... or data:image/...",uploadBtn:"Upload Image",uploadTip:"Max 2MB, converts to Base64",sizeError:"Image size must be less than 2MB",readError:"Failed to read file"}},shortcuts:{title:"Shortcuts",keyboardShortcuts:"Keyboard Shortcuts",general:"General",editing:"Editing",manipulation:"Manipulation",newTemplate:"New Template",openSettings:"Open Settings",openHelp:"Open Help",zoom:"Zoom In/Out",closeModal:"Close Modal",selectAll:"Select All",multiSelect:"Multi-select",move:"Move",fastMove:"Fast Move",snapRotate:"Snap Rotate",resize:"Proportional Resize",saveAsTemplate:"Save As Template",customEditSave:"Save Custom Edit",customEditSaveAs:"Save Custom Edit As",customEditExit:"Exit Custom Edit",ctrl:"Ctrl",shift:"Shift",alt:"Alt",esc:"Esc",del:"Delete",enter:"Enter",arrow:"Arrow Keys",drag:"Drag",click:"Click",wheel:"Wheel"},help:{title:"Help Center",about:"About",aboutProject:"About {name}",github:"Project URL",dependencies:"Open Source Dependencies",package:"Package",version:"Version"},colorPicker:{clear:"Clear",transparent:"Transparent"},settings:{title:"Settings",basic:"Basic",language:"Language",connection:"Connections",themeColor:"Theme Color",themeColorDesc:"Pick a preset theme color and apply instantly.",themePresetDefault:"Blue",themePresetEmerald:"Emerald",themePresetAmber:"Amber",themePresetRose:"Rose",themePresetCustom:"Custom",theme:"Theme",themeSystem:"Follow System",themeLight:"Light",themeDark:"Dark",themeDesc:"Defaults to following system; you can force Light or Dark.",autoSave:"Auto Save",autoSaveDesc:"Automatically save changes (saved templates only).",exportImageMerged:"Export Image As Single",exportImageMergedDesc:"When off, export each page as a separate image inside a ZIP file.",languageDesc:"Choose the interface language.",connectionDesc:"Connection settings placeholder.",printMode:"Print Mode",printModeLocal:"Local Client",printModeRemote:"Remote Cloud",printModeBrowser:"Browser",printModeDesc:"Local and remote options require a successful connection test.",silentPrint:"Silent Print",silentPrintDesc:"When enabled, skip the custom print dialog; browser print still uses the browser dialog.",localConnection:"Local Client Print",remoteConnection:"Remote Cloud Print",host:"Host",port:"Port",wsPath:"WS Path",protocol:"Protocol",wsAddress:"WS Address",wsAddressPlaceholder:"ws://host:port/ws/request",localWsAddressPlaceholder:"ws://host:port/ws",secretKey:"Secret Key",connectionUrl:"Connection URL",connect:"Connect",disconnect:"Disconnect",connecting:"Connecting...",connectionTesting:"Testing connection...",connectionOk:"Connection OK",connectionOkWithUser:"Connection OK (User: {userId})",connectionFailed:"Connection failed",connectionTimeout:"Connection timeout",connectionMissingFields:"Please fill in API URL, username, and password.",connectionMissingToken:"Login succeeded but token is missing.",apiBaseUrl:"Login URL",apiBasePlaceholder:"http://host:port/api/login",username:"Username",password:"Password",remoteLoginTitle:"Login (HTTP)",remoteLoginDesc:"Used to obtain the JWT token. Enter the full login URL.",remoteWsTitle:"WebSocket (Print Relay)",remoteWsDesc:"Used for printing and client/printer queries. Token is appended to the WS URL.",localClientTitle:"Local Client",localClientDesc:"Configure the local client WebSocket and secret key for on-device printing.",remoteClient:"Default Client",remoteClientPlaceholder:"Select a client",remoteAuthHint:"Remote WS URL appends ?token=JWT for browser WebSocket authentication.",status:{connected:"Connected",connecting:"Connecting",disconnected:"Disconnected",error:"Error"},retrying:"Retrying ({count}/{max})",cancelRetry:"Cancel Retry",selectLanguage:"Select Language",zhLabel:"Chinese",enLabel:"English"},printDialog:{title:"Print Options",titleLocal:"Local Client Print Options",titleRemote:"Remote Cloud Print Options",sectionBasic:"Basic",sectionAdvanced:"Advanced",printer:"Printer",printerSelect:"Select printer",printerEmpty:"No printers found.",remoteClient:"Client",remoteClientPlaceholder:"Select client",remoteClientEmpty:"No clients found.",remotePrinterInfo:"Type: {type} | Paper: {paper} | Formats: {format}",printerPlaceholder:"Printer name",jobName:"Job Name",jobNamePlaceholder:"Optional job name",copies:"Copies",intervalMs:"Interval (ms)",pageRange:"Page Range",pageRangePlaceholder:"e.g. 1-3,5",pageSet:"Page Set",pageSetAll:"All",pageSetOdd:"Odd",pageSetEven:"Even",scale:"Scale",scaleNo:"No Scale",scaleShrink:"Shrink",scaleFit:"Fit",orientation:"Orientation",portrait:"Portrait",landscape:"Landscape",colorMode:"Color Mode",color:"Color",monochrome:"Monochrome",sidesMode:"Duplex",simplex:"Simplex",duplex:"Duplex",duplexShort:"Duplex (Short Edge)",duplexLong:"Duplex (Long Edge)",paperSize:"Paper Size",paperSizePlaceholder:"e.g. A4",trayBin:"Tray",trayBinPlaceholder:"e.g. 2 or Manual",confirm:"Print"},preview:{title:"Print Preview",templateJson:"Template JSON",zoomIn:"Zoom In",zoomOut:"Zoom Out"},input:{title:"Input",placeholder:"Enter value..."}},dl={common:{save:"保存",cancel:"取消",confirm:"确认",close:"关闭",delete:"删除",edit:"编辑",copy:"复制",cut:"剪切",paste:"粘贴",undo:"撤销",redo:"重做",rename:"重命名",loading:"加载中...",success:"成功",input:"输入",actions:"操作",width:"宽度",height:"高度",mm:"毫米",px:"像素",pt:"磅",rotate:"旋转",lock:"锁定",unlock:"解锁",appTitle:"打印设计器",testData:"测试数据",invalidJson:"JSON 无效，未保存更改。",testDataKeyChanged:"测试数据的键不允许修改，请仅编辑值。"},template:{select:"选择模版",noTemplates:"暂无模版",new:"新建模版",rename:"重命名模版",confirmDelete:'确定要删除 "{name}" 吗？'},editor:{preview:"打印预览",exportPdf:"导出 PDF",exportImage:"导出图片",print:"打印",viewJson:"查看 JSON",viewBlob:"查看 Blob",viewImageBlob:"查看图片 Blob",viewPdfBlob:"查看 PDF Blob",zoomIn:"放大",zoomOut:"缩小",zoomLevel:"缩放级别",zoomSettings:"缩放设置",unit:"单位",advancedSettings:"高级设置",watermark:"水印",watermarkEnable:"启用",watermarkText:"文字",watermarkTextPlaceholder:"请输入水印文字",watermarkAngle:"方向",watermarkColor:"颜色",watermarkOpacity:"透明度（%）",watermarkSize:"大小",watermarkDensity:"密度",template:"模版",newTemplate:"新建模版",saveTemplate:"保存模版",saveAsTemplate:"另存为模版",templates:"模版列表",shortcuts:"快捷键",help:"帮助",about:"关于",paperSettings:"页面设置",sizePreset:"纸张尺寸",custom:"自定义",spacingX:"水平边距",spacingY:"垂直边距",showCornerMarkers:"显示角标",showGrid:"显示网格",showMinimap:"显示缩略图",headerFooter:"页眉页脚",headerLine:"页眉线",footerLine:"页脚线",addNewPage:"添加新页",fonts:{default:"默认",arial:"Arial",timesNewRoman:"Times New Roman",courierNew:"Courier New",simSun:"宋体",simHei:"黑体"},bold:"加粗",italic:"斜体",underline:"下划线",verticalText:"竖排文本",textColor:"文本颜色",backgroundColor:"背景颜色",resetRotation:"重置旋转",alignLeft:"左对齐",alignCenter:"水平居中",alignRight:"右对齐",alignTop:"顶部对齐",alignMiddle:"垂直居中",alignBottom:"底部对齐",group:"组合",lock:"锁定",unlock:"解锁",fontFamily:"字体",settings:"设置"},canvas:{addPage:"添加页",copyPage:"复制页",pastePage:"粘贴页",deletePage:"删除页",newText:"新文本",headerLabel:"页眉",footerLabel:"页脚",defaultTableHeaders:{id:"ID",name:"名称",qty:"数量",price:"单价",total:"合计"},defaultTableData:{item:"商品",pageSum:"本页合计",total:"总计",inWords:"大写金额"}},sidebar:{custom:"自定义",elements:"组件库",dragToCanvas:"拖拽组件到画布",standard:"标准组件",general:"通用",dataCodes:"数据 & 条码",shapes:"图形",text:"文本",image:"图片",pagination:"页码",table:"表格",barcode:"条形码",qrcode:"二维码",line:"直线",rect:"矩形",circle:"圆形",noCustomElements:"暂无自定义组件",moreOptions:"更多选项",editElement:"编辑元素",rename:"重命名",copy:"复制",delete:"删除",renameModalTitle:"重命名自定义组件",enterNamePlaceholder:"输入组件名称...",confirmDelete:'确定要删除 "{name}" 吗？',confirmSwitchEdit:'退出当前对 "{name}" 的编辑？',confirmExitEdit:"存在未保存的更改，确定退出吗？",editingElement:"正在编辑自定义元素：{name}",saveEdit:"保存",saveAs:"另存为",exitEdit:"退出",saveAsCustomElement:"另存为自定义元素",editSaveFailed:"没有可保存的元素，请先选中一个元素。"},elements:{text:"文本",image:"图片",table:"表格",line:"直线",rect:"矩形",circle:"圆形",barcode:"条形码",qrcode:"二维码",pageNumber:"页码",custom:"自定义",layers:"图层"},properties:{title:"属性面板",subtitle:"编辑组件属性",locked:"已锁定",multiSelectMode:"多选模式",selectedElements:"已选择 {n} 个组件",deleteSelected:"删除选中组件",tab:{properties:"属性",style:"样式",advanced:"高级"},section:{positionSize:"位置 & 尺寸",dataBehavior:"数据 & 行为",layoutDimensions:"布局 & 尺寸",headerStyle:"表头样式",footerStyle:"表脚样式",cellOperations:"单元格操作",appearance:"外观",elementInfo:"组件信息",content:"内容",typography:"排版",border:"边框",barcodeSettings:"条形码设置",qrSettings:"二维码设置",labelContent:"标签内容",paginationTypography:"页码排版",labelStyle:"标签样式",frameBorder:"框架边框",lineStyle:"线条样式",imageSource:"图片来源"},action:{mergeCells:"合并单元格",splitCells:"拆分单元格",copyId:"复制 ID",copied:"已复制!",saveCustom:"保存为自定义组件",deleteElement:"删除当前组件",saveCustomModal:"保存自定义组件"},empty:{noSelection:"未选择",selectInstruction:"选择一个组件以编辑属性"},label:{type:"类型",x:"X",y:"Y",width:"宽度",height:"高度",content:"内容",variable:"变量",writingMode:"书写模式",fontSize:"字号",color:"颜色",textAlign:"对齐方式",fontFamily:"字体",fontWeight:"字重",borderStyle:"边框样式",borderWidth:"边框宽度",borderColor:"边框颜色",backgroundColor:"背景颜色",imageSource:"图片来源",format:"格式",showText:"显示文本",lineWidth:"线宽",barcodeHeight:"高度",margin:"边距",textPosition:"文本位置",errorCorrection:"纠错等级",thickness:"粗细",cornerRadius:"圆角半径",background:"背景",autoPaginate:"自动分页",repeatFooter:"重复表脚",showFooter:"显示表脚",columns:"列定义 (JSON)",data:"数据 (JSON)",footerData:"表脚数据 (JSON)",customScript:"自定义脚本",headerHeight:"表头高度",rowHeight:"行高",footerHeight:"表脚高度",textColor:"文本颜色",editCell:"编辑单元格",editColumn:"编辑列",headerText:"表头文本",fieldKey:"字段键",variableField:"变量字段",headerNamePlaceholder:"表头名称",displayTextPlaceholder:"显示文本 (如: 合计:)",dataFieldPlaceholder:"数据字段 (如: {#amount})",id:"ID",labelBorderColor:"标签边框颜色",barcodeContentPlaceholder:"条码内容",qrContentPlaceholder:"二维码内容",textContentPlaceholder:"请输入文本内容",variablePlaceholder:"变量名 (例如 @name)",labelText:"标签文本",labelPosition:"标签位置",labelFontSize:"标签字号",labelColor:"标签颜色",labelFontFamily:"标签字体",labelFontWeight:"标签字重",labelBackgroundColor:"标签背景颜色",labelBorderStyle:"标签边框样式",labelBorderWidth:"标签边框宽度",pageFormat:"页码格式",labelTextPlaceholder:"例如：第",columnsPlaceholder:'[{ "field": "name", "header": "姓名", "width": 100 }]',dataPlaceholder:"[{...}]",footerDataPlaceholder:'[{ "id": { "value": "合计" }, "amount": { "value": "合计:", "field": "{#sum}" } }]',customScriptPlaceholder:"return { data: ... };",fontStyle:"字体样式",padding:"内边距 (px)"},option:{horizontal:"水平",vertical:"垂直",default:"默认",left:"左对齐",center:"居中",right:"右对齐",normal:"常规",medium:"中等",bold:"加粗",none:"无",solid:"实线",dashed:"虚线",dotted:"点线",yes:"是",no:"否",top:"顶部",bottom:"底部",before:"之前",after:"之后",eccLow:"低 (7%)",eccMedium:"中 (15%)",eccQuartile:"四分 (25%)",eccHigh:"高 (30%)",arial:"Arial",timesNewRoman:"Times New Roman",courierNew:"Courier New",simSun:"宋体",simHei:"黑体",page1:"第 1 页",oneTotal:"1/共几页",code128:"CODE128",ean13:"EAN-13",upc:"UPC",code39:"CODE39",itf14:"ITF-14",msi:"MSI",pharmacode:"Pharmacode",numberOnly:"数字 (1)"},image:{urlPlaceholder:"请输入图片地址或 Base64...",uploadBtn:"上传图片",uploadTip:"最大 2MB，自动转换为 Base64",sizeError:"图片大小不能超过 2MB",readError:"读取文件失败"}},shortcuts:{title:"快捷键",keyboardShortcuts:"键盘快捷键",general:"通用",editing:"编辑",manipulation:"操作",themeColor:"主题色",themeColorDesc:"选择一个预设主题色，立即生效。",themePresetDefault:"蓝色",themePresetEmerald:"绿色",themePresetAmber:"橙色",themePresetRose:"玫红",themePresetCustom:"自定义",newTemplate:"新建模版",openSettings:"打开设置",openHelp:"打开帮助",zoom:"缩放",closeModal:"关闭弹窗",selectAll:"全选",multiSelect:"多选",move:"移动",fastMove:"快速移动",snapRotate:"吸附旋转",resize:"等比缩放",saveAsTemplate:"另存为模版",customEditSave:"保存自定义编辑",customEditSaveAs:"另存自定义编辑",customEditExit:"退出自定义编辑",ctrl:"Ctrl",shift:"Shift",alt:"Alt",esc:"Esc",del:"Delete",enter:"Enter",arrow:"方向键",drag:"拖拽",click:"点击",wheel:"滚轮"},help:{title:"帮助中心",about:"关于",aboutProject:"关于 {name}",github:"项目地址",dependencies:"开源依赖",package:"依赖包",version:"版本"},colorPicker:{clear:"清除",transparent:"透明"},settings:{title:"设置",basic:"基础",language:"语言",connection:"连接",themeColor:"主题色",themeColorDesc:"选择一个预设主题色，立即生效。",themePresetDefault:"蓝色",themePresetEmerald:"绿色",themePresetAmber:"橙色",themePresetRose:"玫红",themePresetCustom:"自定义",theme:"主题",themeSystem:"跟随系统",themeLight:"亮色",themeDark:"暗色",themeDesc:"默认跟随系统；可手动切换为亮色或暗色。",autoSave:"自动保存",autoSaveDesc:"当模版发生变更时自动保存（仅对已保存过的模版生效）。",exportImageMerged:"导出为整张图片",exportImageMergedDesc:"关闭后将每一页导出为单张图片，并打包为 ZIP。",languageDesc:"选择界面的显示语言。",connectionDesc:"连接设置占位内容。",printMode:"打印方式",printModeLocal:"本地客户端打印",printModeRemote:"远程云打印",printModeBrowser:"浏览器打印",printModeDesc:"本地/远程需连接测试成功后才能启用。",silentPrint:"静默打印",silentPrintDesc:"开启后跳过自定义打印对话框；浏览器打印仍会弹出浏览器打印设置。",localConnection:"本地客户端打印",remoteConnection:"远程云打印",host:"主机",port:"端口",wsPath:"WS 路径",protocol:"协议",wsAddress:"WS 地址",wsAddressPlaceholder:"ws://host:port/ws/request",localWsAddressPlaceholder:"ws://host:port/ws",secretKey:"密钥",connectionUrl:"连接地址",connect:"连接",disconnect:"断开",connecting:"连接中...",connectionTesting:"正在测试连接...",connectionOk:"连接成功",connectionOkWithUser:"连接成功（用户：{userId}）",connectionFailed:"连接失败",connectionTimeout:"连接超时",connectionMissingFields:"请填写 API 地址、用户名和密码。",connectionMissingToken:"登录成功但未返回 Token。",apiBaseUrl:"登录地址",apiBasePlaceholder:"http://host:port/api/login",username:"用户名",password:"密码",remoteLoginTitle:"登录（HTTP）",remoteLoginDesc:"用于获取 JWT，请填写完整的登录地址。",remoteWsTitle:"WebSocket（打印中转）",remoteWsDesc:"用于打印与查询客户端/打印机，Token 会拼到 WS 地址。",localClientTitle:"本地客户端",localClientDesc:"配置本地客户端的 WebSocket 与密钥，用于本机打印。",remoteClient:"默认客户端",remoteClientPlaceholder:"请选择客户端",remoteAuthHint:"远程 WS 地址会附加 ?token=JWT 以便浏览器鉴权。",status:{connected:"已连接",connecting:"连接中",disconnected:"未连接",error:"错误"},retrying:"重试中（{count}/{max}）",cancelRetry:"停止重试",selectLanguage:"选择语言",zhLabel:"中文",enLabel:"English"},printDialog:{title:"打印参数",titleLocal:"本地客户端打印参数",titleRemote:"远程云打印参数",sectionBasic:"基础",sectionAdvanced:"高级",printer:"打印机",printerSelect:"请选择打印机",printerEmpty:"未获取到打印机。",remoteClient:"客户端",remoteClientPlaceholder:"请选择客户端",remoteClientEmpty:"未获取到客户端。",remotePrinterInfo:"类型：{type} | 纸张：{paper} | 格式：{format}",printerPlaceholder:"打印机名称",jobName:"任务名称",jobNamePlaceholder:"可选任务名称",copies:"打印份数",intervalMs:"份数间隔(ms)",pageRange:"页码范围",pageRangePlaceholder:"如 1-3,5",pageSet:"奇偶页",pageSetAll:"全部",pageSetOdd:"奇数页",pageSetEven:"偶数页",scale:"缩放",scaleNo:"不缩放",scaleShrink:"缩小",scaleFit:"适应",orientation:"方向",portrait:"纵向",landscape:"横向",colorMode:"颜色模式",color:"彩色",monochrome:"黑白",sidesMode:"单双面",simplex:"单面",duplex:"双面",duplexShort:"双面（短边翻转）",duplexLong:"双面（长边翻转）",paperSize:"纸张",paperSizePlaceholder:"如 A4",trayBin:"纸盒",trayBinPlaceholder:"如 2 或 Manual",confirm:"打印"},preview:{title:"打印预览",templateJson:"模版 JSON",zoomIn:"放大",zoomOut:"缩小"},input:{title:"输入",placeholder:"请输入..."}},cl={en:ll,zh:dl},ul=()=>{const r=localStorage.getItem("print-designer-language");return r&&(r==="zh"||r==="en")?r:navigator.language.toLowerCase().startsWith("zh")?"zh":"en"},mi=Qi({legacy:!1,locale:ul(),fallbackLocale:"en",messages:cl});var or,Ln;function hl(){if(Ln)return or;Ln=1;function r(){this.__data__=[],this.size=0}return or=r,or}var nr,Mn;function gi(){if(Mn)return nr;Mn=1;function r(e,t){return e===t||e!==e&&t!==t}return nr=r,nr}var ar,Rn;function Kt(){if(Rn)return ar;Rn=1;var r=gi();function e(t,s){for(var o=t.length;o--;)if(r(t[o][0],s))return o;return-1}return ar=e,ar}var sr,Dn;function pl(){if(Dn)return sr;Dn=1;var r=Kt(),e=Array.prototype,t=e.splice;function s(o){var i=this.__data__,c=r(i,o);if(c<0)return!1;var l=i.length-1;return c==l?i.pop():t.call(i,c,1),--this.size,!0}return sr=s,sr}var ir,Bn;function fl(){if(Bn)return ir;Bn=1;var r=Kt();function e(t){var s=this.__data__,o=r(s,t);return o<0?void 0:s[o][1]}return ir=e,ir}var lr,On;function ml(){if(On)return lr;On=1;var r=Kt();function e(t){return r(this.__data__,t)>-1}return lr=e,lr}var dr,qn;function gl(){if(qn)return dr;qn=1;var r=Kt();function e(t,s){var o=this.__data__,i=r(o,t);return i<0?(++this.size,o.push([t,s])):o[i][1]=s,this}return dr=e,dr}var cr,Fn;function Yt(){if(Fn)return cr;Fn=1;var r=hl(),e=pl(),t=fl(),s=ml(),o=gl();function i(c){var l=-1,u=c==null?0:c.length;for(this.clear();++l<u;){var y=c[l];this.set(y[0],y[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=s,i.prototype.set=o,cr=i,cr}var ur,jn;function bl(){if(jn)return ur;jn=1;var r=Yt();function e(){this.__data__=new r,this.size=0}return ur=e,ur}var hr,Nn;function vl(){if(Nn)return hr;Nn=1;function r(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}return hr=r,hr}var pr,Hn;function yl(){if(Hn)return pr;Hn=1;function r(e){return this.__data__.get(e)}return pr=r,pr}var fr,Un;function wl(){if(Un)return fr;Un=1;function r(e){return this.__data__.has(e)}return fr=r,fr}var mr,Vn;function bi(){if(Vn)return mr;Vn=1;var r=typeof ut=="object"&&ut&&ut.Object===Object&&ut;return mr=r,mr}var gr,Wn;function rt(){if(Wn)return gr;Wn=1;var r=bi(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return gr=t,gr}var br,Gn;function mn(){if(Gn)return br;Gn=1;var r=rt(),e=r.Symbol;return br=e,br}var vr,Kn;function xl(){if(Kn)return vr;Kn=1;var r=mn(),e=Object.prototype,t=e.hasOwnProperty,s=e.toString,o=r?r.toStringTag:void 0;function i(c){var l=t.call(c,o),u=c[o];try{c[o]=void 0;var y=!0}catch{}var x=s.call(c);return y&&(l?c[o]=u:delete c[o]),x}return vr=i,vr}var yr,Yn;function _l(){if(Yn)return yr;Yn=1;var r=Object.prototype,e=r.toString;function t(s){return e.call(s)}return yr=t,yr}var wr,Xn;function Ot(){if(Xn)return wr;Xn=1;var r=mn(),e=xl(),t=_l(),s="[object Null]",o="[object Undefined]",i=r?r.toStringTag:void 0;function c(l){return l==null?l===void 0?o:s:i&&i in Object(l)?e(l):t(l)}return wr=c,wr}var xr,Zn;function bt(){if(Zn)return xr;Zn=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return xr=r,xr}var _r,Jn;function vi(){if(Jn)return _r;Jn=1;var r=Ot(),e=bt(),t="[object AsyncFunction]",s="[object Function]",o="[object GeneratorFunction]",i="[object Proxy]";function c(l){if(!e(l))return!1;var u=r(l);return u==s||u==o||u==t||u==i}return _r=c,_r}var kr,Qn;function kl(){if(Qn)return kr;Qn=1;var r=rt(),e=r["__core-js_shared__"];return kr=e,kr}var Sr,ea;function Sl(){if(ea)return Sr;ea=1;var r=kl(),e=(function(){var s=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function t(s){return!!e&&e in s}return Sr=t,Sr}var Cr,ta;function yi(){if(ta)return Cr;ta=1;var r=Function.prototype,e=r.toString;function t(s){if(s!=null){try{return e.call(s)}catch{}try{return s+""}catch{}}return""}return Cr=t,Cr}var Er,ra;function Cl(){if(ra)return Er;ra=1;var r=vi(),e=Sl(),t=bt(),s=yi(),o=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,y=l.hasOwnProperty,x=RegExp("^"+u.call(y).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(k){if(!t(k)||e(k))return!1;var m=r(k)?x:i;return m.test(s(k))}return Er=f,Er}var Tr,oa;function El(){if(oa)return Tr;oa=1;function r(e,t){return e==null?void 0:e[t]}return Tr=r,Tr}var Ar,na;function vt(){if(na)return Ar;na=1;var r=Cl(),e=El();function t(s,o){var i=e(s,o);return r(i)?i:void 0}return Ar=t,Ar}var $r,aa;function gn(){if(aa)return $r;aa=1;var r=vt(),e=rt(),t=r(e,"Map");return $r=t,$r}var Ir,sa;function Xt(){if(sa)return Ir;sa=1;var r=vt(),e=r(Object,"create");return Ir=e,Ir}var zr,ia;function Tl(){if(ia)return zr;ia=1;var r=Xt();function e(){this.__data__=r?r(null):{},this.size=0}return zr=e,zr}var Pr,la;function Al(){if(la)return Pr;la=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Pr=r,Pr}var Lr,da;function $l(){if(da)return Lr;da=1;var r=Xt(),e="__lodash_hash_undefined__",t=Object.prototype,s=t.hasOwnProperty;function o(i){var c=this.__data__;if(r){var l=c[i];return l===e?void 0:l}return s.call(c,i)?c[i]:void 0}return Lr=o,Lr}var Mr,ca;function Il(){if(ca)return Mr;ca=1;var r=Xt(),e=Object.prototype,t=e.hasOwnProperty;function s(o){var i=this.__data__;return r?i[o]!==void 0:t.call(i,o)}return Mr=s,Mr}var Rr,ua;function zl(){if(ua)return Rr;ua=1;var r=Xt(),e="__lodash_hash_undefined__";function t(s,o){var i=this.__data__;return this.size+=this.has(s)?0:1,i[s]=r&&o===void 0?e:o,this}return Rr=t,Rr}var Dr,ha;function Pl(){if(ha)return Dr;ha=1;var r=Tl(),e=Al(),t=$l(),s=Il(),o=zl();function i(c){var l=-1,u=c==null?0:c.length;for(this.clear();++l<u;){var y=c[l];this.set(y[0],y[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=s,i.prototype.set=o,Dr=i,Dr}var Br,pa;function Ll(){if(pa)return Br;pa=1;var r=Pl(),e=Yt(),t=gn();function s(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Br=s,Br}var Or,fa;function Ml(){if(fa)return Or;fa=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Or=r,Or}var qr,ma;function Zt(){if(ma)return qr;ma=1;var r=Ml();function e(t,s){var o=t.__data__;return r(s)?o[typeof s=="string"?"string":"hash"]:o.map}return qr=e,qr}var Fr,ga;function Rl(){if(ga)return Fr;ga=1;var r=Zt();function e(t){var s=r(this,t).delete(t);return this.size-=s?1:0,s}return Fr=e,Fr}var jr,ba;function Dl(){if(ba)return jr;ba=1;var r=Zt();function e(t){return r(this,t).get(t)}return jr=e,jr}var Nr,va;function Bl(){if(va)return Nr;va=1;var r=Zt();function e(t){return r(this,t).has(t)}return Nr=e,Nr}var Hr,ya;function Ol(){if(ya)return Hr;ya=1;var r=Zt();function e(t,s){var o=r(this,t),i=o.size;return o.set(t,s),this.size+=o.size==i?0:1,this}return Hr=e,Hr}var Ur,wa;function ql(){if(wa)return Ur;wa=1;var r=Ll(),e=Rl(),t=Dl(),s=Bl(),o=Ol();function i(c){var l=-1,u=c==null?0:c.length;for(this.clear();++l<u;){var y=c[l];this.set(y[0],y[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=s,i.prototype.set=o,Ur=i,Ur}var Vr,xa;function Fl(){if(xa)return Vr;xa=1;var r=Yt(),e=gn(),t=ql(),s=200;function o(i,c){var l=this.__data__;if(l instanceof r){var u=l.__data__;if(!e||u.length<s-1)return u.push([i,c]),this.size=++l.size,this;l=this.__data__=new t(u)}return l.set(i,c),this.size=l.size,this}return Vr=o,Vr}var Wr,_a;function jl(){if(_a)return Wr;_a=1;var r=Yt(),e=bl(),t=vl(),s=yl(),o=wl(),i=Fl();function c(l){var u=this.__data__=new r(l);this.size=u.size}return c.prototype.clear=e,c.prototype.delete=t,c.prototype.get=s,c.prototype.has=o,c.prototype.set=i,Wr=c,Wr}var Gr,ka;function Nl(){if(ka)return Gr;ka=1;function r(e,t){for(var s=-1,o=e==null?0:e.length;++s<o&&t(e[s],s,e)!==!1;);return e}return Gr=r,Gr}var Kr,Sa;function Hl(){if(Sa)return Kr;Sa=1;var r=vt(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return Kr=e,Kr}var Yr,Ca;function wi(){if(Ca)return Yr;Ca=1;var r=Hl();function e(t,s,o){s=="__proto__"&&r?r(t,s,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[s]=o}return Yr=e,Yr}var Xr,Ea;function xi(){if(Ea)return Xr;Ea=1;var r=wi(),e=gi(),t=Object.prototype,s=t.hasOwnProperty;function o(i,c,l){var u=i[c];(!(s.call(i,c)&&e(u,l))||l===void 0&&!(c in i))&&r(i,c,l)}return Xr=o,Xr}var Zr,Ta;function Jt(){if(Ta)return Zr;Ta=1;var r=xi(),e=wi();function t(s,o,i,c){var l=!i;i||(i={});for(var u=-1,y=o.length;++u<y;){var x=o[u],f=c?c(i[x],s[x],x,i,s):void 0;f===void 0&&(f=s[x]),l?e(i,x,f):r(i,x,f)}return i}return Zr=t,Zr}var Jr,Aa;function Ul(){if(Aa)return Jr;Aa=1;function r(e,t){for(var s=-1,o=Array(e);++s<e;)o[s]=t(s);return o}return Jr=r,Jr}var Qr,$a;function Ct(){if($a)return Qr;$a=1;function r(e){return e!=null&&typeof e=="object"}return Qr=r,Qr}var eo,Ia;function Vl(){if(Ia)return eo;Ia=1;var r=Ot(),e=Ct(),t="[object Arguments]";function s(o){return e(o)&&r(o)==t}return eo=s,eo}var to,za;function Wl(){if(za)return to;za=1;var r=Vl(),e=Ct(),t=Object.prototype,s=t.hasOwnProperty,o=t.propertyIsEnumerable,i=r((function(){return arguments})())?r:function(c){return e(c)&&s.call(c,"callee")&&!o.call(c,"callee")};return to=i,to}var ro,Pa;function bn(){if(Pa)return ro;Pa=1;var r=Array.isArray;return ro=r,ro}var It={exports:{}},oo,La;function Gl(){if(La)return oo;La=1;function r(){return!1}return oo=r,oo}It.exports;var Ma;function _i(){return Ma||(Ma=1,(function(r,e){var t=rt(),s=Gl(),o=e&&!e.nodeType&&e,i=o&&!0&&r&&!r.nodeType&&r,c=i&&i.exports===o,l=c?t.Buffer:void 0,u=l?l.isBuffer:void 0,y=u||s;r.exports=y})(It,It.exports)),It.exports}var no,Ra;function Kl(){if(Ra)return no;Ra=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(s,o){var i=typeof s;return o=o??r,!!o&&(i=="number"||i!="symbol"&&e.test(s))&&s>-1&&s%1==0&&s<o}return no=t,no}var ao,Da;function ki(){if(Da)return ao;Da=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return ao=e,ao}var so,Ba;function Yl(){if(Ba)return so;Ba=1;var r=Ot(),e=ki(),t=Ct(),s="[object Arguments]",o="[object Array]",i="[object Boolean]",c="[object Date]",l="[object Error]",u="[object Function]",y="[object Map]",x="[object Number]",f="[object Object]",k="[object RegExp]",m="[object Set]",b="[object String]",g="[object WeakMap]",C="[object ArrayBuffer]",_="[object DataView]",p="[object Float32Array]",I="[object Float64Array]",A="[object Int8Array]",U="[object Int16Array]",Y="[object Int32Array]",j="[object Uint8Array]",O="[object Uint8ClampedArray]",F="[object Uint16Array]",oe="[object Uint32Array]",K={};K[p]=K[I]=K[A]=K[U]=K[Y]=K[j]=K[O]=K[F]=K[oe]=!0,K[s]=K[o]=K[C]=K[i]=K[_]=K[c]=K[l]=K[u]=K[y]=K[x]=K[f]=K[k]=K[m]=K[b]=K[g]=!1;function P(q){return t(q)&&e(q.length)&&!!K[r(q)]}return so=P,so}var io,Oa;function vn(){if(Oa)return io;Oa=1;function r(e){return function(t){return e(t)}}return io=r,io}var zt={exports:{}};zt.exports;var qa;function yn(){return qa||(qa=1,(function(r,e){var t=bi(),s=e&&!e.nodeType&&e,o=s&&!0&&r&&!r.nodeType&&r,i=o&&o.exports===s,c=i&&t.process,l=(function(){try{var u=o&&o.require&&o.require("util").types;return u||c&&c.binding&&c.binding("util")}catch{}})();r.exports=l})(zt,zt.exports)),zt.exports}var lo,Fa;function Xl(){if(Fa)return lo;Fa=1;var r=Yl(),e=vn(),t=yn(),s=t&&t.isTypedArray,o=s?e(s):r;return lo=o,lo}var co,ja;function Si(){if(ja)return co;ja=1;var r=Ul(),e=Wl(),t=bn(),s=_i(),o=Kl(),i=Xl(),c=Object.prototype,l=c.hasOwnProperty;function u(y,x){var f=t(y),k=!f&&e(y),m=!f&&!k&&s(y),b=!f&&!k&&!m&&i(y),g=f||k||m||b,C=g?r(y.length,String):[],_=C.length;for(var p in y)(x||l.call(y,p))&&!(g&&(p=="length"||m&&(p=="offset"||p=="parent")||b&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||o(p,_)))&&C.push(p);return C}return co=u,co}var uo,Na;function wn(){if(Na)return uo;Na=1;var r=Object.prototype;function e(t){var s=t&&t.constructor,o=typeof s=="function"&&s.prototype||r;return t===o}return uo=e,uo}var ho,Ha;function Ci(){if(Ha)return ho;Ha=1;function r(e,t){return function(s){return e(t(s))}}return ho=r,ho}var po,Ua;function Zl(){if(Ua)return po;Ua=1;var r=Ci(),e=r(Object.keys,Object);return po=e,po}var fo,Va;function Jl(){if(Va)return fo;Va=1;var r=wn(),e=Zl(),t=Object.prototype,s=t.hasOwnProperty;function o(i){if(!r(i))return e(i);var c=[];for(var l in Object(i))s.call(i,l)&&l!="constructor"&&c.push(l);return c}return fo=o,fo}var mo,Wa;function Ei(){if(Wa)return mo;Wa=1;var r=vi(),e=ki();function t(s){return s!=null&&e(s.length)&&!r(s)}return mo=t,mo}var go,Ga;function xn(){if(Ga)return go;Ga=1;var r=Si(),e=Jl(),t=Ei();function s(o){return t(o)?r(o):e(o)}return go=s,go}var bo,Ka;function Ql(){if(Ka)return bo;Ka=1;var r=Jt(),e=xn();function t(s,o){return s&&r(o,e(o),s)}return bo=t,bo}var vo,Ya;function ed(){if(Ya)return vo;Ya=1;function r(e){var t=[];if(e!=null)for(var s in Object(e))t.push(s);return t}return vo=r,vo}var yo,Xa;function td(){if(Xa)return yo;Xa=1;var r=bt(),e=wn(),t=ed(),s=Object.prototype,o=s.hasOwnProperty;function i(c){if(!r(c))return t(c);var l=e(c),u=[];for(var y in c)y=="constructor"&&(l||!o.call(c,y))||u.push(y);return u}return yo=i,yo}var wo,Za;function _n(){if(Za)return wo;Za=1;var r=Si(),e=td(),t=Ei();function s(o){return t(o)?r(o,!0):e(o)}return wo=s,wo}var xo,Ja;function rd(){if(Ja)return xo;Ja=1;var r=Jt(),e=_n();function t(s,o){return s&&r(o,e(o),s)}return xo=t,xo}var Pt={exports:{}};Pt.exports;var Qa;function od(){return Qa||(Qa=1,(function(r,e){var t=rt(),s=e&&!e.nodeType&&e,o=s&&!0&&r&&!r.nodeType&&r,i=o&&o.exports===s,c=i?t.Buffer:void 0,l=c?c.allocUnsafe:void 0;function u(y,x){if(x)return y.slice();var f=y.length,k=l?l(f):new y.constructor(f);return y.copy(k),k}r.exports=u})(Pt,Pt.exports)),Pt.exports}var _o,es;function nd(){if(es)return _o;es=1;function r(e,t){var s=-1,o=e.length;for(t||(t=Array(o));++s<o;)t[s]=e[s];return t}return _o=r,_o}var ko,ts;function ad(){if(ts)return ko;ts=1;function r(e,t){for(var s=-1,o=e==null?0:e.length,i=0,c=[];++s<o;){var l=e[s];t(l,s,e)&&(c[i++]=l)}return c}return ko=r,ko}var So,rs;function Ti(){if(rs)return So;rs=1;function r(){return[]}return So=r,So}var Co,os;function kn(){if(os)return Co;os=1;var r=ad(),e=Ti(),t=Object.prototype,s=t.propertyIsEnumerable,o=Object.getOwnPropertySymbols,i=o?function(c){return c==null?[]:(c=Object(c),r(o(c),function(l){return s.call(c,l)}))}:e;return Co=i,Co}var Eo,ns;function sd(){if(ns)return Eo;ns=1;var r=Jt(),e=kn();function t(s,o){return r(s,e(s),o)}return Eo=t,Eo}var To,as;function Ai(){if(as)return To;as=1;function r(e,t){for(var s=-1,o=t.length,i=e.length;++s<o;)e[i+s]=t[s];return e}return To=r,To}var Ao,ss;function $i(){if(ss)return Ao;ss=1;var r=Ci(),e=r(Object.getPrototypeOf,Object);return Ao=e,Ao}var $o,is;function Ii(){if(is)return $o;is=1;var r=Ai(),e=$i(),t=kn(),s=Ti(),o=Object.getOwnPropertySymbols,i=o?function(c){for(var l=[];c;)r(l,t(c)),c=e(c);return l}:s;return $o=i,$o}var Io,ls;function id(){if(ls)return Io;ls=1;var r=Jt(),e=Ii();function t(s,o){return r(s,e(s),o)}return Io=t,Io}var zo,ds;function zi(){if(ds)return zo;ds=1;var r=Ai(),e=bn();function t(s,o,i){var c=o(s);return e(s)?c:r(c,i(s))}return zo=t,zo}var Po,cs;function ld(){if(cs)return Po;cs=1;var r=zi(),e=kn(),t=xn();function s(o){return r(o,t,e)}return Po=s,Po}var Lo,us;function dd(){if(us)return Lo;us=1;var r=zi(),e=Ii(),t=_n();function s(o){return r(o,t,e)}return Lo=s,Lo}var Mo,hs;function cd(){if(hs)return Mo;hs=1;var r=vt(),e=rt(),t=r(e,"DataView");return Mo=t,Mo}var Ro,ps;function ud(){if(ps)return Ro;ps=1;var r=vt(),e=rt(),t=r(e,"Promise");return Ro=t,Ro}var Do,fs;function hd(){if(fs)return Do;fs=1;var r=vt(),e=rt(),t=r(e,"Set");return Do=t,Do}var Bo,ms;function pd(){if(ms)return Bo;ms=1;var r=vt(),e=rt(),t=r(e,"WeakMap");return Bo=t,Bo}var Oo,gs;function Sn(){if(gs)return Oo;gs=1;var r=cd(),e=gn(),t=ud(),s=hd(),o=pd(),i=Ot(),c=yi(),l="[object Map]",u="[object Object]",y="[object Promise]",x="[object Set]",f="[object WeakMap]",k="[object DataView]",m=c(r),b=c(e),g=c(t),C=c(s),_=c(o),p=i;return(r&&p(new r(new ArrayBuffer(1)))!=k||e&&p(new e)!=l||t&&p(t.resolve())!=y||s&&p(new s)!=x||o&&p(new o)!=f)&&(p=function(I){var A=i(I),U=A==u?I.constructor:void 0,Y=U?c(U):"";if(Y)switch(Y){case m:return k;case b:return l;case g:return y;case C:return x;case _:return f}return A}),Oo=p,Oo}var qo,bs;function fd(){if(bs)return qo;bs=1;var r=Object.prototype,e=r.hasOwnProperty;function t(s){var o=s.length,i=new s.constructor(o);return o&&typeof s[0]=="string"&&e.call(s,"index")&&(i.index=s.index,i.input=s.input),i}return qo=t,qo}var Fo,vs;function md(){if(vs)return Fo;vs=1;var r=rt(),e=r.Uint8Array;return Fo=e,Fo}var jo,ys;function Cn(){if(ys)return jo;ys=1;var r=md();function e(t){var s=new t.constructor(t.byteLength);return new r(s).set(new r(t)),s}return jo=e,jo}var No,ws;function gd(){if(ws)return No;ws=1;var r=Cn();function e(t,s){var o=s?r(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}return No=e,No}var Ho,xs;function bd(){if(xs)return Ho;xs=1;var r=/\w*$/;function e(t){var s=new t.constructor(t.source,r.exec(t));return s.lastIndex=t.lastIndex,s}return Ho=e,Ho}var Uo,_s;function vd(){if(_s)return Uo;_s=1;var r=mn(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function s(o){return t?Object(t.call(o)):{}}return Uo=s,Uo}var Vo,ks;function yd(){if(ks)return Vo;ks=1;var r=Cn();function e(t,s){var o=s?r(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}return Vo=e,Vo}var Wo,Ss;function wd(){if(Ss)return Wo;Ss=1;var r=Cn(),e=gd(),t=bd(),s=vd(),o=yd(),i="[object Boolean]",c="[object Date]",l="[object Map]",u="[object Number]",y="[object RegExp]",x="[object Set]",f="[object String]",k="[object Symbol]",m="[object ArrayBuffer]",b="[object DataView]",g="[object Float32Array]",C="[object Float64Array]",_="[object Int8Array]",p="[object Int16Array]",I="[object Int32Array]",A="[object Uint8Array]",U="[object Uint8ClampedArray]",Y="[object Uint16Array]",j="[object Uint32Array]";function O(F,oe,K){var P=F.constructor;switch(oe){case m:return r(F);case i:case c:return new P(+F);case b:return e(F,K);case g:case C:case _:case p:case I:case A:case U:case Y:case j:return o(F,K);case l:return new P;case u:case f:return new P(F);case y:return t(F);case x:return new P;case k:return s(F)}}return Wo=O,Wo}var Go,Cs;function xd(){if(Cs)return Go;Cs=1;var r=bt(),e=Object.create,t=(function(){function s(){}return function(o){if(!r(o))return{};if(e)return e(o);s.prototype=o;var i=new s;return s.prototype=void 0,i}})();return Go=t,Go}var Ko,Es;function _d(){if(Es)return Ko;Es=1;var r=xd(),e=$i(),t=wn();function s(o){return typeof o.constructor=="function"&&!t(o)?r(e(o)):{}}return Ko=s,Ko}var Yo,Ts;function kd(){if(Ts)return Yo;Ts=1;var r=Sn(),e=Ct(),t="[object Map]";function s(o){return e(o)&&r(o)==t}return Yo=s,Yo}var Xo,As;function Sd(){if(As)return Xo;As=1;var r=kd(),e=vn(),t=yn(),s=t&&t.isMap,o=s?e(s):r;return Xo=o,Xo}var Zo,$s;function Cd(){if($s)return Zo;$s=1;var r=Sn(),e=Ct(),t="[object Set]";function s(o){return e(o)&&r(o)==t}return Zo=s,Zo}var Jo,Is;function Ed(){if(Is)return Jo;Is=1;var r=Cd(),e=vn(),t=yn(),s=t&&t.isSet,o=s?e(s):r;return Jo=o,Jo}var Qo,zs;function Td(){if(zs)return Qo;zs=1;var r=jl(),e=Nl(),t=xi(),s=Ql(),o=rd(),i=od(),c=nd(),l=sd(),u=id(),y=ld(),x=dd(),f=Sn(),k=fd(),m=wd(),b=_d(),g=bn(),C=_i(),_=Sd(),p=bt(),I=Ed(),A=xn(),U=_n(),Y=1,j=2,O=4,F="[object Arguments]",oe="[object Array]",K="[object Boolean]",P="[object Date]",q="[object Error]",h="[object Function]",v="[object GeneratorFunction]",Z="[object Map]",J="[object Number]",re="[object Object]",L="[object RegExp]",W="[object Set]",$="[object String]",T="[object Symbol]",te="[object WeakMap]",G="[object ArrayBuffer]",Q="[object DataView]",me="[object Float32Array]",ve="[object Float64Array]",de="[object Int8Array]",_e="[object Int16Array]",ke="[object Int32Array]",ae="[object Uint8Array]",le="[object Uint8ClampedArray]",pe="[object Uint16Array]",d="[object Uint32Array]",B={};B[F]=B[oe]=B[G]=B[Q]=B[K]=B[P]=B[me]=B[ve]=B[de]=B[_e]=B[ke]=B[Z]=B[J]=B[re]=B[L]=B[W]=B[$]=B[T]=B[ae]=B[le]=B[pe]=B[d]=!0,B[q]=B[h]=B[te]=!1;function R(w,S,N,M,X,D){var ne,he=S&Y,ce=S&j,we=S&O;if(N&&(ne=X?N(w,M,X,D):N(w)),ne!==void 0)return ne;if(!p(w))return w;var ie=g(w);if(ie){if(ne=k(w),!he)return c(w,ne)}else{var V=f(w),ee=V==h||V==v;if(C(w))return i(w,he);if(V==re||V==F||ee&&!X){if(ne=ce||ee?{}:b(w),!he)return ce?u(w,o(ne,w)):l(w,s(ne,w))}else{if(!B[V])return X?w:{};ne=m(w,V,he)}}D||(D=new r);var Re=D.get(w);if(Re)return Re;D.set(w,ne),I(w)?w.forEach(function($e){ne.add(R($e,S,N,$e,w,D))}):_(w)&&w.forEach(function($e,Fe){ne.set(Fe,R($e,S,N,Fe,w,D))});var De=we?ce?x:y:ce?U:A,Ue=ie?void 0:De(w);return e(Ue||w,function($e,Fe){Ue&&(Fe=$e,$e=w[Fe]),t(ne,Fe,R($e,S,N,Fe,w,D))}),ne}return Qo=R,Qo}var en,Ps;function Ad(){if(Ps)return en;Ps=1;var r=Td(),e=1,t=4;function s(o){return r(o,e|t)}return en=s,en}var $d=Ad();const Ee=St($d);var ge=(r=>(r.TEXT="text",r.IMAGE="image",r.TABLE="table",r.PAGE_NUMBER="pageNumber",r.BARCODE="barcode",r.QRCODE="qrcode",r.LINE="line",r.RECT="rect",r.CIRCLE="circle",r))(ge||{});const Id={mode:"local",endpoints:{baseUrl:"",templates:{list:"/api/print/templates",get:"/api/print/templates/{id}",upsert:"/api/print/templates",delete:"/api/print/templates/{id}"},customElements:{list:"/api/print/custom-elements",get:"/api/print/custom-elements/{id}",upsert:"/api/print/custom-elements",delete:"/api/print/custom-elements/{id}"}},headers:{"Content-Type":"application/json"}};let Lt={...Id};const zd=(r,e)=>({...r}),Qe=()=>({mode:Lt.mode,endpoints:zd(Lt.endpoints),headers:{...Lt.headers||{}},fetcher:Lt.fetcher}),Pd=r=>{const e=Lt.endpoints.baseUrl||"";return r?/^https?:\/\//i.test(r)||!e?r:r.startsWith("/")?`${e.replace(/\/+$/,"")}${r}`:`${e.replace(/\/+$/,"")}/${r}`:e||""},et=(r,e)=>{const t=r||"",s=e?t.replace("{id}",e):t;return Pd(s)},Mt={enabled:!1,text:"",angle:-30,color:"#000000",opacity:.1,size:24,density:160},Ld={title:"",logoUrl:"",showTitle:!0,showLogo:!0},Md=()=>{const r=localStorage.getItem("print-designer-watermark");if(!r)return{...Mt};try{return{...Mt,...JSON.parse(r)}}catch{return{...Mt}}},Be=ci("designer",{state:()=>({unit:localStorage.getItem("print-designer-unit")||"mm",watermark:Md(),branding:{...Ld},pages:[{id:He(),elements:[]}],currentPageIndex:0,customElements:JSON.parse(localStorage.getItem("print-designer-custom-elements")||"[]"),testData:{},editingCustomElementId:null,customElementEditSnapshot:null,selectedElementId:null,selectedElementIds:[],selectedGuideId:null,highlightedGuideId:null,highlightedEdge:null,canvasSize:{width:794,height:1123},zoom:1,isDragging:!1,showGrid:!0,showCornerMarkers:!0,headerHeight:100,footerHeight:100,showHeaderLine:!1,showFooterLine:!1,showMinimap:!1,showHelp:!1,showSettings:!1,canvasBackground:"#ffffff",pageSpacingX:32,pageSpacingY:32,guides:[],historyPast:[],historyFuture:[],clipboard:[],copiedPage:null,isExporting:!1,disableGlobalShortcuts:!1,disableShortcutsCount:0,tableSelection:null}),actions:{setBranding(r){if(!r||typeof r!="object")return;const e={...this.branding,...r};r.showTitle!==void 0&&(e.showTitle=!!r.showTitle),r.showLogo!==void 0&&(e.showLogo=!!r.showLogo),this.branding=e},setWatermark(r){this.watermark={...this.watermark||Mt,...r},localStorage.setItem("print-designer-watermark",JSON.stringify(this.watermark))},setUnit(r){this.unit=r,localStorage.setItem("print-designer-unit",r)},setDragging(r){this.isDragging=r},setDisableGlobalShortcuts(r){const e=this.disableShortcutsCount||0;r?this.disableShortcutsCount=e+1:this.disableShortcutsCount=Math.max(0,e-1),this.disableGlobalShortcuts=this.disableShortcutsCount>0},setIsExporting(r){this.isExporting=r},setPageSpacingX(r){this.pageSpacingX=Math.max(0,Math.round(r))},setPageSpacingY(r){this.pageSpacingY=Math.max(0,Math.round(r))},resetCanvas(){this.watermark={...Mt},localStorage.setItem("print-designer-watermark",JSON.stringify(this.watermark)),this.pages=[{id:He(),elements:[]}],this.currentPageIndex=0,this.testData={},this.selectedElementId=null,this.selectedElementIds=[],this.selectedGuideId=null,this.guides=[],this.historyPast=[],this.historyFuture=[],this.headerHeight=100,this.footerHeight=100,this.showHeaderLine=!1,this.showFooterLine=!1,this.canvasBackground="#ffffff",this.pageSpacingX=32,this.pageSpacingY=32,this.canvasSize={width:794,height:1123},this.zoom=1,this.showGrid=!0,this.showCornerMarkers=!0,this.showMinimap=!1,this.showHelp=!1,this.showSettings=!1,this.copiedPage=null},startCustomElementEdit(r){const e=this.customElements.find(s=>s.id===r);if(!e)return;this.customElementEditSnapshot||(this.customElementEditSnapshot={pages:Ee(this.pages),historyPast:Ee(this.historyPast),historyFuture:Ee(this.historyFuture),canvasSize:Ee(this.canvasSize),guides:Ee(this.guides),zoom:this.zoom,showGrid:this.showGrid,headerHeight:this.headerHeight,footerHeight:this.footerHeight,showHeaderLine:this.showHeaderLine,showFooterLine:this.showFooterLine,showMinimap:this.showMinimap,canvasBackground:this.canvasBackground,pageSpacingX:this.pageSpacingX,pageSpacingY:this.pageSpacingY,unit:this.unit,watermark:Ee(this.watermark),testData:Ee(this.testData),currentPageIndex:this.currentPageIndex,selectedElementId:this.selectedElementId,selectedElementIds:Ee(this.selectedElementIds),selectedGuideId:this.selectedGuideId,highlightedGuideId:this.highlightedGuideId,highlightedEdge:this.highlightedEdge}),this.editingCustomElementId=r,this.resetCanvas();const t=Ee(e.element);t.id=He(),this.pages=[{id:He(),elements:[t]}],this.currentPageIndex=0,this.selectedElementId=t.id,this.selectedElementIds=[t.id],this.historyPast=[],this.historyFuture=[],this.guides=[],this.tableSelection=null},cancelCustomElementEdit(){const r=this.customElementEditSnapshot;this.editingCustomElementId=null,this.customElementEditSnapshot=null,r&&(this.pages=r.pages,this.historyPast=r.historyPast||[],this.historyFuture=r.historyFuture||[],this.canvasSize=r.canvasSize,this.guides=r.guides,this.zoom=r.zoom,this.showGrid=r.showGrid,this.headerHeight=r.headerHeight,this.footerHeight=r.footerHeight,this.showHeaderLine=r.showHeaderLine,this.showFooterLine=r.showFooterLine,this.showMinimap=r.showMinimap,this.canvasBackground=r.canvasBackground,this.pageSpacingX=r.pageSpacingX??this.pageSpacingX,this.pageSpacingY=r.pageSpacingY??this.pageSpacingY,this.unit=r.unit||this.unit,r.unit&&localStorage.setItem("print-designer-unit",r.unit),r.watermark&&(this.watermark=Ee(r.watermark),localStorage.setItem("print-designer-watermark",JSON.stringify(this.watermark))),this.testData=r.testData||{},this.currentPageIndex=r.currentPageIndex,this.selectedElementId=r.selectedElementId,this.selectedElementIds=r.selectedElementIds,this.selectedGuideId=r.selectedGuideId,this.highlightedGuideId=r.highlightedGuideId,this.highlightedEdge=r.highlightedEdge,this.tableSelection=null)},commitCustomElementEdit(){var t;if(!this.editingCustomElementId)return!1;const r=this.customElements.find(s=>s.id===this.editingCustomElementId);if(!r)return!1;const e=this.selectedElement||((t=this.pages[0])==null?void 0:t.elements[0]);return e?(r.element=Ee(e),this.saveCustomElements(),!0):!1},saveCustomElementEditAs(r){var t;const e=this.selectedElement||((t=this.pages[0])==null?void 0:t.elements[0]);return e?(this.addCustomElement(r,e),!0):!1},copyPage(r){const e=this.pages[r];e&&(this.copiedPage=Ee(e))},pastePage(r){if(!this.copiedPage)return;this.snapshot();const e=Ee(this.copiedPage);e.id=He(),e.elements.forEach(t=>{t.id=He()}),this.pages.splice(r+1,0,e),this.currentPageIndex=r+1},addPage(){this.snapshot(),this.pages.push({id:He(),elements:[]}),this.currentPageIndex=this.pages.length-1},removePage(r){this.pages.length<=1||(this.snapshot(),this.pages.splice(r,1),this.currentPageIndex>=this.pages.length&&(this.currentPageIndex=this.pages.length-1))},setTableSelection(r,e,t){if(this.tableSelection&&this.tableSelection.elementId!==r){this.tableSelection={elementId:r,cells:[e]};return}if(!this.tableSelection){this.tableSelection={elementId:r,cells:[e]};return}if(t){const s=this.tableSelection.cells.findIndex(o=>o.rowIndex===e.rowIndex&&o.colField===e.colField&&o.section===e.section);s>=0?(this.tableSelection.cells.splice(s,1),this.tableSelection.cells.length===0&&(this.tableSelection=null)):this.tableSelection.cells.length>0&&this.tableSelection.cells[0].section!==e.section?this.tableSelection={elementId:r,cells:[e]}:this.tableSelection.cells.push(e)}else this.tableSelection={elementId:r,cells:[e]}},setTableSelectionCells(r,e){this.tableSelection={elementId:r,cells:e}},clearTableSelection(){this.tableSelection=null},mergeSelectedCells(){if(!this.tableSelection||this.tableSelection.cells.length<2)return;const{elementId:r,cells:e}=this.tableSelection,t=e[0].section||"body";let s=null,o=-1,i=-1;for(let _=0;_<this.pages.length;_++){const p=this.pages[_].elements.findIndex(I=>I.id===r);if(p!==-1){s=this.pages[_].elements[p],o=_,i=p;break}}if(!s||!s.columns)return;const c=t==="footer"?"footerData":"data";if(!s[c])return;const l=e.map(_=>_.rowIndex),u=Math.min(...l),y=Math.max(...l),x=s.columns.map(_=>_.field),f=e.map(_=>x.indexOf(_.colField)).filter(_=>_!==-1);if(f.length!==e.length)return;const k=Math.min(...f),m=Math.max(...f),b=y-u+1,g=m-k+1;this.snapshot();const C=Ee(s[c]);for(let _=u;_<=y;_++)for(let p=k;p<=m;p++){const I=x[p],A=C[_];A&&(typeof A[I]!="object"||A[I]===null?A[I]={value:A[I]}:"value"in A[I],_===u&&p===k?(A[I].rowSpan=b,A[I].colSpan=g):(A[I].rowSpan=0,A[I].colSpan=0,A[I].value=""))}this.pages[o].elements[i]={...s,[c]:C},this.tableSelection=null},splitSelectedCells(){if(!this.tableSelection||this.tableSelection.cells.length!==1)return;const{elementId:r,cells:e}=this.tableSelection,t=e[0],s=t.section||"body";let o=null,i=-1,c=-1;for(let g=0;g<this.pages.length;g++){const C=this.pages[g].elements.findIndex(_=>_.id===r);if(C!==-1){o=this.pages[g].elements[C],i=g,c=C;break}}if(!o||!o.columns)return;const l=s==="footer"?"footerData":"data";if(!o[l])return;const u=o[l][t.rowIndex];if(!u)return;const y=u[t.colField];if(!y||typeof y!="object"||!y.rowSpan&&!y.colSpan)return;const x=y.rowSpan||1,f=y.colSpan||1;if(x<=1&&f<=1)return;this.snapshot();const k=Ee(o[l]),m=o.columns.map(g=>g.field),b=m.indexOf(t.colField);for(let g=t.rowIndex;g<t.rowIndex+x;g++)for(let C=b;C<b+f;C++){const _=m[C],p=k[g];p&&p[_]&&typeof p[_]=="object"&&(p[_].rowSpan=1,p[_].colSpan=1)}this.pages[i].elements[c]={...o,[l]:k},this.tableSelection=null},setHeaderHeight(r){this.headerHeight=r},setFooterHeight(r){this.footerHeight=r},setShowHeaderLine(r){this.showHeaderLine=r},setShowFooterLine(r){this.showFooterLine=r},setShowMinimap(r){this.showMinimap=r},setShowHelp(r){this.showHelp=r},setShowSettings(r){this.showSettings=r},setCanvasBackground(r){this.canvasBackground=r},snapshot(){this.historyPast.length>=20&&this.historyPast.shift(),this.historyPast.push(Ee(this.pages)),this.historyFuture=[]},undo(){if(this.historyPast.length===0)return;const r=this.historyPast.pop();this.historyFuture.push(Ee(this.pages)),this.pages=Ee(r),this.selectedElementId&&(this.pages.some(t=>t.elements.some(s=>s.id===this.selectedElementId))||(this.selectedElementId=null,this.selectedElementIds=[])),this.selectedElementIds=this.selectedElementIds.filter(e=>this.pages.some(t=>t.elements.some(s=>s.id===e))),this.currentPageIndex>=this.pages.length&&(this.currentPageIndex=Math.max(0,this.pages.length-1))},redo(){if(this.historyFuture.length===0)return;const r=this.historyFuture.pop();this.historyPast.push(Ee(this.pages)),this.pages=Ee(r),this.currentPageIndex>=this.pages.length&&(this.currentPageIndex=Math.max(0,this.pages.length-1))},addGuide(r){this.guides.push({...r,id:He()})},updateGuide(r,e){const t=this.guides.find(s=>s.id===r);t&&(t.position=e)},removeGuide(r){const e=this.guides.findIndex(t=>t.id===r);e!==-1&&(this.guides.splice(e,1),this.selectedGuideId===r&&(this.selectedGuideId=null))},clearGuides(){this.guides=[]},selectGuide(r){this.selectedGuideId=r,r&&(this.selectedElementId=null,this.selectedElementIds=[],this.tableSelection=null)},setHighlightedGuide(r){this.highlightedGuideId=r},setHighlightedEdge(r){this.highlightedEdge=r},setShowCornerMarkers(r){this.showCornerMarkers=r},getSnapPosition(r,e,t,s=!1,o=!0,i=-1){let l=e,u=t,y=null,x=null;const f=(p,I,A)=>{const U=Math.abs(p-A);if(U>5)return!1;if(s){const Y=Math.abs(I-A);return U<Y}return!0},k=Math.max(0,this.canvasSize.width-r.width),m=Math.max(0,this.canvasSize.height-r.height);f(l,r.x,0)?(l=0,x="left"):f(l+r.width,r.x+r.width,this.canvasSize.width)&&(l=k,x="right"),f(u,r.y,0)?(u=0,x=x||"top"):f(u+r.height,r.y+r.height,this.canvasSize.height)&&(u=m,x=x||"bottom");for(const p of this.guides)p.type==="vertical"?f(l,r.x,p.position)?(l=p.position,y=p.id):f(l+r.width,r.x+r.width,p.position)&&(l=p.position-r.width,y=p.id):f(u,r.y,p.position)?(u=p.position,y=p.id):f(u+r.height,r.y+r.height,p.position)&&(u=p.position-r.height,y=p.id);let b=o,g=o,C=!1,_=!1;return o||(this.pages.length<=1?(b=!0,g=!0):(b=!0,i===0&&(C=!0),i===this.pages.length-1&&(_=!0))),b&&(l=Math.min(Math.max(0,l),k)),g?u=Math.min(Math.max(0,u),m):(C&&(u=Math.max(0,u)),_&&(u=Math.min(u,m))),{x:l,y:u,highlightedGuideId:y,highlightedEdge:x}},moveElementWithSnap(r,e,t,s=!0,o=!0){for(let i=0;i<this.pages.length;i++){const c=this.pages[i],l=c.elements.findIndex(u=>u.id===r);if(l!==-1){const u=c.elements[l];if(u.locked)return;const y=this.getSnapPosition(u,e,t,!1,o,i);this.setHighlightedGuide(y.highlightedGuideId||null),this.setHighlightedEdge(y.highlightedEdge||null),this.updateElement(r,{x:y.x,y:y.y},s);return}}},moveSelectedElements(r,e,t,s=!0,o=!0){s&&this.snapshot();let i=null,c=-1;const l=[],u=new Set(this.selectedElementIds);for(let b=0;b<this.pages.length;b++){const g=this.pages[b];for(let C=0;C<g.elements.length;C++){const _=g.elements[C];_.id===r&&(i=_,c=b),u.has(_.id)&&!_.locked&&l.push({pageIndex:b,elementIndex:C,element:_})}}if(!i||i.locked)return;const y=this.getSnapPosition(i,e,t,!1,o,c);this.setHighlightedGuide(y.highlightedGuideId||null),this.setHighlightedEdge(y.highlightedEdge||null);let x=y.x-i.x,f=y.y-i.y;if(x===0&&f===0)return;let k=o,m=o;if(o||(this.pages.length<=1?(k=!0,m=!0):(k=!0,m=!1)),k||m||!m&&this.pages.length>1)for(const b of l){const g=b.element,C=b.pageIndex;if(k)if(x>0){const _=this.canvasSize.width-g.width;g.x+x>_&&(x=_-g.x)}else x<0&&g.x+x<0&&(x=-g.x);if(m)if(f>0){const _=this.canvasSize.height-g.height;g.y+f>_&&(f=_-g.y)}else f<0&&g.y+f<0&&(f=-g.y);else if(C===0&&f<0&&g.y+f<0&&(f=-g.y),C===this.pages.length-1&&f>0){const _=this.canvasSize.height-g.height;g.y+f>_&&(f=_-g.y)}}if(!(x===0&&f===0))for(const b of l){const{pageIndex:g,elementIndex:C,element:_}=b;this.pages[g].elements[C]={..._,x:_.x+x,y:_.y+f}}},nudgeSelectedElements(r,e){if(this.selectedElementIds.length===0)return;const t=this.selectedElementIds.filter(x=>{for(const f of this.pages){const k=f.elements.find(m=>m.id===x);if(k&&!k.locked)return!0}return!1});if(t.length===0)return;this.snapshot();let s=this.selectedElementId;(!s||!t.includes(s))&&(s=t[0]);let o=null;for(const x of this.pages){const f=x.elements.find(k=>k.id===s);if(f){o=f;break}}if(!o)return;const i=o.x+r,c=o.y+e,l=this.getSnapPosition(o,i,c,!0);this.setHighlightedGuide(l.highlightedGuideId||null),this.setHighlightedEdge(l.highlightedEdge||null);let u=l.x-o.x,y=l.y-o.y;for(const x of t)for(const f of this.pages){const k=f.elements.find(m=>m.id===x);if(k){if(u>0){const m=this.canvasSize.width-k.width;k.x+u>m&&(u=m-k.x)}else u<0&&k.x+u<0&&(u=-k.x);if(y>0){const m=this.canvasSize.height-k.height;k.y+y>m&&(y=m-k.y)}else y<0&&k.y+y<0&&(y=-k.y)}}if(!(u===0&&y===0))for(const x of t)for(const f of this.pages){const k=f.elements.findIndex(m=>m.id===x);if(k!==-1){const m=f.elements[k];f.elements[k]={...m,x:m.x+u,y:m.y+y};break}}},addElement(r,e){this.snapshot();const t={...r,id:He()},s=e!==void 0&&e>=0&&e<this.pages.length?e:this.currentPageIndex;this.pages[s].elements.push(t),this.selectedElementId=t.id,this.currentPageIndex=s},moveElementToPage(r,e,t,s){this.snapshot();let o=-1,i=-1,c;for(let l=0;l<this.pages.length;l++){const u=this.pages[l].elements.findIndex(y=>y.id===r);if(u!==-1){o=l,i=u,c=this.pages[l].elements[u];break}}!c||o===-1||(this.pages[o].elements.splice(i,1),c.x=t,c.y=s,e>=0&&e<this.pages.length?(this.pages[e].elements.push(c),this.currentPageIndex=e):this.pages[o].elements.push(c))},updateElement(r,e,t=!0){t&&this.snapshot();for(const s of this.pages){const o=s.elements.findIndex(i=>i.id===r);if(o!==-1){if(s.elements[o].locked&&e.locked===void 0)return;s.elements[o]={...s.elements[o],...e};return}}},removeElement(r){for(const e of this.pages){const t=e.elements.find(s=>s.id===r);if(t&&t.locked)return}this.snapshot();for(const e of this.pages){const t=e.elements.findIndex(s=>s.id===r);if(t!==-1){e.elements.splice(t,1),this.selectedElementId===r&&(this.selectedElementId=null),this.tableSelection&&this.tableSelection.elementId===r&&(this.tableSelection=null);const s=this.selectedElementIds.indexOf(r);s!==-1&&this.selectedElementIds.splice(s,1);return}}},selectElement(r,e=!1){if(r&&(this.selectedGuideId=null),this.tableSelection&&(this.tableSelection=null),e&&r){if(this.selectedElementIds.includes(r)){const t=this.selectedElementIds.indexOf(r);this.selectedElementIds.splice(t,1)}else this.selectedElementIds.push(r);this.selectedElementId=this.selectedElementIds.length>0?this.selectedElementIds[this.selectedElementIds.length-1]:null}else this.selectedElementId=r,this.selectedElementIds=r?[r]:[];if(r){const t=this.pages.findIndex(s=>s.elements.some(o=>o.id===r));t!==-1&&(this.currentPageIndex=t)}},clearSelection(){this.selectedElementId=null,this.selectedElementIds=[],this.tableSelection=null},setSelection(r){if(this.tableSelection=null,r.length>0&&(this.selectedGuideId=null),this.selectedElementIds=r,this.selectedElementId=r.length>0?r[r.length-1]:null,r.length>0){const e=this.pages.findIndex(t=>t.elements.some(s=>s.id===this.selectedElementId));e!==-1&&(this.currentPageIndex=e)}},removeSelectedElements(){if(this.selectedElementIds.length===0)return;const r=this.selectedElementIds.filter(e=>{for(const t of this.pages){const s=t.elements.find(o=>o.id===e);if(s&&!s.locked)return!0}return!1});if(r.length!==0){this.snapshot();for(const e of r)for(const t of this.pages){const s=t.elements.findIndex(o=>o.id===e);if(s!==-1){t.elements.splice(s,1);break}}this.selectedElementId=null,this.selectedElementIds=[],this.tableSelection=null}},alignSelectedElements(r){if(this.selectedElementIds.length===0)return;const e=[];for(const t of this.selectedElementIds)for(const s of this.pages){const o=s.elements.find(i=>i.id===t);if(o&&!o.locked){e.push(o);break}}if(e.length!==0)if(this.snapshot(),e.length===1){const t=e[0],s=this.canvasSize.width,o=this.canvasSize.height;switch(r){case"left":t.x=0;break;case"center":t.x=(s-t.width)/2;break;case"right":t.x=s-t.width;break;case"top":t.y=0;break;case"middle":t.y=(o-t.height)/2;break;case"bottom":t.y=o-t.height;break}}else{const t=Math.min(...e.map(u=>u.x)),s=Math.max(...e.map(u=>u.x+u.width)),o=Math.min(...e.map(u=>u.y)),i=Math.max(...e.map(u=>u.y+u.height)),c=(t+s)/2,l=(o+i)/2;e.forEach(u=>{switch(r){case"left":u.x=t;break;case"center":u.x=c-u.width/2;break;case"right":u.x=s-u.width;break;case"top":u.y=o;break;case"middle":u.y=l-u.height/2;break;case"bottom":u.y=i-u.height;break}})}},resizeSelectedElements(r,e){if(this.selectedElementIds.length===0)return;const t=this.selectedElementIds.filter(s=>{for(const o of this.pages){const i=o.elements.find(c=>c.id===s);if(i&&!i.locked)return!0}return!1});if(t.length!==0){this.snapshot();for(const s of t)for(const o of this.pages){const i=o.elements.findIndex(c=>c.id===s);if(i!==-1){const c=o.elements[i],l=Math.max(10,c.width+r),u=Math.max(10,c.height+e);o.elements[i]={...c,width:l,height:u};break}}}},updateSelectedElementsStyle(r){if(this.selectedElementIds.length===0)return;this.selectedElementIds.some(t=>{for(const s of this.pages){const o=s.elements.find(i=>i.id===t);if(o&&o.locked)return!0}return!1});const e=this.selectedElementIds.filter(t=>{for(const s of this.pages){const o=s.elements.find(i=>i.id===t);if(o&&!o.locked)return!0}return!1});if(e.length!==0){this.snapshot();for(const t of e)for(const s of this.pages){const o=s.elements.findIndex(i=>i.id===t);if(o!==-1){const i=s.elements[o];s.elements[o]={...i,style:{...i.style,...r}};break}}}},toggleLock(){if(this.selectedElementIds.length===0)return;this.snapshot();let r=!0;const e=this.selectedElement;e&&(r=!e.locked);for(const t of this.selectedElementIds)for(const s of this.pages){const o=s.elements.findIndex(i=>i.id===t);if(o!==-1){s.elements[o].locked=r;break}}},setZoom(r){this.zoom=r},setCanvasSize(r,e){this.snapshot(),this.canvasSize={width:r,height:e}},setShowGrid(r){this.showGrid=r},deletePage(r){this.pages.length>1&&(this.snapshot(),this.pages.splice(r,1),this.currentPageIndex>=this.pages.length&&(this.currentPageIndex=this.pages.length-1))},copy(){if(this.selectedElementIds.length===0)return;const r=[];for(const e of this.selectedElementIds)for(const t of this.pages){const s=t.elements.find(o=>o.id===e);if(s&&!s.locked){r.push(Ee(s));break}}this.clipboard=r},cut(){this.selectedElementIds.length!==0&&(this.copy(),this.removeSelectedElements())},paste(r){if(this.clipboard.length===0)return;this.snapshot();const e=[],t=(r==null?void 0:r.pageIndex)??this.currentPageIndex;let s=1/0,o=1/0;if(r)for(const i of this.clipboard)s=Math.min(s,i.x),o=Math.min(o,i.y);for(const i of this.clipboard){const c=Ee(i);if(c.id=He(),r){const l=i.x-s,u=i.y-o;c.x=r.x+l,c.y=r.y+u}else c.x+=20,c.y+=20;c.x+c.width>this.canvasSize.width&&(c.x=Math.max(0,this.canvasSize.width-c.width)),c.y+c.height>this.canvasSize.height&&(c.y=Math.max(0,this.canvasSize.height-c.height)),c.x=Math.max(0,c.x),c.y=Math.max(0,c.y),this.pages[t]?this.pages[t].elements.push(c):this.pages[this.currentPageIndex].elements.push(c),e.push(c.id)}t!==this.currentPageIndex&&this.pages[t]&&(this.currentPageIndex=t),this.setSelection(e)},paginateTable(r){this.snapshot();let e=-1,t;for(let g=0;g<this.pages.length;g++){const C=this.pages[g].elements.findIndex(_=>_.id===r);if(C!==-1){e=g,t=this.pages[g].elements[C];break}}if(!t||t.type!==ge.TABLE||!t.data)return;const s=this.canvasSize.height,o=50,i=t.style.headerHeight||40,c=t.style.rowHeight||30,l=t.y,y=s-l-o-i,x=Math.floor(Math.max(0,y)/c);if(x>=t.data.length)return;const f=t.data.slice(0,x),k=t.data.slice(x);this.updateElement(t.id,{data:f,height:i+f.length*c});const m=e+1;m>=this.pages.length&&this.addPage();const b={...Ee(t),id:He(),y:50,data:k,height:i+k.length*c};this.pages[m].elements.push(b),this.paginateTable(b.id)},groupSelectedElements(){this.selectedElementIds.length<2||(console.log("Group selected elements:",this.selectedElementIds),alert("Grouping feature is under development"))},async loadCustomElements(){var o;const{mode:r,endpoints:e,headers:t,fetcher:s}=Qe();if(r==="remote")try{const i=et(((o=e.customElements)==null?void 0:o.list)||""),l=await(await(s||fetch)(i,{headers:t})).json(),u=Array.isArray(l)?l:(l==null?void 0:l.customElements)||[];this.customElements=u.filter(y=>y&&typeof y.id=="string"&&typeof y.name=="string"&&y.element).map(y=>({id:y.id,name:y.name,element:Ee(y.element)}))}catch(i){console.error("Failed to load custom elements",i)}},async addCustomElement(r,e){var l;const{mode:t,endpoints:s,headers:o,fetcher:i}=Qe(),c={id:He(),name:r,element:Ee(e)};if(t==="remote")try{const u=et(((l=s.customElements)==null?void 0:l.upsert)||""),x=await(await(i||fetch)(u,{method:"POST",headers:o,body:JSON.stringify(c)})).json();c.id=(x==null?void 0:x.id)||c.id}catch(u){console.error("Failed to add custom element",u)}this.customElements.push(c),t!=="remote"&&this.saveCustomElements()},async removeCustomElement(r){var c;const{mode:e,endpoints:t,headers:s,fetcher:o}=Qe(),i=this.customElements.findIndex(l=>l.id===r);if(i!==-1){if(this.customElements.splice(i,1),e==="remote"){try{const l=et(((c=t.customElements)==null?void 0:c.delete)||"",r);await(o||fetch)(l,{method:"DELETE",headers:s})}catch(l){console.error("Failed to remove custom element",l)}return}this.saveCustomElements()}},async renameCustomElement(r,e){var l;const{mode:t,endpoints:s,headers:o,fetcher:i}=Qe(),c=this.customElements.find(u=>u.id===r);if(c){if(c.name=e,t==="remote"){try{const u=et(((l=s.customElements)==null?void 0:l.upsert)||"");await(i||fetch)(u,{method:"POST",headers:o,body:JSON.stringify(c)})}catch(u){console.error("Failed to rename custom element",u)}return}this.saveCustomElements()}},saveCustomElements(){localStorage.setItem("print-designer-custom-elements",JSON.stringify(this.customElements))}},getters:{selectedElement:r=>{if(!r.selectedElementId)return null;for(const e of r.pages){const t=e.elements.find(s=>s.id===r.selectedElementId);if(t)return t}return null},currentPage:r=>r.pages[r.currentPageIndex],editingCustomElement:r=>r.editingCustomElementId&&r.customElements.find(e=>e.id===r.editingCustomElementId)||null}}),Qt=ci("templates",{state:()=>({templates:[],currentTemplateId:null,isSaving:!1}),actions:{async loadTemplates(){var i;const{mode:r,endpoints:e,headers:t,fetcher:s}=Qe();if(r==="remote")try{const c=et(((i=e.templates)==null?void 0:i.list)||""),u=await(await(s||fetch)(c,{headers:t})).json(),y=Array.isArray(u)?u:(u==null?void 0:u.templates)||[];this.templates=y.filter(x=>x&&typeof x.id=="string"&&typeof x.name=="string").map(x=>({id:x.id,name:x.name,data:x.data||{},updatedAt:x.updatedAt||Date.now()})).sort((x,f)=>f.updatedAt-x.updatedAt);return}catch(c){console.error("Failed to load templates",c)}const o=localStorage.getItem("print-designer-templates");if(o)try{this.templates=JSON.parse(o),this.templates.sort((c,l)=>l.updatedAt-c.updatedAt)}catch(c){console.error("Failed to parse templates",c),this.templates=[]}},saveToLocalStorage(){localStorage.setItem("print-designer-templates",JSON.stringify(this.templates))},async saveCurrentTemplate(r){var u;const{mode:e,endpoints:t,headers:s,fetcher:o}=Qe(),i=Be(),c=this.currentTemplateId,l={pages:Ee(i.pages),canvasSize:Ee(i.canvasSize),guides:Ee(i.guides),zoom:i.zoom,showGrid:i.showGrid,headerHeight:i.headerHeight,footerHeight:i.footerHeight,showHeaderLine:i.showHeaderLine,showFooterLine:i.showFooterLine,showMinimap:i.showMinimap,canvasBackground:i.canvasBackground,pageSpacingX:i.pageSpacingX,pageSpacingY:i.pageSpacingY,unit:i.unit,watermark:Ee(i.watermark),testData:Ee(i.testData||{})};this.isSaving=!0;try{if(e==="remote"){const y={id:c||He(),name:r,data:l,updatedAt:Date.now()},x=et(((u=t.templates)==null?void 0:u.upsert)||""),k=await(await(o||fetch)(x,{method:"POST",headers:s,body:JSON.stringify(y)})).json(),m=(k==null?void 0:k.id)||y.id,b=this.templates.findIndex(C=>C.id===m),g={...y,id:m};b>=0?this.templates[b]=g:this.templates.unshift(g),this.currentTemplateId=m;return}if(c){const y=this.templates.findIndex(x=>x.id===c);y!==-1?(this.templates[y].data=l,this.templates[y].name=r,this.templates[y].updatedAt=Date.now()):this.createTemplate(r,l)}else this.createTemplate(r,l);this.saveToLocalStorage()}finally{this.isSaving=!1}},async createTemplate(r,e){var y;const{mode:t,endpoints:s,headers:o,fetcher:i}=Qe(),c=Be(),l=e||{pages:c.pages,canvasSize:c.canvasSize,pageSpacingX:c.pageSpacingX,pageSpacingY:c.pageSpacingY,unit:c.unit,watermark:c.watermark,testData:Ee(c.testData||{})},u={id:He(),name:r,data:l,updatedAt:Date.now()};if(t==="remote")try{const x=et(((y=s.templates)==null?void 0:y.upsert)||""),k=await(await(i||fetch)(x,{method:"POST",headers:o,body:JSON.stringify(u)})).json(),m=(k==null?void 0:k.id)||u.id;u.id=m}catch(x){console.error("Failed to create template",x)}this.templates.unshift(u),this.currentTemplateId=u.id,t!=="remote"&&this.saveToLocalStorage()},async deleteTemplate(r){var i;const{mode:e,endpoints:t,headers:s,fetcher:o}=Qe();if(this.templates=this.templates.filter(c=>c.id!==r),this.currentTemplateId===r&&(this.currentTemplateId=null),e==="remote"){try{const c=et(((i=t.templates)==null?void 0:i.delete)||"",r);await(o||fetch)(c,{method:"DELETE",headers:s})}catch(c){console.error("Failed to delete template",c)}return}this.saveToLocalStorage()},async renameTemplate(r,e){var l;const{mode:t,endpoints:s,headers:o,fetcher:i}=Qe(),c=this.templates.find(u=>u.id===r);if(c){if(c.name=e,c.updatedAt=Date.now(),t==="remote"){try{const u=et(((l=s.templates)==null?void 0:l.upsert)||"");await(i||fetch)(u,{method:"POST",headers:o,body:JSON.stringify(c)})}catch(u){console.error("Failed to rename template",u)}return}this.saveToLocalStorage()}},async copyTemplate(r){var c;const{mode:e,endpoints:t,headers:s,fetcher:o}=Qe(),i=this.templates.find(l=>l.id===r);if(i){const l={id:He(),name:`${i.name} Copy`,data:JSON.parse(JSON.stringify(i.data)),updatedAt:Date.now()};if(e==="remote")try{const u=et(((c=t.templates)==null?void 0:c.upsert)||""),x=await(await(o||fetch)(u,{method:"POST",headers:s,body:JSON.stringify(l)})).json();l.id=(x==null?void 0:x.id)||l.id}catch(u){console.error("Failed to copy template",u)}this.templates.unshift(l),e!=="remote"&&this.saveToLocalStorage()}},async loadTemplate(r){var c;const{mode:e,endpoints:t,headers:s,fetcher:o}=Qe();if(e==="remote")try{const l=et(((c=t.templates)==null?void 0:c.get)||"",r),y=await(await(o||fetch)(l,{headers:s})).json(),x=(y==null?void 0:y.template)||y;if(!x)return;const f=Be();f.resetCanvas();const k=x.data||{};k.pages&&(f.pages=k.pages),k.canvasSize&&(f.canvasSize=k.canvasSize),k.guides&&(f.guides=k.guides),k.zoom!==void 0&&(f.zoom=k.zoom),k.showGrid!==void 0&&(f.showGrid=k.showGrid),k.headerHeight!==void 0&&(f.headerHeight=k.headerHeight),k.footerHeight!==void 0&&(f.footerHeight=k.footerHeight),k.showHeaderLine!==void 0&&(f.showHeaderLine=k.showHeaderLine),k.showFooterLine!==void 0&&(f.showFooterLine=k.showFooterLine),k.showMinimap!==void 0&&(f.showMinimap=k.showMinimap),k.canvasBackground!==void 0&&(f.canvasBackground=k.canvasBackground),k.pageSpacingX!==void 0&&(f.pageSpacingX=k.pageSpacingX),k.pageSpacingY!==void 0&&(f.pageSpacingY=k.pageSpacingY),k.unit!==void 0&&(f.unit=k.unit),k.watermark!==void 0&&(f.watermark=k.watermark),f.testData=k.testData||{},f.selectedElementId=null,f.selectedGuideId=null,f.historyPast=[],f.historyFuture=[],this.currentTemplateId=x.id||r;return}catch(l){console.error("Failed to load template",l);return}const i=this.templates.find(l=>l.id===r);if(i){const l=Be();l.resetCanvas();const u=i.data;u.pages&&(l.pages=u.pages),u.canvasSize&&(l.canvasSize=u.canvasSize),u.guides&&(l.guides=u.guides),u.zoom!==void 0&&(l.zoom=u.zoom),u.showGrid!==void 0&&(l.showGrid=u.showGrid),u.headerHeight!==void 0&&(l.headerHeight=u.headerHeight),u.footerHeight!==void 0&&(l.footerHeight=u.footerHeight),u.showHeaderLine!==void 0&&(l.showHeaderLine=u.showHeaderLine),u.showFooterLine!==void 0&&(l.showFooterLine=u.showFooterLine),u.showMinimap!==void 0&&(l.showMinimap=u.showMinimap),u.canvasBackground!==void 0&&(l.canvasBackground=u.canvasBackground),u.pageSpacingX!==void 0&&(l.pageSpacingX=u.pageSpacingX),u.pageSpacingY!==void 0&&(l.pageSpacingY=u.pageSpacingY),u.unit!==void 0&&(l.unit=u.unit),u.watermark!==void 0&&(l.watermark=u.watermark),l.testData=u.testData||{},l.selectedElementId=null,l.selectedGuideId=null,l.historyPast=[],l.historyFuture=[],this.currentTemplateId=r}}}}),Pi=se(localStorage.getItem("print-designer-autosave")!=="false");Ie(Pi,r=>{localStorage.setItem("print-designer-autosave",String(r))});function Li(){return{autoSave:Pi}}const Vt=se(localStorage.getItem("print-designer-theme")||"system"),Mi=se(window.matchMedia("(prefers-color-scheme: dark)").matches),tn=window.matchMedia("(prefers-color-scheme: dark)");var di;(di=tn.addEventListener)==null||di.call(tn,"change",r=>{Mi.value=r.matches});const Ri=fe(()=>Vt.value==="dark"?!0:Vt.value==="light"?!1:Mi.value),Rd=r=>{Vt.value=r,localStorage.setItem("print-designer-theme",r)};Ie(Ri,r=>{document.documentElement.classList.toggle("dark",r)},{immediate:!0});function En(){return{theme:Vt,isDark:Ri,setTheme:Rd}}var rn,Ls;function Dd(){if(Ls)return rn;Ls=1;var r=rt(),e=function(){return r.Date.now()};return rn=e,rn}var on,Ms;function Bd(){if(Ms)return on;Ms=1;var r=/\s/;function e(t){for(var s=t.length;s--&&r.test(t.charAt(s)););return s}return on=e,on}var nn,Rs;function Od(){if(Rs)return nn;Rs=1;var r=Bd(),e=/^\s+/;function t(s){return s&&s.slice(0,r(s)+1).replace(e,"")}return nn=t,nn}var an,Ds;function qd(){if(Ds)return an;Ds=1;var r=Ot(),e=Ct(),t="[object Symbol]";function s(o){return typeof o=="symbol"||e(o)&&r(o)==t}return an=s,an}var sn,Bs;function Fd(){if(Bs)return sn;Bs=1;var r=Od(),e=bt(),t=qd(),s=NaN,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;function u(y){if(typeof y=="number")return y;if(t(y))return s;if(e(y)){var x=typeof y.valueOf=="function"?y.valueOf():y;y=e(x)?x+"":x}if(typeof y!="string")return y===0?y:+y;y=r(y);var f=i.test(y);return f||c.test(y)?l(y.slice(2),f?2:8):o.test(y)?s:+y}return sn=u,sn}var ln,Os;function jd(){if(Os)return ln;Os=1;var r=bt(),e=Dd(),t=Fd(),s="Expected a function",o=Math.max,i=Math.min;function c(l,u,y){var x,f,k,m,b,g,C=0,_=!1,p=!1,I=!0;if(typeof l!="function")throw new TypeError(s);u=t(u)||0,r(y)&&(_=!!y.leading,p="maxWait"in y,k=p?o(t(y.maxWait)||0,u):k,I="trailing"in y?!!y.trailing:I);function A(q){var h=x,v=f;return x=f=void 0,C=q,m=l.apply(v,h),m}function U(q){return C=q,b=setTimeout(O,u),_?A(q):m}function Y(q){var h=q-g,v=q-C,Z=u-h;return p?i(Z,k-v):Z}function j(q){var h=q-g,v=q-C;return g===void 0||h>=u||h<0||p&&v>=k}function O(){var q=e();if(j(q))return F(q);b=setTimeout(O,Y(q))}function F(q){return b=void 0,I&&x?A(q):(x=f=void 0,m)}function oe(){b!==void 0&&clearTimeout(b),C=0,x=g=f=b=void 0}function K(){return b===void 0?m:F(e())}function P(){var q=e(),h=j(q);if(x=arguments,f=this,g=q,h){if(b===void 0)return U(g);if(p)return clearTimeout(b),b=setTimeout(O,u),A(g)}return b===void 0&&(b=setTimeout(O,u)),m}return P.cancel=oe,P.flush=K,P}return ln=c,ln}var Nd=jd();const Hd=St(Nd),Di=96/25.4,Ud=25.4/96,Bi=96/72,Vd=72/96;function hn(r){return Number((r*Ud).toFixed(1))}function Wd(r){return Math.round(r*Di)}function Gd(r){return Number((r*Vd).toFixed(1))}function Kd(r){return Math.round(r*Bi)}function nt(r,e){return e==="mm"?hn(r):e==="pt"?Gd(r):Math.round(r)}function Ye(r,e){return e==="mm"?Wd(r):e==="pt"?Kd(r):Math.round(r)}function Bt(r,e,t){r=r%360,r<0&&(r+=360),e=Math.max(0,Math.min(1,e)),t=Math.max(0,Math.min(1,t));const s=t*e,o=s*(1-Math.abs(r/60%2-1)),i=t-s;let c=0,l=0,u=0;return r>=0&&r<60?(c=s,l=o,u=0):r>=60&&r<120?(c=o,l=s,u=0):r>=120&&r<180?(c=0,l=s,u=o):r>=180&&r<240?(c=0,l=o,u=s):r>=240&&r<300?(c=o,l=0,u=s):(c=s,l=0,u=o),{r:Math.round((c+i)*255),g:Math.round((l+i)*255),b:Math.round((u+i)*255)}}function qs(r,e,t){r/=255,e/=255,t/=255;const s=Math.max(r,e,t),o=Math.min(r,e,t),i=s-o;let c=0;const l=s===0?0:i/s,u=s;if(s!==o){switch(s){case r:c=(e-t)/i+(e<t?6:0);break;case e:c=(t-r)/i+2;break;case t:c=(r-e)/i+4;break}c/=6}return{h:c*360,s:l,v:u}}function Rt(r){if(!r)return null;if(r==="transparent")return{h:0,s:0,v:0,a:0};if(r.startsWith("#")){const e=r.slice(1);let t=0,s=0,o=0,i=1;if(e.length===3)t=parseInt(e[0]+e[0],16),s=parseInt(e[1]+e[1],16),o=parseInt(e[2]+e[2],16);else if(e.length===6)t=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);else if(e.length===8)t=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;else return null;return{...qs(t,s,o),a:i}}if(r.startsWith("rgb")){const e=r.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(e){const t=parseInt(e[1]),s=parseInt(e[2]),o=parseInt(e[3]),i=e[4]!==void 0?parseFloat(e[4]):1;return{...qs(t,s,o),a:i}}}return null}function Fs(r,e,t,s=1){const{r:o,g:i,b:c}=Bt(r,e,t),l=u=>{const y=Math.round(u).toString(16);return y.length===1?"0"+y:y};if(s>=1)return`#${l(o)}${l(i)}${l(c)}`;{const u=Math.round(s*255);return`#${l(o)}${l(i)}${l(c)}${l(u)}`}}function Yd(r,e,t,s=1){const{r:o,g:i,b:c}=Bt(r,e,t);return`rgba(${o}, ${i}, ${c}, ${parseFloat(s.toFixed(2))})`}const Xd={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Zd(r,e){return z(),H("svg",Xd,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M18 7H6V3h12zm0 5.5q.425 0 .713-.288T19 11.5t-.288-.712T18 10.5t-.712.288T17 11.5t.288.713t.712.287M16 19v-4H8v4zm2 2H6v-4H2v-6q0-1.275.875-2.137T5 8h14q1.275 0 2.138.863T22 11v6h-4z"},null,-1)])])}const Tn=Se({name:"material-symbols-print",render:Zd}),Jd={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Qd(r,e){return z(),H("svg",Jd,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V7H5zm7-2q-2.05 0-3.662-1.112T6 13q.725-1.775 2.338-2.887T12 9t3.663 1.113T18 13q-.725 1.775-2.337 2.888T12 17m0-2.5q-.625 0-1.062-.437T10.5 13t.438-1.062T12 11.5t1.063.438T13.5 13t-.437 1.063T12 14.5m0 1q1.05 0 1.775-.725T14.5 13t-.725-1.775T12 10.5t-1.775.725T9.5 13t.725 1.775T12 15.5"},null,-1)])])}const ec=Se({name:"material-symbols-preview",render:Qd}),tc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function rc(r,e){return z(),H("svg",tc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11zm-6 4q-.825 0-1.412-.587T4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413T18 20z"},null,-1)])])}const Wt=Se({name:"material-symbols-file-download",render:rc}),oc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function nc(r,e){return z(),H("svg",oc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M9 12.5h1v-2h1q.425 0 .713-.288T12 9.5v-1q0-.425-.288-.712T11 7.5H9zm1-3v-1h1v1zm3 3h2q.425 0 .713-.288T16 11.5v-3q0-.425-.288-.712T15 7.5h-2zm1-1v-3h1v3zm3 1h1v-2h1v-1h-1v-1h1v-1h-2zM8 18q-.825 0-1.412-.587T6 16V4q0-.825.588-1.412T8 2h12q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-4 4q-.825 0-1.412-.587T2 20V6h2v14h14v2z"},null,-1)])])}Se({name:"material-symbols-picture-as-pdf",render:nc});const ac={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function sc(r,e){return z(),H("svg",ac,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm1-4h12l-3.75-5l-3 4L9 13z"},null,-1)])])}const js=Se({name:"material-symbols-image",render:sc}),ic={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function lc(r,e){return z(),H("svg",ic,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14m-1-1.5v-2h-2v-2h2v-2h2v2h2v2h-2v2z"},null,-1)])])}const Oi=Se({name:"material-symbols-zoom-in",render:lc}),dc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function cc(r,e){return z(),H("svg",dc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14M7 10.5v-2h5v2z"},null,-1)])])}const qi=Se({name:"material-symbols-zoom-out",render:cc}),uc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function hc(r,e){return z(),H("svg",uc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m9.25 22l-.4-3.2q-.325-.125-.612-.3t-.563-.375L4.7 19.375l-2.75-4.75l2.575-1.95Q4.5 12.5 4.5 12.338v-.675q0-.163.025-.338L1.95 9.375l2.75-4.75l2.975 1.25q.275-.2.575-.375t.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3t.562.375l2.975-1.25l2.75 4.75l-2.575 1.95q.025.175.025.338v.674q0 .163-.05.338l2.575 1.95l-2.75 4.75l-2.95-1.25q-.275.2-.575.375t-.6.3l-.4 3.2zm2.8-6.5q1.45 0 2.475-1.025T15.55 12t-1.025-2.475T12.05 8.5q-1.475 0-2.488 1.025T8.55 12t1.013 2.475T12.05 15.5"},null,-1)])])}const Gt=Se({name:"material-symbols-settings",render:hc}),pc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function fc(r,e){return z(),H("svg",pc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M21 7v12q0 .825-.587 1.413T19 21H5q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h12zm-9 11q1.25 0 2.125-.875T15 15t-.875-2.125T12 12t-2.125.875T9 15t.875 2.125T12 18m-6-8h9V6H6z"},null,-1)])])}const An=Se({name:"material-symbols-save",render:fc}),mc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function gc(r,e){return z(),H("svg",mc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M13 23v-3.075l5.525-5.5q.225-.225.5-.325t.55-.1q.3 0 .575.113t.5.337l.925.925q.2.225.313.5t.112.55t-.1.563t-.325.512l-5.5 5.5zM6 10h9V6H6zm13.575 7.4l.925-.975l-.925-.925l-.95.95zM11 21H5q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h12l4 4v5.3q-.475-.2-.987-.262T19 12.05t-.975.313t-.875.612L15 15.125V15q0-1.25-.875-2.125T12 12t-2.125.875T9 15t.875 2.125T12 18h.1L11 19.1z"},null,-1)])])}const Fi=Se({name:"material-symbols-save-as",render:gc}),bc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function vc(r,e){return z(),H("svg",bc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M12 22q-2.05 0-3.875-.788t-3.187-2.15t-2.15-3.187T2 12q0-2.075.788-3.887t2.15-3.175t3.187-2.15T12 2q.425 0 .713.288T13 3t-.288.713T12 4Q8.675 4 6.337 6.338T4 12t2.338 5.663T12 20t5.663-2.337T20 12q0-.425.288-.712T21 11t.713.288T22 12q0 2.05-.788 3.875t-2.15 3.188t-3.175 2.15T12 22"},null,-1)])])}const yc=Se({name:"material-symbols-progress-activity",render:vc}),wc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function xc(r,e){return z(),H("svg",wc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M7 19v-2h7.1q1.575 0 2.738-1T18 13.5T16.838 11T14.1 10H7.8l2.6 2.6L9 14L4 9l5-5l1.4 1.4L7.8 8h6.3q2.425 0 4.163 1.575T20 13.5t-1.737 3.925T14.1 19z"},null,-1)])])}const ji=Se({name:"material-symbols-undo",render:xc}),_c={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function kc(r,e){return z(),H("svg",_c,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M9.9 19q-2.425 0-4.163-1.575T4 13.5t1.738-3.925T9.9 8h6.3l-2.6-2.6L15 4l5 5l-5 5l-1.4-1.4l2.6-2.6H9.9q-1.575 0-2.738 1T6 13.5T7.163 16T9.9 17H17v2z"},null,-1)])])}const Ni=Se({name:"material-symbols-redo",render:kc}),Sc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Cc(r,e){return z(),H("svg",Sc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"},null,-1)])])}const Et=Se({name:"material-symbols-delete",render:Cc}),Ec={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Tc(r,e){return z(),H("svg",Ec,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M11.95 18q.525 0 .888-.363t.362-.887t-.362-.888t-.888-.362t-.887.363t-.363.887t.363.888t.887.362m-.9-3.85h1.85q0-.825.188-1.3t1.062-1.3q.65-.65 1.025-1.238T15.55 8.9q0-1.4-1.025-2.15T12.1 6q-1.425 0-2.312.75T8.55 8.55l1.65.65q.125-.45.563-.975T12.1 7.7q.8 0 1.2.438t.4.962q0 .5-.3.938t-.75.812q-1.1.975-1.35 1.475t-.25 1.825M12 22q-2.075 0-3.9-.787t-3.175-2.138T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"},null,-1)])])}const Ac=Se({name:"material-symbols-help",render:Tc}),$c={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ic(r,e){return z(),H("svg",$c,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M3 21v-2h18v2zm0-4v-2h12v2zm0-4v-2h18v2zm0-4V7h12v2zm0-4V3h18v2z"},null,-1)])])}const zc=Se({name:"material-symbols-format-align-left",render:Ic}),Pc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Lc(r,e){return z(),H("svg",Pc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M3 21v-2h18v2zm4-4v-2h10v2zm-4-4v-2h18v2zm4-4V7h10v2zM3 5V3h18v2z"},null,-1)])])}const Mc=Se({name:"material-symbols-format-align-center",render:Lc}),Rc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Dc(r,e){return z(),H("svg",Rc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M3 5V3h18v2zm6 4V7h12v2zm-6 4v-2h18v2zm6 4v-2h12v2zm-6 4v-2h18v2z"},null,-1)])])}const Bc=Se({name:"material-symbols-format-align-right",render:Dc}),Oc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function qc(r,e){return z(),H("svg",Oc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M4 5V3h16v2zm7 16V10.8l-2.6 2.6L7 12l5-5l5 5l-1.4 1.4l-2.6-2.6V21z"},null,-1)])])}const Fc=Se({name:"material-symbols-vertical-align-top",render:qc}),jc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Nc(r,e){return z(),H("svg",jc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M11 22v-4.2l-1.6 1.6L8 18l4-4l4 4l-1.4 1.4l-1.6-1.6V22zm-7-9v-2h16v2zm8-3L8 6l1.4-1.4L11 6.2V2h2v4.2l1.6-1.6L16 6z"},null,-1)])])}const Hc=Se({name:"material-symbols-vertical-align-center",render:Nc}),Uc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Vc(r,e){return z(),H("svg",Uc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M4 21v-2h16v2zm8-4l-5-5l1.4-1.4l2.6 2.6V3h2v10.2l2.6-2.6L17 12z"},null,-1)])])}const Wc=Se({name:"material-symbols-vertical-align-bottom",render:Vc}),Gc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Kc(r,e){return z(),H("svg",Gc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M6.8 19V5h5.525q1.625 0 3 1T16.7 8.775q0 1.275-.575 1.963t-1.075.987q.625.275 1.388 1.025T17.2 15q0 2.225-1.625 3.113t-3.05.887zm3.025-2.8h2.6q1.2 0 1.463-.612t.262-.888t-.262-.887t-1.538-.613H9.825zm0-5.7h2.325q.825 0 1.2-.425t.375-.95q0-.6-.425-.975t-1.1-.375H9.825z"},null,-1)])])}const Yc=Se({name:"material-symbols-format-bold",render:Kc}),Xc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Zc(r,e){return z(),H("svg",Xc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M5 19v-2.5h4l3-9H8V5h10v2.5h-3.5l-3 9H15V19z"},null,-1)])])}const Jc=Se({name:"material-symbols-format-italic",render:Zc}),Qc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function eu(r,e){return z(),H("svg",Qc,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M5 21v-2h14v2zm7-4q-2.525 0-3.925-1.575t-1.4-4.175V3H9.25v8.4q0 1.4.7 2.275t2.05.875t2.05-.875t.7-2.275V3h2.575v8.25q0 2.6-1.4 4.175T12 17"},null,-1)])])}const tu=Se({name:"material-symbols-format-underlined",render:eu}),ru={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ou(r,e){return z(),H("svg",ru,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M10.9 16L15 5h2l4.1 11h-1.9l-1-2.8h-4.4l-1 2.8zm3.45-4.4h3.3l-1.6-4.55h-.1zM6 20l-3.5-3.5l1.4-1.4L5 16.15V3h2v13.15l1.1-1.05l1.4 1.4z"},null,-1)])])}const nu=Se({name:"material-symbols-text-rotate-vertical",render:ou}),au={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function su(r,e){return z(),H("svg",au,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M11 22q-1.25-.125-2.4-.612T6.4 20.1l1.4-1.45q.725.525 1.538.85t1.662.45zm2 0v-2.05q2.6-.375 4.3-2.337T19 13.05q0-2.925-2.037-4.962T12 6.05h-.2l1.6 1.6l-1.4 1.4l-4-4l4-4l1.4 1.45l-1.55 1.55H12q1.875 0 3.513.713t2.85 1.925t1.925 2.85T21 13.05q0 3.425-2.275 5.963T13 22m-8.05-3.35q-.8-1.05-1.288-2.2t-.612-2.4H5.1q.125.85.45 1.663t.85 1.537zm-1.9-6.6q.15-1.275.625-2.45T4.95 7.45l1.45 1.4q-.525.725-.85 1.538T5.1 12.05z"},null,-1)])])}const iu=Se({name:"material-symbols-rotate-left",render:su}),lu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function du(r,e){return z(),H("svg",lu,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M9 18q-.825 0-1.412-.587T7 16V4q0-.825.588-1.412T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.587 1.413T18 18zm-4 4q-.825 0-1.412-.587T3 20V6h2v14h11v2z"},null,-1)])])}const Tt=Se({name:"material-symbols-content-copy",render:du}),cu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function uu(r,e){return z(),H("svg",cu,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M6.4 18h2.1l1.1-3.05h4.8L15.5 18h2.1L13.05 6h-2.1zm3.8-4.8l1.75-4.95h.1l1.75 4.95zM4 22q-.825 0-1.412-.587T2 20V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v16q0 .825-.587 1.413T20 22z"},null,-1)])])}const hu=Se({name:"material-symbols-font-download",render:uu}),pu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function fu(r,e){return z(),H("svg",pu,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M6.175 1.4L7.6 0l8.575 8.575q.575.575.575 1.425t-.575 1.425l-4.75 4.75q-.575.575-1.425.575t-1.425-.575l-4.75-4.75Q3.25 10.85 3.25 10t.575-1.425L8.575 3.8zM10 5.225L5.225 10h9.55zM19 17q-.825 0-1.412-.587T17 15q0-.525.313-1.125T18 12.75q.225-.3.475-.625T19 11.5q.275.3.525.625t.475.625q.375.525.688 1.125T21 15q0 .825-.587 1.413T19 17M2 24v-4h20v4z"},null,-1)])])}const mu=Se({name:"material-symbols-format-color-fill",render:fu}),gu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function bu(r,e){return z(),H("svg",gu,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h4.175q.275-.875 1.075-1.437T12 1q1 0 1.788.563T14.85 3H19q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5h-2v3H7V5H5zm7-14q.425 0 .713-.288T13 4t-.288-.712T12 3t-.712.288T11 4t.288.713T12 5"},null,-1)])])}const $n=Se({name:"material-symbols-content-paste",render:bu}),vu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function yu(r,e){return z(),H("svg",vu,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M8 16q.825 0 1.413-.587T10 14t-.587-1.412T8 12t-1.412.588T6 14t.588 1.413T8 16m8 0q.825 0 1.413-.587T18 14t-.587-1.412T16 12t-1.412.588T14 14t.588 1.413T16 16m-4-6q.825 0 1.413-.587T14 8t-.587-1.412T12 6t-1.412.588T10 8t.588 1.413T12 10m0 12q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"},null,-1)])])}const wu=Se({name:"material-symbols-group-work",render:yu}),xu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _u(r,e){return z(),H("svg",xu,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M6 22q-.825 0-1.412-.587T4 20V10q0-.825.588-1.412T6 8h1V6q0-2.075 1.463-3.537T12 1t3.538 1.463T17 6v2h1q.825 0 1.413.588T20 10v10q0 .825-.587 1.413T18 22zm6-5q.825 0 1.413-.587T14 15t-.587-1.412T12 13t-1.412.588T10 15t.588 1.413T12 17M9 8h6V6q0-1.25-.875-2.125T12 3t-2.125.875T9 6z"},null,-1)])])}const er=Se({name:"material-symbols-lock",render:_u}),ku={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Su(r,e){return z(),H("svg",ku,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M6 8h9V6q0-1.25-.875-2.125T12 3t-2.125.875T9 6H7q0-2.075 1.463-3.537T12 1t3.538 1.463T17 6v2h1q.825 0 1.413.588T20 10v10q0 .825-.587 1.413T18 22H6q-.825 0-1.412-.587T4 20V10q0-.825.588-1.412T6 8m6 9q.825 0 1.413-.587T14 15t-.587-1.412T12 13t-1.412.588T10 15t.588 1.413T12 17"},null,-1)])])}const Hi=Se({name:"material-symbols-lock-open",render:Su}),Cu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Eu(r,e){return z(),H("svg",Cu,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m12 15.375l-6-6l1.4-1.4l4.6 4.6l4.6-4.6l1.4 1.4z"},null,-1)])])}const In=Se({name:"material-symbols-expand-more",render:Eu});var Tu=nl();const Au=St(Tu);function Nt(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ns;function $u(){return Ns||(Ns=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(s,o,i){function c(y,x){if(!o[y]){if(!s[y]){var f=typeof Nt=="function"&&Nt;if(!x&&f)return f(y,!0);if(l)return l(y,!0);var k=new Error("Cannot find module '"+y+"'");throw k.code="MODULE_NOT_FOUND",k}var m=o[y]={exports:{}};s[y][0].call(m.exports,function(b){var g=s[y][1][b];return c(g||b)},m,m.exports,t,s,o,i)}return o[y].exports}for(var l=typeof Nt=="function"&&Nt,u=0;u<i.length;u++)c(i[u]);return c})({1:[function(t,s,o){var i=t("./utils"),c=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(u){for(var y,x,f,k,m,b,g,C=[],_=0,p=u.length,I=p,A=i.getTypeOf(u)!=="string";_<u.length;)I=p-_,f=A?(y=u[_++],x=_<p?u[_++]:0,_<p?u[_++]:0):(y=u.charCodeAt(_++),x=_<p?u.charCodeAt(_++):0,_<p?u.charCodeAt(_++):0),k=y>>2,m=(3&y)<<4|x>>4,b=1<I?(15&x)<<2|f>>6:64,g=2<I?63&f:64,C.push(l.charAt(k)+l.charAt(m)+l.charAt(b)+l.charAt(g));return C.join("")},o.decode=function(u){var y,x,f,k,m,b,g=0,C=0,_="data:";if(u.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var p,I=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&I--,u.charAt(u.length-2)===l.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=c.uint8array?new Uint8Array(0|I):new Array(0|I);g<u.length;)y=l.indexOf(u.charAt(g++))<<2|(k=l.indexOf(u.charAt(g++)))>>4,x=(15&k)<<4|(m=l.indexOf(u.charAt(g++)))>>2,f=(3&m)<<6|(b=l.indexOf(u.charAt(g++))),p[C++]=y,m!==64&&(p[C++]=x),b!==64&&(p[C++]=f);return p}},{"./support":30,"./utils":32}],2:[function(t,s,o){var i=t("./external"),c=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function y(x,f,k,m,b){this.compressedSize=x,this.uncompressedSize=f,this.crc32=k,this.compression=m,this.compressedContent=b}y.prototype={getContentWorker:function(){var x=new c(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return x.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),x},getCompressedWorker:function(){return new c(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(x,f,k){return x.pipe(new l).pipe(new u("uncompressedSize")).pipe(f.compressWorker(k)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},s.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,s,o){var i=t("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},o.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,s,o){var i=t("./utils"),c=(function(){for(var l,u=[],y=0;y<256;y++){l=y;for(var x=0;x<8;x++)l=1&l?3988292384^l>>>1:l>>>1;u[y]=l}return u})();s.exports=function(l,u){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?(function(y,x,f,k){var m=c,b=k+f;y^=-1;for(var g=k;g<b;g++)y=y>>>8^m[255&(y^x[g])];return-1^y})(0|u,l,l.length,0):(function(y,x,f,k){var m=c,b=k+f;y^=-1;for(var g=k;g<b;g++)y=y>>>8^m[255&(y^x.charCodeAt(g))];return-1^y})(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(t,s,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(t,s,o){var i=null;i=typeof Promise<"u"?Promise:t("lie"),s.exports={Promise:i}},{lie:37}],7:[function(t,s,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=t("pako"),l=t("./utils"),u=t("./stream/GenericWorker"),y=i?"uint8array":"array";function x(f,k){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=k,this.meta={}}o.magic="\b\0",l.inherits(x,u),x.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(y,f.data),!1)},x.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},x.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},x.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(k){f.push({data:k,meta:f.meta})}},o.compressWorker=function(f){return new x("Deflate",f)},o.uncompressWorker=function(){return new x("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,s,o){function i(m,b){var g,C="";for(g=0;g<b;g++)C+=String.fromCharCode(255&m),m>>>=8;return C}function c(m,b,g,C,_,p){var I,A,U=m.file,Y=m.compression,j=p!==y.utf8encode,O=l.transformTo("string",p(U.name)),F=l.transformTo("string",y.utf8encode(U.name)),oe=U.comment,K=l.transformTo("string",p(oe)),P=l.transformTo("string",y.utf8encode(oe)),q=F.length!==U.name.length,h=P.length!==oe.length,v="",Z="",J="",re=U.dir,L=U.date,W={crc32:0,compressedSize:0,uncompressedSize:0};b&&!g||(W.crc32=m.crc32,W.compressedSize=m.compressedSize,W.uncompressedSize=m.uncompressedSize);var $=0;b&&($|=8),j||!q&&!h||($|=2048);var T=0,te=0;re&&(T|=16),_==="UNIX"?(te=798,T|=(function(Q,me){var ve=Q;return Q||(ve=me?16893:33204),(65535&ve)<<16})(U.unixPermissions,re)):(te=20,T|=(function(Q){return 63&(Q||0)})(U.dosPermissions)),I=L.getUTCHours(),I<<=6,I|=L.getUTCMinutes(),I<<=5,I|=L.getUTCSeconds()/2,A=L.getUTCFullYear()-1980,A<<=4,A|=L.getUTCMonth()+1,A<<=5,A|=L.getUTCDate(),q&&(Z=i(1,1)+i(x(O),4)+F,v+="up"+i(Z.length,2)+Z),h&&(J=i(1,1)+i(x(K),4)+P,v+="uc"+i(J.length,2)+J);var G="";return G+=`
\0`,G+=i($,2),G+=Y.magic,G+=i(I,2),G+=i(A,2),G+=i(W.crc32,4),G+=i(W.compressedSize,4),G+=i(W.uncompressedSize,4),G+=i(O.length,2),G+=i(v.length,2),{fileRecord:f.LOCAL_FILE_HEADER+G+O+v,dirRecord:f.CENTRAL_FILE_HEADER+i(te,2)+G+i(K.length,2)+"\0\0\0\0"+i(T,4)+i(C,4)+O+v+K}}var l=t("../utils"),u=t("../stream/GenericWorker"),y=t("../utf8"),x=t("../crc32"),f=t("../signature");function k(m,b,g,C){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=g,this.encodeFileName=C,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(k,u),k.prototype.push=function(m){var b=m.meta.percent||0,g=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,u.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:g?(b+100*(g-C-1))/g:100}}))},k.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var b=this.streamFiles&&!m.file.dir;if(b){var g=c(m,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(m){this.accumulate=!1;var b=this.streamFiles&&!m.file.dir,g=c(m,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),b)this.push({data:(function(C){return f.DATA_DESCRIPTOR+i(C.crc32,4)+i(C.compressedSize,4)+i(C.uncompressedSize,4)})(m),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var m=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var g=this.bytesWritten-m,C=(function(_,p,I,A,U){var Y=l.transformTo("string",U(A));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(_,2)+i(_,2)+i(p,4)+i(I,4)+i(Y.length,2)+Y})(this.dirRecords.length,g,m,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(m){this._sources.push(m);var b=this;return m.on("data",function(g){b.processChunk(g)}),m.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),m.on("error",function(g){b.error(g)}),this},k.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(m){var b=this._sources;if(!u.prototype.error.call(this,m))return!1;for(var g=0;g<b.length;g++)try{b[g].error(m)}catch{}return!0},k.prototype.lock=function(){u.prototype.lock.call(this);for(var m=this._sources,b=0;b<m.length;b++)m[b].lock()},s.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,s,o){var i=t("../compressions"),c=t("./ZipFileWorker");o.generateWorker=function(l,u,y){var x=new c(u.streamFiles,y,u.platform,u.encodeFileName),f=0;try{l.forEach(function(k,m){f++;var b=(function(p,I){var A=p||I,U=i[A];if(!U)throw new Error(A+" is not a valid compression method !");return U})(m.options.compression,u.compression),g=m.options.compressionOptions||u.compressionOptions||{},C=m.dir,_=m.date;m._compressWorker(b,g).withStreamInfo("file",{name:k,dir:C,date:_,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(x)}),x.entriesCount=f}catch(k){x.error(k)}return x}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,s,o){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new i;for(var l in this)typeof this[l]!="function"&&(c[l]=this[l]);return c}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(c,l){return new i().loadAsync(c,l)},i.external=t("./external"),s.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,s,o){var i=t("./utils"),c=t("./external"),l=t("./utf8"),u=t("./zipEntries"),y=t("./stream/Crc32Probe"),x=t("./nodejsUtils");function f(k){return new c.Promise(function(m,b){var g=k.decompressed.getContentWorker().pipe(new y);g.on("error",function(C){b(C)}).on("end",function(){g.streamInfo.crc32!==k.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}s.exports=function(k,m){var b=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),x.isNode&&x.isStream(k)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",k,!0,m.optimizedBinaryString,m.base64).then(function(g){var C=new u(m);return C.load(g),C}).then(function(g){var C=[c.Promise.resolve(g)],_=g.files;if(m.checkCRC32)for(var p=0;p<_.length;p++)C.push(f(_[p]));return c.Promise.all(C)}).then(function(g){for(var C=g.shift(),_=C.files,p=0;p<_.length;p++){var I=_[p],A=I.fileNameStr,U=i.resolve(I.fileNameStr);b.file(U,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:m.createFolders}),I.dir||(b.file(U).unsafeOriginalName=A)}return C.zipComment.length&&(b.comment=C.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,s,o){var i=t("../utils"),c=t("../stream/GenericWorker");function l(u,y){c.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(y)}i.inherits(l,c),l.prototype._bindStream=function(u){var y=this;(this._stream=u).pause(),u.on("data",function(x){y.push({data:x,meta:{percent:0}})}).on("error",function(x){y.isPaused?this.generatedError=x:y.error(x)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},l.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,s,o){var i=t("readable-stream").Readable;function c(l,u,y){i.call(this,u),this._helper=l;var x=this;l.on("data",function(f,k){x.push(f)||x._helper.pause(),y&&y(k)}).on("error",function(f){x.emit("error",f)}).on("end",function(){x.push(null)})}t("../utils").inherits(c,i),c.prototype._read=function(){this._helper.resume()},s.exports=c},{"../utils":32,"readable-stream":16}],14:[function(t,s,o){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,c);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,c)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var c=new Buffer(i);return c.fill(0),c},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,s,o){function i(U,Y,j){var O,F=l.getTypeOf(Y),oe=l.extend(j||{},x);oe.date=oe.date||new Date,oe.compression!==null&&(oe.compression=oe.compression.toUpperCase()),typeof oe.unixPermissions=="string"&&(oe.unixPermissions=parseInt(oe.unixPermissions,8)),oe.unixPermissions&&16384&oe.unixPermissions&&(oe.dir=!0),oe.dosPermissions&&16&oe.dosPermissions&&(oe.dir=!0),oe.dir&&(U=_(U)),oe.createFolders&&(O=C(U))&&p.call(this,O,!0);var K=F==="string"&&oe.binary===!1&&oe.base64===!1;j&&j.binary!==void 0||(oe.binary=!K),(Y instanceof f&&Y.uncompressedSize===0||oe.dir||!Y||Y.length===0)&&(oe.base64=!1,oe.binary=!0,Y="",oe.compression="STORE",F="string");var P=null;P=Y instanceof f||Y instanceof u?Y:b.isNode&&b.isStream(Y)?new g(U,Y):l.prepareContent(U,Y,oe.binary,oe.optimizedBinaryString,oe.base64);var q=new k(U,P,oe);this.files[U]=q}var c=t("./utf8"),l=t("./utils"),u=t("./stream/GenericWorker"),y=t("./stream/StreamHelper"),x=t("./defaults"),f=t("./compressedObject"),k=t("./zipObject"),m=t("./generate"),b=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),C=function(U){U.slice(-1)==="/"&&(U=U.substring(0,U.length-1));var Y=U.lastIndexOf("/");return 0<Y?U.substring(0,Y):""},_=function(U){return U.slice(-1)!=="/"&&(U+="/"),U},p=function(U,Y){return Y=Y!==void 0?Y:x.createFolders,U=_(U),this.files[U]||i.call(this,U,null,{dir:!0,createFolders:Y}),this.files[U]};function I(U){return Object.prototype.toString.call(U)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(U){var Y,j,O;for(Y in this.files)O=this.files[Y],(j=Y.slice(this.root.length,Y.length))&&Y.slice(0,this.root.length)===this.root&&U(j,O)},filter:function(U){var Y=[];return this.forEach(function(j,O){U(j,O)&&Y.push(O)}),Y},file:function(U,Y,j){if(arguments.length!==1)return U=this.root+U,i.call(this,U,Y,j),this;if(I(U)){var O=U;return this.filter(function(oe,K){return!K.dir&&O.test(oe)})}var F=this.files[this.root+U];return F&&!F.dir?F:null},folder:function(U){if(!U)return this;if(I(U))return this.filter(function(F,oe){return oe.dir&&U.test(F)});var Y=this.root+U,j=p.call(this,Y),O=this.clone();return O.root=j.name,O},remove:function(U){U=this.root+U;var Y=this.files[U];if(Y||(U.slice(-1)!=="/"&&(U+="/"),Y=this.files[U]),Y&&!Y.dir)delete this.files[U];else for(var j=this.filter(function(F,oe){return oe.name.slice(0,U.length)===U}),O=0;O<j.length;O++)delete this.files[j[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(U){var Y,j={};try{if((j=l.extend(U||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");l.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var O=j.comment||this.comment||"";Y=m.generateWorker(this,j,O)}catch(F){(Y=new u("error")).error(F)}return new y(Y,j.type||"string",j.mimeType)},generateAsync:function(U,Y){return this.generateInternalStream(U).accumulate(Y)},generateNodeStream:function(U,Y){return(U=U||{}).type||(U.type="nodebuffer"),this.generateInternalStream(U).toNodejsStream(Y)}};s.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,s,o){s.exports=t("stream")},{stream:void 0}],17:[function(t,s,o){var i=t("./DataReader");function c(l){i.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}t("../utils").inherits(c,i),c.prototype.byteAt=function(l){return this.data[this.zero+l]},c.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),y=l.charCodeAt(1),x=l.charCodeAt(2),f=l.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===u&&this.data[k+1]===y&&this.data[k+2]===x&&this.data[k+3]===f)return k-this.zero;return-1},c.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),y=l.charCodeAt(1),x=l.charCodeAt(2),f=l.charCodeAt(3),k=this.readData(4);return u===k[0]&&y===k[1]&&x===k[2]&&f===k[3]},c.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},s.exports=c},{"../utils":32,"./DataReader":18}],18:[function(t,s,o){var i=t("../utils");function c(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,y=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)y=(y<<8)+this.byteAt(u);return this.index+=l,y},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},s.exports=c},{"../utils":32}],19:[function(t,s,o){var i=t("./Uint8ArrayReader");function c(l){i.call(this,l)}t("../utils").inherits(c,i),c.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},s.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,s,o){var i=t("./DataReader");function c(l){i.call(this,l)}t("../utils").inherits(c,i),c.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},c.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},c.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},c.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},s.exports=c},{"../utils":32,"./DataReader":18}],21:[function(t,s,o){var i=t("./ArrayReader");function c(l){i.call(this,l)}t("../utils").inherits(c,i),c.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},s.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(t,s,o){var i=t("../utils"),c=t("../support"),l=t("./ArrayReader"),u=t("./StringReader"),y=t("./NodeBufferReader"),x=t("./Uint8ArrayReader");s.exports=function(f){var k=i.getTypeOf(f);return i.checkSupport(k),k!=="string"||c.uint8array?k==="nodebuffer"?new y(f):c.uint8array?new x(i.transformTo("uint8array",f)):new l(i.transformTo("array",f)):new u(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,s,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,s,o){var i=t("./GenericWorker"),c=t("../utils");function l(u){i.call(this,"ConvertWorker to "+u),this.destType=u}c.inherits(l,i),l.prototype.processChunk=function(u){this.push({data:c.transformTo(this.destType,u.data),meta:u.meta})},s.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,s,o){var i=t("./GenericWorker"),c=t("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,i),l.prototype.processChunk=function(u){this.streamInfo.crc32=c(u.data,this.streamInfo.crc32||0),this.push(u)},s.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,s,o){var i=t("../utils"),c=t("./GenericWorker");function l(u){c.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(l,c),l.prototype.processChunk=function(u){if(u){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+u.data.length}c.prototype.processChunk.call(this,u)},s.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,s,o){var i=t("../utils"),c=t("./GenericWorker");function l(u){c.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(x){y.dataIsReady=!0,y.data=x,y.max=x&&x.length||0,y.type=i.getTypeOf(x),y.isPaused||y._tickAndRepeat()},function(x){y.error(x)})}i.inherits(l,c),l.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,y);break;case"uint8array":u=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":u=this.data.slice(this.index,y)}return this.index=y,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,s,o){function i(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,l){return this._listeners[c].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,l){if(this._listeners[c])for(var u=0;u<this._listeners[c].length;u++)this._listeners[c][u].call(this,l)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var l=this;return c.on("data",function(u){l.processChunk(u)}),c.on("end",function(){l.end()}),c.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,l){return this.extraStreamInfo[c]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},s.exports=i},{}],29:[function(t,s,o){var i=t("../utils"),c=t("./ConvertWorker"),l=t("./GenericWorker"),u=t("../base64"),y=t("../support"),x=t("../external"),f=null;if(y.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function k(b,g){return new x.Promise(function(C,_){var p=[],I=b._internalType,A=b._outputType,U=b._mimeType;b.on("data",function(Y,j){p.push(Y),g&&g(j)}).on("error",function(Y){p=[],_(Y)}).on("end",function(){try{var Y=(function(j,O,F){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",O),F);case"base64":return u.encode(O);default:return i.transformTo(j,O)}})(A,(function(j,O){var F,oe=0,K=null,P=0;for(F=0;F<O.length;F++)P+=O[F].length;switch(j){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for(K=new Uint8Array(P),F=0;F<O.length;F++)K.set(O[F],oe),oe+=O[F].length;return K;case"nodebuffer":return Buffer.concat(O);default:throw new Error("concat : unsupported type '"+j+"'")}})(I,p),U);C(Y)}catch(j){_(j)}p=[]}).resume()})}function m(b,g,C){var _=g;switch(g){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=g,this._mimeType=C,i.checkSupport(_),this._worker=b.pipe(new c(_)),b.lock()}catch(p){this._worker=new l("error"),this._worker.error(p)}}m.prototype={accumulate:function(b){return k(this,b)},on:function(b,g){var C=this;return b==="data"?this._worker.on(b,function(_){g.call(C,_.data,_.meta)}):this._worker.on(b,function(){i.delay(g,arguments,C)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},b)}},s.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,s,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var i=new ArrayBuffer(0);try{o.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(i),o.blob=c.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!t("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(t,s,o){for(var i=t("./utils"),c=t("./support"),l=t("./nodejsUtils"),u=t("./stream/GenericWorker"),y=new Array(256),x=0;x<256;x++)y[x]=252<=x?6:248<=x?5:240<=x?4:224<=x?3:192<=x?2:1;y[254]=y[254]=1;function f(){u.call(this,"utf-8 decode"),this.leftOver=null}function k(){u.call(this,"utf-8 encode")}o.utf8encode=function(m){return c.nodebuffer?l.newBufferFrom(m,"utf-8"):(function(b){var g,C,_,p,I,A=b.length,U=0;for(p=0;p<A;p++)(64512&(C=b.charCodeAt(p)))==55296&&p+1<A&&(64512&(_=b.charCodeAt(p+1)))==56320&&(C=65536+(C-55296<<10)+(_-56320),p++),U+=C<128?1:C<2048?2:C<65536?3:4;for(g=c.uint8array?new Uint8Array(U):new Array(U),p=I=0;I<U;p++)(64512&(C=b.charCodeAt(p)))==55296&&p+1<A&&(64512&(_=b.charCodeAt(p+1)))==56320&&(C=65536+(C-55296<<10)+(_-56320),p++),C<128?g[I++]=C:(C<2048?g[I++]=192|C>>>6:(C<65536?g[I++]=224|C>>>12:(g[I++]=240|C>>>18,g[I++]=128|C>>>12&63),g[I++]=128|C>>>6&63),g[I++]=128|63&C);return g})(m)},o.utf8decode=function(m){return c.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):(function(b){var g,C,_,p,I=b.length,A=new Array(2*I);for(g=C=0;g<I;)if((_=b[g++])<128)A[C++]=_;else if(4<(p=y[_]))A[C++]=65533,g+=p-1;else{for(_&=p===2?31:p===3?15:7;1<p&&g<I;)_=_<<6|63&b[g++],p--;1<p?A[C++]=65533:_<65536?A[C++]=_:(_-=65536,A[C++]=55296|_>>10&1023,A[C++]=56320|1023&_)}return A.length!==C&&(A.subarray?A=A.subarray(0,C):A.length=C),i.applyFromCharCode(A)})(m=i.transformTo(c.uint8array?"uint8array":"array",m))},i.inherits(f,u),f.prototype.processChunk=function(m){var b=i.transformTo(c.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var g=b;(b=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),b.set(g,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var C=(function(p,I){var A;for((I=I||p.length)>p.length&&(I=p.length),A=I-1;0<=A&&(192&p[A])==128;)A--;return A<0||A===0?I:A+y[p[A]]>I?A:I})(b),_=b;C!==b.length&&(c.uint8array?(_=b.subarray(0,C),this.leftOver=b.subarray(C,b.length)):(_=b.slice(0,C),this.leftOver=b.slice(C,b.length))),this.push({data:o.utf8decode(_),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=f,i.inherits(k,u),k.prototype.processChunk=function(m){this.push({data:o.utf8encode(m.data),meta:m.meta})},o.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,s,o){var i=t("./support"),c=t("./base64"),l=t("./nodejsUtils"),u=t("./external");function y(g){return g}function x(g,C){for(var _=0;_<g.length;++_)C[_]=255&g.charCodeAt(_);return C}t("setimmediate"),o.newBlob=function(g,C){o.checkSupport("blob");try{return new Blob([g],{type:C})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(g),_.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,C,_){var p=[],I=0,A=g.length;if(A<=_)return String.fromCharCode.apply(null,g);for(;I<A;)C==="array"||C==="nodebuffer"?p.push(String.fromCharCode.apply(null,g.slice(I,Math.min(I+_,A)))):p.push(String.fromCharCode.apply(null,g.subarray(I,Math.min(I+_,A)))),I+=_;return p.join("")},stringifyByChar:function(g){for(var C="",_=0;_<g.length;_++)C+=String.fromCharCode(g[_]);return C},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function k(g){var C=65536,_=o.getTypeOf(g),p=!0;if(_==="uint8array"?p=f.applyCanBeUsed.uint8array:_==="nodebuffer"&&(p=f.applyCanBeUsed.nodebuffer),p)for(;1<C;)try{return f.stringifyByChunk(g,_,C)}catch{C=Math.floor(C/2)}return f.stringifyByChar(g)}function m(g,C){for(var _=0;_<g.length;_++)C[_]=g[_];return C}o.applyFromCharCode=k;var b={};b.string={string:y,array:function(g){return x(g,new Array(g.length))},arraybuffer:function(g){return b.string.uint8array(g).buffer},uint8array:function(g){return x(g,new Uint8Array(g.length))},nodebuffer:function(g){return x(g,l.allocBuffer(g.length))}},b.array={string:k,array:y,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return l.newBufferFrom(g)}},b.arraybuffer={string:function(g){return k(new Uint8Array(g))},array:function(g){return m(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:y,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return l.newBufferFrom(new Uint8Array(g))}},b.uint8array={string:k,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:y,nodebuffer:function(g){return l.newBufferFrom(g)}},b.nodebuffer={string:k,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return b.nodebuffer.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:y},o.transformTo=function(g,C){if(C=C||"",!g)return C;o.checkSupport(g);var _=o.getTypeOf(C);return b[_][g](C)},o.resolve=function(g){for(var C=g.split("/"),_=[],p=0;p<C.length;p++){var I=C[p];I==="."||I===""&&p!==0&&p!==C.length-1||(I===".."?_.pop():_.push(I))}return _.join("/")},o.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(g)?"nodebuffer":i.uint8array&&g instanceof Uint8Array?"uint8array":i.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(g){if(!i[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(g){var C,_,p="";for(_=0;_<(g||"").length;_++)p+="\\x"+((C=g.charCodeAt(_))<16?"0":"")+C.toString(16).toUpperCase();return p},o.delay=function(g,C,_){setImmediate(function(){g.apply(_||null,C||[])})},o.inherits=function(g,C){function _(){}_.prototype=C.prototype,g.prototype=new _},o.extend=function(){var g,C,_={};for(g=0;g<arguments.length;g++)for(C in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],C)&&_[C]===void 0&&(_[C]=arguments[g][C]);return _},o.prepareContent=function(g,C,_,p,I){return u.Promise.resolve(C).then(function(A){return i.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(U,Y){var j=new FileReader;j.onload=function(O){U(O.target.result)},j.onerror=function(O){Y(O.target.error)},j.readAsArrayBuffer(A)}):A}).then(function(A){var U=o.getTypeOf(A);return U?(U==="arraybuffer"?A=o.transformTo("uint8array",A):U==="string"&&(I?A=c.decode(A):_&&p!==!0&&(A=(function(Y){return x(Y,i.uint8array?new Uint8Array(Y.length):new Array(Y.length))})(A))),A):u.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,s,o){var i=t("./reader/readerFor"),c=t("./utils"),l=t("./signature"),u=t("./zipEntry"),y=t("./support");function x(f){this.files=[],this.loadOptions=f}x.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(k)+", expected "+c.pretty(f)+")")}},isSignature:function(f,k){var m=this.reader.index;this.reader.setIndex(f);var b=this.reader.readString(4)===k;return this.reader.setIndex(m),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),k=y.uint8array?"uint8array":"array",m=c.transformTo(k,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,k,m,b=this.zip64EndOfCentralSize-44;0<b;)f=this.reader.readInt(2),k=this.reader.readInt(4),m=this.reader.readData(k),this.zip64ExtensibleData[f]={id:f,length:k,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,k;for(f=0;f<this.files.length;f++)k=this.files[f],this.reader.setIndex(k.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(f=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var k=f;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var b=k-m;if(0<b)this.isSignature(k,l.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=x},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,s,o){var i=t("./reader/readerFor"),c=t("./utils"),l=t("./compressedObject"),u=t("./crc32"),y=t("./utf8"),x=t("./compressions"),f=t("./support");function k(m,b){this.options=m,this.loadOptions=b}k.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var b,g;if(m.skip(22),this.fileNameLength=m.readInt(2),g=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=(function(C){for(var _ in x)if(Object.prototype.hasOwnProperty.call(x,_)&&x[_].magic===C)return x[_];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,b,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var b=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(b),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var b,g,C,_=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<_;)b=m.readInt(2),g=m.readInt(2),C=m.readData(g),this.extraFields[b]={id:b,length:g,value:C};m.setIndex(_)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var g=c.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var _=c.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var b=i(m.value);return b.readInt(1)!==1||u(this.fileName)!==b.readInt(4)?null:y.utf8decode(b.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var b=i(m.value);return b.readInt(1)!==1||u(this.fileComment)!==b.readInt(4)?null:y.utf8decode(b.readData(m.length-5))}return null}},s.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,s,o){function i(b,g,C){this.name=b,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=g,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var c=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),u=t("./utf8"),y=t("./compressedObject"),x=t("./stream/GenericWorker");i.prototype={internalStream:function(b){var g=null,C="string";try{if(!b)throw new Error("No output type specified.");var _=(C=b.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),g=this._decompressWorker();var p=!this._dataBinary;p&&!_&&(g=g.pipe(new u.Utf8EncodeWorker)),!p&&_&&(g=g.pipe(new u.Utf8DecodeWorker))}catch(I){(g=new x("error")).error(I)}return new c(g,C,"")},async:function(b,g){return this.internalStream(b).accumulate(g)},nodeStream:function(b,g){return this.internalStream(b||"nodebuffer").toNodejsStream(g)},_compressWorker:function(b,g){if(this._data instanceof y&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new u.Utf8EncodeWorker)),y.createWorkerFrom(C,b,g)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof x?this._data:new l(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)i.prototype[f[m]]=k;s.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,s,o){(function(i){var c,l,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var y=0,x=new u(b),f=i.document.createTextNode("");x.observe(f,{characterData:!0}),c=function(){f.data=y=++y%2}}else if(i.setImmediate||i.MessageChannel===void 0)c="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var g=i.document.createElement("script");g.onreadystatechange=function(){b(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},i.document.documentElement.appendChild(g)}:function(){setTimeout(b,0)};else{var k=new i.MessageChannel;k.port1.onmessage=b,c=function(){k.port2.postMessage(0)}}var m=[];function b(){var g,C;l=!0;for(var _=m.length;_;){for(C=m,m=[],g=-1;++g<_;)C[g]();_=m.length}l=!1}s.exports=function(g){m.push(g)!==1||l||c()}}).call(this,typeof ut<"u"?ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,s,o){var i=t("immediate");function c(){}var l={},u=["REJECTED"],y=["FULFILLED"],x=["PENDING"];function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=x,this.queue=[],this.outcome=void 0,_!==c&&g(this,_)}function k(_,p,I){this.promise=_,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function m(_,p,I){i(function(){var A;try{A=p(I)}catch(U){return l.reject(_,U)}A===_?l.reject(_,new TypeError("Cannot resolve promise with itself")):l.resolve(_,A)})}function b(_){var p=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof p=="function")return function(){p.apply(_,arguments)}}function g(_,p){var I=!1;function A(j){I||(I=!0,l.reject(_,j))}function U(j){I||(I=!0,l.resolve(_,j))}var Y=C(function(){p(U,A)});Y.status==="error"&&A(Y.value)}function C(_,p){var I={};try{I.value=_(p),I.status="success"}catch(A){I.status="error",I.value=A}return I}(s.exports=f).prototype.finally=function(_){if(typeof _!="function")return this;var p=this.constructor;return this.then(function(I){return p.resolve(_()).then(function(){return I})},function(I){return p.resolve(_()).then(function(){throw I})})},f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,p){if(typeof _!="function"&&this.state===y||typeof p!="function"&&this.state===u)return this;var I=new this.constructor(c);return this.state!==x?m(I,this.state===y?_:p,this.outcome):this.queue.push(new k(I,_,p)),I},k.prototype.callFulfilled=function(_){l.resolve(this.promise,_)},k.prototype.otherCallFulfilled=function(_){m(this.promise,this.onFulfilled,_)},k.prototype.callRejected=function(_){l.reject(this.promise,_)},k.prototype.otherCallRejected=function(_){m(this.promise,this.onRejected,_)},l.resolve=function(_,p){var I=C(b,p);if(I.status==="error")return l.reject(_,I.value);var A=I.value;if(A)g(_,A);else{_.state=y,_.outcome=p;for(var U=-1,Y=_.queue.length;++U<Y;)_.queue[U].callFulfilled(p)}return _},l.reject=function(_,p){_.state=u,_.outcome=p;for(var I=-1,A=_.queue.length;++I<A;)_.queue[I].callRejected(p);return _},f.resolve=function(_){return _ instanceof this?_:l.resolve(new this(c),_)},f.reject=function(_){var p=new this(c);return l.reject(p,_)},f.all=function(_){var p=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=_.length,A=!1;if(!I)return this.resolve([]);for(var U=new Array(I),Y=0,j=-1,O=new this(c);++j<I;)F(_[j],j);return O;function F(oe,K){p.resolve(oe).then(function(P){U[K]=P,++Y!==I||A||(A=!0,l.resolve(O,U))},function(P){A||(A=!0,l.reject(O,P))})}},f.race=function(_){var p=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=_.length,A=!1;if(!I)return this.resolve([]);for(var U=-1,Y=new this(c);++U<I;)j=_[U],p.resolve(j).then(function(O){A||(A=!0,l.resolve(Y,O))},function(O){A||(A=!0,l.reject(Y,O))});var j;return Y}},{immediate:36}],38:[function(t,s,o){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),s.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,s,o){var i=t("./zlib/deflate"),c=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),y=t("./zlib/zstream"),x=Object.prototype.toString,f=0,k=-1,m=0,b=8;function g(_){if(!(this instanceof g))return new g(_);this.options=c.assign({level:k,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},_||{});var p=this.options;p.raw&&0<p.windowBits?p.windowBits=-p.windowBits:p.gzip&&0<p.windowBits&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var I=i.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(I!==f)throw new Error(u[I]);if(p.header&&i.deflateSetHeader(this.strm,p.header),p.dictionary){var A;if(A=typeof p.dictionary=="string"?l.string2buf(p.dictionary):x.call(p.dictionary)==="[object ArrayBuffer]"?new Uint8Array(p.dictionary):p.dictionary,(I=i.deflateSetDictionary(this.strm,A))!==f)throw new Error(u[I]);this._dict_set=!0}}function C(_,p){var I=new g(p);if(I.push(_,!0),I.err)throw I.msg||u[I.err];return I.result}g.prototype.push=function(_,p){var I,A,U=this.strm,Y=this.options.chunkSize;if(this.ended)return!1;A=p===~~p?p:p===!0?4:0,typeof _=="string"?U.input=l.string2buf(_):x.call(_)==="[object ArrayBuffer]"?U.input=new Uint8Array(_):U.input=_,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new c.Buf8(Y),U.next_out=0,U.avail_out=Y),(I=i.deflate(U,A))!==1&&I!==f)return this.onEnd(I),!(this.ended=!0);U.avail_out!==0&&(U.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(c.shrinkBuf(U.output,U.next_out))):this.onData(c.shrinkBuf(U.output,U.next_out)))}while((0<U.avail_in||U.avail_out===0)&&I!==1);return A===4?(I=i.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===f):A!==2||(this.onEnd(f),!(U.avail_out=0))},g.prototype.onData=function(_){this.chunks.push(_)},g.prototype.onEnd=function(_){_===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},o.Deflate=g,o.deflate=C,o.deflateRaw=function(_,p){return(p=p||{}).raw=!0,C(_,p)},o.gzip=function(_,p){return(p=p||{}).gzip=!0,C(_,p)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,s,o){var i=t("./zlib/inflate"),c=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/constants"),y=t("./zlib/messages"),x=t("./zlib/zstream"),f=t("./zlib/gzheader"),k=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},g||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||g&&g.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&(15&C.windowBits)==0&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new x,this.strm.avail_out=0;var _=i.inflateInit2(this.strm,C.windowBits);if(_!==u.Z_OK)throw new Error(y[_]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function b(g,C){var _=new m(C);if(_.push(g,!0),_.err)throw _.msg||y[_.err];return _.result}m.prototype.push=function(g,C){var _,p,I,A,U,Y,j=this.strm,O=this.options.chunkSize,F=this.options.dictionary,oe=!1;if(this.ended)return!1;p=C===~~C?C:C===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof g=="string"?j.input=l.binstring2buf(g):k.call(g)==="[object ArrayBuffer]"?j.input=new Uint8Array(g):j.input=g,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new c.Buf8(O),j.next_out=0,j.avail_out=O),(_=i.inflate(j,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&F&&(Y=typeof F=="string"?l.string2buf(F):k.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,_=i.inflateSetDictionary(this.strm,Y)),_===u.Z_BUF_ERROR&&oe===!0&&(_=u.Z_OK,oe=!1),_!==u.Z_STREAM_END&&_!==u.Z_OK)return this.onEnd(_),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&_!==u.Z_STREAM_END&&(j.avail_in!==0||p!==u.Z_FINISH&&p!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=l.utf8border(j.output,j.next_out),A=j.next_out-I,U=l.buf2string(j.output,I),j.next_out=A,j.avail_out=O-A,A&&c.arraySet(j.output,j.output,I,A,0),this.onData(U)):this.onData(c.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(oe=!0)}while((0<j.avail_in||j.avail_out===0)&&_!==u.Z_STREAM_END);return _===u.Z_STREAM_END&&(p=u.Z_FINISH),p===u.Z_FINISH?(_=i.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===u.Z_OK):p!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(j.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},o.Inflate=m,o.inflate=b,o.inflateRaw=function(g,C){return(C=C||{}).raw=!0,b(g,C)},o.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,s,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(u){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var x=y.shift();if(x){if(typeof x!="object")throw new TypeError(x+"must be non-object");for(var f in x)x.hasOwnProperty(f)&&(u[f]=x[f])}}return u},o.shrinkBuf=function(u,y){return u.length===y?u:u.subarray?u.subarray(0,y):(u.length=y,u)};var c={arraySet:function(u,y,x,f,k){if(y.subarray&&u.subarray)u.set(y.subarray(x,x+f),k);else for(var m=0;m<f;m++)u[k+m]=y[x+m]},flattenChunks:function(u){var y,x,f,k,m,b;for(y=f=0,x=u.length;y<x;y++)f+=u[y].length;for(b=new Uint8Array(f),y=k=0,x=u.length;y<x;y++)m=u[y],b.set(m,k),k+=m.length;return b}},l={arraySet:function(u,y,x,f,k){for(var m=0;m<f;m++)u[k+m]=y[x+m]},flattenChunks:function(u){return[].concat.apply([],u)}};o.setTyped=function(u){u?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,c)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,l))},o.setTyped(i)},{}],42:[function(t,s,o){var i=t("./common"),c=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new i.Buf8(256),y=0;y<256;y++)u[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function x(f,k){if(k<65537&&(f.subarray&&l||!f.subarray&&c))return String.fromCharCode.apply(null,i.shrinkBuf(f,k));for(var m="",b=0;b<k;b++)m+=String.fromCharCode(f[b]);return m}u[254]=u[254]=1,o.string2buf=function(f){var k,m,b,g,C,_=f.length,p=0;for(g=0;g<_;g++)(64512&(m=f.charCodeAt(g)))==55296&&g+1<_&&(64512&(b=f.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),g++),p+=m<128?1:m<2048?2:m<65536?3:4;for(k=new i.Buf8(p),g=C=0;C<p;g++)(64512&(m=f.charCodeAt(g)))==55296&&g+1<_&&(64512&(b=f.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),g++),m<128?k[C++]=m:(m<2048?k[C++]=192|m>>>6:(m<65536?k[C++]=224|m>>>12:(k[C++]=240|m>>>18,k[C++]=128|m>>>12&63),k[C++]=128|m>>>6&63),k[C++]=128|63&m);return k},o.buf2binstring=function(f){return x(f,f.length)},o.binstring2buf=function(f){for(var k=new i.Buf8(f.length),m=0,b=k.length;m<b;m++)k[m]=f.charCodeAt(m);return k},o.buf2string=function(f,k){var m,b,g,C,_=k||f.length,p=new Array(2*_);for(m=b=0;m<_;)if((g=f[m++])<128)p[b++]=g;else if(4<(C=u[g]))p[b++]=65533,m+=C-1;else{for(g&=C===2?31:C===3?15:7;1<C&&m<_;)g=g<<6|63&f[m++],C--;1<C?p[b++]=65533:g<65536?p[b++]=g:(g-=65536,p[b++]=55296|g>>10&1023,p[b++]=56320|1023&g)}return x(p,b)},o.utf8border=function(f,k){var m;for((k=k||f.length)>f.length&&(k=f.length),m=k-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?k:m+u[f[m]]>k?m:k}},{"./common":41}],43:[function(t,s,o){s.exports=function(i,c,l,u){for(var y=65535&i|0,x=i>>>16&65535|0,f=0;l!==0;){for(l-=f=2e3<l?2e3:l;x=x+(y=y+c[u++]|0)|0,--f;);y%=65521,x%=65521}return y|x<<16|0}},{}],44:[function(t,s,o){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,s,o){var i=(function(){for(var c,l=[],u=0;u<256;u++){c=u;for(var y=0;y<8;y++)c=1&c?3988292384^c>>>1:c>>>1;l[u]=c}return l})();s.exports=function(c,l,u,y){var x=i,f=y+u;c^=-1;for(var k=y;k<f;k++)c=c>>>8^x[255&(c^l[k])];return-1^c}},{}],46:[function(t,s,o){var i,c=t("../utils/common"),l=t("./trees"),u=t("./adler32"),y=t("./crc32"),x=t("./messages"),f=0,k=4,m=0,b=-2,g=-1,C=4,_=2,p=8,I=9,A=286,U=30,Y=19,j=2*A+1,O=15,F=3,oe=258,K=oe+F+1,P=42,q=113,h=1,v=2,Z=3,J=4;function re(d,B){return d.msg=x[B],B}function L(d){return(d<<1)-(4<d?9:0)}function W(d){for(var B=d.length;0<=--B;)d[B]=0}function $(d){var B=d.state,R=B.pending;R>d.avail_out&&(R=d.avail_out),R!==0&&(c.arraySet(d.output,B.pending_buf,B.pending_out,R,d.next_out),d.next_out+=R,B.pending_out+=R,d.total_out+=R,d.avail_out-=R,B.pending-=R,B.pending===0&&(B.pending_out=0))}function T(d,B){l._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,B),d.block_start=d.strstart,$(d.strm)}function te(d,B){d.pending_buf[d.pending++]=B}function G(d,B){d.pending_buf[d.pending++]=B>>>8&255,d.pending_buf[d.pending++]=255&B}function Q(d,B){var R,w,S=d.max_chain_length,N=d.strstart,M=d.prev_length,X=d.nice_match,D=d.strstart>d.w_size-K?d.strstart-(d.w_size-K):0,ne=d.window,he=d.w_mask,ce=d.prev,we=d.strstart+oe,ie=ne[N+M-1],V=ne[N+M];d.prev_length>=d.good_match&&(S>>=2),X>d.lookahead&&(X=d.lookahead);do if(ne[(R=B)+M]===V&&ne[R+M-1]===ie&&ne[R]===ne[N]&&ne[++R]===ne[N+1]){N+=2,R++;do;while(ne[++N]===ne[++R]&&ne[++N]===ne[++R]&&ne[++N]===ne[++R]&&ne[++N]===ne[++R]&&ne[++N]===ne[++R]&&ne[++N]===ne[++R]&&ne[++N]===ne[++R]&&ne[++N]===ne[++R]&&N<we);if(w=oe-(we-N),N=we-oe,M<w){if(d.match_start=B,X<=(M=w))break;ie=ne[N+M-1],V=ne[N+M]}}while((B=ce[B&he])>D&&--S!=0);return M<=d.lookahead?M:d.lookahead}function me(d){var B,R,w,S,N,M,X,D,ne,he,ce=d.w_size;do{if(S=d.window_size-d.lookahead-d.strstart,d.strstart>=ce+(ce-K)){for(c.arraySet(d.window,d.window,ce,ce,0),d.match_start-=ce,d.strstart-=ce,d.block_start-=ce,B=R=d.hash_size;w=d.head[--B],d.head[B]=ce<=w?w-ce:0,--R;);for(B=R=ce;w=d.prev[--B],d.prev[B]=ce<=w?w-ce:0,--R;);S+=ce}if(d.strm.avail_in===0)break;if(M=d.strm,X=d.window,D=d.strstart+d.lookahead,ne=S,he=void 0,he=M.avail_in,ne<he&&(he=ne),R=he===0?0:(M.avail_in-=he,c.arraySet(X,M.input,M.next_in,he,D),M.state.wrap===1?M.adler=u(M.adler,X,he,D):M.state.wrap===2&&(M.adler=y(M.adler,X,he,D)),M.next_in+=he,M.total_in+=he,he),d.lookahead+=R,d.lookahead+d.insert>=F)for(N=d.strstart-d.insert,d.ins_h=d.window[N],d.ins_h=(d.ins_h<<d.hash_shift^d.window[N+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[N+F-1])&d.hash_mask,d.prev[N&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=N,N++,d.insert--,!(d.lookahead+d.insert<F)););}while(d.lookahead<K&&d.strm.avail_in!==0)}function ve(d,B){for(var R,w;;){if(d.lookahead<K){if(me(d),d.lookahead<K&&B===f)return h;if(d.lookahead===0)break}if(R=0,d.lookahead>=F&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+F-1])&d.hash_mask,R=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),R!==0&&d.strstart-R<=d.w_size-K&&(d.match_length=Q(d,R)),d.match_length>=F)if(w=l._tr_tally(d,d.strstart-d.match_start,d.match_length-F),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=F){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+F-1])&d.hash_mask,R=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,--d.match_length!=0;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else w=l._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(w&&(T(d,!1),d.strm.avail_out===0))return h}return d.insert=d.strstart<F-1?d.strstart:F-1,B===k?(T(d,!0),d.strm.avail_out===0?Z:J):d.last_lit&&(T(d,!1),d.strm.avail_out===0)?h:v}function de(d,B){for(var R,w,S;;){if(d.lookahead<K){if(me(d),d.lookahead<K&&B===f)return h;if(d.lookahead===0)break}if(R=0,d.lookahead>=F&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+F-1])&d.hash_mask,R=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=F-1,R!==0&&d.prev_length<d.max_lazy_match&&d.strstart-R<=d.w_size-K&&(d.match_length=Q(d,R),d.match_length<=5&&(d.strategy===1||d.match_length===F&&4096<d.strstart-d.match_start)&&(d.match_length=F-1)),d.prev_length>=F&&d.match_length<=d.prev_length){for(S=d.strstart+d.lookahead-F,w=l._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-F),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=S&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+F-1])&d.hash_mask,R=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),--d.prev_length!=0;);if(d.match_available=0,d.match_length=F-1,d.strstart++,w&&(T(d,!1),d.strm.avail_out===0))return h}else if(d.match_available){if((w=l._tr_tally(d,0,d.window[d.strstart-1]))&&T(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return h}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(w=l._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<F-1?d.strstart:F-1,B===k?(T(d,!0),d.strm.avail_out===0?Z:J):d.last_lit&&(T(d,!1),d.strm.avail_out===0)?h:v}function _e(d,B,R,w,S){this.good_length=d,this.max_lazy=B,this.nice_length=R,this.max_chain=w,this.func=S}function ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*j),this.dyn_dtree=new c.Buf16(2*(2*U+1)),this.bl_tree=new c.Buf16(2*(2*Y+1)),W(this.dyn_ltree),W(this.dyn_dtree),W(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(O+1),this.heap=new c.Buf16(2*A+1),W(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*A+1),W(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ae(d){var B;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=_,(B=d.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?P:q,d.adler=B.wrap===2?0:1,B.last_flush=f,l._tr_init(B),m):re(d,b)}function le(d){var B=ae(d);return B===m&&(function(R){R.window_size=2*R.w_size,W(R.head),R.max_lazy_match=i[R.level].max_lazy,R.good_match=i[R.level].good_length,R.nice_match=i[R.level].nice_length,R.max_chain_length=i[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=F-1,R.match_available=0,R.ins_h=0})(d.state),B}function pe(d,B,R,w,S,N){if(!d)return b;var M=1;if(B===g&&(B=6),w<0?(M=0,w=-w):15<w&&(M=2,w-=16),S<1||I<S||R!==p||w<8||15<w||B<0||9<B||N<0||C<N)return re(d,b);w===8&&(w=9);var X=new ke;return(d.state=X).strm=d,X.wrap=M,X.gzhead=null,X.w_bits=w,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=S+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+F-1)/F),X.window=new c.Buf8(2*X.w_size),X.head=new c.Buf16(X.hash_size),X.prev=new c.Buf16(X.w_size),X.lit_bufsize=1<<S+6,X.pending_buf_size=4*X.lit_bufsize,X.pending_buf=new c.Buf8(X.pending_buf_size),X.d_buf=1*X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=B,X.strategy=N,X.method=R,le(d)}i=[new _e(0,0,0,0,function(d,B){var R=65535;for(R>d.pending_buf_size-5&&(R=d.pending_buf_size-5);;){if(d.lookahead<=1){if(me(d),d.lookahead===0&&B===f)return h;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var w=d.block_start+R;if((d.strstart===0||d.strstart>=w)&&(d.lookahead=d.strstart-w,d.strstart=w,T(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-K&&(T(d,!1),d.strm.avail_out===0))return h}return d.insert=0,B===k?(T(d,!0),d.strm.avail_out===0?Z:J):(d.strstart>d.block_start&&(T(d,!1),d.strm.avail_out),h)}),new _e(4,4,8,4,ve),new _e(4,5,16,8,ve),new _e(4,6,32,32,ve),new _e(4,4,16,16,de),new _e(8,16,32,32,de),new _e(8,16,128,128,de),new _e(8,32,128,256,de),new _e(32,128,258,1024,de),new _e(32,258,258,4096,de)],o.deflateInit=function(d,B){return pe(d,B,p,15,8,0)},o.deflateInit2=pe,o.deflateReset=le,o.deflateResetKeep=ae,o.deflateSetHeader=function(d,B){return d&&d.state?d.state.wrap!==2?b:(d.state.gzhead=B,m):b},o.deflate=function(d,B){var R,w,S,N;if(!d||!d.state||5<B||B<0)return d?re(d,b):b;if(w=d.state,!d.output||!d.input&&d.avail_in!==0||w.status===666&&B!==k)return re(d,d.avail_out===0?-5:b);if(w.strm=d,R=w.last_flush,w.last_flush=B,w.status===P)if(w.wrap===2)d.adler=0,te(w,31),te(w,139),te(w,8),w.gzhead?(te(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),te(w,255&w.gzhead.time),te(w,w.gzhead.time>>8&255),te(w,w.gzhead.time>>16&255),te(w,w.gzhead.time>>24&255),te(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),te(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(te(w,255&w.gzhead.extra.length),te(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(d.adler=y(d.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(te(w,0),te(w,0),te(w,0),te(w,0),te(w,0),te(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),te(w,3),w.status=q);else{var M=p+(w.w_bits-8<<4)<<8;M|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(M|=32),M+=31-M%31,w.status=q,G(w,M),w.strstart!==0&&(G(w,d.adler>>>16),G(w,65535&d.adler)),d.adler=1}if(w.status===69)if(w.gzhead.extra){for(S=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>S&&(d.adler=y(d.adler,w.pending_buf,w.pending-S,S)),$(d),S=w.pending,w.pending!==w.pending_buf_size));)te(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>S&&(d.adler=y(d.adler,w.pending_buf,w.pending-S,S)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){S=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>S&&(d.adler=y(d.adler,w.pending_buf,w.pending-S,S)),$(d),S=w.pending,w.pending===w.pending_buf_size)){N=1;break}N=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,te(w,N)}while(N!==0);w.gzhead.hcrc&&w.pending>S&&(d.adler=y(d.adler,w.pending_buf,w.pending-S,S)),N===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){S=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>S&&(d.adler=y(d.adler,w.pending_buf,w.pending-S,S)),$(d),S=w.pending,w.pending===w.pending_buf_size)){N=1;break}N=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,te(w,N)}while(N!==0);w.gzhead.hcrc&&w.pending>S&&(d.adler=y(d.adler,w.pending_buf,w.pending-S,S)),N===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&$(d),w.pending+2<=w.pending_buf_size&&(te(w,255&d.adler),te(w,d.adler>>8&255),d.adler=0,w.status=q)):w.status=q),w.pending!==0){if($(d),d.avail_out===0)return w.last_flush=-1,m}else if(d.avail_in===0&&L(B)<=L(R)&&B!==k)return re(d,-5);if(w.status===666&&d.avail_in!==0)return re(d,-5);if(d.avail_in!==0||w.lookahead!==0||B!==f&&w.status!==666){var X=w.strategy===2?(function(D,ne){for(var he;;){if(D.lookahead===0&&(me(D),D.lookahead===0)){if(ne===f)return h;break}if(D.match_length=0,he=l._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,he&&(T(D,!1),D.strm.avail_out===0))return h}return D.insert=0,ne===k?(T(D,!0),D.strm.avail_out===0?Z:J):D.last_lit&&(T(D,!1),D.strm.avail_out===0)?h:v})(w,B):w.strategy===3?(function(D,ne){for(var he,ce,we,ie,V=D.window;;){if(D.lookahead<=oe){if(me(D),D.lookahead<=oe&&ne===f)return h;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=F&&0<D.strstart&&(ce=V[we=D.strstart-1])===V[++we]&&ce===V[++we]&&ce===V[++we]){ie=D.strstart+oe;do;while(ce===V[++we]&&ce===V[++we]&&ce===V[++we]&&ce===V[++we]&&ce===V[++we]&&ce===V[++we]&&ce===V[++we]&&ce===V[++we]&&we<ie);D.match_length=oe-(ie-we),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=F?(he=l._tr_tally(D,1,D.match_length-F),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(he=l._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),he&&(T(D,!1),D.strm.avail_out===0))return h}return D.insert=0,ne===k?(T(D,!0),D.strm.avail_out===0?Z:J):D.last_lit&&(T(D,!1),D.strm.avail_out===0)?h:v})(w,B):i[w.level].func(w,B);if(X!==Z&&X!==J||(w.status=666),X===h||X===Z)return d.avail_out===0&&(w.last_flush=-1),m;if(X===v&&(B===1?l._tr_align(w):B!==5&&(l._tr_stored_block(w,0,0,!1),B===3&&(W(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),$(d),d.avail_out===0))return w.last_flush=-1,m}return B!==k?m:w.wrap<=0?1:(w.wrap===2?(te(w,255&d.adler),te(w,d.adler>>8&255),te(w,d.adler>>16&255),te(w,d.adler>>24&255),te(w,255&d.total_in),te(w,d.total_in>>8&255),te(w,d.total_in>>16&255),te(w,d.total_in>>24&255)):(G(w,d.adler>>>16),G(w,65535&d.adler)),$(d),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?m:1)},o.deflateEnd=function(d){var B;return d&&d.state?(B=d.state.status)!==P&&B!==69&&B!==73&&B!==91&&B!==103&&B!==q&&B!==666?re(d,b):(d.state=null,B===q?re(d,-3):m):b},o.deflateSetDictionary=function(d,B){var R,w,S,N,M,X,D,ne,he=B.length;if(!d||!d.state||(N=(R=d.state).wrap)===2||N===1&&R.status!==P||R.lookahead)return b;for(N===1&&(d.adler=u(d.adler,B,he,0)),R.wrap=0,he>=R.w_size&&(N===0&&(W(R.head),R.strstart=0,R.block_start=0,R.insert=0),ne=new c.Buf8(R.w_size),c.arraySet(ne,B,he-R.w_size,R.w_size,0),B=ne,he=R.w_size),M=d.avail_in,X=d.next_in,D=d.input,d.avail_in=he,d.next_in=0,d.input=B,me(R);R.lookahead>=F;){for(w=R.strstart,S=R.lookahead-(F-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[w+F-1])&R.hash_mask,R.prev[w&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=w,w++,--S;);R.strstart=w,R.lookahead=F-1,me(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=F-1,R.match_available=0,d.next_in=X,d.input=D,d.avail_in=M,R.wrap=N,m},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,s,o){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,s,o){s.exports=function(i,c){var l,u,y,x,f,k,m,b,g,C,_,p,I,A,U,Y,j,O,F,oe,K,P,q,h,v;l=i.state,u=i.next_in,h=i.input,y=u+(i.avail_in-5),x=i.next_out,v=i.output,f=x-(c-i.avail_out),k=x+(i.avail_out-257),m=l.dmax,b=l.wsize,g=l.whave,C=l.wnext,_=l.window,p=l.hold,I=l.bits,A=l.lencode,U=l.distcode,Y=(1<<l.lenbits)-1,j=(1<<l.distbits)-1;e:do{I<15&&(p+=h[u++]<<I,I+=8,p+=h[u++]<<I,I+=8),O=A[p&Y];t:for(;;){if(p>>>=F=O>>>24,I-=F,(F=O>>>16&255)===0)v[x++]=65535&O;else{if(!(16&F)){if((64&F)==0){O=A[(65535&O)+(p&(1<<F)-1)];continue t}if(32&F){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}oe=65535&O,(F&=15)&&(I<F&&(p+=h[u++]<<I,I+=8),oe+=p&(1<<F)-1,p>>>=F,I-=F),I<15&&(p+=h[u++]<<I,I+=8,p+=h[u++]<<I,I+=8),O=U[p&j];r:for(;;){if(p>>>=F=O>>>24,I-=F,!(16&(F=O>>>16&255))){if((64&F)==0){O=U[(65535&O)+(p&(1<<F)-1)];continue r}i.msg="invalid distance code",l.mode=30;break e}if(K=65535&O,I<(F&=15)&&(p+=h[u++]<<I,(I+=8)<F&&(p+=h[u++]<<I,I+=8)),m<(K+=p&(1<<F)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(p>>>=F,I-=F,(F=x-f)<K){if(g<(F=K-F)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(q=_,(P=0)===C){if(P+=b-F,F<oe){for(oe-=F;v[x++]=_[P++],--F;);P=x-K,q=v}}else if(C<F){if(P+=b+C-F,(F-=C)<oe){for(oe-=F;v[x++]=_[P++],--F;);if(P=0,C<oe){for(oe-=F=C;v[x++]=_[P++],--F;);P=x-K,q=v}}}else if(P+=C-F,F<oe){for(oe-=F;v[x++]=_[P++],--F;);P=x-K,q=v}for(;2<oe;)v[x++]=q[P++],v[x++]=q[P++],v[x++]=q[P++],oe-=3;oe&&(v[x++]=q[P++],1<oe&&(v[x++]=q[P++]))}else{for(P=x-K;v[x++]=v[P++],v[x++]=v[P++],v[x++]=v[P++],2<(oe-=3););oe&&(v[x++]=v[P++],1<oe&&(v[x++]=v[P++]))}break}}break}}while(u<y&&x<k);u-=oe=I>>3,p&=(1<<(I-=oe<<3))-1,i.next_in=u,i.next_out=x,i.avail_in=u<y?y-u+5:5-(u-y),i.avail_out=x<k?k-x+257:257-(x-k),l.hold=p,l.bits=I}},{}],49:[function(t,s,o){var i=t("../utils/common"),c=t("./adler32"),l=t("./crc32"),u=t("./inffast"),y=t("./inftrees"),x=1,f=2,k=0,m=-2,b=1,g=852,C=592;function _(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(P){var q;return P&&P.state?(q=P.state,P.total_in=P.total_out=q.total=0,P.msg="",q.wrap&&(P.adler=1&q.wrap),q.mode=b,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new i.Buf32(g),q.distcode=q.distdyn=new i.Buf32(C),q.sane=1,q.back=-1,k):m}function A(P){var q;return P&&P.state?((q=P.state).wsize=0,q.whave=0,q.wnext=0,I(P)):m}function U(P,q){var h,v;return P&&P.state?(v=P.state,q<0?(h=0,q=-q):(h=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?m:(v.window!==null&&v.wbits!==q&&(v.window=null),v.wrap=h,v.wbits=q,A(P))):m}function Y(P,q){var h,v;return P?(v=new p,(P.state=v).window=null,(h=U(P,q))!==k&&(P.state=null),h):m}var j,O,F=!0;function oe(P){if(F){var q;for(j=new i.Buf32(512),O=new i.Buf32(32),q=0;q<144;)P.lens[q++]=8;for(;q<256;)P.lens[q++]=9;for(;q<280;)P.lens[q++]=7;for(;q<288;)P.lens[q++]=8;for(y(x,P.lens,0,288,j,0,P.work,{bits:9}),q=0;q<32;)P.lens[q++]=5;y(f,P.lens,0,32,O,0,P.work,{bits:5}),F=!1}P.lencode=j,P.lenbits=9,P.distcode=O,P.distbits=5}function K(P,q,h,v){var Z,J=P.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new i.Buf8(J.wsize)),v>=J.wsize?(i.arraySet(J.window,q,h-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(v<(Z=J.wsize-J.wnext)&&(Z=v),i.arraySet(J.window,q,h-v,Z,J.wnext),(v-=Z)?(i.arraySet(J.window,q,h-v,v,0),J.wnext=v,J.whave=J.wsize):(J.wnext+=Z,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=Z))),0}o.inflateReset=A,o.inflateReset2=U,o.inflateResetKeep=I,o.inflateInit=function(P){return Y(P,15)},o.inflateInit2=Y,o.inflate=function(P,q){var h,v,Z,J,re,L,W,$,T,te,G,Q,me,ve,de,_e,ke,ae,le,pe,d,B,R,w,S=0,N=new i.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return m;(h=P.state).mode===12&&(h.mode=13),re=P.next_out,Z=P.output,W=P.avail_out,J=P.next_in,v=P.input,L=P.avail_in,$=h.hold,T=h.bits,te=L,G=W,B=k;e:for(;;)switch(h.mode){case b:if(h.wrap===0){h.mode=13;break}for(;T<16;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if(2&h.wrap&&$===35615){N[h.check=0]=255&$,N[1]=$>>>8&255,h.check=l(h.check,N,2,0),T=$=0,h.mode=2;break}if(h.flags=0,h.head&&(h.head.done=!1),!(1&h.wrap)||(((255&$)<<8)+($>>8))%31){P.msg="incorrect header check",h.mode=30;break}if((15&$)!=8){P.msg="unknown compression method",h.mode=30;break}if(T-=4,d=8+(15&($>>>=4)),h.wbits===0)h.wbits=d;else if(d>h.wbits){P.msg="invalid window size",h.mode=30;break}h.dmax=1<<d,P.adler=h.check=1,h.mode=512&$?10:12,T=$=0;break;case 2:for(;T<16;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if(h.flags=$,(255&h.flags)!=8){P.msg="unknown compression method",h.mode=30;break}if(57344&h.flags){P.msg="unknown header flags set",h.mode=30;break}h.head&&(h.head.text=$>>8&1),512&h.flags&&(N[0]=255&$,N[1]=$>>>8&255,h.check=l(h.check,N,2,0)),T=$=0,h.mode=3;case 3:for(;T<32;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}h.head&&(h.head.time=$),512&h.flags&&(N[0]=255&$,N[1]=$>>>8&255,N[2]=$>>>16&255,N[3]=$>>>24&255,h.check=l(h.check,N,4,0)),T=$=0,h.mode=4;case 4:for(;T<16;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}h.head&&(h.head.xflags=255&$,h.head.os=$>>8),512&h.flags&&(N[0]=255&$,N[1]=$>>>8&255,h.check=l(h.check,N,2,0)),T=$=0,h.mode=5;case 5:if(1024&h.flags){for(;T<16;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}h.length=$,h.head&&(h.head.extra_len=$),512&h.flags&&(N[0]=255&$,N[1]=$>>>8&255,h.check=l(h.check,N,2,0)),T=$=0}else h.head&&(h.head.extra=null);h.mode=6;case 6:if(1024&h.flags&&(L<(Q=h.length)&&(Q=L),Q&&(h.head&&(d=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Array(h.head.extra_len)),i.arraySet(h.head.extra,v,J,Q,d)),512&h.flags&&(h.check=l(h.check,v,Q,J)),L-=Q,J+=Q,h.length-=Q),h.length))break e;h.length=0,h.mode=7;case 7:if(2048&h.flags){if(L===0)break e;for(Q=0;d=v[J+Q++],h.head&&d&&h.length<65536&&(h.head.name+=String.fromCharCode(d)),d&&Q<L;);if(512&h.flags&&(h.check=l(h.check,v,Q,J)),L-=Q,J+=Q,d)break e}else h.head&&(h.head.name=null);h.length=0,h.mode=8;case 8:if(4096&h.flags){if(L===0)break e;for(Q=0;d=v[J+Q++],h.head&&d&&h.length<65536&&(h.head.comment+=String.fromCharCode(d)),d&&Q<L;);if(512&h.flags&&(h.check=l(h.check,v,Q,J)),L-=Q,J+=Q,d)break e}else h.head&&(h.head.comment=null);h.mode=9;case 9:if(512&h.flags){for(;T<16;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if($!==(65535&h.check)){P.msg="header crc mismatch",h.mode=30;break}T=$=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),P.adler=h.check=0,h.mode=12;break;case 10:for(;T<32;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}P.adler=h.check=_($),T=$=0,h.mode=11;case 11:if(h.havedict===0)return P.next_out=re,P.avail_out=W,P.next_in=J,P.avail_in=L,h.hold=$,h.bits=T,2;P.adler=h.check=1,h.mode=12;case 12:if(q===5||q===6)break e;case 13:if(h.last){$>>>=7&T,T-=7&T,h.mode=27;break}for(;T<3;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}switch(h.last=1&$,T-=1,3&($>>>=1)){case 0:h.mode=14;break;case 1:if(oe(h),h.mode=20,q!==6)break;$>>>=2,T-=2;break e;case 2:h.mode=17;break;case 3:P.msg="invalid block type",h.mode=30}$>>>=2,T-=2;break;case 14:for($>>>=7&T,T-=7&T;T<32;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if((65535&$)!=($>>>16^65535)){P.msg="invalid stored block lengths",h.mode=30;break}if(h.length=65535&$,T=$=0,h.mode=15,q===6)break e;case 15:h.mode=16;case 16:if(Q=h.length){if(L<Q&&(Q=L),W<Q&&(Q=W),Q===0)break e;i.arraySet(Z,v,J,Q,re),L-=Q,J+=Q,W-=Q,re+=Q,h.length-=Q;break}h.mode=12;break;case 17:for(;T<14;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if(h.nlen=257+(31&$),$>>>=5,T-=5,h.ndist=1+(31&$),$>>>=5,T-=5,h.ncode=4+(15&$),$>>>=4,T-=4,286<h.nlen||30<h.ndist){P.msg="too many length or distance symbols",h.mode=30;break}h.have=0,h.mode=18;case 18:for(;h.have<h.ncode;){for(;T<3;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}h.lens[M[h.have++]]=7&$,$>>>=3,T-=3}for(;h.have<19;)h.lens[M[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,R={bits:h.lenbits},B=y(0,h.lens,0,19,h.lencode,0,h.work,R),h.lenbits=R.bits,B){P.msg="invalid code lengths set",h.mode=30;break}h.have=0,h.mode=19;case 19:for(;h.have<h.nlen+h.ndist;){for(;_e=(S=h.lencode[$&(1<<h.lenbits)-1])>>>16&255,ke=65535&S,!((de=S>>>24)<=T);){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if(ke<16)$>>>=de,T-=de,h.lens[h.have++]=ke;else{if(ke===16){for(w=de+2;T<w;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if($>>>=de,T-=de,h.have===0){P.msg="invalid bit length repeat",h.mode=30;break}d=h.lens[h.have-1],Q=3+(3&$),$>>>=2,T-=2}else if(ke===17){for(w=de+3;T<w;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}T-=de,d=0,Q=3+(7&($>>>=de)),$>>>=3,T-=3}else{for(w=de+7;T<w;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}T-=de,d=0,Q=11+(127&($>>>=de)),$>>>=7,T-=7}if(h.have+Q>h.nlen+h.ndist){P.msg="invalid bit length repeat",h.mode=30;break}for(;Q--;)h.lens[h.have++]=d}}if(h.mode===30)break;if(h.lens[256]===0){P.msg="invalid code -- missing end-of-block",h.mode=30;break}if(h.lenbits=9,R={bits:h.lenbits},B=y(x,h.lens,0,h.nlen,h.lencode,0,h.work,R),h.lenbits=R.bits,B){P.msg="invalid literal/lengths set",h.mode=30;break}if(h.distbits=6,h.distcode=h.distdyn,R={bits:h.distbits},B=y(f,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,R),h.distbits=R.bits,B){P.msg="invalid distances set",h.mode=30;break}if(h.mode=20,q===6)break e;case 20:h.mode=21;case 21:if(6<=L&&258<=W){P.next_out=re,P.avail_out=W,P.next_in=J,P.avail_in=L,h.hold=$,h.bits=T,u(P,G),re=P.next_out,Z=P.output,W=P.avail_out,J=P.next_in,v=P.input,L=P.avail_in,$=h.hold,T=h.bits,h.mode===12&&(h.back=-1);break}for(h.back=0;_e=(S=h.lencode[$&(1<<h.lenbits)-1])>>>16&255,ke=65535&S,!((de=S>>>24)<=T);){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if(_e&&(240&_e)==0){for(ae=de,le=_e,pe=ke;_e=(S=h.lencode[pe+(($&(1<<ae+le)-1)>>ae)])>>>16&255,ke=65535&S,!(ae+(de=S>>>24)<=T);){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}$>>>=ae,T-=ae,h.back+=ae}if($>>>=de,T-=de,h.back+=de,h.length=ke,_e===0){h.mode=26;break}if(32&_e){h.back=-1,h.mode=12;break}if(64&_e){P.msg="invalid literal/length code",h.mode=30;break}h.extra=15&_e,h.mode=22;case 22:if(h.extra){for(w=h.extra;T<w;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}h.length+=$&(1<<h.extra)-1,$>>>=h.extra,T-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=23;case 23:for(;_e=(S=h.distcode[$&(1<<h.distbits)-1])>>>16&255,ke=65535&S,!((de=S>>>24)<=T);){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if((240&_e)==0){for(ae=de,le=_e,pe=ke;_e=(S=h.distcode[pe+(($&(1<<ae+le)-1)>>ae)])>>>16&255,ke=65535&S,!(ae+(de=S>>>24)<=T);){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}$>>>=ae,T-=ae,h.back+=ae}if($>>>=de,T-=de,h.back+=de,64&_e){P.msg="invalid distance code",h.mode=30;break}h.offset=ke,h.extra=15&_e,h.mode=24;case 24:if(h.extra){for(w=h.extra;T<w;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}h.offset+=$&(1<<h.extra)-1,$>>>=h.extra,T-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){P.msg="invalid distance too far back",h.mode=30;break}h.mode=25;case 25:if(W===0)break e;if(Q=G-W,h.offset>Q){if((Q=h.offset-Q)>h.whave&&h.sane){P.msg="invalid distance too far back",h.mode=30;break}me=Q>h.wnext?(Q-=h.wnext,h.wsize-Q):h.wnext-Q,Q>h.length&&(Q=h.length),ve=h.window}else ve=Z,me=re-h.offset,Q=h.length;for(W<Q&&(Q=W),W-=Q,h.length-=Q;Z[re++]=ve[me++],--Q;);h.length===0&&(h.mode=21);break;case 26:if(W===0)break e;Z[re++]=h.length,W--,h.mode=21;break;case 27:if(h.wrap){for(;T<32;){if(L===0)break e;L--,$|=v[J++]<<T,T+=8}if(G-=W,P.total_out+=G,h.total+=G,G&&(P.adler=h.check=h.flags?l(h.check,Z,G,re-G):c(h.check,Z,G,re-G)),G=W,(h.flags?$:_($))!==h.check){P.msg="incorrect data check",h.mode=30;break}T=$=0}h.mode=28;case 28:if(h.wrap&&h.flags){for(;T<32;){if(L===0)break e;L--,$+=v[J++]<<T,T+=8}if($!==(4294967295&h.total)){P.msg="incorrect length check",h.mode=30;break}T=$=0}h.mode=29;case 29:B=1;break e;case 30:B=-3;break e;case 31:return-4;case 32:default:return m}return P.next_out=re,P.avail_out=W,P.next_in=J,P.avail_in=L,h.hold=$,h.bits=T,(h.wsize||G!==P.avail_out&&h.mode<30&&(h.mode<27||q!==4))&&K(P,P.output,P.next_out,G-P.avail_out)?(h.mode=31,-4):(te-=P.avail_in,G-=P.avail_out,P.total_in+=te,P.total_out+=G,h.total+=G,h.wrap&&G&&(P.adler=h.check=h.flags?l(h.check,Z,G,P.next_out-G):c(h.check,Z,G,P.next_out-G)),P.data_type=h.bits+(h.last?64:0)+(h.mode===12?128:0)+(h.mode===20||h.mode===15?256:0),(te==0&&G===0||q===4)&&B===k&&(B=-5),B)},o.inflateEnd=function(P){if(!P||!P.state)return m;var q=P.state;return q.window&&(q.window=null),P.state=null,k},o.inflateGetHeader=function(P,q){var h;return P&&P.state?(2&(h=P.state).wrap)==0?m:((h.head=q).done=!1,k):m},o.inflateSetDictionary=function(P,q){var h,v=q.length;return P&&P.state?(h=P.state).wrap!==0&&h.mode!==11?m:h.mode===11&&c(1,q,v,0)!==h.check?-3:K(P,q,v,v)?(h.mode=31,-4):(h.havedict=1,k):m},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,s,o){var i=t("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(x,f,k,m,b,g,C,_){var p,I,A,U,Y,j,O,F,oe,K=_.bits,P=0,q=0,h=0,v=0,Z=0,J=0,re=0,L=0,W=0,$=0,T=null,te=0,G=new i.Buf16(16),Q=new i.Buf16(16),me=null,ve=0;for(P=0;P<=15;P++)G[P]=0;for(q=0;q<m;q++)G[f[k+q]]++;for(Z=K,v=15;1<=v&&G[v]===0;v--);if(v<Z&&(Z=v),v===0)return b[g++]=20971520,b[g++]=20971520,_.bits=1,0;for(h=1;h<v&&G[h]===0;h++);for(Z<h&&(Z=h),P=L=1;P<=15;P++)if(L<<=1,(L-=G[P])<0)return-1;if(0<L&&(x===0||v!==1))return-1;for(Q[1]=0,P=1;P<15;P++)Q[P+1]=Q[P]+G[P];for(q=0;q<m;q++)f[k+q]!==0&&(C[Q[f[k+q]]++]=q);if(j=x===0?(T=me=C,19):x===1?(T=c,te-=257,me=l,ve-=257,256):(T=u,me=y,-1),P=h,Y=g,re=q=$=0,A=-1,U=(W=1<<(J=Z))-1,x===1&&852<W||x===2&&592<W)return 1;for(;;){for(O=P-re,oe=C[q]<j?(F=0,C[q]):C[q]>j?(F=me[ve+C[q]],T[te+C[q]]):(F=96,0),p=1<<P-re,h=I=1<<J;b[Y+($>>re)+(I-=p)]=O<<24|F<<16|oe|0,I!==0;);for(p=1<<P-1;$&p;)p>>=1;if(p!==0?($&=p-1,$+=p):$=0,q++,--G[P]==0){if(P===v)break;P=f[k+C[q]]}if(Z<P&&($&U)!==A){for(re===0&&(re=Z),Y+=h,L=1<<(J=P-re);J+re<v&&!((L-=G[J+re])<=0);)J++,L<<=1;if(W+=1<<J,x===1&&852<W||x===2&&592<W)return 1;b[A=$&U]=Z<<24|J<<16|Y-g|0}}return $!==0&&(b[Y+$]=P-re<<24|64<<16|0),_.bits=Z,0}},{"../utils/common":41}],51:[function(t,s,o){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,s,o){var i=t("../utils/common"),c=0,l=1;function u(S){for(var N=S.length;0<=--N;)S[N]=0}var y=0,x=29,f=256,k=f+1+x,m=30,b=19,g=2*k+1,C=15,_=16,p=7,I=256,A=16,U=17,Y=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(k+2));u(K);var P=new Array(2*m);u(P);var q=new Array(512);u(q);var h=new Array(256);u(h);var v=new Array(x);u(v);var Z,J,re,L=new Array(m);function W(S,N,M,X,D){this.static_tree=S,this.extra_bits=N,this.extra_base=M,this.elems=X,this.max_length=D,this.has_stree=S&&S.length}function $(S,N){this.dyn_tree=S,this.max_code=0,this.stat_desc=N}function T(S){return S<256?q[S]:q[256+(S>>>7)]}function te(S,N){S.pending_buf[S.pending++]=255&N,S.pending_buf[S.pending++]=N>>>8&255}function G(S,N,M){S.bi_valid>_-M?(S.bi_buf|=N<<S.bi_valid&65535,te(S,S.bi_buf),S.bi_buf=N>>_-S.bi_valid,S.bi_valid+=M-_):(S.bi_buf|=N<<S.bi_valid&65535,S.bi_valid+=M)}function Q(S,N,M){G(S,M[2*N],M[2*N+1])}function me(S,N){for(var M=0;M|=1&S,S>>>=1,M<<=1,0<--N;);return M>>>1}function ve(S,N,M){var X,D,ne=new Array(C+1),he=0;for(X=1;X<=C;X++)ne[X]=he=he+M[X-1]<<1;for(D=0;D<=N;D++){var ce=S[2*D+1];ce!==0&&(S[2*D]=me(ne[ce]++,ce))}}function de(S){var N;for(N=0;N<k;N++)S.dyn_ltree[2*N]=0;for(N=0;N<m;N++)S.dyn_dtree[2*N]=0;for(N=0;N<b;N++)S.bl_tree[2*N]=0;S.dyn_ltree[2*I]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function _e(S){8<S.bi_valid?te(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function ke(S,N,M,X){var D=2*N,ne=2*M;return S[D]<S[ne]||S[D]===S[ne]&&X[N]<=X[M]}function ae(S,N,M){for(var X=S.heap[M],D=M<<1;D<=S.heap_len&&(D<S.heap_len&&ke(N,S.heap[D+1],S.heap[D],S.depth)&&D++,!ke(N,X,S.heap[D],S.depth));)S.heap[M]=S.heap[D],M=D,D<<=1;S.heap[M]=X}function le(S,N,M){var X,D,ne,he,ce=0;if(S.last_lit!==0)for(;X=S.pending_buf[S.d_buf+2*ce]<<8|S.pending_buf[S.d_buf+2*ce+1],D=S.pending_buf[S.l_buf+ce],ce++,X===0?Q(S,D,N):(Q(S,(ne=h[D])+f+1,N),(he=j[ne])!==0&&G(S,D-=v[ne],he),Q(S,ne=T(--X),M),(he=O[ne])!==0&&G(S,X-=L[ne],he)),ce<S.last_lit;);Q(S,I,N)}function pe(S,N){var M,X,D,ne=N.dyn_tree,he=N.stat_desc.static_tree,ce=N.stat_desc.has_stree,we=N.stat_desc.elems,ie=-1;for(S.heap_len=0,S.heap_max=g,M=0;M<we;M++)ne[2*M]!==0?(S.heap[++S.heap_len]=ie=M,S.depth[M]=0):ne[2*M+1]=0;for(;S.heap_len<2;)ne[2*(D=S.heap[++S.heap_len]=ie<2?++ie:0)]=1,S.depth[D]=0,S.opt_len--,ce&&(S.static_len-=he[2*D+1]);for(N.max_code=ie,M=S.heap_len>>1;1<=M;M--)ae(S,ne,M);for(D=we;M=S.heap[1],S.heap[1]=S.heap[S.heap_len--],ae(S,ne,1),X=S.heap[1],S.heap[--S.heap_max]=M,S.heap[--S.heap_max]=X,ne[2*D]=ne[2*M]+ne[2*X],S.depth[D]=(S.depth[M]>=S.depth[X]?S.depth[M]:S.depth[X])+1,ne[2*M+1]=ne[2*X+1]=D,S.heap[1]=D++,ae(S,ne,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],(function(V,ee){var Re,De,Ue,$e,Fe,st,Ve=ee.dyn_tree,Ne=ee.max_code,Ze=ee.stat_desc.static_tree,dt=ee.stat_desc.has_stree,ot=ee.stat_desc.extra_bits,it=ee.stat_desc.extra_base,ft=ee.stat_desc.max_length,mt=0;for($e=0;$e<=C;$e++)V.bl_count[$e]=0;for(Ve[2*V.heap[V.heap_max]+1]=0,Re=V.heap_max+1;Re<g;Re++)ft<($e=Ve[2*Ve[2*(De=V.heap[Re])+1]+1]+1)&&($e=ft,mt++),Ve[2*De+1]=$e,Ne<De||(V.bl_count[$e]++,Fe=0,it<=De&&(Fe=ot[De-it]),st=Ve[2*De],V.opt_len+=st*($e+Fe),dt&&(V.static_len+=st*(Ze[2*De+1]+Fe)));if(mt!==0){do{for($e=ft-1;V.bl_count[$e]===0;)$e--;V.bl_count[$e]--,V.bl_count[$e+1]+=2,V.bl_count[ft]--,mt-=2}while(0<mt);for($e=ft;$e!==0;$e--)for(De=V.bl_count[$e];De!==0;)Ne<(Ue=V.heap[--Re])||(Ve[2*Ue+1]!==$e&&(V.opt_len+=($e-Ve[2*Ue+1])*Ve[2*Ue],Ve[2*Ue+1]=$e),De--)}})(S,N),ve(ne,ie,S.bl_count)}function d(S,N,M){var X,D,ne=-1,he=N[1],ce=0,we=7,ie=4;for(he===0&&(we=138,ie=3),N[2*(M+1)+1]=65535,X=0;X<=M;X++)D=he,he=N[2*(X+1)+1],++ce<we&&D===he||(ce<ie?S.bl_tree[2*D]+=ce:D!==0?(D!==ne&&S.bl_tree[2*D]++,S.bl_tree[2*A]++):ce<=10?S.bl_tree[2*U]++:S.bl_tree[2*Y]++,ne=D,ie=(ce=0)===he?(we=138,3):D===he?(we=6,3):(we=7,4))}function B(S,N,M){var X,D,ne=-1,he=N[1],ce=0,we=7,ie=4;for(he===0&&(we=138,ie=3),X=0;X<=M;X++)if(D=he,he=N[2*(X+1)+1],!(++ce<we&&D===he)){if(ce<ie)for(;Q(S,D,S.bl_tree),--ce!=0;);else D!==0?(D!==ne&&(Q(S,D,S.bl_tree),ce--),Q(S,A,S.bl_tree),G(S,ce-3,2)):ce<=10?(Q(S,U,S.bl_tree),G(S,ce-3,3)):(Q(S,Y,S.bl_tree),G(S,ce-11,7));ne=D,ie=(ce=0)===he?(we=138,3):D===he?(we=6,3):(we=7,4)}}u(L);var R=!1;function w(S,N,M,X){G(S,(y<<1)+(X?1:0),3),(function(D,ne,he,ce){_e(D),te(D,he),te(D,~he),i.arraySet(D.pending_buf,D.window,ne,he,D.pending),D.pending+=he})(S,N,M)}o._tr_init=function(S){R||((function(){var N,M,X,D,ne,he=new Array(C+1);for(D=X=0;D<x-1;D++)for(v[D]=X,N=0;N<1<<j[D];N++)h[X++]=D;for(h[X-1]=D,D=ne=0;D<16;D++)for(L[D]=ne,N=0;N<1<<O[D];N++)q[ne++]=D;for(ne>>=7;D<m;D++)for(L[D]=ne<<7,N=0;N<1<<O[D]-7;N++)q[256+ne++]=D;for(M=0;M<=C;M++)he[M]=0;for(N=0;N<=143;)K[2*N+1]=8,N++,he[8]++;for(;N<=255;)K[2*N+1]=9,N++,he[9]++;for(;N<=279;)K[2*N+1]=7,N++,he[7]++;for(;N<=287;)K[2*N+1]=8,N++,he[8]++;for(ve(K,k+1,he),N=0;N<m;N++)P[2*N+1]=5,P[2*N]=me(N,5);Z=new W(K,j,f+1,k,C),J=new W(P,O,0,m,C),re=new W(new Array(0),F,0,b,p)})(),R=!0),S.l_desc=new $(S.dyn_ltree,Z),S.d_desc=new $(S.dyn_dtree,J),S.bl_desc=new $(S.bl_tree,re),S.bi_buf=0,S.bi_valid=0,de(S)},o._tr_stored_block=w,o._tr_flush_block=function(S,N,M,X){var D,ne,he=0;0<S.level?(S.strm.data_type===2&&(S.strm.data_type=(function(ce){var we,ie=4093624447;for(we=0;we<=31;we++,ie>>>=1)if(1&ie&&ce.dyn_ltree[2*we]!==0)return c;if(ce.dyn_ltree[18]!==0||ce.dyn_ltree[20]!==0||ce.dyn_ltree[26]!==0)return l;for(we=32;we<f;we++)if(ce.dyn_ltree[2*we]!==0)return l;return c})(S)),pe(S,S.l_desc),pe(S,S.d_desc),he=(function(ce){var we;for(d(ce,ce.dyn_ltree,ce.l_desc.max_code),d(ce,ce.dyn_dtree,ce.d_desc.max_code),pe(ce,ce.bl_desc),we=b-1;3<=we&&ce.bl_tree[2*oe[we]+1]===0;we--);return ce.opt_len+=3*(we+1)+5+5+4,we})(S),D=S.opt_len+3+7>>>3,(ne=S.static_len+3+7>>>3)<=D&&(D=ne)):D=ne=M+5,M+4<=D&&N!==-1?w(S,N,M,X):S.strategy===4||ne===D?(G(S,2+(X?1:0),3),le(S,K,P)):(G(S,4+(X?1:0),3),(function(ce,we,ie,V){var ee;for(G(ce,we-257,5),G(ce,ie-1,5),G(ce,V-4,4),ee=0;ee<V;ee++)G(ce,ce.bl_tree[2*oe[ee]+1],3);B(ce,ce.dyn_ltree,we-1),B(ce,ce.dyn_dtree,ie-1)})(S,S.l_desc.max_code+1,S.d_desc.max_code+1,he+1),le(S,S.dyn_ltree,S.dyn_dtree)),de(S),X&&_e(S)},o._tr_tally=function(S,N,M){return S.pending_buf[S.d_buf+2*S.last_lit]=N>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&N,S.pending_buf[S.l_buf+S.last_lit]=255&M,S.last_lit++,N===0?S.dyn_ltree[2*M]++:(S.matches++,N--,S.dyn_ltree[2*(h[M]+f+1)]++,S.dyn_dtree[2*T(N)]++),S.last_lit===S.lit_bufsize-1},o._tr_align=function(S){G(S,2,3),Q(S,I,K),(function(N){N.bi_valid===16?(te(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):8<=N.bi_valid&&(N.pending_buf[N.pending++]=255&N.bi_buf,N.bi_buf>>=8,N.bi_valid-=8)})(S)}},{"../utils/common":41}],53:[function(t,s,o){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,s,o){(function(i){(function(c,l){if(!c.setImmediate){var u,y,x,f,k=1,m={},b=!1,g=c.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(c);C=C&&C.setTimeout?C:c,u={}.toString.call(c.process)==="[object process]"?function(A){process.nextTick(function(){p(A)})}:(function(){if(c.postMessage&&!c.importScripts){var A=!0,U=c.onmessage;return c.onmessage=function(){A=!1},c.postMessage("","*"),c.onmessage=U,A}})()?(f="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",I,!1):c.attachEvent("onmessage",I),function(A){c.postMessage(f+A,"*")}):c.MessageChannel?((x=new MessageChannel).port1.onmessage=function(A){p(A.data)},function(A){x.port2.postMessage(A)}):g&&"onreadystatechange"in g.createElement("script")?(y=g.documentElement,function(A){var U=g.createElement("script");U.onreadystatechange=function(){p(A),U.onreadystatechange=null,y.removeChild(U),U=null},y.appendChild(U)}):function(A){setTimeout(p,0,A)},C.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var U=new Array(arguments.length-1),Y=0;Y<U.length;Y++)U[Y]=arguments[Y+1];var j={callback:A,args:U};return m[k]=j,u(k),k++},C.clearImmediate=_}function _(A){delete m[A]}function p(A){if(b)setTimeout(p,0,A);else{var U=m[A];if(U){b=!0;try{(function(Y){var j=Y.callback,O=Y.args;switch(O.length){case 0:j();break;case 1:j(O[0]);break;case 2:j(O[0],O[1]);break;case 3:j(O[0],O[1],O[2]);break;default:j.apply(l,O)}})(U)}finally{_(A),b=!1}}}}function I(A){A.source===c&&typeof A.data=="string"&&A.data.indexOf(f)===0&&p(+A.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ut<"u"?ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(dn)),dn.exports}var Iu=$u();const zu=St(Iu),qe={printMode:"print-designer-print-mode",preferredPrintMode:"print-designer-preferred-print-mode",silentPrint:"print-designer-silent-print",exportImageMerged:"print-designer-export-image-merged",localSettings:"print-designer-local-settings",remoteSettings:"print-designer-remote-settings",localPrintOptions:"print-designer-local-print-options",remotePrintOptions:"print-designer-remote-print-options",remoteAuthToken:"print-designer-remote-auth-token",remoteSelectedClientId:"print-designer-remote-selected-client-id"},Pu={wsAddress:"ws://localhost:1122/ws",secretKey:""},Lu={wsAddress:"ws://localhost:8080/ws/request",apiBaseUrl:"http://localhost:8080/api/login",username:"",password:""},Hs={printer:"",jobName:"",copies:1,intervalMs:0,pageRange:"",pageSet:"",scale:"fit",orientation:"portrait",colorMode:"color",sidesMode:"simplex",paperSize:"",trayBin:""},Ht=(r,e)=>{const t=localStorage.getItem(r);if(!t)return e;try{return{...e,...JSON.parse(t)}}catch{return e}},Ut=(r,e)=>{localStorage.setItem(r,JSON.stringify(e))},Mu=r=>r.trim(),Us=r=>{const e=Mu(r);return e?/^wss?:\/\//i.test(e)?e:`ws://${e.replace(/^\/+/,"")}`:"ws://"},Vs=(r,e,t)=>{if(!t)return r;try{const s=new URL(r);return s.searchParams.set(e,t),s.toString()}catch{const s=r.includes("?")?"&":"?";return`${r}${s}${encodeURIComponent(e)}=${encodeURIComponent(t)}`}};let cn=null;const Ru=()=>{const r=localStorage.getItem(qe.preferredPrintMode),e=se(r||localStorage.getItem(qe.printMode)||"browser"),t=se(localStorage.getItem(qe.silentPrint)==="true"),s=se(localStorage.getItem(qe.exportImageMerged)!=="false"),o=xt(Ht(qe.localSettings,Pu));if(!o.wsAddress){const M=o;if(M.host||M.port||M.path){const X=M.host||"localhost",D=M.port?`:${M.port}`:"",ne=M.path||"/ws",he=M.protocol||"ws";o.wsAddress=`${he}://${X}${D}${ne}`}}const i=xt(Ht(qe.remoteSettings,Lu));if(!i.wsAddress){const M=i;if(M.host||M.wsPort||M.wsPath){const X=M.host||"localhost",D=M.wsPort?`:${M.wsPort}`:"",ne=M.wsPath||"/ws/request";i.wsAddress=`${X}${D}${ne}`}}const c=se("disconnected"),l=se("disconnected"),u=se(""),y=se(""),x=xt(Ht(qe.localPrintOptions,Hs)),f=xt(Ht(qe.remotePrintOptions,Hs)),k=se(localStorage.getItem(qe.remoteAuthToken)||""),m=se(localStorage.getItem(qe.remoteSelectedClientId)||""),b=se([]),g=se([]),C=se([]),_=xt({}),p=se(null),I=se(null),A=[],U=[];let Y=null,j=null;const O=se(0),F=se(0),oe=se(null),K=se(null),P=se(!1),q=se(!1),h=3e3,v=10,Z=fe(()=>{const M=Us(o.wsAddress);return Vs(M,"key",o.secretKey.trim())}),J=fe(()=>{const M=Us(i.wsAddress);return Vs(M,"token",k.value.trim())});Ie(e,M=>{if(localStorage.setItem(qe.printMode,M),M!=="browser"){localStorage.setItem(qe.preferredPrintMode,M);return}localStorage.removeItem(qe.preferredPrintMode)}),Ie(t,M=>{localStorage.setItem(qe.silentPrint,String(M))}),Ie(s,M=>{localStorage.setItem(qe.exportImageMerged,String(M))}),Ie(o,M=>{Ut(qe.localSettings,M),c.value="disconnected",u.value=""},{deep:!0}),Ie(i,M=>{Ut(qe.remoteSettings,M),l.value="disconnected",y.value=""},{deep:!0}),Ie(x,M=>{Ut(qe.localPrintOptions,M)},{deep:!0}),Ie(f,M=>{Ut(qe.remotePrintOptions,M)},{deep:!0}),Ie(k,M=>{localStorage.setItem(qe.remoteAuthToken,M)}),Ie(m,M=>{localStorage.setItem(qe.remoteSelectedClientId,M)});const re=()=>{const M=localStorage.getItem(qe.preferredPrintMode);!M||M==="browser"||e.value==="browser"&&(M==="local"&&c.value==="connected"&&(e.value="local"),M==="remote"&&l.value==="connected"&&(e.value="remote"))},L=()=>{const M=c.value==="connected",X=l.value==="connected";if(e.value==="local"&&!M){e.value="browser";return}if(e.value==="remote"&&!X){e.value="browser";return}!M&&!X&&(e.value="browser")};Ie([c,l],()=>{L(),re()},{immediate:!0});const W=(M,X)=>{M.slice().forEach(D=>{D.match(X)&&(window.clearTimeout(D.timeoutId),M.splice(M.indexOf(D),1),D.resolve(X))})},$=(M,X)=>{M.slice().forEach(D=>{window.clearTimeout(D.timeoutId),M.splice(M.indexOf(D),1),D.reject(X)})},T=()=>{oe.value&&(window.clearTimeout(oe.value),oe.value=null),O.value=0},te=()=>{K.value&&(window.clearTimeout(K.value),K.value=null),F.value=0},G=()=>{P.value=!0,T(),p.value&&p.value.close(),p.value=null,c.value="disconnected",u.value=""},Q=()=>{q.value=!0,te(),I.value&&I.value.close(),I.value=null,l.value="disconnected",y.value=""},me=()=>{if(!P.value&&!oe.value){if(O.value>=v){c.value="error",u.value="Local connection failed",O.value=0;return}O.value+=1,c.value="connecting",oe.value=window.setTimeout(()=>{oe.value=null,ae()},h)}},ve=()=>{if(!q.value&&!K.value){if(F.value>=v){l.value="error",y.value="Remote connection failed",F.value=0;return}F.value+=1,l.value="connecting",K.value=window.setTimeout(()=>{K.value=null,pe()},h)}},de=(M,X,D,ne,he=5e3)=>new Promise((ce,we)=>{const ie=M.value;if(!ie||ie.readyState!==WebSocket.OPEN){we(new Error("WebSocket not connected"));return}const V=window.setTimeout(()=>{const ee=X.findIndex(Re=>Re.resolve===ce);ee>=0&&X.splice(ee,1),we(new Error("WebSocket timeout"))},he);X.push({match:ne,resolve:ce,reject:we,timeoutId:V}),ie.send(JSON.stringify(D))}),_e=M=>{M.onmessage=X=>{try{const D=JSON.parse(X.data);(D==null?void 0:D.type)==="printer_list"&&(b.value=Array.isArray(D.data)?D.data:[]),(D==null?void 0:D.type)==="printer_caps"&&D.printer&&(_[D.printer]=(D==null?void 0:D.data)||{}),W(A,D)}catch(D){$(A,D)}},M.onclose=()=>{p.value=null,c.value!=="error"&&(c.value="disconnected"),$(A,new Error("WebSocket closed")),me()},M.onerror=()=>{c.value="error",u.value="Local connection failed",$(A,new Error("WebSocket error")),me()}},ke=M=>{M.onmessage=X=>{try{const D=JSON.parse(X.data);if((D==null?void 0:D.cmd)==="clients_list")if(C.value=Array.isArray(D.clients)?D.clients:[],C.value.length>0){if(!C.value.some(he=>he.client_id===m.value)){const he=C.value.find(ce=>ce.online)||C.value[0];m.value=(he==null?void 0:he.client_id)||""}}else m.value="";(D==null?void 0:D.cmd)==="printers_list"&&(g.value=Array.isArray(D.printers)?D.printers:[]),W(U,D)}catch(D){$(U,D)}},M.onclose=()=>{I.value=null,l.value!=="error"&&(l.value="disconnected"),$(U,new Error("WebSocket closed")),ve()},M.onerror=()=>{l.value="error",y.value="Remote connection failed",$(U,new Error("WebSocket error")),ve()}},ae=async()=>{if(Y)return Y;if(p.value&&p.value.readyState===WebSocket.OPEN)return c.value="connected",Promise.resolve();P.value=!1,c.value="connecting",u.value="";const M=new WebSocket(Z.value);return p.value=M,_e(M),Y=new Promise((X,D)=>{M.addEventListener("open",()=>{c.value="connected",T(),Y=null,M.send(JSON.stringify({type:"get_printers"})),X()}),M.addEventListener("error",()=>{c.value="error",u.value="Local connection failed",Y=null,me(),D(new Error("WebSocket error"))})}),Y},le=()=>{P.value=!0,T(),p.value&&p.value.close(),p.value=null,c.value="disconnected",u.value=""},pe=async()=>j||(I.value&&I.value.readyState===WebSocket.OPEN?(l.value="connected",Promise.resolve()):(q.value=!1,l.value="connecting",y.value="",j=(async()=>{try{if(!i.apiBaseUrl||!i.username||!i.password){l.value="error",y.value="Missing remote connection fields";return}const M=await fetch(i.apiBaseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i.username,password:i.password})});if(!M.ok){const ne=await M.text();throw new Error(ne||`HTTP ${M.status}`)}const X=await M.json();if(!(X!=null&&X.token))throw new Error("Missing auth token");k.value=X.token;const D=new WebSocket(J.value);I.value=D,ke(D),await new Promise((ne,he)=>{D.addEventListener("open",()=>{l.value="connected",te(),D.send(JSON.stringify({cmd:"get_clients"})),ne()}),D.addEventListener("error",()=>{l.value="error",y.value="Remote connection failed",ve(),he(new Error("WebSocket error"))})})}catch(M){l.value="error",y.value=M.message||"Remote connection failed",ve()}finally{j=null}})(),j)),d=()=>{q.value=!0,te(),I.value&&I.value.close(),I.value=null,l.value="disconnected",y.value=""},B=async()=>{await ae();const M=await de(p,A,{type:"get_printers"},X=>(X==null?void 0:X.type)==="printer_list");return b.value=Array.isArray(M.data)?M.data:[],b.value},R=async M=>{if(!M)return;if(_[M])return _[M];await ae();const X=await de(p,A,{type:"get_printer_caps",printer:M},D=>(D==null?void 0:D.type)==="printer_caps");return _[M]=(X==null?void 0:X.data)||{},_[M]},w=async()=>{await pe();const M=await de(I,U,{cmd:"get_clients"},X=>(X==null?void 0:X.cmd)==="clients_list");if(C.value=Array.isArray(M.clients)?M.clients:[],C.value.length>0){if(!C.value.some(D=>D.client_id===m.value)){const D=C.value.find(ne=>ne.online)||C.value[0];m.value=(D==null?void 0:D.client_id)||""}}else m.value="";return C.value},S=async M=>{const X=M||m.value;if(!X)return g.value=[],g.value;await pe();const D=await de(I,U,{cmd:"get_printers",client_id:X},ne=>(ne==null?void 0:ne.cmd)==="printers_list");return g.value=Array.isArray(D.printers)?D.printers:[],g.value};return(()=>{const M=!!o.wsAddress,X=!!(i.apiBaseUrl&&i.username&&i.password);M&&ae(),X&&pe()})(),{printMode:e,silentPrint:t,exportImageMerged:s,localSettings:o,remoteSettings:i,localStatus:c,remoteStatus:l,localStatusMessage:u,remoteStatusMessage:y,localRetryCount:O,remoteRetryCount:F,localPrintOptions:x,remotePrintOptions:f,localWsUrl:Z,remoteWsUrl:J,remoteAuthToken:k,localPrinters:b,remotePrinters:g,remoteClients:C,remoteSelectedClientId:m,localPrinterCaps:_,fetchLocalPrinters:B,fetchRemoteClients:w,fetchRemotePrinters:S,fetchLocalPrinterCaps:R,cancelLocalRetry:G,cancelRemoteRetry:Q,connectLocal:ae,disconnectLocal:le,connectRemote:pe,disconnectRemote:d}},tr=()=>(cn||(cn=Ru()),cn),Du={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Bu(r,e){return z(),H("svg",Du,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M13.05 22v-2.05q.85-.125 1.663-.45t1.537-.85l1.4 1.45q-1.05.8-2.2 1.287t-2.4.613m-2 0q-3.45-.45-5.725-2.988T3.05 13.05q0-1.875.713-3.512t1.925-2.85t2.85-1.925t3.512-.713h.15L10.65 2.5l1.4-1.45l4 4l-4 4l-1.4-1.4l1.6-1.6h-.2q-2.925 0-4.962 2.038T5.05 13.05q0 2.6 1.7 4.563t4.3 2.337zm8.05-3.35l-1.45-1.4q.525-.725.85-1.537t.45-1.663H21q-.125 1.25-.612 2.4t-1.288 2.2m1.9-6.6h-2.05q-.125-.85-.45-1.662t-.85-1.538l1.45-1.4q.8.975 1.275 2.15T21 12.05"},null,-1)])])}const Ou=Se({name:"material-symbols-rotate-right",render:Bu}),qu={key:0,"data-print-exclude":"true",class:"absolute -top-3 -right-3 bg-red-500 rounded-full p-1 shadow-md z-50"},Fu=["title"],Ws=ze({__name:"ElementWrapper",props:{element:{},isSelected:{type:Boolean},zoom:{},pageIndex:{},readOnly:{type:Boolean}},setup(r){const e=r,{t}=je(),s=Be(),o=se(null),i=fe(()=>{const A=!e.isSelected&&s.selectedElementIds.includes(e.element.id),U=!e.readOnly&&(e.isSelected||A),Y={left:`${e.element.x}px`,top:`${e.element.y}px`,width:`${e.element.width}px`,height:`${e.element.height}px`,zIndex:e.element.style.zIndex||1,transform:`rotate(${e.element.style.rotate||0}deg)`,...e.element.style},j=[ge.TABLE,ge.LINE,ge.RECT,ge.CIRCLE];return j.includes(e.element.type)&&(delete Y.backgroundColor,delete Y.border,delete Y.borderWidth,delete Y.borderStyle,delete Y.borderColor,delete Y.borderRadius),U?Y.border=e.element.locked?"2px solid #ef4444":"2px solid var(--brand-500)":!j.includes(e.element.type)&&e.element.style.borderStyle&&e.element.style.borderStyle!=="none"?(Y.borderStyle=e.element.style.borderStyle,Y.borderWidth=`${e.element.style.borderWidth||1}px`,Y.borderColor=e.element.style.borderColor||"#000",delete Y.border):!j.includes(e.element.type)&&e.element.style.border?Y.border=e.element.style.border:Y.border="1px dashed transparent",Y});let c=0,l=0,u=0,y=0,x=!1,f=!1;const k=A=>{e.readOnly||A.button!==0||A.target.closest(".resize-handle")||A.target.closest(".rotate-handle")||(A.ctrlKey||A.metaKey?s.selectElement(e.element.id,!0):s.selectedElementIds.includes(e.element.id)||s.selectElement(e.element.id,!1),e.element.locked)||(x=!0,s.setDragging(!0),f=!1,c=A.clientX,l=A.clientY,u=e.element.x,y=e.element.y,window.addEventListener("mousemove",m),window.addEventListener("mouseup",b))},m=A=>{if(!x)return;const U=(A.clientX-c)/e.zoom,Y=(A.clientY-l)/e.zoom;(Math.abs(U)>2||Math.abs(Y)>2)&&(f||(s.snapshot(),f=!0),s.selectedElementIds.length>1&&s.selectedElementIds.includes(e.element.id)?s.moveSelectedElements(e.element.id,u+U,y+Y,!1,!1):s.moveElementWithSnap(e.element.id,u+U,y+Y,!1,!1))},b=A=>{if(x&&f){const Y=document.elementsFromPoint(A.clientX,A.clientY).find(j=>j.classList.contains("print-page"));if(Y){const j=Y.id,O=parseInt(j.replace("page-",""),10);if(!isNaN(O)&&O!==e.pageIndex){const F=document.getElementById(`page-${e.pageIndex}`);if(F){const oe=F.getBoundingClientRect(),K=Y.getBoundingClientRect(),P=(oe.left-K.left)/e.zoom,q=(oe.top-K.top)/e.zoom;(s.selectedElementIds.length>1&&s.selectedElementIds.includes(e.element.id)?[...s.selectedElementIds]:[e.element.id]).forEach(v=>{const J=s.pages[e.pageIndex].elements.find(re=>re.id===v);J&&s.moveElementToPage(v,O,J.x+P,J.y+q)})}}else s.selectedElementIds.length>1&&s.selectedElementIds.includes(e.element.id)?s.moveSelectedElements(e.element.id,e.element.x,e.element.y,!1,!0):s.moveElementWithSnap(e.element.id,e.element.x,e.element.y,!1,!0)}}x&&!f&&(A.ctrlKey||A.metaKey||s.selectElement(e.element.id,!1)),x=!1,s.setDragging(!1),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",b),s.setHighlightedGuide(null),s.setHighlightedEdge(null)},g=se(!1),C=se(!1),_=se(0),p=A=>{if(A.stopPropagation(),A.preventDefault(),!o.value)return;g.value=!0,C.value=!1,f=!1,_.value=e.element.style.rotate||0;const U=o.value.getBoundingClientRect(),Y=U.left+U.width/2,j=U.top+U.height/2,O=Math.atan2(A.clientY-j,A.clientX-Y),F=e.element.style.rotate||0,oe=P=>{const h=(Math.atan2(P.clientY-j,P.clientX-Y)-O)*(180/Math.PI);let v=F+h;if(v=v%360,v<0&&(v+=360),C.value=!1,P.shiftKey)v=Math.round(v/45)*45,C.value=!0;else if(!P.ctrlKey){const J=[0,90,180,270,360];for(const re of J)if(Math.abs(v-re)<=5){v=re===360?0:re,C.value=!0;break}}v=Math.round(v),v===360&&(v=0),_.value=v,f||(s.snapshot(),f=!0),s.updateElement(e.element.id,{style:{...e.element.style,rotate:v}},!1)},K=()=>{g.value=!1,window.removeEventListener("mousemove",oe),window.removeEventListener("mouseup",K)};window.addEventListener("mousemove",oe),window.addEventListener("mouseup",K)},I=A=>{A.stopPropagation(),A.preventDefault();const U=A.clientX,Y=A.clientY,j=e.element.width,O=e.element.height;f=!1;const F=K=>{const P=(K.clientX-U)/e.zoom,q=(K.clientY-Y)/e.zoom;f||(s.snapshot(),f=!0);let h=j+P,v=O+q;if(K.shiftKey){const Z=j/O;Math.abs(h/j-1)>Math.abs(v/O-1)?v=h/Z:h=v*Z}s.updateElement(e.element.id,{width:Math.max(10,h),height:Math.max(10,v)},!1)},oe=()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",oe)};window.addEventListener("mousemove",F),window.addEventListener("mouseup",oe)};return(A,U)=>(z(),H("div",{ref_key:"elementRef",ref:o,class:xe(["element-wrapper absolute select-none",[r.readOnly?"cursor-not-allowed":"group theme-outline-hover",!r.readOnly&&r.element.locked?"cursor-not-allowed":"",!r.readOnly&&!r.element.locked?"cursor-move":""]]),style:ye(i.value),onMousedown:k},[ui(A.$slots,"default"),!r.readOnly&&r.element.locked&&r.isSelected?(z(),H("div",qu,[ue(a(er),{class:"w-3 h-3 text-white"})])):be("",!0),!r.readOnly&&r.isSelected&&a(s).selectedElementIds.length<=1&&!r.element.locked?(z(),H(Te,{key:1},[n("div",{"data-print-exclude":"true",class:"resize-handle absolute bottom-0 right-0 w-3 h-3 bg-blue-600 cursor-se-resize z-50",onMousedown:I},null,32),n("div",{"data-print-exclude":"true",class:"rotate-handle absolute -top-4 -right-5 w-5 h-5 flex items-center justify-center cursor-grab z-50 theme-text theme-text-hover",title:a(t)("common.rotate"),onMousedown:p},[ue(a(Ou),{class:"w-3 h-3"}),g.value?(z(),H("div",{key:0,class:xe(["absolute top-6 left-1/2 transform -translate-x-1/2 text-xs px-2 py-1 rounded whitespace-nowrap z-50 pointer-events-none font-sans font-normal not-italic leading-none tracking-normal normal-case",C.value?"theme-bg-strong text-white":"theme-bg-soft text-white"])},E(_.value)+"° ",3)):be("",!0)],40,Fu)],64)):be("",!0)],38))}}),qt=r=>{const e=r.trim();return e?e.startsWith("@")?e.slice(1).trim():e.startsWith("{#")&&e.endsWith("}")?e.slice(2,-1).trim():e:""},Ui=r=>[ge.TEXT,ge.BARCODE,ge.QRCODE,ge.TABLE].includes(r.type),ju=r=>{if(Array.isArray(r.data)&&r.data.length>0)return Ee(r.data);const e=r.columns||[];if(e.length===0)return[];const t={};return e.forEach(s=>{t[s.field]=""}),[t]},pn=(r,e={})=>{const t={...e};if(!Ui(r))return t;const s=r.variable||"",o=qt(s);return!o||Object.prototype.hasOwnProperty.call(t,o)?t:r.type===ge.TABLE?(t[o]=ju(r),t):(t[o]=r.content??"",t)},Nu=(r=[],e={})=>{let t={...e};return r.forEach(s=>{s.elements.forEach(o=>{t=pn(o,t)})}),t},Hu={sections:[{title:"properties.section.content",tab:"properties",fields:[{label:"properties.label.content",type:"textarea",target:"element",key:"content",placeholder:"properties.label.textContentPlaceholder"},{label:"properties.label.variable",type:"text",target:"element",key:"variable",placeholder:"@variable"}]},{title:"properties.section.typography",tab:"style",fields:[{label:"properties.label.writingMode",type:"select",target:"style",key:"writingMode",options:[{label:"properties.option.horizontal",value:"horizontal-tb"},{label:"properties.option.vertical",value:"vertical-rl"}]},{label:"properties.label.fontSize",type:"number",target:"style",key:"fontSize",min:8,max:96,step:1},{label:"properties.label.color",type:"color",target:"style",key:"color"},{label:"properties.label.textAlign",type:"select",target:"style",key:"textAlign",options:[{label:"properties.option.default",value:""},{label:"properties.option.left",value:"left"},{label:"properties.option.center",value:"center"},{label:"properties.option.right",value:"right"}]},{label:"properties.label.fontFamily",type:"select",target:"style",key:"fontFamily",options:[{label:"properties.option.default",value:""},{label:"properties.option.arial",value:"Arial, sans-serif"},{label:"properties.option.timesNewRoman",value:'"Times New Roman", serif'},{label:"properties.option.courierNew",value:'"Courier New", monospace'},{label:"properties.option.simSun",value:"SimSun, serif"},{label:"properties.option.simHei",value:"SimHei, sans-serif"}]},{label:"properties.label.fontWeight",type:"select",target:"style",key:"fontWeight",options:[{label:"properties.option.default",value:""},{label:"properties.option.normal",value:"400"},{label:"properties.option.medium",value:"500"},{label:"properties.option.bold",value:"700"}]}]},{title:"properties.section.border",tab:"style",fields:[{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:20,step:1},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor"}]}]},Gs=ze({__name:"TextElement",props:{element:{}},setup(r){const e=r,t=Be(),s=fe(()=>{const o=e.element.variable||"";if(t.isExporting&&o){const i=qt(o);if(i&&Object.prototype.hasOwnProperty.call(t.testData,i)){const c=t.testData[i];if(c!=null)return String(c)}}return e.element.variable||e.element.content||"Double click to edit"});return(o,i)=>(z(),H("div",{class:"w-full h-full overflow-hidden",style:ye({fontSize:`${r.element.style.fontSize}px`,fontFamily:r.element.style.fontFamily,fontWeight:r.element.style.fontWeight,fontStyle:r.element.style.fontStyle,textAlign:r.element.style.textAlign,textDecoration:r.element.style.textDecoration,color:r.element.style.color,padding:`${r.element.style.padding}px`,writingMode:r.element.style.writingMode||"horizontal-tb"})},E(s.value),5))}}),Uu={class:"w-full h-full overflow-hidden bg-gray-50 flex items-center justify-center"},Vu=["src"],Wu={key:1,class:"text-gray-400 text-xs"},Gu={sections:[{title:"properties.section.imageSource",tab:"properties",fields:[{label:"properties.label.imageSource",type:"image",target:"element",key:"content"}]},{title:"properties.section.border",tab:"style",fields:[{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:20,step:1},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor"}]}]},Ku=ze({__name:"ImageElement",props:{element:{}},setup(r){return(e,t)=>(z(),H("div",Uu,[r.element.content?(z(),H("img",{key:0,src:r.element.content,class:"w-full h-full object-contain pointer-events-none",alt:"Element"},null,8,Vu)):(z(),H("span",Wu,"No Image"))]))}}),Yu=["data-tfoot-repeat","data-auto-paginate","data-custom-script"],Xu=["onDblclick"],Zu=["onMousedown"],Ju=["rowspan","colspan","data-field","onMousedown","onMouseover"],Qu={key:0},eh=["colspan"],th={key:1,class:"h-full border-none bg-transparent"},rh=["colspan"],oh={key:0},nh=["rowspan","colspan","data-field","data-value","onMousedown","onMouseover","onDblclick"],ah={class:"text-sm font-semibold text-gray-700"},sh={class:"flex flex-col gap-1"},ih={class:"text-xs text-gray-500"},lh=["placeholder"],dh={class:"flex flex-col gap-1"},ch={class:"text-xs text-gray-500"},uh=["placeholder"],hh={class:"flex flex-col gap-1"},ph={class:"text-xs text-gray-500"},fh=["placeholder"],mh={class:"flex flex-col gap-1"},gh={class:"text-xs text-gray-500"},bh=["placeholder"],vh={class:"flex justify-end gap-2 mt-1"},yh={sections:[{title:"properties.section.dataBehavior",tab:"properties",fields:[{label:"properties.label.autoPaginate",type:"switch",target:"element",key:"autoPaginate"},{label:"properties.label.repeatFooter",type:"switch",target:"element",key:"tfootRepeat"},{label:"properties.label.showFooter",type:"switch",target:"element",key:"showFooter"},{label:"properties.label.variable",type:"text",target:"element",key:"variable",placeholder:"@variable"},{label:"properties.label.columns",type:"code",language:"json",target:"element",key:"columns",placeholder:"properties.label.columnsPlaceholder"},{label:"properties.label.data",type:"code",language:"json",target:"element",key:"data",placeholder:"properties.label.dataPlaceholder"},{label:"properties.label.footerData",type:"code",language:"json",target:"element",key:"footerData",placeholder:"properties.label.footerDataPlaceholder"},{label:"properties.label.customScript",type:"code",language:"javascript",target:"element",key:"customScript",placeholder:"properties.label.customScriptPlaceholder"}]},{title:"properties.section.layoutDimensions",tab:"style",fields:[{label:"properties.label.headerHeight",type:"number",target:"style",key:"headerHeight",min:20,max:200,step:1},{label:"properties.label.rowHeight",type:"number",target:"style",key:"rowHeight",min:20,max:200,step:1},{label:"properties.label.footerHeight",type:"number",target:"style",key:"footerHeight",min:20,max:200,step:1}]},{title:"properties.section.appearance",tab:"style",fields:[{label:"properties.label.backgroundColor",type:"color",target:"style",key:"backgroundColor"},{label:"properties.label.textColor",type:"color",target:"style",key:"color"}]},{title:"properties.section.headerStyle",tab:"style",fields:[{label:"properties.label.background",type:"color",target:"style",key:"headerBackgroundColor"},{label:"properties.label.textColor",type:"color",target:"style",key:"headerColor"},{label:"properties.label.fontSize",type:"number",target:"style",key:"headerFontSize",min:8,max:72,step:1}]},{title:"properties.section.footerStyle",tab:"style",fields:[{label:"properties.label.background",type:"color",target:"style",key:"footerBackgroundColor"},{label:"properties.label.textColor",type:"color",target:"style",key:"footerColor"},{label:"properties.label.fontSize",type:"number",target:"style",key:"footerFontSize",min:8,max:72,step:1}]},{title:"properties.section.border",tab:"style",fields:[{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:20,step:1},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor"}]}]},wh=ze({__name:"TableElement",props:{element:{}},setup(r){const e=r,{t}=je(),s=Be(),o=at("modal-container",se(null));function i(W,$,T="body"){var te;return s.tableSelection&&s.tableSelection.elementId!==e.element.id?!1:((te=s.tableSelection)==null?void 0:te.cells.some(G=>G.rowIndex===W&&G.colField===$&&(G.section||"body")===T))??!1}const c=se(null),l=se(null),u=se({header:"",field:"",value:"",variable:""}),y=se({top:0,left:0}),x=se(null),f=async(W,$)=>{if(s.selectedElementId!==e.element.id||e.element.locked)return;const T=p.value.columns[$];if(T){if(c.value=$,l.value=null,u.value={header:T.header,field:T.field,value:"",variable:""},y.value={top:W.clientY+10,left:W.clientX+10},await Xe(),x.value){const te=x.value.getBoundingClientRect(),G=window.innerWidth,Q=window.innerHeight;y.value.left+te.width>G&&(y.value.left=G-te.width-20),y.value.top+te.height>Q&&(y.value.top=Q-te.height-20)}setTimeout(()=>{window.addEventListener("click",m)},100)}},k=async(W,$,T)=>{if(s.selectedElementId!==e.element.id||e.element.locked)return;const te=p.value.footerData[$];if(!te)return;const G=te[T];let Q="",me="";if(G&&typeof G=="object"&&(Q=G.value||"",me=G.field||""),l.value={rowIndex:$,colField:T},c.value=null,u.value={header:"",field:T,value:Q,variable:me},y.value={top:W.clientY+10,left:W.clientX+10},await Xe(),x.value){const ve=x.value.getBoundingClientRect(),de=window.innerWidth,_e=window.innerHeight;y.value.left+ve.width>de&&(y.value.left=de-ve.width-20),y.value.top+ve.height>_e&&(y.value.top=_e-ve.height-20)}setTimeout(()=>{window.addEventListener("click",m)},100)},m=W=>{x.value&&!x.value.contains(W.target)&&b()},b=()=>{c.value=null,l.value=null,window.removeEventListener("click",m)},g=()=>{if(c.value!==null){const W=e.element.columns?[...e.element.columns]:[];if(W.length===0&&p.value.columns.length>0){const $=JSON.parse(JSON.stringify(p.value.columns));$[c.value]&&($[c.value].header=u.value.header,$[c.value].field=u.value.field,s.updateElement(e.element.id,{columns:$})),b();return}c.value<W.length&&(W[c.value]={...W[c.value],header:u.value.header,field:u.value.field},s.updateElement(e.element.id,{columns:W}))}else if(l.value){const{rowIndex:W,colField:$}=l.value,T=e.element.footerData?JSON.parse(JSON.stringify(e.element.footerData)):[];if(!T[W])return;const te=T[W],G=te[$];G&&typeof G=="object"?(G.value=u.value.value,G.field=u.value.variable):te[$]={value:u.value.value,field:u.value.variable},s.updateElement(e.element.id,{footerData:T})}b()},C=se(!1),_=se(null),p=fe(()=>{const W=e.element.columns||[];let $=e.element.data||[],T=e.element.footerData||[];if(s.isExporting&&e.element.variable){const Q=qt(e.element.variable),me=s.testData||{},ve=Q?me[Q]:void 0;Array.isArray(ve)&&($=Ee(ve))}if(e.element.customScript)try{const me=new Function("data","footerData","columns","type",e.element.customScript)(Ee($),Ee(T),Ee(W),"global");if(me&&(me.data&&($=me.data),me.footerData&&(T=me.footerData),me.columns))return{...me,columns:me.columns}}catch(Q){console.error("Custom script error",Q)}const te=Ee(T),G=W.map(Q=>Q.field);return te.forEach(Q=>{Object.keys(Q).forEach(me=>{const ve=Q[me];if(ve&&typeof ve=="object"&&ve.field&&G.includes(ve.field)){const de=ve.field,_e=$.reduce((ke,ae)=>{const le=parseFloat(ae[de]);return ke+(isNaN(le)?0:le)},0);ve.result=_e}})}),{columns:W,data:$,footerData:te}}),I=fe(()=>({color:e.element.style.color||"#000000",fontFamily:e.element.style.fontFamily,borderColor:e.element.style.borderColor||"#000",borderWidth:(e.element.style.borderWidth||1)+"px",borderStyle:e.element.style.borderStyle||"solid"})),A=(W,$)=>{if(!W)return"";const T=W[$];if(T&&typeof T=="object"){const te=T.value||"",G=T.printValue!==void 0?T.printValue:T.result!==void 0?T.result:"";return te+G}return T},U=(W,$)=>{if(!W)return"";const T=W[$];if(T&&typeof T=="object"){const te=T.value||"",G=T.result!==void 0?T.result:T.printValue!==void 0?T.printValue:"";return te+G}return T},Y=(W,$)=>{const T=W[$];return T&&typeof T=="object"&&"rowSpan"in T?T.rowSpan:1},j=(W,$)=>{const T=W[$];return T&&typeof T=="object"&&"colSpan"in T?T.colSpan:1},O=(W,$)=>{const T=W[$];return!(T&&typeof T=="object"&&(T.rowSpan===0||T.colSpan===0))},F=(W,$)=>{const T=W[$];return T&&typeof T=="object"&&T.style?T.style:{}},oe=se({}),K=se(null),P=se(0),q=se(0),h=(W,$)=>{if(e.element.locked)return;W.preventDefault(),W.stopPropagation(),K.value=$,P.value=W.clientX;const T=p.value.columns[$];q.value=T.width||100,window.addEventListener("mousemove",v),window.addEventListener("mouseup",Z)},v=W=>{if(K.value===null)return;const $=W.clientX-P.value,T=Math.max(20,q.value+$),te=p.value.columns[K.value];oe.value[te.field]=T},Z=()=>{if(K.value!==null){const W=p.value.columns[K.value],$=oe.value[W.field];if($){const T=[...e.element.columns||[]];T[K.value]&&(T[K.value]={...T[K.value],width:$},s.updateElement(e.element.id,{columns:T}))}}K.value=null,oe.value={},window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",Z)},J=(W,$,T,te="body")=>{s.selectedElementId===e.element.id&&(W.stopPropagation(),C.value=!0,_.value={rowIndex:$,colField:T,section:te},s.setTableSelection(e.element.id,{rowIndex:$,colField:T,section:te},!1))},re=(W,$,T="body")=>{if(!C.value||!_.value||_.value.section!==T)return;const te=_.value.rowIndex,G=W,Q=p.value.columns.findIndex(le=>le.field===_.value.colField),me=p.value.columns.findIndex(le=>le.field===$);if(Q===-1||me===-1)return;const ve=Math.min(te,G),de=Math.max(te,G),_e=Math.min(Q,me),ke=Math.max(Q,me),ae=[];for(let le=ve;le<=de;le++)for(let pe=_e;pe<=ke;pe++)ae.push({rowIndex:le,colField:p.value.columns[pe].field,section:T});s.setTableSelectionCells(e.element.id,ae)},L=()=>{C.value=!1,_.value=null};return We(()=>{window.addEventListener("mouseup",L)}),Ge(()=>{window.removeEventListener("mouseup",L)}),(W,$)=>(z(),H("div",{class:"w-full h-full overflow-hidden",style:ye({backgroundColor:r.element.style.backgroundColor||"transparent"})},[n("table",{class:xe(["w-full border-collapse",{"h-full":!a(s).isExporting}]),"data-tfoot-repeat":r.element.tfootRepeat,"data-auto-paginate":r.element.autoPaginate,"data-custom-script":r.element.customScript},[n("thead",null,[n("tr",null,[(z(!0),H(Te,null,Le(p.value.columns,(T,te)=>(z(),H("th",{key:T.field,class:"p-1 text-left font-bold text-sm relative group select-none",style:ye({...I.value,width:`${oe.value[T.field]||T.width}px`,height:r.element.style.headerHeight?`${r.element.style.headerHeight}px`:void 0,backgroundColor:r.element.style.headerBackgroundColor||"#f3f4f6",color:r.element.style.headerColor||"#000000",fontSize:r.element.style.headerFontSize?`${r.element.style.headerFontSize}px`:void 0,cursor:a(s).selectedElementId===r.element.id?"pointer":"default"}),onDblclick:G=>f(G,te)},[Ce(E(T.header)+" ",1),a(s).selectedElementId===r.element.id&&te<p.value.columns.length-1&&!r.element.locked?(z(),H("div",{key:0,class:xe(["absolute -right-1 top-0 bottom-0 w-2 cursor-col-resize hover:bg-blue-400 opacity-0 hover:opacity-100 z-10 transition-opacity",{"bg-blue-400 opacity-100":K.value===te}]),onMousedown:G=>h(G,te),onClick:$[0]||($[0]=Ke(()=>{},["stop"]))},null,42,Zu)):be("",!0)],44,Xu))),128))])]),n("tbody",null,[(z(!0),H(Te,null,Le(a(s).isExporting?p.value.data:p.value.data.slice(0,5),(T,te)=>(z(),H("tr",{key:te},[(z(!0),H(Te,null,Le(p.value.columns,G=>(z(),H(Te,{key:G.field},[O(T,G.field)?(z(),H("td",{key:0,class:xe(["p-1 text-sm select-none",{"bg-blue-100 ring-1 ring-blue-400":i(te,G.field)}]),style:ye({...I.value,...F(T,G.field),height:r.element.style.rowHeight?`${r.element.style.rowHeight}px`:void 0}),rowspan:Y(T,G.field),colspan:j(T,G.field),"data-field":G.field,onMousedown:Q=>J(Q,te,G.field),onMouseover:Q=>re(te,G.field)},E(U(T,G.field)),47,Ju)):be("",!0)],64))),128))]))),128)),!a(s).isExporting&&p.value.data.length>5?(z(),H("tr",Qu,[n("td",{colspan:p.value.columns.length,class:"p-1 text-center text-gray-500 select-none",style:ye({...I.value,height:r.element.style.rowHeight?`${r.element.style.rowHeight}px`:void 0})}," ... ",12,eh)])):be("",!0),a(s).isExporting?be("",!0):(z(),H("tr",th,[n("td",{colspan:p.value.columns.length||1,class:"border-none p-0"},null,8,rh)]))]),r.element.showFooter?(z(),H("tfoot",oh,[(z(!0),H(Te,null,Le(p.value.footerData,(T,te)=>(z(),H("tr",{key:te},[(z(!0),H(Te,null,Le(p.value.columns,G=>(z(),H(Te,{key:G.field},[O(T,G.field)?(z(),H("td",{key:0,class:xe(["p-1 text-sm font-bold select-none",{"!bg-blue-100 ring-1 ring-blue-400":i(te,G.field,"footer")}]),style:ye({...I.value,...F(T,G.field),height:r.element.style.footerHeight?`${r.element.style.footerHeight}px`:void 0,backgroundColor:r.element.style.footerBackgroundColor||"#f9fafb",color:r.element.style.footerColor||"#000000",fontSize:r.element.style.footerFontSize?`${r.element.style.footerFontSize}px`:void 0,cursor:a(s).selectedElementId===r.element.id?"pointer":"default"}),rowspan:Y(T,G.field),colspan:j(T,G.field),"data-field":G.field,"data-value":A(T,G.field),onMousedown:Q=>J(Q,te,G.field,"footer"),onMouseover:Q=>re(te,G.field,"footer"),onDblclick:Q=>k(Q,te,G.field)},E(U(T,G.field)),47,nh)):be("",!0)],64))),128))]))),128))])):be("",!0)],10,Yu),(z(),Pe(tt,{to:a(o)||"body"},[c.value!==null||l.value?(z(),H("div",{key:0,ref_key:"editFormRef",ref:x,class:"fixed z-[9999] bg-white shadow-xl border border-gray-200 rounded-lg p-4 w-64 flex flex-col gap-3 pointer-events-auto",style:ye({top:`${y.value.top}px`,left:`${y.value.left}px`}),onClick:$[5]||($[5]=Ke(()=>{},["stop"]))},[n("h4",ah,E(l.value?a(t)("properties.label.editCell"):a(t)("properties.label.editColumn")),1),c.value!==null?(z(),H(Te,{key:0},[n("div",sh,[n("label",ih,E(a(t)("properties.label.headerText")),1),Ae(n("input",{"onUpdate:modelValue":$[1]||($[1]=T=>u.value.header=T),class:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 focus:outline-none",placeholder:a(t)("properties.label.headerNamePlaceholder"),onKeydown:_t(g,["enter"]),autoFocus:""},null,40,lh),[[Oe,u.value.header]])]),n("div",dh,[n("label",ch,E(a(t)("properties.label.fieldKey")),1),Ae(n("input",{"onUpdate:modelValue":$[2]||($[2]=T=>u.value.field=T),class:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 focus:outline-none",placeholder:a(t)("properties.label.fieldKey"),onKeydown:_t(g,["enter"])},null,40,uh),[[Oe,u.value.field]])])],64)):be("",!0),l.value?(z(),H(Te,{key:1},[n("div",hh,[n("label",ph,E(a(t)("properties.label.content")),1),Ae(n("input",{"onUpdate:modelValue":$[3]||($[3]=T=>u.value.value=T),class:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 focus:outline-none",placeholder:a(t)("properties.label.displayTextPlaceholder"),onKeydown:_t(g,["enter"]),autoFocus:""},null,40,fh),[[Oe,u.value.value]])]),n("div",mh,[n("label",gh,E(a(t)("properties.label.variableField")),1),Ae(n("input",{"onUpdate:modelValue":$[4]||($[4]=T=>u.value.variable=T),class:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 focus:outline-none",placeholder:a(t)("properties.label.dataFieldPlaceholder"),onKeydown:_t(g,["enter"])},null,40,bh),[[Oe,u.value.variable]])])],64)):be("",!0),n("div",vh,[n("button",{onClick:b,class:"px-3 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded"},E(a(t)("common.cancel")),1),n("button",{onClick:g,class:"px-3 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 rounded"},E(a(t)("common.save")),1)])],4)):be("",!0)],8,["to"]))],4))}}),xh={class:"page-number-text"},_h={sections:[{title:"properties.section.labelContent",tab:"properties",fields:[{label:"properties.label.labelText",type:"text",target:"element",key:"labelText",placeholder:"properties.label.labelTextPlaceholder"},{label:"properties.label.labelPosition",type:"select",target:"element",key:"labelPosition",options:[{label:"properties.option.before",value:"before"},{label:"properties.option.after",value:"after"}]},{label:"properties.label.pageFormat",type:"select",target:"element",key:"format",options:[{label:"properties.option.numberOnly",value:"1"},{label:"properties.option.page1",value:"Page 1"},{label:"properties.option.oneTotal",value:"1/Total"}]}]},{title:"properties.section.paginationTypography",tab:"style",fields:[{label:"properties.label.fontSize",type:"number",target:"style",key:"fontSize",min:8,max:96,step:1},{label:"properties.label.color",type:"color",target:"style",key:"color"},{label:"properties.label.textAlign",type:"select",target:"style",key:"textAlign",options:[{label:"properties.option.default",value:""},{label:"properties.option.left",value:"left"},{label:"properties.option.center",value:"center"},{label:"properties.option.right",value:"right"}]},{label:"properties.label.fontFamily",type:"select",target:"style",key:"fontFamily",options:[{label:"properties.option.default",value:""},{label:"properties.option.arial",value:"Arial, sans-serif"},{label:"properties.option.timesNewRoman",value:'"Times New Roman", serif'},{label:"properties.option.courierNew",value:'"Courier New", monospace'},{label:"properties.option.simSun",value:"SimSun, serif"},{label:"properties.option.simHei",value:"SimHei, sans-serif"}]},{label:"properties.label.fontWeight",type:"select",target:"style",key:"fontWeight",options:[{label:"properties.option.default",value:""},{label:"properties.option.normal",value:"400"},{label:"properties.option.medium",value:"500"},{label:"properties.option.bold",value:"700"}]}]},{title:"properties.section.labelStyle",tab:"style",fields:[{label:"properties.label.labelFontSize",type:"number",target:"element",key:"labelFontSize",min:8,max:96,step:1},{label:"properties.label.labelColor",type:"color",target:"element",key:"labelColor"},{label:"properties.label.labelFontFamily",type:"select",target:"element",key:"labelFontFamily",options:[{label:"properties.option.default",value:""},{label:"properties.option.arial",value:"Arial, sans-serif"},{label:"properties.option.timesNewRoman",value:'"Times New Roman", serif'},{label:"properties.option.courierNew",value:'"Courier New", monospace'},{label:"properties.option.simSun",value:"SimSun, serif"},{label:"properties.option.simHei",value:"SimHei, sans-serif"}]},{label:"properties.label.labelFontWeight",type:"select",target:"element",key:"labelFontWeight",options:[{label:"properties.option.default",value:""},{label:"properties.option.normal",value:"400"},{label:"properties.option.medium",value:"500"},{label:"properties.option.bold",value:"700"}]},{label:"properties.label.labelBackgroundColor",type:"color",target:"element",key:"labelBackgroundColor"},{label:"properties.label.labelBorderStyle",type:"select",target:"element",key:"labelBorderStyle",options:[{label:"properties.option.none",value:""},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.labelBorderWidth",type:"number",target:"element",key:"labelBorderWidth",min:0,max:20,step:1},{label:"properties.label.labelBorderColor",type:"color",target:"element",key:"labelBorderColor"}]},{title:"properties.section.frameBorder",tab:"style",fields:[{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:20,step:1},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor"}]}]},kh=ze({__name:"PageNumberElement",props:{element:{},pageIndex:{},totalPages:{}},setup(r){const e=r,{t}=je(),s=fe(()=>{const o=e.pageIndex+1,i=e.totalPages||1;switch(e.element.format||"1/Total"){case"1":return`${o}`;case"Page 1":return t("properties.option.page1").replace("1",o.toString());case"1/Total":return`${o}/${i}`;default:return`${o}/${i}`}});return(o,i)=>(z(),H("div",{class:"w-full h-full overflow-hidden","data-print-type":"page-number",style:ye({fontSize:`${r.element.style.fontSize}px`,fontFamily:r.element.style.fontFamily,fontWeight:r.element.style.fontWeight,fontStyle:r.element.style.fontStyle,textAlign:r.element.style.textAlign,color:r.element.style.color,padding:`${r.element.style.padding||0}px`})},[r.element.labelText&&r.element.labelPosition!=="after"?(z(),H("span",{key:0,style:ye({fontSize:r.element.labelFontSize?`${r.element.labelFontSize}px`:void 0,fontFamily:r.element.labelFontFamily||void 0,fontWeight:r.element.labelFontWeight||void 0,color:r.element.labelColor||void 0,backgroundColor:r.element.labelBackgroundColor||"transparent",borderStyle:r.element.labelBorderStyle||"none",borderWidth:`${r.element.labelBorderWidth||0}px`,borderColor:r.element.labelBorderColor||"transparent",marginRight:"4px",padding:"0 4px"})},E(r.element.labelText),5)):be("",!0),n("span",xh,E(s.value),1),r.element.labelText&&r.element.labelPosition==="after"?(z(),H("span",{key:1,style:ye({fontSize:r.element.labelFontSize?`${r.element.labelFontSize}px`:void 0,fontFamily:r.element.labelFontFamily||void 0,fontWeight:r.element.labelFontWeight||void 0,color:r.element.labelColor||void 0,backgroundColor:r.element.labelBackgroundColor||"transparent",borderStyle:r.element.labelBorderStyle||"none",borderWidth:`${r.element.labelBorderWidth||0}px`,borderColor:r.element.labelBorderColor||"transparent",marginLeft:"4px",padding:"0 4px"})},E(r.element.labelText),5)):be("",!0)],4))}});var Sh=sl();const Vi=St(Sh),Ch={class:"w-full h-full flex items-center justify-center overflow-hidden"},Eh={sections:[{title:"properties.section.content",tab:"properties",fields:[{label:"properties.label.content",type:"text",target:"element",key:"content",placeholder:"properties.label.barcodeContentPlaceholder"},{label:"properties.label.variable",type:"text",target:"element",key:"variable",placeholder:"@variable"}]},{title:"properties.section.barcodeSettings",tab:"style",fields:[{label:"properties.label.format",type:"select",target:"style",key:"barcodeFormat",options:[{label:"properties.option.code128",value:"CODE128"},{label:"properties.option.ean13",value:"EAN13"},{label:"properties.option.upc",value:"UPC"},{label:"properties.option.code39",value:"CODE39"},{label:"properties.option.itf14",value:"ITF14"},{label:"properties.option.msi",value:"MSI"},{label:"properties.option.pharmacode",value:"pharmacode"}]},{label:"properties.label.showText",type:"select",target:"style",key:"showText",options:[{label:"properties.option.yes",value:!0},{label:"properties.option.no",value:!1}]},{label:"properties.label.color",type:"color",target:"style",key:"color"},{label:"properties.label.lineWidth",type:"number",target:"style",key:"barcodeWidth",placeholder:"2"},{label:"properties.label.barcodeHeight",type:"number",target:"style",key:"barcodeHeight",placeholder:"40"},{label:"properties.label.margin",type:"number",target:"style",key:"margin",placeholder:"0"},{label:"properties.label.fontSize",type:"number",target:"style",key:"fontSize",placeholder:"20"},{label:"properties.label.textPosition",type:"select",target:"style",key:"textPosition",options:[{label:"properties.option.bottom",value:"bottom"},{label:"properties.option.top",value:"top"}]},{label:"properties.label.textAlign",type:"select",target:"style",key:"textAlign",options:[{label:"properties.option.left",value:"left"},{label:"properties.option.center",value:"center"},{label:"properties.option.right",value:"right"}]}]}]},Th=ze({__name:"BarcodeElement",props:{element:{}},setup(r){const e=r,t=Be(),s=se(null),o=fe(()=>{const c=e.element.variable||"";if(t.isExporting&&c){const l=qt(c);if(l&&Object.prototype.hasOwnProperty.call(t.testData,l)){const u=t.testData[l];if(u!=null)return String(u)}}return e.element.variable||e.element.content||"12345678"}),i=()=>{if(s.value)try{const c=o.value,l=e.element.style;Vi(s.value,c,{format:l.barcodeFormat||"CODE128",lineColor:l.color||"#000000",width:Number(l.barcodeWidth)||2,height:Number(l.barcodeHeight)||40,displayValue:l.showText!==!1&&l.showText!=="false",fontOptions:l.fontOptions||"",font:l.font||"monospace",textAlign:l.textAlign||"center",textPosition:l.textPosition||"bottom",textMargin:Number(l.textMargin)||2,fontSize:Number(l.fontSize)||20,background:"transparent",margin:Number(l.margin)||0})}catch(c){console.error("Barcode render error",c)}};return We(()=>{Xe(i)}),Ie(()=>[e.element.content,e.element.variable,e.element.style,t.isExporting,t.testData],()=>{Xe(i)},{deep:!0}),(c,l)=>(z(),H("div",Ch,[n("img",{ref_key:"barcodeRef",ref:s,class:"w-full h-full object-contain pointer-events-none"},null,512)]))}});var Ah=il();const Wi=St(Ah),$h={class:"w-full h-full flex items-center justify-center overflow-hidden"},Ih=["src"],zh={sections:[{title:"properties.section.content",tab:"properties",fields:[{label:"properties.label.content",type:"text",target:"element",key:"content",placeholder:"properties.label.qrContentPlaceholder"},{label:"properties.label.variable",type:"text",target:"element",key:"variable",placeholder:"@variable"}]},{title:"properties.section.qrSettings",tab:"style",fields:[{label:"properties.label.errorCorrection",type:"select",target:"style",key:"qrErrorCorrection",options:[{label:"properties.option.eccLow",value:"L"},{label:"properties.option.eccMedium",value:"M"},{label:"properties.option.eccQuartile",value:"Q"},{label:"properties.option.eccHigh",value:"H"}]},{label:"properties.label.color",type:"color",target:"style",key:"color"}]}]},Ph=ze({__name:"QRCodeElement",props:{element:{}},setup(r){const e=r,t=Be(),s=se(""),o=fe(()=>{const c=e.element.variable||"";if(t.isExporting&&c){const l=qt(c);if(l&&Object.prototype.hasOwnProperty.call(t.testData,l)){const u=t.testData[l];if(u!=null)return String(u)}}return e.element.variable||e.element.content||"https://example.com"}),i=async()=>{try{const c=o.value;s.value=await Wi.toDataURL(c,{margin:0,color:{dark:e.element.style.color||"#000000",light:"#00000000"},errorCorrectionLevel:e.element.style.qrErrorCorrection||"M"})}catch(c){console.error("QR render error",c)}};return We(()=>Xe(i)),Ie(()=>[e.element.content,e.element.variable,e.element.style,t.isExporting,t.testData],()=>Xe(i),{deep:!0}),(c,l)=>(z(),H("div",$h,[s.value?(z(),H("img",{key:0,src:s.value,class:"w-full h-full object-contain pointer-events-none",draggable:"false"},null,8,Ih)):be("",!0)]))}}),Lh={class:"w-full h-full flex items-center justify-center"},Mh={sections:[{title:"properties.section.lineStyle",tab:"style",fields:[{label:"properties.label.color",type:"color",target:"style",key:"borderColor",defaultValue:"#000000"},{label:"properties.label.thickness",type:"number",target:"style",key:"borderWidth",min:1,max:100,step:1,defaultValue:1},{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",defaultValue:"solid",options:[{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]}]}]},Rh=ze({__name:"LineElement",props:{element:{}},setup(r){return(e,t)=>(z(),H("div",Lh,[n("div",{class:"w-full",style:ye({borderTopWidth:`${r.element.style.borderWidth||1}px`,borderTopStyle:r.element.style.borderStyle||"solid",borderTopColor:r.element.style.borderColor||"#000000"})},null,4)]))}}),Dh={sections:[{title:"properties.section.appearance",tab:"style",fields:[{label:"properties.label.background",type:"color",target:"style",key:"backgroundColor",defaultValue:"transparent"},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor",defaultValue:"#000000"},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:100,defaultValue:1},{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",defaultValue:"solid",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]},{label:"properties.label.cornerRadius",type:"number",target:"style",key:"borderRadius",min:0,max:1e3}]}]},Bh=ze({__name:"RectElement",props:{element:{}},setup(r){return(e,t)=>(z(),H("div",{class:"w-full h-full",style:ye({backgroundColor:r.element.style.backgroundColor||"transparent",borderWidth:`${r.element.style.borderWidth||1}px`,borderStyle:r.element.style.borderStyle||"solid",borderColor:r.element.style.borderColor||"#000000",borderRadius:`${r.element.style.borderRadius||0}px`})},null,4))}}),Oh={sections:[{title:"properties.section.appearance",tab:"style",fields:[{label:"properties.label.background",type:"color",target:"style",key:"backgroundColor",defaultValue:"transparent"},{label:"properties.label.borderColor",type:"color",target:"style",key:"borderColor",defaultValue:"#000000"},{label:"properties.label.borderWidth",type:"number",target:"style",key:"borderWidth",min:0,max:100,defaultValue:1},{label:"properties.label.borderStyle",type:"select",target:"style",key:"borderStyle",defaultValue:"solid",options:[{label:"properties.option.none",value:"none"},{label:"properties.option.solid",value:"solid"},{label:"properties.option.dashed",value:"dashed"},{label:"properties.option.dotted",value:"dotted"}]}]}]},qh=ze({__name:"CircleElement",props:{element:{}},setup(r){return(e,t)=>(z(),H("div",{class:"w-full h-full rounded-full",style:ye({backgroundColor:r.element.style.backgroundColor||"transparent",borderWidth:`${r.element.style.borderWidth||1}px`,borderStyle:r.element.style.borderStyle||"solid",borderColor:r.element.style.borderColor||"#000000"})},null,4))}}),Fh={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function jh(r,e){return z(),H("svg",Fh,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"},null,-1)])])}const zn=Se({name:"material-symbols-add",render:jh}),Nh={class:"absolute top-0 -right-12 flex flex-col gap-2 z-10"},Hh=["title"],Uh=["title","onClick"],Vh=["title","onClick"],Wh=["title","onClick"],Gh=["id","onDrop","onMousedown","onContextmenu"],Kh={key:0,"data-print-exclude":"true",class:"absolute inset-0 pointer-events-none opacity-50",style:{"background-image":"linear-gradient(#e5e7eb 1px, transparent 1px), linear-gradient(90deg, #e5e7eb 1px, transparent 1px)","background-size":"20px 20px"}},Yh=["onMousedown"],Xh=["onMousedown"],Zh={key:5,"data-print-exclude":"true",class:"marker absolute inset-0 pointer-events-none z-50 opacity-50"},Gi=ze({__name:"Canvas",setup(r){const e=Be(),{t}=je(),s=fe(()=>e.pages),o=fe(()=>e.zoom),i=fe(()=>e.pageSpacingY||0),c=fe(()=>e.pageSpacingX||0),l=fe(()=>e.pageSpacingX||0),u=fe(()=>e.pageSpacingY||0),y=fe(()=>e.pageSpacingY||0),x=se(!1),f=se(null),k=se(null),m=(L,W)=>{L.preventDefault(),L.stopPropagation(),x.value=!0,f.value=W;const $=L.target;k.value=$.closest(".print-page"),window.addEventListener("mousemove",b),window.addEventListener("mouseup",g)},b=L=>{if(!x.value||!k.value)return;const W=k.value.getBoundingClientRect(),$=(L.clientY-W.top)/e.zoom,T=Math.max(0,Math.min(e.canvasSize.height,$));f.value==="header"?e.setHeaderHeight(Math.round(T)):f.value==="footer"&&e.setFooterHeight(Math.round(e.canvasSize.height-T))},g=()=>{x.value=!1,f.value=null,k.value=null,window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",g)};Ge(()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",g)});const C=fe(()=>{const L={width:`${e.canvasSize.width}px`,height:`${e.canvasSize.height}px`,backgroundColor:e.canvasBackground};return p.value?{...L,...p.value}:L}),_=L=>L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),p=fe(()=>{const L=e.watermark;if(!L||!L.enabled||!L.text)return null;const W=_(L.text),$=Number.isFinite(L.angle)?L.angle:-30,T=Math.max(6,L.size||24),te=Math.max(40,L.density||160),G=L.color||"#000000",Q=Math.min(1,Math.max(0,L.opacity??.1)),me=`<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" width="${te}" height="${te}"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="${G}" fill-opacity="${Q}" font-size="${T}" transform="rotate(${$} ${te/2} ${te/2})">${W}</text></svg>`;return{backgroundImage:`url("data:image/svg+xml,${encodeURIComponent(me)}")`,backgroundRepeat:"repeat",backgroundSize:`${te}px ${te}px`}}),I=fe(()=>!e.isDragging||!e.selectedElementId?-1:e.pages.findIndex(L=>L.elements.some(W=>W.id===e.selectedElementId))),A=se(!1),U=se({x:0,y:0}),Y=se({x:0,y:0}),j=se(null),O=se(!1),F=fe(()=>{if(!A.value)return{display:"none"};const L=Math.min(U.value.x,Y.value.x),W=Math.min(U.value.y,Y.value.y),$=Math.abs(Y.value.x-U.value.x),T=Math.abs(Y.value.y-U.value.y);return{position:"absolute",left:`${L}px`,top:`${W}px`,width:`${$}px`,height:`${T}px`,border:"1px solid var(--brand-500)",backgroundColor:"var(--brand-500-alpha-10)",pointerEvents:"none",zIndex:1e3}}),oe=L=>{switch(L){case ge.TEXT:return Gs;case ge.IMAGE:return Ku;case ge.TABLE:return wh;case ge.PAGE_NUMBER:return kh;case ge.BARCODE:return Th;case ge.QRCODE:return Ph;case ge.LINE:return Rh;case ge.RECT:return Bh;case ge.CIRCLE:return qh;default:return Gs}},K=(L,W)=>{var ke;L.preventDefault();const $=(ke=L.dataTransfer)==null?void 0:ke.getData("application/json");if(!$)return;const{type:T,payload:te}=JSON.parse($),G=L.currentTarget.getBoundingClientRect(),Q=(L.clientX-G.left)/e.zoom,me=(L.clientY-G.top)/e.zoom;if(te){e.addElement({...te,x:Q,y:me,locked:!1},W);return}const ve={[ge.PAGE_NUMBER]:52,[ge.BARCODE]:200,[ge.QRCODE]:100,[ge.LINE]:200,[ge.RECT]:100,[ge.CIRCLE]:100},de={[ge.PAGE_NUMBER]:20,[ge.BARCODE]:80,[ge.QRCODE]:100,[ge.TABLE]:150,[ge.LINE]:20,[ge.RECT]:100,[ge.CIRCLE]:100},_e={type:T,x:Q,y:me,width:ve[T]||200,height:de[T]||100,variable:"",style:{fontSize:14,color:"#000000",...T===ge.RECT||T===ge.CIRCLE||T===ge.PAGE_NUMBER?{backgroundColor:"transparent"}:{},...T===ge.TABLE?{headerBackgroundColor:"#f3f4f6",headerColor:"#000000",footerBackgroundColor:"#f9fafb",footerColor:"#000000"}:{}},content:T===ge.TEXT?t("canvas.newText"):T===ge.BARCODE?"12345678":T===ge.QRCODE?"https://example.com":"",format:T===ge.PAGE_NUMBER?"1/Total":void 0,columns:T===ge.TABLE?[{field:"id",header:t("canvas.defaultTableHeaders.id"),width:50},{field:"name",header:t("canvas.defaultTableHeaders.name"),width:100},{field:"qty",header:t("canvas.defaultTableHeaders.qty"),width:60},{field:"price",header:t("canvas.defaultTableHeaders.price"),width:80},{field:"total",header:t("canvas.defaultTableHeaders.total"),width:80}]:void 0,data:T===ge.TABLE?Array.from({length:30},(ae,le)=>({id:le+1,name:`${t("canvas.defaultTableData.item")} ${le+1}`,qty:le%5+1,price:100+le*10,total:(le%5+1)*(100+le*10)})):void 0,showFooter:T===ge.TABLE?!0:void 0,tfootRepeat:T===ge.TABLE?!0:void 0,autoPaginate:T===ge.TABLE?!0:void 0,footerData:T===ge.TABLE?[{id:{value:t("canvas.defaultTableData.pageSum")},qty:{value:"",field:"{#pageQty}"},total:{value:"",field:"{#pageSum}"}},{id:{value:t("canvas.defaultTableData.total")},qty:{value:"",field:"{#totalQty}"},total:{value:"",field:"{#totalSum}"}},{id:{value:t("canvas.defaultTableData.inWords")},total:{value:"",field:"{#totalCap}"}}]:void 0,customScript:T===ge.TABLE?`// RMB Uppercase Conversion
try {
  function digitUppercase(n) {
      var fraction = ['角', '分'];
      var digit = [
          '零', '壹', '贰', '叁', '肆',
          '伍', '陆', '柒', '捌', '玖'
      ];
      var unit = [
          ['元', '万', '亿'],
          ['', '拾', '佰', '仟']
      ];
      var head = n < 0 ? '欠' : '';
      n = Math.abs(n);
      var s = '';
      for (var i = 0; i < fraction.length; i++) {
          s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, '');
      }
      s = s || '整';
      n = Math.floor(n);
      for (var i = 0; i < unit[0].length && n > 0; i++) {
          var p = '';
          for (var j = 0; j < unit[1].length && n > 0; j++) {
              p = digit[n % 10] + unit[1][j] + p;
              n = Math.floor(n / 10);
          }
          s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s;
      }
      return head + s.replace(/(零.)*零元/, '元')
          .replace(/(零.)+/g, '零')
          .replace(/^整$/, '零元整');
  }

  // 1. Calculate Total (works for both Global and Page data)
  let totalAmount = 0;
  let totalQty = 0;
  if (data && Array.isArray(data)) {
    data.forEach(row => {
      // Ensure numeric values
      const val = Number(row.total) || 0;
      const qty = Number(row.qty) || 0;
      totalAmount += val;
      totalQty += qty;
    });
  }

  // 2. Update Footer Data
  if (footerData && Array.isArray(footerData)) {
    footerData.forEach(row => {
      Object.keys(row).forEach(key => {
        const val = row[key];
        const processValue = (v) => {
           if (typeof v !== 'string') return v;
           
           // Global replacements (Grand Total)
           if (typeof type === 'undefined' || type !== 'page') {
               if (v.includes('{#totalSum}')) return v.replace('{#totalSum}', totalAmount.toFixed(2));
               if (v.includes('{#totalQty}')) return v.replace('{#totalQty}', String(totalQty));
               if (v.includes('{#totalCap}')) return v.replace('{#totalCap}', digitUppercase(totalAmount));
               
               // For {#pageSum}, we want to show the Grand Total in the Designer (visual feedback),
               // but pass the original {#pageSum} token to the Print logic (via data-value).
               if (v.includes('{#pageSum}')) {
                   const displayVal = v.replace('{#pageSum}', totalAmount.toFixed(2));
                   // printValue keeps {#pageSum} but resolves other globals
                   const printVal = v.replace('{#totalSum}', totalAmount.toFixed(2))
                                   .replace('{#totalQty}', String(totalQty))
                                   .replace('{#totalCap}', digitUppercase(totalAmount)); 
                   
                   return { value: displayVal, printValue: printVal };
               }

               // For {#pageQty}
               if (v.includes('{#pageQty}')) {
                   const displayVal = v.replace('{#pageQty}', String(totalQty));
                   // printValue keeps {#pageQty} but resolves other globals
                   const printVal = v.replace('{#totalSum}', totalAmount.toFixed(2))
                                   .replace('{#totalQty}', String(totalQty))
                                   .replace('{#totalCap}', digitUppercase(totalAmount)); 
                   
                   return { value: displayVal, printValue: printVal };
               }
           }
           
           // Page replacements (Page Sum)
           if (typeof type !== 'undefined' && type === 'page') {
               if (v.includes('{#pageSum}')) return v.replace('{#pageSum}', totalAmount.toFixed(2));
               if (v.includes('{#pageQty}')) return v.replace('{#pageQty}', String(totalQty));
           }
           return v;
        };

        // Handle object values
        if (val && typeof val === 'object') {
           // If it has a 'field' property, check if it contains a variable
           if (val.field && typeof val.field === 'string') {
               const processed = processValue(val.field);
               // If processed is different from field (meaning a replacement happened)
               // OR if processValue returned an object (for {#pageSum})
               if (processed !== val.field || typeof processed === 'object') {
                   if (typeof processed === 'object') {
                       val.result = processed.value; // Store in result, keep val.value as text
                       val.printValue = processed.printValue;
                   } else {
                       val.result = processed;
                   }
               }
           }
           // Also check 'value' if it was set manually and looks like a variable
           else if (val.value && typeof val.value === 'string') {
               // Only process if value looks like a variable, otherwise it's just text
               if (val.value.includes('{#')) {
                  const processed = processValue(val.value);
                  if (typeof processed === 'object') {
                       val.result = processed.value;
                       val.printValue = processed.printValue;
                   } else {
                       val.result = processed;
                   }
               }
           }
        }
      });
    });
  }

  return { data, footerData };
} catch (e) {
  console.error('Script Execution Error:', e);
  return { data, footerData };
}`:void 0};e.addElement(_e,W)},P=L=>{L.preventDefault()},q=L=>{!L.ctrlKey&&!L.metaKey&&!O.value&&e.selectElement(null)},h=(L,W)=>{if(L.button!==0||L.ctrlKey||L.metaKey||L.target.closest(".element-wrapper"))return;L.preventDefault(),A.value=!0,j.value=W;const te=L.currentTarget.getBoundingClientRect();U.value={x:(L.clientX-te.left)/o.value,y:(L.clientY-te.top)/o.value},Y.value={...U.value},window.addEventListener("mousemove",v),window.addEventListener("mouseup",Z)},v=L=>{if(!A.value||j.value===null)return;const W=document.getElementById(`page-${j.value}`);if(!W)return;const $=W.getBoundingClientRect();Y.value={x:(L.clientX-$.left)/o.value,y:(L.clientY-$.top)/o.value}},Z=()=>{if(!A.value)return;const L=Math.min(U.value.x,Y.value.x),W=Math.min(U.value.y,Y.value.y),$=Math.abs(Y.value.x-U.value.x),T=Math.abs(Y.value.y-U.value.y),te=[];if(j.value!==null){const G=s.value[j.value];if(G)for(const Q of G.elements){const me=Q.x+Q.width,ve=Q.y+Q.height,de=L+$,_e=W+T;Q.x<de&&me>L&&Q.y<_e&&ve>W&&te.push(Q.id)}}e.setSelection(te),A.value=!1,j.value=null,O.value=!0,setTimeout(()=>{O.value=!1},50),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",Z)},J=(L,W)=>{var de;const T=L.currentTarget.getBoundingClientRect(),te=(L.clientX-T.left)/o.value,G=(L.clientY-T.top)/o.value,Q=s.value[W];if(!Q)return;let me=null,ve=-1/0;for(let _e=0;_e<Q.elements.length;_e++){const ke=Q.elements[_e];if(te>=ke.x&&te<=ke.x+ke.width&&G>=ke.y&&G<=ke.y+ke.height){const le=((de=ke.style)==null?void 0:de.zIndex)??1;le>=ve&&(ve=le,me=ke.id)}}me&&e.selectElement(me,!1)},re=()=>s.value.length===0?[]:s.value[0].elements.filter(W=>e.showHeaderLine&&W.y<e.headerHeight||e.showFooterLine&&W.y>=e.canvasSize.height-e.footerHeight);return(L,W)=>(z(),H("div",{class:"flex flex-col",style:ye({transform:`scale(${o.value})`,transformOrigin:"top left",width:"fit-content",rowGap:`${i.value}px`})},[(z(!0),H(Te,null,Le(s.value,($,T)=>(z(),H("div",{key:$.id,class:"relative group"},[n("div",Nh,[n("button",{class:"w-8 h-8 flex items-center justify-center bg-white border border-gray-200 rounded shadow hover:bg-blue-50 hover:text-blue-600 text-gray-600 transition-colors",title:a(t)("canvas.addPage"),onClick:W[0]||(W[0]=te=>a(e).addPage())},[ue(a(zn))],8,Hh),n("button",{class:"w-8 h-8 flex items-center justify-center bg-white border border-gray-200 rounded shadow hover:bg-blue-50 hover:text-blue-600 text-gray-600 transition-colors",title:a(t)("canvas.copyPage"),onClick:te=>a(e).copyPage(T)},[ue(a(Tt))],8,Uh),a(e).copiedPage?(z(),H("button",{key:0,class:"w-8 h-8 flex items-center justify-center bg-white border border-gray-200 rounded shadow hover:bg-blue-50 hover:text-blue-600 text-gray-600 transition-colors",title:a(t)("canvas.pastePage"),onClick:te=>a(e).pastePage(T)},[ue(a($n))],8,Vh)):be("",!0),T>0?(z(),H("button",{key:1,class:"w-8 h-8 flex items-center justify-center bg-white border border-gray-200 rounded shadow hover:bg-red-50 hover:text-red-600 text-gray-600 transition-colors",title:a(t)("canvas.deletePage"),onClick:te=>a(e).removePage(T)},[ue(a(Et))],8,Wh)):be("",!0)]),n("div",{id:`page-${T}`,class:"print-page shadow-lg relative overflow-hidden transition-all",style:ye([C.value,{overflow:I.value===T?"visible":"hidden",zIndex:I.value===T?50:1}]),onDrop:te=>K(te,T),onDragover:P,onMousedown:te=>h(te,T),onContextmenu:te=>J(te,T),onClick:Ke(q,["self"])},[a(e).showGrid?(z(),H("div",Kh)):be("",!0),A.value&&j.value===T?(z(),H("div",{key:1,"data-print-exclude":"true",style:ye(F.value)},null,4)):be("",!0),a(e).showHeaderLine?(z(),H("div",{key:2,"data-print-exclude":"true",class:xe(["absolute left-0 w-full z-20 group flex flex-col justify-center items-center",T===0?"cursor-row-resize":"cursor-default"]),style:ye({top:`${a(e).headerHeight}px`,height:"12px",marginTop:"-6px"}),onMousedown:te=>T===0&&m(te,"header")},[n("div",{class:"w-full h-px",style:ye({backgroundImage:T===0?"linear-gradient(to right, #f87171 60%, transparent 40%)":"linear-gradient(to right, #d1d5db 60%, transparent 40%)",backgroundSize:"20px 1px",backgroundRepeat:"repeat-x"})},null,4),n("div",{class:xe(["absolute right-0 -top-4 text-xs bg-white/80 px-1 pointer-events-none",T===0?"text-red-400":"text-gray-400"])},E(a(t)("canvas.headerLabel")),3)],46,Yh)):be("",!0),a(e).showFooterLine?(z(),H("div",{key:3,"data-print-exclude":"true",class:xe(["absolute left-0 w-full z-20 group flex flex-col justify-center items-center",T===0?"cursor-row-resize":"cursor-default"]),style:ye({bottom:`${a(e).footerHeight}px`,height:"12px",marginBottom:"-6px"}),onMousedown:te=>T===0&&m(te,"footer")},[n("div",{class:"w-full h-px",style:ye({backgroundImage:T===0?"linear-gradient(to right, #f87171 60%, transparent 40%)":"linear-gradient(to right, #d1d5db 60%, transparent 40%)",backgroundSize:"20px 1px",backgroundRepeat:"repeat-x"})},null,4),n("div",{class:xe(["absolute right-0 -bottom-4 text-xs bg-white/80 px-1 pointer-events-none",T===0?"text-red-400":"text-gray-400"])},E(a(t)("canvas.footerLabel")),3)],46,Xh)):be("",!0),T>0&&s.value.length>0?(z(!0),H(Te,{key:4},Le(re(),te=>(z(),Pe(Ws,{key:`global-${te.id}`,element:te,"is-selected":a(e).selectedElementId===te.id||a(e).selectedElementIds.includes(te.id),zoom:o.value,"page-index":0,"read-only":!0},{default:pt(()=>[(z(),Pe(Dt(oe(te.type)),{element:te,"page-index":T,"total-pages":s.value.length},null,8,["element","page-index","total-pages"]))]),_:2},1032,["element","is-selected","zoom"]))),128)):be("",!0),(z(!0),H(Te,null,Le($.elements,te=>(z(),Pe(Ws,{key:te.id,element:te,"is-selected":a(e).selectedElementId===te.id||a(e).selectedElementIds.includes(te.id),zoom:o.value,"page-index":T},{default:pt(()=>[(z(),Pe(Dt(oe(te.type)),{element:te,"page-index":T,"total-pages":s.value.length},null,8,["element","page-index","total-pages"]))]),_:2},1032,["element","is-selected","zoom","page-index"]))),128)),a(e).showCornerMarkers?(z(),H("div",Zh,[n("div",{class:"absolute w-3 h-3 border-t-2 border-l-2 border-gray-300",style:ye({top:`${u.value}px`,left:`${c.value}px`})},null,4),n("div",{class:"absolute w-3 h-3 border-t-2 border-r-2 border-gray-300",style:ye({top:`${u.value}px`,right:`${l.value}px`})},null,4),n("div",{class:"absolute w-3 h-3 border-b-2 border-l-2 border-gray-300",style:ye({bottom:`${y.value}px`,left:`${c.value}px`})},null,4),n("div",{class:"absolute w-3 h-3 border-b-2 border-r-2 border-gray-300",style:ye({bottom:`${y.value}px`,right:`${l.value}px`})},null,4)])):be("",!0)],44,Gh)]))),128))],4))}}),Jh={class:"print-renderer"},Qh=ze({__name:"PrintRenderer",props:{payload:{},token:{}},setup(r){const e=r,t=Be(),s=e.token||new URLSearchParams(window.location.search).get("printToken")||"",o=window.location.origin,i=x=>{window.parent&&window.parent!==window&&window.parent.postMessage({type:x,token:s},o),window.dispatchEvent(new CustomEvent(`print-renderer:${x}`,{detail:{token:s}}))},c=async(x=2e3)=>{const f=document.fonts;!f||!f.ready||await Promise.race([f.ready,new Promise(k=>setTimeout(k,x))])},l=async(x=2e3)=>{const k=Array.from(document.images||[]).filter(m=>!m.complete);k.length!==0&&await Promise.race([Promise.all(k.map(m=>new Promise(b=>{const g=()=>{m.removeEventListener("load",g),m.removeEventListener("error",g),b()};m.addEventListener("load",g,{once:!0}),m.addEventListener("error",g,{once:!0})}))),new Promise(m=>setTimeout(m,x))])},u=async x=>{t.$patch({pages:Ee(x.pages||[]),canvasSize:x.canvasSize||t.canvasSize,canvasBackground:x.canvasBackground||t.canvasBackground,headerHeight:x.headerHeight??t.headerHeight,footerHeight:x.footerHeight??t.footerHeight,showHeaderLine:x.showHeaderLine??!1,showFooterLine:x.showFooterLine??!1,showGrid:!1,showCornerMarkers:!1,zoom:1,currentPageIndex:0,selectedElementId:null,selectedElementIds:[],guides:[],testData:x.testData||{}}),x.watermark&&(t.watermark=Ee(x.watermark)),x.unit&&(t.unit=x.unit),t.setIsExporting(!0),document.body.classList.add("exporting"),await Xe(),await c(),await l(),requestAnimationFrame(()=>{i("print-renderer-rendered")})},y=x=>{if(x.origin!==o)return;const f=x.data;!f||f.type!=="print-renderer-payload"||f.token!==s||u(f.payload||{})};return We(()=>{document.body.style.margin="0",document.body.style.background="#ffffff",window.addEventListener("message",y),e.payload?u(e.payload):i("print-renderer-ready")}),Ge(()=>{window.removeEventListener("message",y)}),(x,f)=>(z(),H("div",Jh,[ue(Gi)]))}}),At=(r,e)=>{const t=r.__vccOpts||r;for(const[s,o]of e)t[s]=o;return t},Ki=At(Qh,[["__scopeId","data-v-93e371da"]]),ep=`*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(147 197 253 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(147 197 253 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}:root{--brand-50: #eff6ff;--brand-100: #dbeafe;--brand-200: #bfdbfe;--brand-300: #93c5fd;--brand-400: #60a5fa;--brand-500: #3b82f6;--brand-600: #2563eb;--brand-700: #1d4ed8;--brand-800: #1e40af;--brand-900: #1e3a8a;--brand-950: #172554;--brand-500-alpha-10: rgb(59 130 246 / .1)}input[type=radio]{accent-color:var(--brand-600)}.theme-outline-hover:hover{outline:1px solid var(--brand-300)}.theme-hover-bg:hover{background-color:var(--brand-50)}.theme-hover-border:hover{border-color:var(--brand-500)}.theme-text{color:var(--brand-500)}.theme-text-hover:hover{color:var(--brand-700)}.theme-border{border-color:var(--brand-500)}.theme-border-strong{border-color:var(--brand-600)}.theme-border-hover{border-color:var(--brand-500)}.group:hover .theme-border-hover{border-color:var(--brand-400)}.theme-bg{background-color:var(--brand-500)}.theme-bg-strong{background-color:var(--brand-600)}.theme-bg-soft{background-color:#000000b3}.exporting .marker{display:none!important}html.exporting,body.exporting,html.previewing,body.previewing,.exporting{overflow:hidden!important}html{color-scheme:light}html.dark{color-scheme:dark}html.dark body{background-color:#0f172a;color:#e5e7eb}html.dark .bg-white{background-color:#1f2937!important}html.dark .bg-gray-50{background-color:#111827!important}html.dark :not(.canvas-scroll).bg-gray-100{background-color:#1f2937!important}html.dark .canvas-scroll.bg-gray-100{background-color:#334155!important}html.dark .hover\\\\:bg-gray-50:hover{background-color:#1f2937!important}html.dark .hover\\\\:bg-gray-100:hover{background-color:#374151!important}html.dark .bg-gray-200{background-color:#374151!important}html.dark .hover\\:bg-gray-200:hover{background-color:#4b5563!important}html.dark .hover\\:bg-blue-50:hover,html.dark .theme-hover-bg:hover{background-color:color-mix(in srgb,var(--brand-500) 16%,transparent)!important}html.dark .hover\\:border-blue-500:hover{border-color:#3b82f680!important}html.dark .text-gray-800{color:#f3f4f6!important}html.dark .text-gray-700{color:#e5e7eb!important}html.dark .text-gray-600{color:#d1d5db!important}html.dark .text-gray-500{color:#cbd5e1!important}html.dark .text-gray-400{color:#9ca3af!important}html.dark .text-gray-900{color:#f9fafb!important}html.dark .border-gray-100{border-color:#1f2937!important}html.dark .border-gray-200{border-color:#374151!important}html.dark select,html.dark option{background-color:#1f2937;color:#e5e7eb}html.dark .shadow-sm,html.dark .shadow,html.dark .shadow-xl,html.dark .\\!shadow{box-shadow:0 1px 2px #0009,0 1px 1px #0006!important}html.dark .print-page{color-scheme:light}html.dark .print-page .bg-white{background-color:#fff!important}html.dark .print-page .border-gray-100{border-color:#f3f4f6!important}html.dark .print-page .border-gray-200{border-color:#e5e7eb!important}html.dark .print-page .border-gray-300{border-color:#d1d5db!important}html.dark .print-page .text-gray-500{color:#6b7280!important}html.dark .print-page .text-gray-600{color:#4b5563!important}html.dark .print-page .text-gray-700{color:#374151!important}html.dark .print-page .text-gray-800{color:#1f2937!important}html.dark .print-page .text-gray-900{color:#111827!important}::-webkit-scrollbar{width:12px;height:12px}::-webkit-scrollbar-track{background:#f3f4f6;border-radius:0}::-webkit-scrollbar-thumb{background-color:#d1d5db;border-radius:0;border:2px solid #f3f4f6}::-webkit-scrollbar-corner{background:#f3f4f6}*{scrollbar-width:thin;scrollbar-color:#d1d5db #f3f4f6}html.dark ::-webkit-scrollbar-track{background:#1f2937}html.dark ::-webkit-scrollbar-thumb{background-color:#4b5563;border:2px solid #1f2937}html.dark ::-webkit-scrollbar-thumb:hover{background-color:#6b7280}html.dark *{scrollbar-color:#4b5563 #1f2937}.container{width:100%}@media(min-width:640px){.container{max-width:640px}}@media(min-width:768px){.container{max-width:768px}}@media(min-width:1024px){.container{max-width:1024px}}@media(min-width:1280px){.container{max-width:1280px}}@media(min-width:1536px){.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.-bottom-4{bottom:-1rem}.-left-2{left:-.5rem}.-left-4{left:-1rem}.-right-1{right:-.25rem}.-right-12{right:-3rem}.-right-3{right:-.75rem}.-right-5{right:-1.25rem}.-top-3{top:-.75rem}.-top-4{top:-1rem}.-top-6{top:-1.5rem}.bottom-0{bottom:0}.bottom-4{bottom:1rem}.left-0{left:0}.left-1\\/2{left:50%}.left-2{left:.5rem}.right-0{right:0}.right-1{right:.25rem}.right-4{right:1rem}.top-0{top:0}.top-1{top:.25rem}.top-1\\/2{top:50%}.top-2{top:.5rem}.top-6{top:1.5rem}.top-8{top:2rem}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.z-\\[-1\\]{z-index:-1}.z-\\[1000\\]{z-index:1000}.z-\\[100\\]{z-index:100}.z-\\[2000\\]{z-index:2000}.z-\\[2001\\]{z-index:2001}.z-\\[99999\\]{z-index:99999}.z-\\[9999\\]{z-index:9999}.z-\\[999\\]{z-index:999}.col-span-2{grid-column:span 2 / span 2}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-auto{margin-left:auto;margin-right:auto}.my-0\\.5{margin-top:.125rem;margin-bottom:.125rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.my-4{margin-top:1rem;margin-bottom:1rem}.-ml-1\\.5{margin-left:-.375rem}.-mt-1\\.5{margin-top:-.375rem}.mb-1{margin-bottom:.25rem}.mb-1\\.5{margin-bottom:.375rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-8{margin-bottom:2rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.box-content{box-sizing:content-box}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.h-0\\.5{height:.125rem}.h-1\\.5{height:.375rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-2{height:.5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\\.5{height:.875rem}.h-32{height:8rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-\\[1px\\]{height:1px}.h-\\[500px\\]{height:500px}.h-\\[56px\\]{height:56px}.h-\\[60px\\]{height:60px}.h-\\[80vh\\]{height:80vh}.h-\\[90vh\\]{height:90vh}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.max-h-\\[300px\\]{max-height:300px}.max-h-\\[500px\\]{max-height:500px}.max-h-\\[90vh\\]{max-height:90vh}.w-1{width:.25rem}.w-1\\.5{width:.375rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:.5rem}.w-3{width:.75rem}.w-3\\.5{width:.875rem}.w-32{width:8rem}.w-4{width:1rem}.w-40{width:10rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-9{width:2.25rem}.w-96{width:24rem}.w-\\[220px\\]{width:220px}.w-\\[240px\\]{width:240px}.w-\\[380px\\]{width:380px}.w-\\[60vw\\]{width:60vw}.w-\\[640px\\]{width:640px}.w-\\[700px\\]{width:700px}.w-\\[90vw\\]{width:90vw}.w-full{width:100%}.w-max{width:-moz-max-content;width:max-content}.w-px{width:1px}.w-screen{width:100vw}.min-w-0{min-width:0px}.min-w-\\[160px\\]{min-width:160px}.max-w-full{max-width:100%}.flex-1{flex:1 1 0%}.flex-none{flex:none}.flex-shrink-0{flex-shrink:0}.shrink{flex-shrink:1}.shrink-0{flex-shrink:0}.border-collapse{border-collapse:collapse}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-full{--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-4{--tw-translate-x: 1rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-5{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-150{--tw-scale-x: 1.5;--tw-scale-y: 1.5;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-col-resize{cursor:col-resize}.cursor-crosshair{cursor:crosshair}.cursor-default{cursor:default}.cursor-grab{cursor:grab}.cursor-move{cursor:move}.cursor-not-allowed{cursor:not-allowed}.cursor-ns-resize{cursor:ns-resize}.cursor-pointer{cursor:pointer}.cursor-row-resize{cursor:row-resize}.cursor-se-resize{cursor:se-resize}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.select-all{-webkit-user-select:all;-moz-user-select:all;user-select:all}.resize-y{resize:vertical}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-9{grid-template-columns:repeat(9,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.25rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(229 231 235 / var(--tw-divide-opacity, 1))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-\\[1px\\]{border-radius:1px}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-sm{border-radius:.125rem}.rounded-b-lg{border-bottom-right-radius:.5rem;border-bottom-left-radius:.5rem}.rounded-l-md{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.rounded-r-md{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.rounded-br-lg{border-bottom-right-radius:.5rem}.border{border-width:1px}.border-2{border-width:2px}.border-\\[0\\.5px\\]{border-width:.5px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-l-2{border-left-width:2px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-r-2{border-right-width:2px}.border-t{border-top-width:1px}.border-t-2{border-top-width:2px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-blue-200{border-color:var(--brand-200)}.border-blue-500{border-color:var(--brand-500)}.border-blue-600{border-color:var(--brand-600)}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-red-100{--tw-border-opacity: 1;border-color:rgb(254 226 226 / var(--tw-border-opacity, 1))}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.\\!bg-blue-100{background-color:var(--brand-100)!important}.bg-black\\/50{background-color:#00000080}.bg-blue-100{background-color:var(--brand-100)}.bg-blue-200{background-color:var(--brand-200)}.bg-blue-400{background-color:var(--brand-400)}.bg-blue-50{background-color:var(--brand-50)}.bg-blue-500{background-color:var(--brand-500)}.bg-blue-600{background-color:var(--brand-600)}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-slate-200{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\\/80{background-color:#fffc}.bg-\\[url\\(\\'data\\:image\\/png\\;base64\\,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ\\+5wNisxL\\/\\/8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII\\=\\'\\)\\]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=)}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top,var(--tw-gradient-stops))}.bg-gradient-to-tl{background-image:linear-gradient(to top left,var(--tw-gradient-stops))}.from-black{--tw-gradient-from: #000 var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-gray-300{--tw-gradient-from: #d1d5db var(--tw-gradient-from-position);--tw-gradient-to: rgb(209 213 219 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white{--tw-gradient-from: #fff var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-transparent{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.bg-\\[length\\:6px_6px\\]{background-size:6px 6px}.bg-repeat{background-repeat:repeat}.object-contain{-o-object-fit:contain;object-fit:contain}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-0\\.5{padding:.125rem}.p-1{padding:.25rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.pb-1{padding-bottom:.25rem}.pb-20{padding-bottom:5rem}.pt-2{padding-top:.5rem}.pt-3{padding-top:.75rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.normal-case{text-transform:none}.italic{font-style:italic}.not-italic{font-style:normal}.leading-none{line-height:1}.tracking-normal{letter-spacing:0em}.tracking-wider{letter-spacing:.05em}.text-blue-600{color:var(--brand-600)}.text-blue-700{color:var(--brand-700)}.text-blue-900{color:var(--brand-900)}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-slate-900{--tw-text-opacity: 1;color:rgb(15 23 42 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.overline{text-decoration-line:overline}.line-through{text-decoration-line:line-through}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-50{opacity:.5}.\\!shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1) !important;--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color) !important;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)!important}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-400{--tw-ring-color: var(--brand-400)}.ring-blue-500{--tw-ring-color: var(--brand-500)}.ring-red-500{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.ring-offset-1{--tw-ring-offset-width: 1px}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.\\[-moz-appearance\\:textfield\\]{-moz-appearance:textfield}.\\[appearance\\:textfield\\]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}html.dark .hover\\:bg-gray-50:hover{background-color:#111827!important}html.dark .hover\\:bg-gray-100:hover:not(.canvas-scroll){background-color:#1f2937!important}html.dark .hover\\:bg-gray-100:hover.canvas-scroll{background-color:#334155!important}html.dark .hover\\:bg-gray-200:hover{background-color:#374151!important}html.dark .hover\\:text-gray-800:hover{color:#f3f4f6!important}html.dark .hover\\:text-gray-700:hover{color:#e5e7eb!important}html.dark .hover\\:text-gray-600:hover{color:#d1d5db!important}html.dark .print-page .hover\\:text-gray-600:hover{color:#4b5563!important}html.dark .print-page .hover\\:text-gray-700:hover{color:#374151!important}html.dark .print-page .hover\\:text-gray-800:hover{color:#1f2937!important}html.dark .disabled\\:bg-gray-50:disabled{background-color:#111827!important}html.dark .disabled\\:bg-gray-100:disabled:not(.canvas-scroll){background-color:#1f2937!important}html.dark .disabled\\:bg-gray-100:disabled.canvas-scroll{background-color:#334155!important}html.dark .disabled\\:text-gray-500:disabled{color:#cbd5e1!important}html.dark .disabled\\:text-gray-400:disabled{color:#9ca3af!important}html.dark .disabled\\:border-gray-200:disabled{border-color:#374151!important}html.dark .print-page .disabled\\:border-gray-200:disabled{border-color:#e5e7eb!important}html.dark .print-page .disabled\\:text-gray-500:disabled{color:#6b7280!important}html.dark .disabled\\:hover\\:bg-white:hover:disabled{background-color:#1f2937!important}html.dark .disabled\\:hover\\:bg-gray-100:hover:disabled:not(.canvas-scroll){background-color:#1f2937!important}html.dark .disabled\\:hover\\:bg-gray-100:hover:disabled.canvas-scroll{background-color:#334155!important}html.dark .print-page .disabled\\:hover\\:bg-white:hover:disabled{background-color:#fff!important}.first\\:border-0:first-child{border-width:0px}.first\\:pt-0:first-child{padding-top:0}.last\\:border-0:last-child{border-width:0px}.last\\:border-b-0:last-child{border-bottom-width:0px}.focus-within\\:border-blue-500:focus-within{border-color:var(--brand-500)}.focus-within\\:ring-1:focus-within{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-within\\:ring-blue-500:focus-within{--tw-ring-color: var(--brand-500)}.hover\\:z-10:hover{z-index:10}.hover\\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:border-blue-200:hover{border-color:var(--brand-200)}.hover\\:border-blue-400:hover{border-color:var(--brand-400)}.hover\\:border-blue-500:hover{border-color:var(--brand-500)}.hover\\:border-gray-400:hover{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity, 1))}.hover\\:bg-blue-100:hover{background-color:var(--brand-100)}.hover\\:bg-blue-300:hover{background-color:var(--brand-300)}.hover\\:bg-blue-400:hover{background-color:var(--brand-400)}.hover\\:bg-blue-50:hover{background-color:var(--brand-50)}.hover\\:bg-blue-700:hover{background-color:var(--brand-700)}.hover\\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\\:bg-red-100:hover{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.hover\\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\\:bg-slate-300:hover{--tw-bg-opacity: 1;background-color:rgb(203 213 225 / var(--tw-bg-opacity, 1))}.hover\\:text-blue-600:hover{color:var(--brand-600)}.hover\\:text-blue-700:hover{color:var(--brand-700)}.hover\\:text-gray-600:hover{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover\\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\\:text-gray-800:hover{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.hover\\:text-red-600:hover{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.hover\\:text-red-800:hover{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.hover\\:opacity-100:hover{opacity:1}.hover\\:outline:hover{outline-style:solid}.hover\\:outline-1:hover{outline-width:1px}.hover\\:outline-blue-300:hover{outline-color:var(--brand-300)}.focus\\:border-blue-500:focus{border-color:var(--brand-500)}.focus\\:border-blue-600:focus{border-color:var(--brand-600)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-0:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-blue-500:focus{--tw-ring-color: var(--brand-500)}.focus\\:ring-blue-600:focus{--tw-ring-color: var(--brand-600)}.focus\\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:border-gray-200:disabled{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.disabled\\:bg-gray-100:disabled{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.disabled\\:bg-gray-400:disabled{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.disabled\\:bg-gray-50:disabled{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.disabled\\:text-gray-400:disabled{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.disabled\\:text-gray-500:disabled{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.disabled\\:opacity-30:disabled{opacity:.3}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:hover\\:bg-blue-600:hover:disabled{background-color:var(--brand-600)}.disabled\\:hover\\:bg-gray-100:hover:disabled{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.disabled\\:hover\\:bg-white:hover:disabled{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.group:hover .group-hover\\:text-blue-600{color:var(--brand-600)}.group:hover .group-hover\\:text-blue-700{color:var(--brand-700)}.group:hover .group-hover\\:opacity-100{opacity:1}.dark\\:border-blue-800:is(.dark *){border-color:var(--brand-800)}.dark\\:bg-blue-500:is(.dark *){background-color:var(--brand-500)}.dark\\:bg-blue-700:is(.dark *){background-color:var(--brand-700)}.dark\\:bg-blue-950:is(.dark *){background-color:var(--brand-950)}.dark\\:bg-slate-700:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(51 65 85 / var(--tw-bg-opacity, 1))}.dark\\:text-blue-100:is(.dark *){color:var(--brand-100)}.dark\\:text-slate-100:is(.dark *){--tw-text-opacity: 1;color:rgb(241 245 249 / var(--tw-text-opacity, 1))}.dark\\:text-white:is(.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\\:hover\\:bg-blue-400:hover:is(.dark *){background-color:var(--brand-400)}.dark\\:hover\\:bg-blue-600:hover:is(.dark *){background-color:var(--brand-600)}.dark\\:hover\\:bg-slate-600:hover:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(71 85 105 / var(--tw-bg-opacity, 1))}.\\[\\&\\:\\:-moz-range-thumb\\]\\:h-4::-moz-range-thumb{height:1rem}.\\[\\&\\:\\:-moz-range-thumb\\]\\:w-4::-moz-range-thumb{width:1rem}.\\[\\&\\:\\:-moz-range-thumb\\]\\:cursor-pointer::-moz-range-thumb{cursor:pointer}.\\[\\&\\:\\:-moz-range-thumb\\]\\:rounded-full::-moz-range-thumb{border-radius:9999px}.\\[\\&\\:\\:-moz-range-thumb\\]\\:border-none::-moz-range-thumb{border-style:none}.\\[\\&\\:\\:-moz-range-thumb\\]\\:bg-blue-600::-moz-range-thumb{background-color:var(--brand-600)}.\\[\\&\\:\\:-moz-range-thumb\\]\\:transition-all::-moz-range-thumb{-moz-transition-property:all;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.\\[\\&\\:\\:-moz-range-thumb\\]\\:hover\\:scale-110:hover::-moz-range-thumb{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\:\\:-webkit-inner-spin-button\\]\\:appearance-none::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none}.\\[\\&\\:\\:-webkit-outer-spin-button\\]\\:appearance-none::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:h-4::-webkit-slider-thumb{height:1rem}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:w-4::-webkit-slider-thumb{width:1rem}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:cursor-pointer::-webkit-slider-thumb{cursor:pointer}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:appearance-none::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:rounded-full::-webkit-slider-thumb{border-radius:9999px}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:bg-blue-600::-webkit-slider-thumb{background-color:var(--brand-600)}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:transition-all::-webkit-slider-thumb{-webkit-transition-property:all;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:hover\\:scale-110:hover::-webkit-slider-thumb{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}`,Yi=()=>{const r=Be(),{printMode:e,localSettings:t,remoteSettings:s,localStatus:o,remoteStatus:i,localPrintOptions:c,remotePrintOptions:l,localWsUrl:u,remoteWsUrl:y,remoteSelectedClientId:x,exportImageMerged:f}=tr(),k=ae=>{const le=Ee(ae),pe=r.headerHeight>0&&r.showHeaderLine,d=r.footerHeight>0&&r.showFooterLine;if(!pe&&!d)return le;const B=le[0],R=r.canvasSize.height,w=pe?B.elements.filter(M=>M.y+M.height<=r.headerHeight):[],S=d?B.elements.filter(M=>M.y>=R-r.footerHeight):[],N=Ee(le);for(let M=0;M<N.length;M++){if(M===0)continue;const X=N[M];for(const D of w)X.elements.push({...Ee(D),id:He()});for(const D of S)X.elements.push({...Ee(D),id:He()})}return N},m=async(ae={})=>{const le=ae.mutateStore!==!1,pe=ae.setExporting!==!1,d=le?r.selectedElementId:null,B=le?r.showGrid:!1,R=le?r.zoom:1,w=le?Ee(r.pages):null,S=le?r.showHeaderLine:!1,N=le?r.showFooterLine:!1,M=le?r.showCornerMarkers:!1,X=pe?!!r.isExporting:!1,D=document.documentElement.style.overflowX,ne=document.documentElement.style.overflowY,he=document.body.style.overflowX,ce=document.body.style.overflowY;return le&&(r.selectElement(null),r.setShowGrid(!1),r.setZoom(1),r.pages=k(r.pages),r.setShowHeaderLine(!1),r.setShowFooterLine(!1),r.showCornerMarkers=!1,pe&&(r.setIsExporting(!0),document.body.classList.add("exporting"))),document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",!le&&pe&&(r.setIsExporting(!0),document.body.classList.add("exporting")),await Xe(),await new Promise(we=>setTimeout(we,500)),()=>{pe&&(document.body.classList.remove("exporting"),r.setIsExporting(X)),document.documentElement.style.overflowX=D,document.documentElement.style.overflowY=ne,document.body.style.overflowX=he,document.body.style.overflowY=ce,le&&(r.setShowGrid(B),r.selectElement(d),r.setZoom(R),w&&(r.pages=w),r.setShowHeaderLine(S),r.setShowFooterLine(N),r.showCornerMarkers=M)}},b=ae=>{ae.classList.remove("group","cursor-move","select-none","ring-2","ring-blue-500","ring-red-500","hover:outline","hover:outline-1","hover:outline-blue-300");const le=[];ae.classList.forEach(d=>{(d.startsWith("hover:")||d.startsWith("focus:")||d.startsWith("active:"))&&le.push(d)}),le.forEach(d=>ae.classList.remove(d)),(ae.style.borderColor==="transparent"||ae.style.border.includes("transparent")||ae.style.borderStyle==="dashed"&&(ae.style.borderColor==="transparent"||!ae.style.borderColor&&ae.style.border.includes("transparent")))&&(ae.style.border="none",ae.style.outline="none",ae.style.boxShadow="none"),Array.from(ae.children).forEach(d=>b(d))},g={enabled:!1,text:"",angle:-30,color:"#000000",opacity:.1,size:24,density:160},C=()=>({pages:k(r.pages),canvasSize:{...r.canvasSize},canvasBackground:r.canvasBackground,headerHeight:r.headerHeight,footerHeight:r.footerHeight,showHeaderLine:r.showHeaderLine,showFooterLine:r.showFooterLine,watermark:Ee(r.watermark||g),unit:r.unit||"mm",testData:Ee(r.testData||{})}),_=(ae,le,pe=15e3)=>new Promise((d,B)=>{const R=window.location.origin,w=window.setTimeout(()=>{window.removeEventListener("message",S),window.removeEventListener(`print-renderer:${le}`,N),B(new Error(`Print renderer timeout: ${le}`))},pe),S=M=>{if(M.origin!==R)return;const X=M.data;!X||X.type!==le||X.token!==ae||(window.clearTimeout(w),window.removeEventListener("message",S),window.removeEventListener(`print-renderer:${le}`,N),d(X))},N=M=>{M.detail&&M.detail.token===ae&&(window.clearTimeout(w),window.removeEventListener("message",S),window.removeEventListener(`print-renderer:${le}`,N),d({type:le,token:ae}))};window.addEventListener("message",S),window.addEventListener(`print-renderer:${le}`,N)}),p=async()=>{const ae=He(),le=document.createElement("iframe");le.setAttribute("data-print-renderer","true"),le.style.cssText="position:fixed;left:0;top:0;width:0;height:0;border:0;visibility:hidden;",document.body.appendChild(le);const pe=le.contentDocument,d=le.contentWindow;if(!pe||!d)throw new Error("Print renderer not available");const B=pe.createElement("style");B.textContent=ep,pe.head.appendChild(B);const R=pe.createElement("div");R.id="app",pe.body.appendChild(R);const w=C(),S=hi({render:()=>el(Ki,{payload:w,token:ae})});S.use(pi()),S.use(mi),S.mount(R);const N=()=>{S.unmount(),le.parentNode&&le.parentNode.removeChild(le)};try{return await _(ae,"print-renderer-rendered"),{pages:Array.from(pe.querySelectorAll(".print-page")),cleanup:N,getComputedStyleFn:d.getComputedStyle.bind(d)}}catch(M){throw N(),M}},I=async ae=>{if(typeof ae=="string")return{content:ae,cleanup:null,getComputedStyleFn:window.getComputedStyle};const le=await p();return{content:le.pages,cleanup:le.cleanup,getComputedStyleFn:le.getComputedStyleFn}},A=async()=>{const ae=await m({mutateStore:!1,setExporting:!1}),le=r.canvasSize.width,pe=r.canvasSize.height;let d=null,B=null,R=null;try{const w=await I(Array.from(document.querySelectorAll(".print-page")));R=w.cleanup;const S=await K(w.content,le,pe,!0,w.getComputedStyleFn);d=S.container,B=S.tempWrapper;const N=document.createElement("div");return N.style.width="100%",N.style.display="flex",N.style.flexDirection="column",N.style.alignItems="center",Array.from(d.children).filter(X=>!["STYLE","LINK","SCRIPT"].includes(X.tagName)).forEach((X,D)=>{const ne=X.cloneNode(!0);ne.style.position="relative",ne.style.left="auto",ne.style.top="auto",ne.style.width=`${le}px`,ne.style.height=`${pe}px`,ne.style.margin="0 0 20px 0",ne.style.backgroundColor=r.canvasBackground,ne.style.transform="none",N.appendChild(ne)}),N.outerHTML}finally{B&&B.parentNode&&B.parentNode.removeChild(B),R&&R(),ae()}},U=ae=>{ae.querySelectorAll("svg").forEach(pe=>{const d=pe.parentElement;if(!d)return;const B=getComputedStyle(d),R=parseFloat(B.width),w=parseFloat(B.height),S=document.createElement("canvas");S.width=Number.isFinite(R)?Math.max(1,Math.round(R)):10,S.height=Number.isFinite(w)?Math.max(1,Math.round(w)):10;const N=S.getContext("2d");if(!N)return;const M=new XMLSerializer;pe.setAttribute("width",`${R}px`),pe.setAttribute("height",`${w}px`);const X=M.serializeToString(pe);rl.fromString(N,X).render();const ne=document.createElement("img");ne.src=S.toDataURL("image/png"),ne.style.width=`${R}px`,ne.style.height=`${w}px`,ne.style.display="block",pe.before(ne),d.removeChild(pe)})},Y=(ae,le)=>{Array.from(ae.children).filter(d=>!["STYLE","LINK","SCRIPT"].includes(d.tagName)).forEach((d,B)=>{d.querySelectorAll('[data-print-type="page-number"]').forEach(w=>{const S=w.querySelector(".page-number-text");S&&(S.textContent=`${B+1}/${le}`)})})},j=(ae,le,pe,d,B,R,w)=>{ae.querySelectorAll("[data-print-wrapper]").forEach(N=>{const M=N,X=parseFloat(M.style.top)||0;parseFloat(M.style.height)||M.offsetHeight;const D=R&&X<pe,ne=w&&X>=B-d;if(D||ne){const he=M.cloneNode(!0);le.appendChild(he)}})},O=ae=>{const le=ae.querySelector("tfoot");if(!le)return;const pe=ae.getAttribute("data-custom-script");if(pe)try{const d=ae.querySelector("tbody"),B=[];d&&Array.from(d.querySelectorAll("tr")).forEach(M=>{const X={};Array.from(M.querySelectorAll("td")).forEach(ne=>{const he=ne.getAttribute("data-field");he&&(X[he]=ne.textContent||"")}),Object.keys(X).length>0&&B.push(X)});const R=[];Array.from(le.querySelectorAll("tr")).forEach(N=>{const M={};Array.from(N.querySelectorAll("td")).forEach(D=>{const ne=D.getAttribute("data-field");ne&&(M[ne]={value:D.getAttribute("data-value")||D.textContent||""})}),R.push(M)}),new Function("data","footerData","columns","type",pe)(B,R,[],"page"),R.length>0&&Array.from(le.querySelectorAll("tr")).forEach((M,X)=>{R[X]&&Array.from(M.querySelectorAll("td")).forEach(ne=>{const he=ne.getAttribute("data-field");if(he&&R[X][he]!==void 0){let ce=R[X][he];ce&&typeof ce=="object"&&(ce.result!==void 0?ce=ce.result:ce.value!==void 0&&(ce=ce.value)),ne.textContent=String(ce)}})});return}catch(d){console.error("Page sum script error:",d)}},F=(ae,le,pe,d,B,R)=>{let w=Array.from(ae.children).filter(S=>!["STYLE","LINK","SCRIPT"].includes(S.tagName));for(let S=0;S<w.length;S++){const N=w[S];N.querySelectorAll("table").forEach(X=>{const D=X.closest("[data-print-wrapper]");if(!D||!(X.getAttribute("data-auto-paginate")==="true"))return;D.style.height="auto",X.style.height="auto";const he=X.querySelector("tbody");he&&(he.style.height="auto");const ce=X.parentElement;ce&&(ce.classList.remove("h-full","overflow-hidden"),ce.style.height="auto",ce.style.overflow="visible");const ie=N.getBoundingClientRect().top+le-d,ee=D.getBoundingClientRect().top;if(X.getBoundingClientRect().bottom<=ie){O(X);return}let De=-1;const Ue=X.querySelector("tbody");if(!Ue)return;const $e=Array.from(Ue.querySelectorAll("tr")),Fe=X.querySelector("tfoot"),st=X.getAttribute("data-tfoot-repeat")==="true";let Ve=0;Fe&&st&&(Ve=Fe.getBoundingClientRect().height);for(let Ne=0;Ne<$e.length;Ne++)if($e[Ne].getBoundingClientRect().bottom+Ve>ie+1){if(De=Ne,De===0){const ot=B&&pe>0?pe+10:r.pageSpacingY||0;ee<=ot+5&&(De=1)}break}if(De!==-1){const Ne=document.createElement("div");Ne.className=N.className,Ne.style.cssText=N.style.cssText,Ne.innerHTML="",j(N,Ne,pe,d,le,B,R),S===w.length-1?ae.appendChild(Ne):ae.insertBefore(Ne,w[S+1]),w=Array.from(ae.children).filter(lt=>!["STYLE","LINK","SCRIPT"].includes(lt.tagName));const Ze=D.cloneNode(!0),dt=B&&pe>0?pe+10:r.pageSpacingY||0;Ze.style.removeProperty("top"),Ze.style.setProperty("top",`${dt}px`,"important");const ot=$e;for(let lt=De;lt<ot.length;lt++)ot[lt].remove();De===0&&D.remove();const it=X.querySelector("tfoot"),ft=X.getAttribute("data-tfoot-repeat")==="true";it&&(ft?O(X):it.remove());const mt=Ze.querySelector("table");mt.style.height="auto";const rr=mt.querySelector("tbody");rr&&(rr.style.height="auto");const Ji=Array.from(rr.querySelectorAll("tr"));for(let lt=0;lt<De;lt++)Ji[lt].remove();Ne.appendChild(Ze)}else O(X)})}return w=Array.from(ae.children).filter(S=>!["STYLE","LINK","SCRIPT"].includes(S.tagName)),w.forEach((S,N)=>{S.style.top=`${N*le}px`}),w.length},oe=(ae,le=window.getComputedStyle)=>{const pe=ae.cloneNode(!0),d=[[ae,pe]];for(;d.length>0;){const[B,R]=d.shift();if(B.nodeType===1){const w=le(B),S=R.style;for(let N=0;N<w.length;N++){const M=w[N];S.setProperty(M,w.getPropertyValue(M),w.getPropertyPriority(M))}}for(let w=0;w<B.children.length;w++)R.children[w]&&d.push([B.children[w],R.children[w]])}return pe},K=async(ae,le,pe,d=!0,B=window.getComputedStyle)=>{const R=document.createElement("div");R.style.position="fixed",R.style.left="0",R.style.top="0",R.style.width=`${le}px`,R.style.height=`${pe}px`,R.style.zIndex="-9999",R.className="print_temp_container",document.body.appendChild(R),document.head.querySelectorAll('style, link[rel="stylesheet"]').forEach(M=>{R.appendChild(M.cloneNode(!0))});let S=[];typeof ae=="string"?(R.innerHTML=ae,S=Array.from(R.children).filter(M=>!["STYLE","LINK","SCRIPT"].includes(M.tagName))):Array.isArray(ae)?S=ae:ae.classList.contains("design-workspace")?S=Array.from(ae.children):S=[ae],S.forEach((M,X)=>{const D=oe(M,B);D.style.position="absolute",D.style.left="0",D.style.top=`${X*pe}px`,D.style.width=`${le}px`,D.style.height=`${pe}px`,D.style.transform="none",D.style.backgroundColor=r.canvasBackground,D.querySelectorAll('[data-print-exclude="true"]').forEach(ce=>ce.remove()),D.querySelectorAll(".element-wrapper").forEach(ce=>ce.setAttribute("data-print-wrapper","true")),b(D),D.querySelectorAll("svg").forEach(ce=>{const we=ce.getBoundingClientRect();if(we.width===0||we.height===0){const ie=ce.getAttribute("width"),V=ce.getAttribute("height");ie&&(ce.style.width=ie.includes("px")?ie:`${ie}px`),V&&(ce.style.height=V.includes("px")?V:`${V}px`)}}),R.appendChild(D)}),await new Promise(M=>setTimeout(M,100)),d&&U(R);const N=F(R,pe,r.headerHeight,r.footerHeight,r.showHeaderLine,r.showFooterLine);return Y(R,N),R.style.height=`${pe*N}px`,{container:R,tempWrapper:R,pagesCount:N}},P=async(ae,le,pe)=>{const d=Array.from(ae.children).filter(S=>!["STYLE","LINK","SCRIPT"].includes(S.tagName));d.forEach(S=>{S.style.top="0px"});const B=async S=>{const N=await Au.toCanvas(S,{scale:1.5,width:le,height:pe,useCORS:!0,bgcolor:r.canvasBackground}),M=N.getContext("2d");return M&&(M.mozImageSmoothingEnabled=!1,M.webkitImageSmoothingEnabled=!1,M.msImageSmoothingEnabled=!1,M.imageSmoothingEnabled=!1),N.toDataURL("image/jpeg",.5)},R=3,w=[];for(let S=0;S<d.length;S+=R){const N=d.slice(S,S+R),M=await Promise.all(N.map(X=>B(X)));w.push(...M)}return w},q=async ae=>{const le=await m({mutateStore:!1,setExporting:!1}),pe=r.canvasSize.width,d=r.canvasSize.height,B=hn(pe),R=hn(d);let w=null,S=null;try{const N=await I(ae);S=N.cleanup;const{container:M,tempWrapper:X}=await K(N.content,pe,d,!0,N.getComputedStyleFn);w=X;const D=new al({orientation:pe>d?"l":"p",unit:"mm",format:[B,R],hotfixes:["px_scaling"]});return(await P(M,pe,d)).forEach((he,ce)=>{ce>0&&D.addPage([B,R]),D.addImage(he,"JPEG",0,0,B,R)}),D}finally{w&&w.parentNode&&w.parentNode.removeChild(w),S&&S(),le()}},h=async(ae,le="print-design.pdf")=>{try{const pe=ae||Array.from(document.querySelectorAll(".print-page"));(await q(pe)).save(le)}catch(pe){console.error("Export PDF failed",pe),alert("Export PDF failed")}},v=async ae=>{try{const pe=(await q(ae)).output("blob"),d=URL.createObjectURL(pe);if(/Edg\//.test(navigator.userAgent)){const w=window.open(d,"_blank","noopener,noreferrer");if(!w){URL.revokeObjectURL(d);return}w.addEventListener("beforeunload",()=>{URL.revokeObjectURL(d)}),w.onload=()=>{try{w.focus(),w.print()}finally{setTimeout(()=>{URL.revokeObjectURL(d)},1e3)}};return}const R=document.createElement("iframe");R.style.position="fixed",R.style.left="0",R.style.top="0",R.style.width="0px",R.style.height="0px",R.style.border="0",R.style.visibility="hidden",R.src=d,document.body.appendChild(R),R.onload=()=>{const w=R.contentWindow;w&&(w.focus(),setTimeout(()=>{w.print()},100)),setTimeout(()=>{document.body.removeChild(R),URL.revokeObjectURL(d)},1e3)}}catch(le){console.error("Print failed",le),alert("Print failed")}},Z=ae=>new Promise((le,pe)=>{const d=new FileReader;d.onloadend=()=>le(d.result),d.onerror=()=>pe(new Error("Failed to read PDF blob")),d.readAsDataURL(ae)}),J=(ae,le,pe)=>{const d={printer:ae.printer,content:le};return pe&&(d.key=pe),(ae.jobName||ae.copies||ae.intervalMs)&&(d.job={...ae.jobName?{name:ae.jobName}:{},...ae.copies?{copies:ae.copies}:{},...ae.intervalMs?{intervalMs:ae.intervalMs}:{}}),(ae.pageRange||ae.pageSet)&&(d.pages={...ae.pageRange?{range:ae.pageRange}:{},...ae.pageSet?{set:ae.pageSet}:{}}),(ae.scale||ae.orientation)&&(d.layout={...ae.scale?{scale:ae.scale}:{},...ae.orientation?{orientation:ae.orientation}:{}}),ae.colorMode&&(d.color={mode:ae.colorMode}),ae.sidesMode&&(d.sides={mode:ae.sidesMode}),ae.paperSize&&(d.paper={size:ae.paperSize}),ae.trayBin&&(d.tray={bin:ae.trayBin}),d},re=(ae,le,pe)=>new Promise((d,B)=>{let R=!1;const w=new WebSocket(ae),S=window.setTimeout(()=>{R||(R=!0,w.close(),B(new Error("Print request timeout")))},3e4);w.onopen=()=>{w.send(JSON.stringify(le))},w.onmessage=N=>{if(!R)try{const M=JSON.parse(N.data);if(pe==="status"&&(M.status==="success"||M.status),pe==="task_result"&&M.cmd==="task_result"){R=!0,window.clearTimeout(S),w.close(),d();return}}catch(M){R=!0,window.clearTimeout(S),w.close(),B(M instanceof Error?M:new Error("Print failed"))}},w.onerror=()=>{R||(R=!0,window.clearTimeout(S),w.close(),B(new Error("Print connection failed")))}});let L=null,W="",$=null,T=Promise.resolve();const te=()=>{L&&L.readyState===WebSocket.OPEN&&L.close(),L=null,W="",$=null},G=ae=>L&&L.readyState===WebSocket.OPEN&&W===ae?Promise.resolve(L):$||(W=ae,$=new Promise((le,pe)=>{const d=new WebSocket(ae),B=()=>{d.removeEventListener("open",B),d.removeEventListener("error",R),L=d,$=null,le(d)},R=()=>{d.removeEventListener("open",B),d.removeEventListener("error",R),te(),pe(new Error("Print connection failed"))};d.addEventListener("open",B),d.addEventListener("error",R)}),$),Q=(ae,le,pe)=>(T=T.then(()=>new Promise(async(d,B)=>{let R=!1,w=null;const S=window.setTimeout(()=>{R||(R=!0,te(),B(new Error("Print request timeout")))},3e4),N=()=>{w&&(w.removeEventListener("message",M),w.removeEventListener("error",X),w.removeEventListener("close",D))},M=ne=>{if(!R)try{const he=JSON.parse(ne.data);(he.status==="success"||he.status==="error")&&(R=!0,window.clearTimeout(S),N(),he.status==="success"?d():B(new Error(he.message||"Print failed")))}catch(he){R=!0,window.clearTimeout(S),N(),B(he instanceof Error?he:new Error("Print failed"))}},X=()=>{R||(R=!0,window.clearTimeout(S),N(),te(),B(new Error("Print connection failed")))},D=()=>{R||(R=!0,window.clearTimeout(S),N(),te(),B(new Error("Print connection closed")))};try{w=await G(ae),w.addEventListener("message",M),w.addEventListener("error",X),w.addEventListener("close",D),w.send(JSON.stringify(le))}catch(ne){R=!0,window.clearTimeout(S),N(),B(ne instanceof Error?ne:new Error("Print connection failed"))}})),T),me=async(ae,le)=>{const pe=(le==null?void 0:le.mode)||e.value;if(pe==="browser"){await v(ae);return}if(!(pe==="local"?o.value==="connected":i.value==="connected")){await v(ae);return}const B=(le==null?void 0:le.options)||(pe==="local"?c:l);if(!B.printer){alert("Printer is required");return}try{const R=await ke(ae),w=await Z(R);if(pe==="local"){const N=J(B,w,t.secretKey.trim());await Q(u.value,N,"status");return}if(!x.value){alert("Client is required");return}const S=J(B,w);S.cmd="submit_task",S.client_id=x.value,await re(y.value,S,"task_result")}catch(R){console.error("Print failed",R),alert("Print failed")}},ve=async ae=>{if(ae.length===0)return"";const le=await new Promise((S,N)=>{const M=new Image;M.onload=()=>S(M),M.onerror=N,M.src=ae[0]}),pe=le.width,d=le.height,B=d*ae.length,R=document.createElement("canvas");R.width=pe,R.height=B;const w=R.getContext("2d");if(!w)throw new Error("Could not get canvas context");w.drawImage(le,0,0);for(let S=1;S<ae.length;S++)await new Promise((N,M)=>{const X=new Image;X.onload=()=>{w.drawImage(X,0,S*d),N()},X.onerror=M,X.src=ae[S]});return R.toDataURL("image/jpeg",.8)},de=async(ae,le="print-design")=>{try{const pe=ae||Array.from(document.querySelectorAll(".print-page")),d=await m({mutateStore:!1,setExporting:!1}),B=r.canvasSize.width,R=r.canvasSize.height;let w=null;const S=await I(pe);w=S.cleanup;const{container:N,tempWrapper:M}=await K(S.content,B,R,!0,S.getComputedStyleFn);try{const X=await P(N,B,R);if(X.length===0)return;if(f.value){const D=await ve(X),ne=document.createElement("a");ne.href=D,ne.download=`${le}.jpg`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)}else{const D=new zu;await Promise.all(X.map(async(we,ie)=>{const ee=await(await fetch(we)).blob();D.file(`${le}-${ie+1}.jpg`,ee)}));const ne=await D.generateAsync({type:"blob"}),he=URL.createObjectURL(ne),ce=document.createElement("a");ce.href=he,ce.download=`${le}.zip`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(he)}}finally{M&&M.parentNode&&M.parentNode.removeChild(M),w&&w(),d()}}catch(pe){console.error("Export Images failed",pe),alert("Export Images failed")}},_e=async ae=>{try{const le=ae||Array.from(document.querySelectorAll(".print-page")),pe=await m({mutateStore:!1,setExporting:!1}),d=r.canvasSize.width,B=r.canvasSize.height;let R=null;const w=await I(le);R=w.cleanup;const{container:S,tempWrapper:N}=await K(w.content,d,B,!0,w.getComputedStyleFn);try{const M=await P(S,d,B);if(M.length===0)throw new Error("No images generated");const X=await ve(M);return await(await fetch(X)).blob()}finally{N&&N.parentNode&&N.parentNode.removeChild(N),R&&R(),pe()}}catch(le){throw console.error("Get Image Blob failed",le),le}},ke=async ae=>{try{return(await q(ae)).output("blob")}catch(le){throw console.error("Get PDF Blob failed",le),le}};return{getPrintHtml:A,print:me,exportPdf:h,exportImages:de,getPdfBlob:ke,getImageBlob:_e}},tp={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function rp(r,e){return z(),H("svg",tp,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6z"},null,-1)])])}const yt=Se({name:"material-symbols-close",render:rp}),op={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function np(r,e){return z(),H("svg",op,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M14 20v-2h3q.425 0 .713-.288T18 17v-2q0-.95.55-1.725t1.45-1.1v-.35q-.9-.325-1.45-1.1T18 9V7q0-.425-.288-.712T17 6h-3V4h3q1.25 0 2.125.875T20 7v2q0 .425.288.713T21 10h1v4h-1q-.425 0-.712.288T20 15v2q0 1.25-.875 2.125T17 20zm-7 0q-1.25 0-2.125-.875T4 17v-2q0-.425-.288-.712T3 14H2v-4h1q.425 0 .713-.288T4 9V7q0-1.25.875-2.125T7 4h3v2H7q-.425 0-.712.288T6 7v2q0 .95-.55 1.725T4 11.825v.35q.9.325 1.45 1.1T6 15v2q0 .425.288.713T7 18h3v2z"},null,-1)])])}const ht=Se({name:"material-symbols-data-object",render:np}),ap={class:"bg-white rounded-lg shadow-xl w-[60vw] h-[80vh] flex flex-col overflow-hidden animate-fade-in"},sp={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200 shrink-0"},ip={class:"flex items-center gap-2"},lp={class:"text-lg font-semibold text-gray-800"},dp={class:"px-2 py-0.5 rounded bg-gray-200 text-gray-600 text-xs font-mono"},cp={class:"flex-1 overflow-hidden relative"},up={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end rounded-b-lg"},hp=ze({__name:"CodeEditorModal",props:{visible:{type:Boolean},title:{},value:{},language:{},readOnly:{type:Boolean}},emits:["update:visible","update:value","close"],setup(r,{emit:e}){const{t}=je(),{isDark:s}=En(),o=at("modal-container",se(null)),i=r,c=e,l=Be(),u=fe(()=>({minimap:{enabled:!0},lineNumbers:"on",glyphMargin:!1,folding:!0,wordWrap:"on",automaticLayout:!0,scrollBeyondLastLine:!1,theme:s.value?"vs-dark":"vs",fontSize:14,fontFamily:'Consolas, "Courier New", monospace',renderLineHighlight:"none",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,contextmenu:!0})),y=k=>{c("update:value",k||"")},x=()=>{c("update:visible",!1),c("close")},f=k=>{i.visible&&k.key==="Escape"&&x()};return Ie(()=>i.visible,k=>{l.setDisableGlobalShortcuts(k)}),We(()=>{window.addEventListener("keydown",f)}),Ge(()=>{window.removeEventListener("keydown",f),i.visible&&l.setDisableGlobalShortcuts(!1)}),(k,m)=>(z(),Pe(tt,{to:a(o)||"body"},[r.visible?(z(),H("div",{key:0,class:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:Ke(x,["self"])},[n("div",ap,[n("div",sp,[n("div",ip,[n("h3",lp,E(r.title),1),n("span",dp,E(r.language),1)]),n("button",{onClick:x,class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(a(yt),{class:"w-4 h-4"})])]),n("div",cp,[ue(a(fi),{value:r.value,language:r.language,options:{...u.value,readOnly:r.readOnly},"onUpdate:value":y,class:"w-full h-full"},null,8,["value","language","options"])]),n("div",up,[n("button",{onClick:x,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm"},E(a(t)("common.close")),1)])])])):be("",!0)],8,["to"]))}}),Ft=At(hp,[["__scopeId","data-v-7d81208a"]]),pp={class:"bg-white rounded-lg shadow-xl w-[90vw] h-[90vh] flex flex-col overflow-hidden"},fp={class:"relative flex items-center justify-between p-4 border-b border-gray-200"},mp={class:"text-lg font-semibold text-gray-800"},gp={class:"absolute left-1/2 -translate-x-1/2 flex items-center gap-2"},bp=["title"],vp=["title"],yp={class:"text-xs text-gray-600 w-9 text-right select-none"},wp=["innerHTML"],xp={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3 rounded-b-lg"},_p=ze({__name:"PreviewModal",props:{visible:{type:Boolean},htmlContent:{},width:{}},emits:["update:visible"],setup(r,{emit:e}){const t=r,s=e,{t:o}=je(),i=Be(),c=at("modal-container",se(null)),{exportPdf:l,getPdfBlob:u,exportImages:y,getImageBlob:x}=Yi(),f=Qt(),k=se(null),m=se(null),b=se(100),g=se(!1),C=se(""),_=se(""),p=se("json"),I=re=>{document.documentElement.classList.toggle("previewing",re),document.body.classList.toggle("previewing",re)};Ie(()=>t.visible,re=>{re||(b.value=100),i.setDisableGlobalShortcuts(re),I(re)});const A=()=>{s("update:visible",!1)},U=()=>{const re={pages:Ee(i.pages),canvasSize:Ee(i.canvasSize),guides:Ee(i.guides),zoom:i.zoom,showGrid:i.showGrid,headerHeight:i.headerHeight,footerHeight:i.footerHeight,showHeaderLine:i.showHeaderLine,showFooterLine:i.showFooterLine,showMinimap:i.showMinimap,canvasBackground:i.canvasBackground};C.value=JSON.stringify(re,null,2),_.value=o("preview.templateJson"),p.value="json",g.value=!0},Y=async()=>{try{if(!k.value)return;const re=Array.from(k.value.querySelectorAll(".print-page")),L=await x(re),W=new FileReader;W.readAsDataURL(L),W.onloadend=()=>{C.value=W.result,_.value=o("editor.viewImageBlob"),p.value="text",g.value=!0}}catch(re){console.error(re),alert("Failed to generate blob")}},j=async()=>{try{if(!k.value)return;const re=Array.from(k.value.querySelectorAll(".print-page")),L=await u(re),W=new FileReader;W.readAsDataURL(L),W.onloadend=()=>{C.value=W.result,_.value=o("editor.viewPdfBlob"),p.value="text",g.value=!0}}catch(re){console.error(re),alert("Failed to generate PDF blob")}},O=()=>{window.dispatchEvent(new CustomEvent("designer:print"))},F=()=>{if(k.value){const re=Array.from(k.value.querySelectorAll(".print-page"));l(re,`${K()}.pdf`)}},oe=async()=>{if(k.value){const re=Array.from(k.value.querySelectorAll(".print-page"));await y(re,K())}},K=()=>{const re=f.templates.find(Q=>Q.id===f.currentTemplateId),W=((re==null?void 0:re.name)||"print-design").trim().replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g," ").trim()||"print-design",$=new Date,T=$.getFullYear(),te=String($.getMonth()+1).padStart(2,"0"),G=String($.getDate()).padStart(2,"0");return`${W}-${T}${te}${G}`},P=()=>{b.value=Math.min(500,b.value+10)},q=()=>{b.value=Math.max(20,b.value-10)},h=re=>{re.ctrlKey&&(re.preventDefault(),re.deltaY<0?P():q())},v=re=>{var L,W;(re.key==="Control"||re.key==="Meta")&&(re.type==="keydown"&&!re.repeat?(L=m.value)==null||L.addEventListener("wheel",h,{passive:!1}):re.type==="keyup"&&((W=m.value)==null||W.removeEventListener("wheel",h)))},Z=()=>{var re;(re=m.value)==null||re.removeEventListener("wheel",h)},J=re=>{t.visible&&re.key==="Escape"&&A(),v(re)};return We(()=>{window.addEventListener("keydown",J),window.addEventListener("keyup",v),window.addEventListener("blur",Z)}),Ge(()=>{var re;window.removeEventListener("keydown",J),window.removeEventListener("keyup",v),window.removeEventListener("blur",Z),(re=m.value)==null||re.removeEventListener("wheel",h),t.visible&&i.setDisableGlobalShortcuts(!1),I(!1)}),(re,L)=>(z(),H(Te,null,[(z(),Pe(tt,{to:a(c)||"body"},[r.visible?(z(),H("div",{key:0,class:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:Ke(A,["self"])},[n("div",pp,[n("div",fp,[n("h3",mp,E(a(o)("preview.title")),1),n("div",gp,[n("button",{onClick:q,class:"p-1 hover:bg-gray-100 rounded text-gray-600 transition-colors",title:a(o)("preview.zoomOut")},[ue(a(qi),{class:"w-4 h-4"})],8,bp),Ae(n("input",{type:"range",min:"20",max:"500",step:"10","onUpdate:modelValue":L[0]||(L[0]=W=>b.value=W),class:"w-32 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:hover:scale-110 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 [&::-moz-range-thumb]:border-none [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:transition-all [&::-moz-range-thumb]:hover:scale-110"},null,512),[[Oe,b.value,void 0,{number:!0}]]),n("button",{onClick:P,class:"p-1 hover:bg-gray-100 rounded text-gray-600 transition-colors",title:a(o)("preview.zoomIn")},[ue(a(Oi),{class:"w-4 h-4"})],8,vp),n("span",yp,E(b.value)+"%",1)]),n("button",{onClick:A,class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(a(yt),{class:"w-4 h-4"})])]),n("div",{class:"flex-1 overflow-auto bg-gray-100 p-8 flex justify-center",ref_key:"wrapperRef",ref:m},[n("div",{ref_key:"previewContainer",ref:k,class:"preview-content",style:ye(`width: ${r.width}px; zoom: ${b.value/100}`),innerHTML:r.htmlContent},null,12,wp)],512),n("div",xp,[n("button",{onClick:O,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600"},[ue(a(Tn),{class:"text-lg"}),Ce(" "+E(a(o)("editor.print")),1)]),n("button",{onClick:F,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600"},[ue(a(Wt),{class:"text-lg"}),Ce(" "+E(a(o)("editor.exportPdf")),1)]),n("button",{onClick:oe,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600"},[ue(a(Wt),{class:"text-lg"}),Ce(" "+E(a(o)("editor.exportImage")),1)]),n("button",{onClick:Y,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700 flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100"},[ue(a(ht),{class:"text-lg"}),Ce(" "+E(a(o)("editor.viewImageBlob")),1)]),n("button",{onClick:j,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700 flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100"},[ue(a(ht),{class:"text-lg"}),Ce(" "+E(a(o)("editor.viewPdfBlob")),1)]),n("button",{onClick:U,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700 flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100"},[ue(a(ht),{class:"text-lg"}),Ce(" "+E(a(o)("editor.viewJson")),1)]),n("button",{onClick:A,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700 flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100"},E(a(o)("common.close")),1)])])])):be("",!0)],8,["to"])),ue(Ft,{visible:g.value,"onUpdate:visible":L[1]||(L[1]=W=>g.value=W),title:_.value,value:C.value,language:p.value,"read-only":""},null,8,["visible","title","value","language"])],64))}}),kp=At(_p,[["__scopeId","data-v-43107376"]]),Sp={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Cp(r,e){return z(),H("svg",Sp,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m9.55 18l-5.7-5.7l1.425-1.425L9.55 15.15l9.175-9.175L20.15 7.4z"},null,-1)])])}const Ep=Se({name:"material-symbols-check",render:Cp}),Tp={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ap(r,e){return z(),H("svg",Tp,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M19.25 16.4L8.4 5.55L12 2l5.65 5.55q1.1 1.05 1.725 2.488T20 13.1q0 .9-.2 1.725t-.55 1.575m.55 6.2l-3.1-3.1q-1.025.725-2.2 1.113T12 21q-3.325 0-5.663-2.312T4 13.1q0-1.275.4-2.45T5.6 8.4L1.4 4.2l1.4-1.4l18.4 18.4z"},null,-1)])])}Se({name:"material-symbols-format-color-reset",render:Ap});const $p={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ip(r,e){return z(),H("svg",$p,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m20.475 23.3l-2.3-2.3h-1.85v-1.85l-2-2V21h-4.65v-4.675H13.5l-2-2H9.675v-1.85l-2-2v3.85H3v-4.65h3.875l-2-2H3V5.8L.7 3.5l1.4-1.4l19.8 19.8zM5 21q-.825 0-1.412-.587T3 19v-2.675h4.675V21zm16-2.9l-1.775-1.775H21zm-3.775-3.775l-.9-.9v-3.75H21v4.65zm-2.9-2.9l-1.75-1.75h1.75zm-3.75-3.75l-.9-.9V3h4.65v4.675zm5.75 0V3H19q.825 0 1.413.588T21 5v2.675zm-8.65-2.9L5.9 3h1.775z"},null,-1)])])}Se({name:"material-symbols-grid-off",render:Ip});const zp={key:0,class:"w-full h-[1px] bg-red-500 rotate-45 absolute"},Pp={key:1,class:"w-full h-full bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50"},Lp={class:"flex gap-2 mb-3"},Mp={class:"flex-1 flex flex-col gap-2"},Rp={class:"relative h-3 rounded bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] border border-gray-200"},Dp={class:"w-8 h-8 rounded border border-gray-200 overflow-hidden relative"},Bp={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none"},Op={class:"flex gap-2 mb-3"},qp={class:"flex-1"},Fp={class:"w-16 text-right text-xs text-gray-500 flex items-center justify-end"},jp={class:"grid grid-cols-9 gap-1.5 mb-3"},Np=["onClick","title"],Hp={class:"flex justify-between border-t pt-2"},Up={key:0},Vp={class:"flex gap-2 mb-3"},Wp={class:"flex-1 flex flex-col gap-2"},Gp={class:"relative h-3 rounded bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] border border-gray-200"},Kp={class:"w-8 h-8 rounded border border-gray-200 overflow-hidden relative"},Yp={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none"},Xp={class:"flex gap-2 mb-3"},Zp={class:"flex-1"},Jp={class:"w-16 text-right text-xs text-gray-500 flex items-center justify-end"},Qp={class:"grid grid-cols-9 gap-1.5 mb-3"},ef=["onClick","title"],tf={class:"flex justify-between border-t pt-2"},rf={key:0},kt=ze({__name:"ColorPicker",props:{modelValue:{},disabled:{type:Boolean},defaultColor:{},allowTransparent:{type:Boolean},teleportToBody:{type:Boolean}},emits:["update:modelValue"],setup(r,{emit:e}){const t=r,s=e,{t:o}=je(),i=se(!1),c=se(null),l=se(null),u=se({h:0,s:0,v:0,a:1}),y=se(null),x=se(null),f=se(null),k=fe(()=>t.modelValue?t.modelValue==="transparent"?"transparent":t.modelValue:t.defaultColor||"#000000"),m=fe(()=>t.modelValue==="transparent"),b=fe({get:()=>Fs(u.value.h,u.value.s,u.value.v,u.value.a),set:h=>{const v=Rt(h);v&&(u.value=v,Y())}}),g=fe(()=>{const{r:h,g:v,b:Z}=Bt(u.value.h,u.value.s,u.value.v);return`rgba(${h}, ${v}, ${Z}, ${parseFloat(u.value.a.toFixed(2))})`}),C=fe(()=>({backgroundColor:`hsl(${u.value.h}, 100%, 50%)`})),_=fe(()=>({top:`${(1-u.value.v)*100}%`,left:`${u.value.s*100}%`})),p=fe(()=>({left:`${u.value.h/360*100}%`})),I=fe(()=>({left:`${u.value.a*100}%`})),A=fe(()=>{const{r:h,g:v,b:Z}=Bt(u.value.h,u.value.s,u.value.v);return{background:`linear-gradient(to right, rgba(${h},${v},${Z},0) 0%, rgba(${h},${v},${Z},1) 100%)`}});Ie(()=>t.modelValue,h=>{if(h){const v=Rt(h);v&&(u.value=v)}},{immediate:!0});const U=(h,v)=>{h.preventDefault();const Z=v==="sv"?y.value:v==="hue"?x.value:f.value;if(!Z)return;const J=(W,$)=>{const T=Z.getBoundingClientRect();let te=(W-T.left)/T.width,G=($-T.top)/T.height;te=Math.max(0,Math.min(1,te)),G=Math.max(0,Math.min(1,G)),v==="sv"?(u.value.s=te,u.value.v=1-G,u.value.a===0&&(u.value.a=1)):v==="hue"?(u.value.h=te*360,u.value.a===0&&(u.value.a=1)):v==="alpha"&&(u.value.a=te),Y()};J(h.clientX,h.clientY);const re=W=>J(W.clientX,W.clientY),L=()=>{window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",L)};window.addEventListener("mousemove",re),window.addEventListener("mouseup",L)},Y=()=>{u.value.a===0&&t.allowTransparent?s("update:modelValue","transparent"):s("update:modelValue",Fs(u.value.h,u.value.s,u.value.v,u.value.a))},j=se({top:"100%",left:"0",marginTop:"8px"}),O=()=>{if(!c.value)return;const h=c.value.getBoundingClientRect(),v=window.innerWidth,Z=window.innerHeight,J=240,re=350,L={};if(t.teleportToBody){const W=h.left+J<=v-20,$=h.bottom+re<=Z-10;L.position="fixed",L.left=`${W?h.left:Math.max(8,h.right-J)}px`,L.top=`${$?h.bottom+8:Math.max(8,h.top-re-8)}px`,j.value=L;return}h.left+J>v-20?(L.left="auto",L.right="0"):(L.left="0",L.right="auto"),h.bottom+re>Z-10?(L.top="auto",L.bottom="100%",L.marginTop="0",L.marginBottom="8px"):(L.top="100%",L.bottom="auto",L.marginTop="8px",L.marginBottom="0"),j.value=L},F=async()=>{t.disabled||(i.value=!i.value,i.value&&(await Xe(),O()))},oe=()=>{i.value=!1},K=h=>{const v=h.target;c.value&&c.value.contains(v)||l.value&&l.value.contains(v)||c.value&&oe()};Ie(i,h=>{t.teleportToBody&&(h?(O(),window.addEventListener("scroll",O,!0),window.addEventListener("resize",O)):(window.removeEventListener("scroll",O,!0),window.removeEventListener("resize",O)))});const P=["#000000","#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],q=h=>{const v=Rt(h);v&&(u.value=v,Y())};return We(()=>{window.addEventListener("mousedown",K)}),Ge(()=>{window.removeEventListener("mousedown",K)}),(h,v)=>(z(),H("div",{class:"relative flex",ref_key:"containerRef",ref:c,onClick:F},[ui(h.$slots,"trigger",{open:i.value,color:k.value,disabled:r.disabled},()=>[n("div",{class:xe(["w-6 h-6 rounded border border-gray-300 cursor-pointer flex items-center justify-center overflow-hidden transition-all hover:border-blue-500",{"opacity-50 cursor-not-allowed":r.disabled,"ring-2 ring-blue-500 ring-offset-1":i.value}]),style:ye({backgroundColor:m.value?"transparent":k.value})},[r.modelValue?be("",!0):(z(),H("div",zp)),m.value?(z(),H("div",Pp)):be("",!0)],6)]),i.value&&r.teleportToBody?(z(),Pe(tt,{key:0,to:"body"},[n("div",{ref_key:"dropdownRef",ref:l,class:"fixed z-[99999] bg-white rounded-lg shadow-xl border border-gray-200 p-3 w-[240px]",style:ye(j.value),onClick:v[6]||(v[6]=Ke(()=>{},["stop"]))},[n("div",{ref_key:"svPanelRef",ref:y,class:"w-full h-32 rounded relative cursor-crosshair mb-3",style:ye(C.value),onMousedown:v[0]||(v[0]=Z=>U(Z,"sv"))},[v[14]||(v[14]=n("div",{class:"absolute inset-0 bg-gradient-to-r from-white to-transparent rounded"},null,-1)),v[15]||(v[15]=n("div",{class:"absolute inset-0 bg-gradient-to-t from-black to-transparent rounded"},null,-1)),n("div",{class:"absolute w-3 h-3 border-2 border-white rounded-full shadow-sm -ml-1.5 -mt-1.5 pointer-events-none",style:ye(_.value)},null,4)],36),n("div",Lp,[n("div",Mp,[n("div",{ref_key:"hueSliderRef",ref:x,class:"h-3 rounded relative cursor-pointer border border-gray-200",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},onMousedown:v[1]||(v[1]=Z=>U(Z,"hue"))},[n("div",{class:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white border border-gray-300 rounded-full shadow-sm -ml-1.5 pointer-events-none",style:ye(p.value)},null,4)],544),n("div",Rp,[n("div",{ref_key:"alphaSliderRef",ref:f,class:"absolute inset-0 cursor-pointer rounded",style:ye(A.value),onMousedown:v[2]||(v[2]=Z=>U(Z,"alpha"))},[n("div",{class:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white border border-gray-300 rounded-full shadow-sm -ml-1.5 pointer-events-none",style:ye(I.value)},null,4)],36)])]),n("div",Dp,[v[17]||(v[17]=n("div",{class:"absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50"},null,-1)),n("div",{class:"absolute inset-0",style:ye({backgroundColor:g.value})},null,4),u.value.a===0?(z(),H("div",Bp,[...v[16]||(v[16]=[n("div",{class:"w-full h-[1px] bg-red-500 rotate-45"},null,-1)])])):be("",!0)])]),n("div",Op,[n("div",qp,[Ae(n("input",{type:"text","onUpdate:modelValue":v[3]||(v[3]=Z=>b.value=Z),class:"w-full text-xs px-2 py-1 border border-gray-300 rounded focus:border-blue-500 outline-none font-mono uppercase",placeholder:"#000000"},null,512),[[Oe,b.value]])]),n("div",Fp,E(Math.round(u.value.a*100))+"% ",1)]),n("div",jp,[(z(),H(Te,null,Le(P,Z=>n("div",{key:Z,class:xe(["w-4 h-4 rounded-sm cursor-pointer border border-transparent hover:scale-110 hover:border-gray-400 hover:z-10 transition-all relative",{"ring-2 ring-blue-500 ring-offset-1 z-10":b.value===Z}]),style:ye({backgroundColor:Z}),onClick:J=>q(Z),title:Z},null,14,Np)),64))]),n("div",Hp,[n("button",{onClick:v[4]||(v[4]=Z=>{h.$emit("update:modelValue",void 0),oe()}),class:"text-xs text-red-600 hover:text-red-800 hover:bg-red-50 px-2 py-1 rounded transition-colors"},E(a(o)("colorPicker.clear")),1),r.allowTransparent?(z(),H("div",Up,[n("button",{onClick:v[5]||(v[5]=Z=>{h.$emit("update:modelValue","transparent"),oe()}),class:"text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-100 px-2 py-1 rounded transition-colors"},E(a(o)("colorPicker.transparent")),1)])):be("",!0)])],4)])):i.value?(z(),H("div",{key:1,ref_key:"dropdownRef",ref:l,class:"absolute z-50 bg-white rounded-lg shadow-xl border border-gray-200 p-3 w-[240px]",style:ye(j.value),onClick:v[13]||(v[13]=Ke(()=>{},["stop"]))},[n("div",{ref_key:"svPanelRef",ref:y,class:"w-full h-32 rounded relative cursor-crosshair mb-3",style:ye(C.value),onMousedown:v[7]||(v[7]=Z=>U(Z,"sv"))},[v[18]||(v[18]=n("div",{class:"absolute inset-0 bg-gradient-to-r from-white to-transparent rounded"},null,-1)),v[19]||(v[19]=n("div",{class:"absolute inset-0 bg-gradient-to-t from-black to-transparent rounded"},null,-1)),n("div",{class:"absolute w-3 h-3 border-2 border-white rounded-full shadow-sm -ml-1.5 -mt-1.5 pointer-events-none",style:ye(_.value)},null,4)],36),n("div",Vp,[n("div",Wp,[n("div",{ref_key:"hueSliderRef",ref:x,class:"h-3 rounded relative cursor-pointer border border-gray-200",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},onMousedown:v[8]||(v[8]=Z=>U(Z,"hue"))},[n("div",{class:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white border border-gray-300 rounded-full shadow-sm -ml-1.5 pointer-events-none",style:ye(p.value)},null,4)],544),n("div",Gp,[n("div",{ref_key:"alphaSliderRef",ref:f,class:"absolute inset-0 cursor-pointer rounded",style:ye(A.value),onMousedown:v[9]||(v[9]=Z=>U(Z,"alpha"))},[n("div",{class:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white border border-gray-300 rounded-full shadow-sm -ml-1.5 pointer-events-none",style:ye(I.value)},null,4)],36)])]),n("div",Kp,[v[21]||(v[21]=n("div",{class:"absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50"},null,-1)),n("div",{class:"absolute inset-0",style:ye({backgroundColor:g.value})},null,4),u.value.a===0?(z(),H("div",Yp,[...v[20]||(v[20]=[n("div",{class:"w-full h-[1px] bg-red-500 rotate-45"},null,-1)])])):be("",!0)])]),n("div",Xp,[n("div",Zp,[Ae(n("input",{type:"text","onUpdate:modelValue":v[10]||(v[10]=Z=>b.value=Z),class:"w-full text-xs px-2 py-1 border border-gray-300 rounded focus:border-blue-500 outline-none font-mono uppercase",placeholder:"#000000"},null,512),[[Oe,b.value]])]),n("div",Jp,E(Math.round(u.value.a*100))+"% ",1)]),n("div",Qp,[(z(),H(Te,null,Le(P,Z=>n("div",{key:Z,class:xe(["w-4 h-4 rounded-sm cursor-pointer border border-transparent hover:scale-110 hover:border-gray-400 hover:z-10 transition-all relative",{"ring-2 ring-blue-500 ring-offset-1 z-10":b.value===Z}]),style:ye({backgroundColor:Z}),onClick:J=>q(Z),title:Z},null,14,ef)),64))]),n("div",tf,[n("button",{onClick:v[11]||(v[11]=Z=>{h.$emit("update:modelValue",void 0),oe()}),class:"text-xs text-red-600 hover:text-red-800 hover:bg-red-50 px-2 py-1 rounded transition-colors"},E(a(o)("colorPicker.clear")),1),r.allowTransparent?(z(),H("div",rf,[n("button",{onClick:v[12]||(v[12]=Z=>{h.$emit("update:modelValue","transparent"),oe()}),class:"text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-100 px-2 py-1 rounded transition-colors"},E(a(o)("colorPicker.transparent")),1)])):be("",!0)])],4)):be("",!0)],512))}}),of={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function nf(r,e){return z(),H("svg",of,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M12 20q-.825 0-1.412-.587T10 18t.588-1.412T12 16t1.413.588T14 18t-.587 1.413T12 20m0-6q-.825 0-1.412-.587T10 12t.588-1.412T12 10t1.413.588T14 12t-.587 1.413T12 14m0-6q-.825 0-1.412-.587T10 6t.588-1.412T12 4t1.413.588T14 6t-.587 1.413T12 8"},null,-1)])])}const Xi=Se({name:"material-symbols-more-vert",render:nf}),af={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function sf(r,e){return z(),H("svg",af,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M3 21v-4.25L16.2 3.575q.3-.275.663-.425t.762-.15t.775.15t.65.45L20.425 5q.3.275.438.65T21 6.4q0 .4-.137.763t-.438.662L7.25 21zM17.6 7.8L19 6.4L17.6 5l-1.4 1.4z"},null,-1)])])}const fn=Se({name:"material-symbols-edit",render:sf}),lf={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function df(r,e){return z(),H("svg",lf,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M8 18h8v-2H8zm0-4h8v-2H8zm-2 8q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h8l6 6v12q0 .825-.587 1.413T18 22zm7-13h5l-5-5z"},null,-1)])])}const cf=Se({name:"material-symbols-description",render:df}),uf={key:0,class:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 pointer-events-auto"},hf={class:"bg-white rounded-lg shadow-xl w-96 animate-in fade-in zoom-in duration-200 flex flex-col overflow-hidden"},pf={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200 shrink-0"},ff={class:"text-lg font-semibold text-gray-800"},mf={class:"p-4"},gf={class:"mb-4"},bf=["placeholder"],vf={class:"flex justify-end gap-2"},yf=["disabled"],jt=ze({__name:"InputModal",props:{show:{type:Boolean},initialValue:{},title:{},placeholder:{}},emits:["close","save"],setup(r,{emit:e}){const t=r,s=e,{t:o}=je(),i=Be(),c=at("modal-container",se(null)),l=se(""),u=se(null);Ie(()=>t.show,x=>{if(x){l.value=t.initialValue||"",setTimeout(()=>{var f;(f=u.value)==null||f.focus()},100),i.setDisableGlobalShortcuts(!0);return}i.setDisableGlobalShortcuts(!1)});const y=()=>{l.value.trim()&&(s("save",l.value.trim()),s("close"))};return Ge(()=>{t.show&&i.setDisableGlobalShortcuts(!1)}),(x,f)=>(z(),Pe(tt,{to:a(c)||"body"},[r.show?(z(),H("div",uf,[n("div",hf,[n("div",pf,[n("h3",ff,E(r.title||a(o)("input.title")),1),n("button",{onClick:f[0]||(f[0]=k=>s("close")),class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(a(yt),{class:"w-4 h-4"})])]),n("div",mf,[n("div",gf,[Ae(n("input",{ref_key:"inputRef",ref:u,"onUpdate:modelValue":f[1]||(f[1]=k=>l.value=k),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:r.placeholder||a(o)("input.placeholder"),onKeydown:[_t(y,["enter"]),f[2]||(f[2]=_t(k=>s("close"),["esc"]))]},null,40,bf),[[Oe,l.value]])]),n("div",vf,[n("button",{onClick:f[3]||(f[3]=k=>s("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"},E(a(o)("common.cancel")),1),n("button",{onClick:y,disabled:!l.value.trim(),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},E(a(o)("common.confirm")),9,yf)])])])])):be("",!0)],8,["to"]))}}),wf={class:"flex-1 truncate text-left"},xf={key:0,class:"absolute top-full left-0 mt-2 w-[220px] bg-white rounded-lg shadow-xl border border-gray-200 z-[100] flex flex-col max-h-[500px]"},_f={class:"flex-1 overflow-y-auto py-1"},kf={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},Sf=["onClick"],Cf={class:"flex items-center gap-2 overflow-hidden flex-1"},Ef={class:"w-2 h-2 flex items-center justify-center flex-shrink-0"},Tf={key:0,class:"w-1.5 h-1.5 rounded-full bg-blue-500"},Af=["onClick"],$f={class:"border-t border-gray-100 p-1"},If=ze({__name:"TemplateDropdown",setup(r){const{t:e}=je(),t=Qt(),s=Be(),o=at("modal-container",se(null)),i=se(!1),c=se(null),l=se(null),u=se({}),y=se(!1),x=se("create"),f=se(""),k=se(null),m=se(!1),b=se(""),g=se(null),C=se([]);We(()=>{t.loadTemplates(),!t.currentTemplateId&&t.templates.length>0&&t.loadTemplate(t.templates[0].id),document.addEventListener("click",_),window.addEventListener("designer:new-template",j)}),Ge(()=>{document.removeEventListener("click",_),window.removeEventListener("designer:new-template",j)});const _=v=>{c.value&&!c.value.contains(v.target)&&(i.value=!1,l.value=null);const Z=v.target;l.value&&!Z.closest(".row-menu-trigger")&&!Z.closest(".row-menu-content")&&(l.value=null)},p=fe(()=>{const v=t.templates.find(Z=>Z.id===t.currentTemplateId);return v?v.name:e("template.select")}),I=()=>{i.value=!i.value,i.value||(l.value=null)},A=v=>{if(t.currentTemplateId){const Z=t.templates.find(J=>J.id===t.currentTemplateId);Z&&t.saveCurrentTemplate(Z.name)}t.loadTemplate(v.id),i.value=!1},U=(v,Z)=>{if(v.stopPropagation(),l.value===Z)l.value=null;else{const re=v.currentTarget.getBoundingClientRect();let W=re.right-128;W<5&&(W=re.left),window.innerHeight-re.bottom<150?u.value={bottom:`${window.innerHeight-re.top+5}px`,left:`${W}px`}:u.value={top:`${re.bottom+5}px`,left:`${W}px`},l.value=Z}},Y=()=>t.templates.find(v=>v.id===l.value),j=()=>{l.value=null,x.value="create",f.value="",y.value=!0,i.value=!1},O=v=>{l.value=null,x.value="rename",k.value=v.id,f.value=v.name,y.value=!0,i.value=!1},F=v=>{t.copyTemplate(v.id),l.value=null},oe=v=>{confirm(e("template.confirmDelete",{name:v.name}))&&(t.deleteTemplate(v.id),!t.currentTemplateId&&t.templates.length>0&&t.loadTemplate(t.templates[0].id)),l.value=null},K=v=>{var L,W;const Z=t.currentTemplateId===v.id,J=Z?s.testData||{}:((L=v.data)==null?void 0:L.testData)||{},re=Z?s.pages:((W=v.data)==null?void 0:W.pages)||[];return Nu(re,J)},P=v=>{l.value=null,g.value=v;const Z=K(v);C.value=Object.keys(Z),b.value=JSON.stringify(Z,null,2),m.value=!0,i.value=!1},q=()=>{var re;const v=g.value,Z=new Set(C.value||[]);if(g.value=null,C.value=[],!v)return;let J=null;try{const L=((re=b.value)==null?void 0:re.trim())||"{}",W=JSON.parse(L);W&&typeof W=="object"&&!Array.isArray(W)&&(J=W)}catch{J=null}if(!J){alert(e("common.invalidJson"));return}if(Z.size>0){const L=Object.keys(J);if(L.length!==Z.size||L.some($=>!Z.has($))){alert(e("common.testDataKeyChanged"));return}}v.data={...v.data||{},testData:J},v.updatedAt=Date.now(),t.saveToLocalStorage(),t.currentTemplateId===v.id&&(s.testData=J)},h=v=>{if(x.value==="create"){if(t.currentTemplateId){const J=t.templates.find(re=>re.id===t.currentTemplateId);J&&t.saveCurrentTemplate(J.name)}Be().resetCanvas(),t.createTemplate(v)}else x.value==="rename"&&k.value&&t.renameTemplate(k.value,v)};return(v,Z)=>(z(),H("div",{class:"relative",ref_key:"containerRef",ref:c},[n("button",{onClick:I,class:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors w-40",title:"Templates"},[ue(a(cf),{class:"w-4 h-4 flex-shrink-0"}),n("span",wf,E(p.value),1),ue(a(In),{class:"w-4 h-4 flex-shrink-0"})]),i.value?(z(),H("div",xf,[n("div",_f,[a(t).templates.length===0?(z(),H("div",kf,E(a(e)("template.noTemplates")),1)):be("",!0),(z(!0),H(Te,null,Le(a(t).templates,J=>(z(),H("div",{key:J.id,class:"relative group border-b border-gray-100 last:border-b-0 flex items-center justify-between px-3 py-2 hover:bg-gray-50 cursor-pointer",onClick:re=>A(J)},[n("div",Cf,[n("div",Ef,[a(t).currentTemplateId===J.id?(z(),H("div",Tf)):be("",!0)]),n("span",{class:xe(["text-sm text-gray-700 truncate",{"font-medium text-blue-600":a(t).currentTemplateId===J.id}])},E(J.name),3)]),n("button",{onClick:re=>U(re,J.id),class:xe(["row-menu-trigger p-1 hover:bg-gray-200 rounded-full text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity",{"opacity-100 bg-gray-200":l.value===J.id}])},[ue(a(Xi),{class:"w-4 h-4"})],10,Af)],8,Sf))),128))]),n("div",$f,[n("button",{onClick:j,class:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded transition-colors"},[ue(a(zn),{class:"w-4 h-4"}),Ce(" "+E(a(e)("template.new")),1)])])])):be("",!0),(z(),Pe(tt,{to:a(o)||"body"},[l.value?(z(),H("div",{key:0,class:"fixed inset-0 z-[2000] pointer-events-auto",onClick:Z[5]||(Z[5]=J=>l.value=null)},[n("div",{class:"row-menu-content absolute w-32 bg-white rounded shadow-lg border border-gray-100 z-[2001] py-1 pointer-events-auto",style:ye(u.value),onClick:Z[4]||(Z[4]=Ke(()=>{},["stop"]))},[Y()?(z(),H(Te,{key:0},[n("button",{onClick:Z[0]||(Z[0]=J=>P(Y())),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2"},[ue(a(ht),{class:"w-3.5 h-3.5"}),Ce(" "+E(a(e)("common.testData")),1)]),n("button",{onClick:Z[1]||(Z[1]=J=>O(Y())),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2"},[ue(a(fn),{class:"w-3.5 h-3.5"}),Ce(" "+E(a(e)("common.rename")),1)]),n("button",{onClick:Z[2]||(Z[2]=J=>F(Y())),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2"},[ue(a(Tt),{class:"w-3.5 h-3.5"}),Ce(" "+E(a(e)("common.copy")),1)]),n("button",{onClick:Z[3]||(Z[3]=J=>oe(Y())),class:"w-full text-left px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 flex items-center gap-2"},[ue(a(Et),{class:"w-3.5 h-3.5"}),Ce(" "+E(a(e)("common.delete")),1)])],64)):be("",!0)],4)])):be("",!0)],8,["to"])),ue(jt,{show:y.value,"initial-value":f.value,title:x.value==="create"?a(e)("template.new"):a(e)("template.rename"),onClose:Z[6]||(Z[6]=J=>y.value=!1),onSave:h},null,8,["show","initial-value","title"]),ue(Ft,{visible:m.value,"onUpdate:visible":Z[7]||(Z[7]=J=>m.value=J),title:a(e)("common.testData"),value:b.value,language:"json","onUpdate:value":Z[8]||(Z[8]=J=>b.value=J),onClose:q},null,8,["visible","title","value"])],512))}}),wt={A3:{width:1123,height:1587},A4:{width:794,height:1123},A5:{width:559,height:794},LETTER:{width:816,height:1056},LEGAL:{width:816,height:1344},"Receipt 58mm":{width:219,height:794},"Receipt 80mm":{width:302,height:794},"241-1 (Full)":{width:911,height:1058},"241-2 (Half)":{width:911,height:529},"241-3 (Third)":{width:911,height:352}},zf={class:"relative"},Pf={class:"flex items-center bg-gray-100 rounded-lg p-1"},Lf=["title"],Mf=["title"],Rf={class:"truncate"},Df=["title"],Bf={key:0,class:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 shadow-xl rounded-lg p-4 z-[1000]"},Of={class:"text-sm font-semibold text-gray-700 mb-3"},qf={class:"space-y-3"},Ff={class:"block text-xs text-gray-500 mb-1"},jf=["value"],Nf={value:"CUSTOM"},Hf={class:"block text-xs text-gray-500 mb-1"},Uf=["value"],Vf={value:"mm"},Wf={value:"pt"},Gf={value:"px"},Kf={class:"grid grid-cols-2 gap-2"},Yf={class:"block text-xs text-gray-500 mb-1"},Xf=["value"],Zf={class:"block text-xs text-gray-500 mb-1"},Jf=["value"],Qf={class:"grid grid-cols-2 gap-2"},em={class:"block text-xs text-gray-500 mb-1"},tm=["value"],rm={class:"block text-xs text-gray-500 mb-1"},om=["value"],nm={class:"mt-4 flex items-center justify-between"},am={class:"text-sm text-gray-700 font-medium"},sm={class:"mt-3 flex items-center justify-between"},im={class:"text-sm text-gray-700 font-medium"},lm={class:"mt-3 flex items-center justify-between"},dm={class:"text-sm text-gray-700 font-medium"},cm={class:"mt-3 flex items-center justify-between"},um={class:"text-sm text-gray-700 font-medium"},hm={key:0,class:"absolute inset-0 flex items-center justify-center"},pm={class:"border-t border-gray-200 my-4 pt-3"},fm={class:"text-sm font-semibold text-gray-700 mb-3"},mm={class:"space-y-3"},gm={class:"flex items-center justify-between"},bm={class:"flex items-center gap-2"},vm={class:"text-xs text-gray-600"},ym={class:"flex items-center gap-1"},wm=["value"],xm={class:"text-xs text-gray-500"},_m={class:"flex items-center justify-between"},km={class:"flex items-center gap-2"},Sm={class:"text-xs text-gray-600"},Cm={class:"flex items-center gap-1"},Em=["value"],Tm={class:"text-xs text-gray-500"},Am={class:"border-t border-gray-200 pt-3 mt-3"},$m={class:"bg-white rounded-lg shadow-xl w-[640px] max-w-full max-h-[90vh] flex flex-col overflow-hidden"},Im={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200 shrink-0"},zm={class:"text-lg font-semibold text-gray-800"},Pm={class:"p-4 overflow-y-auto space-y-4"},Lm={class:"text-sm font-semibold text-gray-700 mb-3"},Mm={class:"space-y-3"},Rm={class:"flex items-center justify-between"},Dm={class:"text-sm text-gray-700 font-medium"},Bm={class:"block text-xs text-gray-500 mb-1"},Om=["placeholder"],qm={class:"grid grid-cols-2 gap-2"},Fm={class:"block text-xs text-gray-500 mb-1"},jm={class:"block text-xs text-gray-500 mb-1"},Nm={class:"grid grid-cols-2 gap-2"},Hm={class:"block text-xs text-gray-500 mb-1"},Um={class:"block text-xs text-gray-500 mb-1"},Vm={class:"block text-xs text-gray-500 mb-1"},Wm={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end"},Gm=ze({__name:"PaperSettings",setup(r){const{t:e}=je(),t=Be(),s=at("modal-container",se(null)),o=se("A4"),i=se(wt.A4.width),c=se(wt.A4.height),l=se(!1),u=se(!1),y=fe({get:()=>t.canvasBackground,set:j=>t.setCanvasBackground(j)}),x=fe({get:()=>{var j;return((j=t.watermark)==null?void 0:j.text)||""},set:j=>t.setWatermark({text:j})}),f=fe({get:()=>{var j;return((j=t.watermark)==null?void 0:j.enabled)??!1},set:j=>t.setWatermark({enabled:!!j})}),k=fe({get:()=>{var j;return((j=t.watermark)==null?void 0:j.angle)??-30},set:j=>t.setWatermark({angle:Number(j)})}),m=fe({get:()=>{var j;return((j=t.watermark)==null?void 0:j.color)||"#000000"},set:j=>t.setWatermark({color:j})}),b=fe({get:()=>{var j;return Math.round((((j=t.watermark)==null?void 0:j.opacity)??.1)*100)},set:j=>{const O=Math.max(0,Math.min(100,Number(j)));t.setWatermark({opacity:O/100})}}),g=fe({get:()=>{var j;return A(((j=t.watermark)==null?void 0:j.size)??24)},set:j=>t.setWatermark({size:Ye(Number(j),t.unit)})}),C=fe({get:()=>{var j;return A(((j=t.watermark)==null?void 0:j.density)??160)},set:j=>t.setWatermark({density:Ye(Number(j),t.unit)})}),_=fe({get:()=>A(t.pageSpacingX||0),set:j=>t.setPageSpacingX(Ye(Number(j),t.unit))}),p=fe({get:()=>A(t.pageSpacingY||0),set:j=>t.setPageSpacingY(Ye(Number(j),t.unit))}),I=fe(()=>t.unit==="px"?e("common.px"):t.unit==="pt"?e("common.pt"):e("common.mm")),A=j=>{const O=nt(j,t.unit);return t.unit==="px"?Math.round(O):Number(O.toFixed(1))},U=()=>{if(o.value!=="CUSTOM"){const j=wt[o.value];i.value=j.width,c.value=j.height,t.setCanvasSize(j.width,j.height)}},Y=()=>{t.setCanvasSize(i.value,c.value),Object.values(wt).some(j=>j.width===i.value&&j.height===c.value)||(o.value="CUSTOM")};return Ie(()=>t.canvasSize,j=>{i.value=j.width,c.value=j.height;const O=Object.entries(wt).find(([F,oe])=>oe.width===j.width&&oe.height===j.height);O?o.value=O[0]:o.value="CUSTOM"},{immediate:!0}),(j,O)=>(z(),H("div",zf,[n("div",Pf,[n("button",{onClick:O[0]||(O[0]=F=>l.value=!l.value),class:"p-1 hover:bg-gray-200 rounded transition-colors",title:a(e)("editor.paperSettings")},[ue(a(Gt),{class:"w-4 h-4"})],8,Lf),n("button",{onClick:O[1]||(O[1]=F=>l.value=!l.value),class:"flex items-center justify-center text-xs text-gray-700 hover:bg-gray-200 rounded px-1 py-0.5 transition-colors w-16 text-center",title:a(e)("editor.paperSettings")},[n("span",Rf,E(o.value==="CUSTOM"?a(e)("editor.custom"):o.value),1)],8,Mf),n("button",{onClick:O[2]||(O[2]=F=>l.value=!l.value),class:"p-1 hover:bg-gray-200 rounded transition-colors",title:a(e)("editor.paperSettings")},[ue(a(In),{class:"w-4 h-4"})],8,Df)]),l.value?(z(),H("div",Bf,[n("h3",Of,E(a(e)("editor.paperSettings")),1),n("div",qf,[n("div",null,[n("label",Ff,E(a(e)("editor.sizePreset")),1),Ae(n("select",{"onUpdate:modelValue":O[3]||(O[3]=F=>o.value=F),onChange:U,class:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},[(z(!0),H(Te,null,Le(a(wt),(F,oe)=>(z(),H("option",{key:oe,value:oe},E(oe)+" ("+E(A(F.width))+E(I.value)+" x "+E(A(F.height))+E(I.value)+") ",9,jf))),128)),n("option",Nf,E(a(e)("editor.custom")),1)],544),[[Je,o.value]])]),n("div",null,[n("label",Hf,E(a(e)("editor.unit")),1),n("select",{value:a(t).unit,onChange:O[4]||(O[4]=F=>a(t).setUnit(F.target.value)),class:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},[n("option",Vf,E(a(e)("common.mm")),1),n("option",Wf,E(a(e)("common.pt")),1),n("option",Gf,E(a(e)("common.px")),1)],40,Uf)]),n("div",Kf,[n("div",null,[n("label",Yf,E(a(e)("common.width"))+" ("+E(I.value)+")",1),n("input",{type:"number",value:A(i.value),onChange:O[5]||(O[5]=F=>{i.value=a(Ye)(Number(F.target.value),a(t).unit),Y()}),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},null,40,Xf)]),n("div",null,[n("label",Zf,E(a(e)("common.height"))+" ("+E(I.value)+")",1),n("input",{type:"number",value:A(c.value),onChange:O[6]||(O[6]=F=>{c.value=a(Ye)(Number(F.target.value),a(t).unit),Y()}),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},null,40,Jf)])]),n("div",Qf,[n("div",null,[n("label",em,E(a(e)("editor.spacingX"))+" ("+E(I.value)+")",1),n("input",{type:"number",value:_.value,onChange:O[7]||(O[7]=F=>{_.value=Number(F.target.value)}),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},null,40,tm)]),n("div",null,[n("label",rm,E(a(e)("editor.spacingY"))+" ("+E(I.value)+")",1),n("input",{type:"number",value:p.value,onChange:O[8]||(O[8]=F=>{p.value=Number(F.target.value)}),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},null,40,om)])]),n("div",null,[n("button",{onClick:O[9]||(O[9]=F=>u.value=!0),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-md transition-colors text-sm font-medium"},[ue(a(Gt),{class:"w-4 h-4"}),Ce(" "+E(a(e)("editor.advancedSettings")),1)])])]),n("div",nm,[n("span",am,E(a(e)("editor.showCornerMarkers")),1),n("button",{onClick:O[10]||(O[10]=F=>a(t).setShowCornerMarkers(!a(t).showCornerMarkers)),class:xe(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",a(t).showCornerMarkers?"bg-blue-600":"bg-gray-200"])},[O[30]||(O[30]=n("span",{class:"sr-only"},"Toggle corner markers",-1)),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a(t).showCornerMarkers?"translate-x-5":"translate-x-0"])},null,2)],2)]),n("div",sm,[n("span",im,E(a(e)("editor.showGrid")),1),n("button",{onClick:O[11]||(O[11]=F=>a(t).setShowGrid(!a(t).showGrid)),class:xe(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",a(t).showGrid?"bg-blue-600":"bg-gray-200"])},[O[31]||(O[31]=n("span",{class:"sr-only"},"Toggle grid",-1)),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a(t).showGrid?"translate-x-5":"translate-x-0"])},null,2)],2)]),n("div",lm,[n("span",dm,E(a(e)("editor.showMinimap")),1),n("button",{onClick:O[12]||(O[12]=F=>a(t).setShowMinimap(!a(t).showMinimap)),class:xe(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",a(t).showMinimap?"bg-blue-600":"bg-gray-200"])},[O[32]||(O[32]=n("span",{class:"sr-only"},"Toggle minimap",-1)),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a(t).showMinimap?"translate-x-5":"translate-x-0"])},null,2)],2)]),n("div",cm,[n("span",um,E(a(e)("editor.backgroundColor")),1),ue(kt,{modelValue:y.value,"onUpdate:modelValue":O[13]||(O[13]=F=>y.value=F),"allow-transparent":!0,"default-color":"#ffffff",placement:"bottom-end"},{trigger:pt(({color:F,open:oe})=>[n("div",{class:xe(["w-8 h-6 rounded border border-gray-300 cursor-pointer relative overflow-hidden hover:border-blue-500 transition-colors",{"ring-2 ring-blue-500 ring-offset-1":oe}])},[O[34]||(O[34]=n("div",{class:"absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50"},null,-1)),n("div",{class:"absolute inset-0",style:ye({backgroundColor:F==="transparent"?"transparent":F})},null,4),F==="transparent"?(z(),H("div",hm,[...O[33]||(O[33]=[n("div",{class:"w-full h-[1px] bg-red-500 rotate-45"},null,-1)])])):be("",!0)],2)]),_:1},8,["modelValue"])]),n("div",pm,[n("h3",fm,E(a(e)("editor.headerFooter")),1),n("div",mm,[n("div",gm,[n("div",bm,[n("button",{onClick:O[14]||(O[14]=F=>a(t).setShowHeaderLine(!a(t).showHeaderLine)),class:xe(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",a(t).showHeaderLine?"bg-blue-600":"bg-gray-200"])},[O[35]||(O[35]=n("span",{class:"sr-only"},"Toggle header line",-1)),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a(t).showHeaderLine?"translate-x-4":"translate-x-0"])},null,2)],2),n("label",vm,E(a(e)("editor.headerLine")),1)]),n("div",ym,[n("input",{type:"number",value:A(a(t).headerHeight),onChange:O[15]||(O[15]=F=>a(t).setHeaderHeight(a(Ye)(Number(F.target.value),a(t).unit))),class:"w-16 px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none text-right",min:"0"},null,40,wm),n("span",xm,E(I.value),1)])]),n("div",_m,[n("div",km,[n("button",{onClick:O[16]||(O[16]=F=>a(t).setShowFooterLine(!a(t).showFooterLine)),class:xe(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",a(t).showFooterLine?"bg-blue-600":"bg-gray-200"])},[O[36]||(O[36]=n("span",{class:"sr-only"},"Toggle footer line",-1)),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a(t).showFooterLine?"translate-x-4":"translate-x-0"])},null,2)],2),n("label",Sm,E(a(e)("editor.footerLine")),1)]),n("div",Cm,[n("input",{type:"number",value:A(a(t).footerHeight),onChange:O[17]||(O[17]=F=>a(t).setFooterHeight(a(Ye)(Number(F.target.value),a(t).unit))),class:"w-16 px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none text-right",min:"0"},null,40,Em),n("span",Tm,E(I.value),1)])])])]),n("div",Am,[n("button",{onClick:O[18]||(O[18]=F=>{a(t).addPage(),l.value=!1}),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-md transition-colors text-sm font-medium"},[ue(a(zn),{class:"w-4 h-4"}),n("span",null,E(a(e)("editor.addNewPage")),1)])]),n("div",{class:"fixed inset-0 z-[-1]",onClick:O[19]||(O[19]=F=>l.value=!1)})])):be("",!0),(z(),Pe(tt,{to:a(s)||"body"},[u.value?(z(),H("div",{key:0,class:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:O[29]||(O[29]=Ke(F=>u.value=!1,["self"]))},[n("div",$m,[n("div",Im,[n("h3",zm,E(a(e)("editor.advancedSettings")),1),n("button",{onClick:O[20]||(O[20]=F=>u.value=!1),class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(a(yt),{class:"w-4 h-4"})])]),n("div",Pm,[n("div",null,[n("h3",Lm,E(a(e)("editor.watermark")),1),n("div",Mm,[n("div",Rm,[n("span",Dm,E(a(e)("editor.watermarkEnable")),1),n("button",{onClick:O[21]||(O[21]=F=>f.value=!f.value),class:xe(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",f.value?"bg-blue-600":"bg-gray-200"])},[O[37]||(O[37]=n("span",{class:"sr-only"},"Toggle watermark",-1)),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",f.value?"translate-x-5":"translate-x-0"])},null,2)],2)]),n("div",null,[n("label",Bm,E(a(e)("editor.watermarkText")),1),Ae(n("input",{"onUpdate:modelValue":O[22]||(O[22]=F=>x.value=F),type:"text",class:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none",placeholder:a(e)("editor.watermarkTextPlaceholder")},null,8,Om),[[Oe,x.value]])]),n("div",qm,[n("div",null,[n("label",Fm,E(a(e)("editor.watermarkAngle")),1),Ae(n("input",{"onUpdate:modelValue":O[23]||(O[23]=F=>k.value=F),type:"number",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},null,512),[[Oe,k.value,void 0,{number:!0}]])]),n("div",null,[n("label",jm,E(a(e)("editor.watermarkOpacity")),1),Ae(n("input",{"onUpdate:modelValue":O[24]||(O[24]=F=>b.value=F),type:"number",min:"0",max:"100",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},null,512),[[Oe,b.value,void 0,{number:!0}]])])]),n("div",Nm,[n("div",null,[n("label",Hm,E(a(e)("editor.watermarkSize"))+" ("+E(I.value)+")",1),Ae(n("input",{"onUpdate:modelValue":O[25]||(O[25]=F=>g.value=F),type:"number",min:"1",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},null,512),[[Oe,g.value,void 0,{number:!0}]])]),n("div",null,[n("label",Um,E(a(e)("editor.watermarkDensity"))+" ("+E(I.value)+")",1),Ae(n("input",{"onUpdate:modelValue":O[26]||(O[26]=F=>C.value=F),type:"number",min:"20",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none"},null,512),[[Oe,C.value,void 0,{number:!0}]])])]),n("div",null,[n("label",Vm,E(a(e)("editor.watermarkColor")),1),ue(kt,{modelValue:m.value,"onUpdate:modelValue":O[27]||(O[27]=F=>m.value=F),"default-color":"#000000",placement:"bottom-end"},{trigger:pt(({color:F,open:oe})=>[n("div",{class:xe(["w-8 h-6 rounded border border-gray-300 cursor-pointer relative overflow-hidden hover:border-blue-500 transition-colors",{"ring-2 ring-blue-500 ring-offset-1":oe}])},[n("div",{class:"absolute inset-0",style:ye({backgroundColor:F})},null,4)],2)]),_:1},8,["modelValue"])])])])]),n("div",Wm,[n("button",{onClick:O[28]||(O[28]=F=>u.value=!1),class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm"},E(a(e)("common.close")),1)])])])):be("",!0)],8,["to"]))]))}}),Km=()=>typeof navigator>"u"?!1:/Mac|iPod|iPhone|iPad/.test(navigator.platform),Me=r=>{const e=Km();return r.map(t=>{switch(t.toLowerCase()){case"ctrl":case"control":return e?"⌘":"Ctrl";case"alt":return e?"⌥":"Alt";case"shift":return e?"⇧":"Shift";case"enter":return e?"⏎":"Enter";case"backspace":return e?"⌫":"Backspace";case"delete":return e?"⌦":"Del";case"esc":case"escape":return"Esc";default:return t.toUpperCase()}}).join(" + ")},Ym={class:"bg-white rounded-lg shadow-xl w-[700px] max-w-full max-h-[90vh] flex flex-col overflow-hidden"},Xm={class:"h-[56px] flex items-center justify-between px-4 border-b border-gray-200"},Zm={class:"text-lg font-semibold text-gray-800"},Jm={class:"flex-1 overflow-y-auto p-6 space-y-5 text-sm text-gray-700"},Qm={class:"space-y-3"},eg={class:"font-medium text-gray-900"},tg={key:0,class:"grid grid-cols-2 gap-4"},rg={class:"flex flex-col gap-1 col-span-2"},og={class:"text-xs text-gray-500"},ng=["disabled"],ag={value:""},sg=["value","disabled"],ig={class:"grid grid-cols-2 gap-4"},lg={class:"flex flex-col gap-1"},dg={class:"text-xs text-gray-500"},cg=["disabled"],ug={value:""},hg=["value"],pg={class:"flex flex-col gap-1"},fg={class:"text-xs text-gray-500"},mg=["placeholder"],gg={key:1,class:"text-xs text-red-600"},bg={key:2,class:"text-xs text-gray-500"},vg={key:3,class:"text-xs text-gray-500"},yg={key:4,class:"text-xs text-gray-500"},wg={class:"grid grid-cols-3 gap-4"},xg={class:"flex flex-col gap-1"},_g={class:"text-xs text-gray-500"},kg={class:"flex flex-col gap-1"},Sg={class:"text-xs text-gray-500"},Cg={class:"flex flex-col gap-1"},Eg={class:"text-xs text-gray-500"},Tg=["placeholder"],Ag={class:"grid grid-cols-3 gap-4"},$g={class:"flex flex-col gap-1"},Ig={class:"text-xs text-gray-500"},zg={value:""},Pg={value:"odd"},Lg={value:"even"},Mg={class:"flex flex-col gap-1"},Rg={class:"text-xs text-gray-500"},Dg={value:"noscale"},Bg={value:"shrink"},Og={value:"fit"},qg={class:"flex flex-col gap-1"},Fg={class:"text-xs text-gray-500"},jg={value:"portrait"},Ng={value:"landscape"},Hg={class:"space-y-3"},Ug={class:"font-medium text-gray-900"},Vg={class:"grid grid-cols-2 gap-4"},Wg={class:"flex flex-col gap-1"},Gg={class:"text-xs text-gray-500"},Kg=["disabled"],Yg={value:"color"},Xg={value:"monochrome"},Zg={class:"flex flex-col gap-1"},Jg={class:"text-xs text-gray-500"},Qg=["disabled"],e0={value:"simplex"},t0={value:"duplex"},r0={value:"duplexshort"},o0={value:"duplexlong"},n0={class:"grid grid-cols-2 gap-4"},a0={class:"flex flex-col gap-1"},s0={class:"text-xs text-gray-500"},i0=["value"],l0=["placeholder"],d0={class:"flex flex-col gap-1"},c0={class:"text-xs text-gray-500"},u0=["placeholder"],h0={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3 rounded-b-lg"},p0=ze({__name:"PrintDialog",props:{show:{type:Boolean},mode:{},options:{}},emits:["update:show","confirm"],setup(r,{emit:e}){const t=r,s=e,{t:o}=je(),i=Be(),c=at("modal-container",se(null)),{localPrinters:l,remotePrinters:u,remoteClients:y,remoteSelectedClientId:x,localPrinterCaps:f,fetchLocalPrinters:k,fetchRemoteClients:m,fetchRemotePrinters:b,fetchLocalPrinterCaps:g}=tr(),C=se(!1),_=se(!1),p=se(""),I=se(""),A=xt({printer:"",jobName:"",copies:1,intervalMs:0,pageRange:"",pageSet:"",scale:"fit",orientation:"portrait",colorMode:"color",sidesMode:"simplex",paperSize:"",trayBin:""});Ie(()=>t.show,L=>{L&&(Object.assign(A,JSON.parse(JSON.stringify(t.options))),I.value=x.value||"",q(),i.setDisableGlobalShortcuts(!0))}),Ie(()=>t.show,L=>{L||i.setDisableGlobalShortcuts(!1)}),Ie(()=>t.mode,()=>{t.show&&q()});const U=fe(()=>(t.mode==="remote"?u.value:l.value)||[]),Y=fe(()=>y.value||[]),j=fe(()=>{if(!(t.mode!=="local"||!A.printer))return f[A.printer]}),O=fe(()=>{var $;if(t.mode!=="local")return[];const L=j.value,W=($=L==null?void 0:L.printerPaperNames)!=null&&$.length?L.printerPaperNames:(L==null?void 0:L.paperSizes)||[];return Array.from(new Set(W)).filter(Boolean)}),F=fe(()=>U.value.map(L=>{if(t.mode==="local"){const $=L;return{key:$.name,label:$.name}}const W=L;return{key:W.printer_name,label:W.printer_name}})),oe=fe(()=>{var L;return t.mode!=="local"?!0:((L=j.value)==null?void 0:L.colorSupported)!==!1}),K=fe(()=>{var L;return t.mode!=="local"?!0:((L=j.value)==null?void 0:L.duplexSupported)!==!1}),P=fe(()=>{if(t.mode==="remote")return(u.value||[]).find(L=>L.printer_name===A.printer)}),q=async()=>{C.value=!0,p.value="";try{if(t.mode==="remote"?(await m(),(!I.value||!Y.value.some(L=>L.client_id===I.value))&&(I.value=x.value||""),I.value?await b(I.value):u.value=[]):t.mode==="local"&&await k(),!A.printer&&U.value.length>0){const L=t.mode==="local"&&U.value.find(W=>W.isDefault)||U.value[0];A.printer=t.mode==="local"?L.name:L.printer_name}t.mode==="local"&&A.printer&&await h(A.printer)}catch(L){p.value=L.message||o("printDialog.printerLoadFailed")}finally{C.value=!1}},h=async L=>{if(!(!L||t.mode!=="local")){_.value=!0;try{await g(L)}finally{_.value=!1}}};Ie(I,async(L,W)=>{if(!(!t.show||t.mode!=="remote"||L===W)){x.value=L,A.printer="",C.value=!0,p.value="";try{L?await b(L):u.value=[]}catch($){p.value=$.message||o("printDialog.printerLoadFailed")}finally{C.value=!1}}}),Ie(()=>A.printer,async(L,W)=>{if(!(!t.show||L===W)){if(t.mode==="local")await h(L),O.value.length&&!A.paperSize&&(A.paperSize=O.value[0]);else if(t.mode==="remote"){const $=(u.value||[]).find(T=>T.printer_name===L);$!=null&&$.paper_spec&&!A.paperSize&&(A.paperSize=$.paper_spec)}}}),Ie(j,L=>{L&&(L.colorSupported===!1&&A.colorMode==="color"&&(A.colorMode="monochrome"),L.duplexSupported===!1&&A.sidesMode.startsWith("duplex")&&(A.sidesMode="simplex"))});const v=()=>{s("update:show",!1)},Z=L=>{t.show&&L.key==="Escape"&&(L.preventDefault(),v())},J=()=>{s("confirm",JSON.parse(JSON.stringify(A)))},re=fe(()=>t.mode==="local"?o("printDialog.titleLocal"):t.mode==="remote"?o("printDialog.titleRemote"):o("printDialog.title"));return We(()=>{window.addEventListener("keydown",Z)}),Ge(()=>{window.removeEventListener("keydown",Z),t.show&&i.setDisableGlobalShortcuts(!1)}),(L,W)=>(z(),Pe(tt,{to:a(c)||"body"},[r.show?(z(),H("div",{key:0,class:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:Ke(v,["self"])},[n("div",Ym,[n("div",Xm,[n("h3",Zm,E(re.value),1),n("button",{onClick:v,class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(a(yt),{class:"w-4 h-4"})])]),n("div",Jm,[n("div",Qm,[n("div",eg,E(a(o)("printDialog.sectionBasic")),1),t.mode==="remote"?(z(),H("div",tg,[n("label",rg,[n("span",og,E(a(o)("printDialog.remoteClient")),1),Ae(n("select",{"onUpdate:modelValue":W[0]||(W[0]=$=>I.value=$),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:C.value},[n("option",ag,E(a(o)("printDialog.remoteClientPlaceholder")),1),(z(!0),H(Te,null,Le(Y.value,$=>(z(),H("option",{key:$.client_id,value:$.client_id,disabled:$.online===!1},E($.client_name||$.client_id)+E($.online===!1?" (offline)":""),9,sg))),128))],8,ng),[[Je,I.value]])])])):be("",!0),n("div",ig,[n("label",lg,[n("span",dg,E(a(o)("printDialog.printer")),1),Ae(n("select",{"onUpdate:modelValue":W[1]||(W[1]=$=>A.printer=$),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:C.value||_.value||t.mode==="remote"&&!I.value},[n("option",ug,E(a(o)("printDialog.printerSelect")),1),(z(!0),H(Te,null,Le(F.value,$=>(z(),H("option",{key:$.key,value:$.key},E($.label),9,hg))),128))],8,cg),[[Je,A.printer]])]),n("label",pg,[n("span",fg,E(a(o)("printDialog.jobName")),1),Ae(n("input",{"onUpdate:modelValue":W[2]||(W[2]=$=>A.jobName=$),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:a(o)("printDialog.jobNamePlaceholder")},null,8,mg),[[Oe,A.jobName]])])]),p.value?(z(),H("div",gg,E(p.value),1)):t.mode==="remote"&&Y.value.length===0?(z(),H("div",bg,E(a(o)("printDialog.remoteClientEmpty")),1)):U.value.length===0?(z(),H("div",vg,E(a(o)("printDialog.printerEmpty")),1)):be("",!0),t.mode==="remote"&&P.value?(z(),H("div",yg,E(a(o)("printDialog.remotePrinterInfo",{type:P.value.printer_type||"-",paper:P.value.paper_spec||"-",format:P.value.supported_format||"-"})),1)):be("",!0),n("div",wg,[n("label",xg,[n("span",_g,E(a(o)("printDialog.copies")),1),Ae(n("input",{"onUpdate:modelValue":W[3]||(W[3]=$=>A.copies=$),type:"number",min:"1",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,A.copies,void 0,{number:!0}]])]),n("label",kg,[n("span",Sg,E(a(o)("printDialog.intervalMs")),1),Ae(n("input",{"onUpdate:modelValue":W[4]||(W[4]=$=>A.intervalMs=$),type:"number",min:"0",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,A.intervalMs,void 0,{number:!0}]])]),n("label",Cg,[n("span",Eg,E(a(o)("printDialog.pageRange")),1),Ae(n("input",{"onUpdate:modelValue":W[5]||(W[5]=$=>A.pageRange=$),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:a(o)("printDialog.pageRangePlaceholder")},null,8,Tg),[[Oe,A.pageRange]])])]),n("div",Ag,[n("label",$g,[n("span",Ig,E(a(o)("printDialog.pageSet")),1),Ae(n("select",{"onUpdate:modelValue":W[6]||(W[6]=$=>A.pageSet=$),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},[n("option",zg,E(a(o)("printDialog.pageSetAll")),1),n("option",Pg,E(a(o)("printDialog.pageSetOdd")),1),n("option",Lg,E(a(o)("printDialog.pageSetEven")),1)],512),[[Je,A.pageSet]])]),n("label",Mg,[n("span",Rg,E(a(o)("printDialog.scale")),1),Ae(n("select",{"onUpdate:modelValue":W[7]||(W[7]=$=>A.scale=$),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},[n("option",Dg,E(a(o)("printDialog.scaleNo")),1),n("option",Bg,E(a(o)("printDialog.scaleShrink")),1),n("option",Og,E(a(o)("printDialog.scaleFit")),1)],512),[[Je,A.scale]])]),n("label",qg,[n("span",Fg,E(a(o)("printDialog.orientation")),1),Ae(n("select",{"onUpdate:modelValue":W[8]||(W[8]=$=>A.orientation=$),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},[n("option",jg,E(a(o)("printDialog.portrait")),1),n("option",Ng,E(a(o)("printDialog.landscape")),1)],512),[[Je,A.orientation]])])])]),n("div",Hg,[n("div",Ug,E(a(o)("printDialog.sectionAdvanced")),1),n("div",Vg,[n("label",Wg,[n("span",Gg,E(a(o)("printDialog.colorMode")),1),Ae(n("select",{"onUpdate:modelValue":W[9]||(W[9]=$=>A.colorMode=$),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:!oe.value},[n("option",Yg,E(a(o)("printDialog.color")),1),n("option",Xg,E(a(o)("printDialog.monochrome")),1)],8,Kg),[[Je,A.colorMode]])]),n("label",Zg,[n("span",Jg,E(a(o)("printDialog.sidesMode")),1),Ae(n("select",{"onUpdate:modelValue":W[10]||(W[10]=$=>A.sidesMode=$),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:!K.value},[n("option",e0,E(a(o)("printDialog.simplex")),1),n("option",t0,E(a(o)("printDialog.duplex")),1),n("option",r0,E(a(o)("printDialog.duplexShort")),1),n("option",o0,E(a(o)("printDialog.duplexLong")),1)],8,Qg),[[Je,A.sidesMode]])])]),n("div",n0,[n("label",a0,[n("span",s0,E(a(o)("printDialog.paperSize")),1),O.value.length?Ae((z(),H("select",{key:0,"onUpdate:modelValue":W[11]||(W[11]=$=>A.paperSize=$),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},[(z(!0),H(Te,null,Le(O.value,$=>(z(),H("option",{key:$,value:$},E($),9,i0))),128))],512)),[[Je,A.paperSize]]):Ae((z(),H("input",{key:1,"onUpdate:modelValue":W[12]||(W[12]=$=>A.paperSize=$),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:a(o)("printDialog.paperSizePlaceholder")},null,8,l0)),[[Oe,A.paperSize]])]),n("label",d0,[n("span",c0,E(a(o)("printDialog.trayBin")),1),Ae(n("input",{"onUpdate:modelValue":W[13]||(W[13]=$=>A.trayBin=$),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:a(o)("printDialog.trayBinPlaceholder")},null,8,u0),[[Oe,A.trayBin]])])])])]),n("div",h0,[n("button",{onClick:v,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm text-gray-700"},E(a(o)("common.close")),1),n("button",{onClick:J,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm"},E(a(o)("printDialog.confirm")),1)])])])):be("",!0)],8,["to"]))}}),f0={class:"flex items-center gap-4"},m0={class:"flex items-center gap-2 bg-gray-100 rounded-lg p-1 px-2"},g0=["disabled","title"],b0=["value"],v0={class:"flex items-center gap-1"},y0=["disabled"],w0=["disabled"],x0=["disabled"],_0=["disabled","title"],k0=["disabled","title"],S0=["disabled","title"],C0=["disabled","title"],E0=["disabled","title"],T0=["disabled","title"],A0={class:"w-1 h-3.5 rounded-[1px] border border-gray-300 relative overflow-hidden bg-white"},$0={key:0,class:"absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50 bg-repeat bg-[length:6px_6px]"},I0={key:1,class:"absolute inset-0 flex items-center justify-center"},z0=["disabled","title"],P0={class:"flex items-center gap-1 bg-gray-100 rounded-lg p-1"},L0=["disabled","title"],M0=["disabled","title"],R0=["disabled","title"],D0=["disabled","title"],B0=["disabled","title"],O0=["disabled","title"],q0=["disabled","title"],F0={class:"flex items-center gap-1 bg-gray-100 rounded-lg p-1"},j0=["disabled","title"],N0=["disabled","title"],H0=["disabled","title"],U0=["disabled","title"],V0=["disabled","title"],W0=["disabled","title"],G0={class:"relative"},K0={class:"flex items-center bg-gray-100 rounded-lg p-1"},Y0=["title"],X0=["title"],Z0=["title"],J0={key:0,class:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 shadow-xl rounded-lg p-4 z-[1000]"},Q0={class:"text-sm font-semibold text-gray-700 mb-3"},eb={class:"space-y-3"},tb={class:"block text-xs text-gray-500 mb-1"},rb={class:"text-right text-xs text-gray-600 mt-1"},ob={class:"relative"},nb={class:"flex items-center shadow-sm"},ab=["disabled"],sb={key:0,class:"absolute top-full right-0 mt-2 w-max min-w-[160px] bg-white border border-gray-200 shadow-xl rounded-lg p-1 z-[1000] flex flex-col gap-1"},ib=ze({__name:"HeaderToolbar",emits:["toggleHelp","toggleSettings"],setup(r,{emit:e}){const t=e,{t:s}=je(),o=Be(),i=Qt(),{printMode:c,silentPrint:l,localPrintOptions:u,remotePrintOptions:y}=tr(),x=fe(()=>c.value||"browser"),f=se(!1),k=se(""),m=se(""),b=se("json"),g=()=>{const ie={pages:Ee(o.pages),canvasSize:Ee(o.canvasSize),guides:Ee(o.guides),zoom:o.zoom,showGrid:o.showGrid,headerHeight:o.headerHeight,footerHeight:o.footerHeight,showHeaderLine:o.showHeaderLine,showFooterLine:o.showFooterLine,showMinimap:o.showMinimap,canvasBackground:o.canvasBackground};k.value=JSON.stringify(ie,null,2),m.value=s("preview.templateJson"),b.value="json",f.value=!0},C=se(!1),_=se(""),p=se("save"),{getPrintHtml:I,print:A,exportPdf:U,getPdfBlob:Y,exportImages:j,getImageBlob:O}=Yi(),F=async()=>{try{const ie=Array.from(document.querySelectorAll(".print-page")),V=await O(ie),ee=new FileReader;ee.readAsDataURL(V),ee.onloadend=()=>{k.value=ee.result,m.value=s("editor.viewImageBlob"),b.value="text",f.value=!0}}catch(ie){console.error(ie),alert("Failed to generate blob")}},oe=async()=>{try{const ie=Array.from(document.querySelectorAll(".print-page")),V=await Y(ie),ee=new FileReader;ee.readAsDataURL(V),ee.onloadend=()=>{k.value=ee.result,m.value=s("editor.viewPdfBlob"),b.value="text",f.value=!0}}catch(ie){console.error(ie),alert("Failed to generate PDF blob")}},K=se(!1),P=se(""),q=se(!1),h=se(!1),v=se(null),Z=fe(()=>c.value==="remote"?y:u),J=se(!1),re=se(Math.round(o.zoom*100)),L=fe({get:()=>o.selectedElement&&o.selectedElement.style.fontFamily||"",set:ie=>{o.updateSelectedElementsStyle({fontFamily:ie})}}),W=fe({get:()=>o.selectedElement&&o.selectedElement.style.fontSize||12,set:ie=>{o.updateSelectedElementsStyle({fontSize:ie})}}),$=fe(()=>{var ie,V;return((ie=o.selectedElement)==null?void 0:ie.style.fontWeight)==="700"||((V=o.selectedElement)==null?void 0:V.style.fontWeight)==="bold"}),T=fe(()=>{var ie;return((ie=o.selectedElement)==null?void 0:ie.style.fontStyle)==="italic"}),te=fe(()=>{var ie;return((ie=o.selectedElement)==null?void 0:ie.style.textDecoration)==="underline"}),G=fe(()=>{var ie;return((ie=o.selectedElement)==null?void 0:ie.style.writingMode)==="vertical-rl"}),Q=fe({get:()=>{if(o.selectedElement)return o.selectedElement.style.color},set:ie=>{o.updateSelectedElementsStyle({color:ie})}}),me=fe({get:()=>{if(o.selectedElement)return o.selectedElement.style.backgroundColor},set:ie=>{o.updateSelectedElementsStyle({backgroundColor:ie})}}),ve=fe(()=>{var ie;return o.selectedElementIds.length===0?!1:((ie=o.selectedElement)==null?void 0:ie.locked)||!1}),de=fe(()=>{var ie;return!o.selectedElementId||ve.value||((ie=o.selectedElement)==null?void 0:ie.type)===ge.IMAGE}),_e=()=>{o.updateSelectedElementsStyle({fontWeight:$.value?"400":"700"})},ke=()=>{o.updateSelectedElementsStyle({fontStyle:T.value?"normal":"italic"})},ae=()=>{o.updateSelectedElementsStyle({textDecoration:te.value?"none":"underline"})},le=()=>{o.updateSelectedElementsStyle({writingMode:G.value?"horizontal-tb":"vertical-rl"})},pe=()=>{o.updateSelectedElementsStyle({rotate:0})},d=fe(()=>[{label:s("editor.fonts.default"),value:""},{label:s("editor.fonts.arial"),value:"Arial, sans-serif"},{label:s("editor.fonts.timesNewRoman"),value:'"Times New Roman", serif'},{label:s("editor.fonts.courierNew"),value:'"Courier New", monospace'},{label:s("editor.fonts.simSun"),value:"SimSun, serif"},{label:s("editor.fonts.simHei"),value:"SimHei, sans-serif"}]),B=()=>{const ie=Math.round(o.zoom*100),V=Math.min(ie+10,500);o.setZoom(V/100),re.value=V},R=()=>{const ie=Math.round(o.zoom*100),V=Math.max(ie-10,20);o.setZoom(V/100),re.value=V};Ie(()=>o.zoom,ie=>{re.value=Math.round(ie*100)});const w=()=>{const ie=Math.max(20,Math.min(500,re.value));re.value=ie,o.setZoom(ie/100)},S=async()=>{try{P.value=await I(),K.value=!0}catch(ie){console.error(ie),alert("Preview generation failed")}},N=async()=>{const ie=Array.from(document.querySelectorAll(".print-page"));if(c.value!=="browser"&&!l.value){v.value=ie,h.value=!0;return}await A(ie,{mode:x.value})},M=async ie=>{c.value==="local"&&Object.assign(u,ie),c.value==="remote"&&Object.assign(y,ie);const V=v.value||Array.from(document.querySelectorAll(".print-page"));v.value=null,h.value=!1,await A(V,{mode:x.value,options:ie})},X=async()=>{const ie=we();await U(void 0,`${ie}.pdf`)},D=async()=>{const ie=we();await j(void 0,ie)},ne=()=>{if(i.currentTemplateId){const ie=i.templates.find(V=>V.id===i.currentTemplateId);if(ie){i.saveCurrentTemplate(ie.name);return}}p.value="save",_.value="",C.value=!0},he=()=>{p.value="saveAs";const ie=i.templates.find(V=>V.id===i.currentTemplateId);_.value=ie?`${ie.name} Copy`:"",C.value=!0},ce=ie=>{p.value==="saveAs"?i.createTemplate(ie):i.saveCurrentTemplate(ie),C.value=!1},we=()=>{const ie=i.templates.find(Fe=>Fe.id===i.currentTemplateId),ee=((ie==null?void 0:ie.name)||"print-design").trim().replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g," ").trim()||"print-design",Re=new Date,De=Re.getFullYear(),Ue=String(Re.getMonth()+1).padStart(2,"0"),$e=String(Re.getDate()).padStart(2,"0");return`${ee}-${De}${Ue}${$e}`};return We(()=>{window.addEventListener("designer:preview",S),window.addEventListener("designer:save",ne),window.addEventListener("designer:save-as",he),window.addEventListener("designer:print",N),window.addEventListener("designer:export-pdf",X),window.addEventListener("designer:view-json",g),window.addEventListener("designer:view-blob",F)}),Ge(()=>{window.removeEventListener("designer:preview",S),window.removeEventListener("designer:save",ne),window.removeEventListener("designer:save-as",he),window.removeEventListener("designer:print",N),window.removeEventListener("designer:export-pdf",X),window.removeEventListener("designer:view-json",g),window.removeEventListener("designer:view-blob",F)}),(ie,V)=>(z(),H(Te,null,[n("div",f0,[ue(If),ue(jt,{show:C.value,title:p.value==="saveAs"?a(s)("editor.saveAsTemplate"):a(s)("editor.saveTemplate"),"initial-value":_.value,onClose:V[0]||(V[0]=ee=>C.value=!1),onSave:ce},null,8,["show","title","initial-value"]),n("div",m0,[Ae(n("select",{"onUpdate:modelValue":V[1]||(V[1]=ee=>L.value=ee),disabled:de.value,class:"w-32 text-sm bg-transparent border-none outline-none focus:ring-0 cursor-pointer disabled:cursor-not-allowed disabled:opacity-50",title:a(s)("editor.fontFamily")},[(z(!0),H(Te,null,Le(d.value,ee=>(z(),H("option",{key:ee.value,value:ee.value},E(ee.label),9,b0))),128))],8,g0),[[Je,L.value]]),V[39]||(V[39]=n("div",{class:"w-px h-4 bg-gray-300"},null,-1)),n("div",v0,[n("button",{onClick:V[2]||(V[2]=ee=>W.value--),disabled:de.value,class:"w-6 h-6 flex items-center justify-center hover:bg-gray-200 rounded text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"},"-",8,y0),Ae(n("input",{type:"number","onUpdate:modelValue":V[3]||(V[3]=ee=>W.value=ee),disabled:de.value,class:"w-12 text-center text-sm bg-transparent border-none outline-none focus:ring-0 p-0 disabled:opacity-50 disabled:cursor-not-allowed [appearance:textfield] [-moz-appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",min:"1",max:"200"},null,8,w0),[[Oe,W.value]]),n("button",{onClick:V[4]||(V[4]=ee=>W.value++),disabled:de.value,class:"w-6 h-6 flex items-center justify-center hover:bg-gray-200 rounded text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"},"+",8,x0)]),V[40]||(V[40]=n("div",{class:"w-px h-4 bg-gray-300"},null,-1)),n("button",{onClick:_e,disabled:de.value,class:xe(["p-1 hover:bg-gray-200 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-300 text-blue-700":$.value}]),title:a(s)("editor.bold")},[ue(a(Yc),{class:"w-4 h-4"})],10,_0),n("button",{onClick:ke,disabled:de.value,class:xe(["p-1 hover:bg-gray-200 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-300 text-blue-700":T.value}]),title:a(s)("editor.italic")},[ue(a(Jc),{class:"w-4 h-4"})],10,k0),n("button",{onClick:ae,disabled:de.value,class:xe(["p-1 hover:bg-gray-200 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-300 text-blue-700":te.value}]),title:a(s)("editor.underline")},[ue(a(tu),{class:"w-4 h-4"})],10,S0),n("button",{onClick:le,disabled:de.value,class:xe(["p-1 hover:bg-gray-200 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-300 text-blue-700":G.value}]),title:a(s)("editor.verticalText")},[ue(a(nu),{class:"w-4 h-4"})],10,C0),ue(kt,{modelValue:Q.value,"onUpdate:modelValue":V[5]||(V[5]=ee=>Q.value=ee),disabled:de.value,"default-color":"#000000"},{trigger:pt(({color:ee})=>[n("button",{type:"button",class:"flex items-center gap-1 p-1 hover:bg-gray-200 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:de.value,title:a(s)("editor.textColor")},[ue(a(hu),{class:"w-4 h-4"}),n("div",{class:"w-1 h-3.5 rounded-[1px] border border-gray-300",style:ye({backgroundColor:ee})},null,4)],8,E0)]),_:1},8,["modelValue","disabled"]),ue(kt,{modelValue:me.value,"onUpdate:modelValue":V[6]||(V[6]=ee=>me.value=ee),disabled:de.value,"allow-transparent":!0,"default-color":"transparent"},{trigger:pt(({color:ee})=>[n("button",{type:"button",class:"flex items-center gap-1 p-1 hover:bg-gray-200 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:de.value,title:a(s)("editor.backgroundColor")},[ue(a(mu),{class:"w-4 h-4"}),n("div",A0,[ee==="transparent"?(z(),H("div",$0)):be("",!0),n("div",{class:"absolute inset-0",style:ye({backgroundColor:ee==="transparent"?"transparent":ee})},null,4),ee==="transparent"?(z(),H("div",I0,[...V[38]||(V[38]=[n("div",{class:"w-full h-[1px] bg-red-500 rotate-90 transform scale-150"},null,-1)])])):be("",!0)])],8,T0)]),_:1},8,["modelValue","disabled"]),V[41]||(V[41]=n("div",{class:"w-px h-4 bg-gray-300"},null,-1)),n("button",{onClick:pe,disabled:ve.value||!a(o).selectedElementId,class:"p-1 hover:bg-gray-200 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:a(s)("editor.resetRotation")},[ue(a(iu),{class:"w-4 h-4"})],8,z0)]),V[47]||(V[47]=n("div",{class:"h-6 w-px bg-gray-300"},null,-1)),n("div",P0,[n("button",{onClick:V[7]||(V[7]=ee=>a(o).alignSelectedElements("left")),disabled:!a(o).selectedElementId||ve.value,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("editor.alignLeft")},[ue(a(zc),{class:"w-4 h-4"})],8,L0),n("button",{onClick:V[8]||(V[8]=ee=>a(o).alignSelectedElements("center")),disabled:!a(o).selectedElementId||ve.value,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("editor.alignCenter")},[ue(a(Mc),{class:"w-4 h-4"})],8,M0),n("button",{onClick:V[9]||(V[9]=ee=>a(o).alignSelectedElements("right")),disabled:!a(o).selectedElementId||ve.value,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("editor.alignRight")},[ue(a(Bc),{class:"w-4 h-4"})],8,R0),V[43]||(V[43]=n("div",{class:"w-px h-4 bg-gray-300 mx-1"},null,-1)),n("button",{onClick:V[10]||(V[10]=ee=>a(o).alignSelectedElements("top")),disabled:!a(o).selectedElementId||ve.value,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("editor.alignTop")},[ue(a(Fc),{class:"w-4 h-4"})],8,D0),n("button",{onClick:V[11]||(V[11]=ee=>a(o).alignSelectedElements("middle")),disabled:!a(o).selectedElementId||ve.value,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("editor.alignMiddle")},[ue(a(Hc),{class:"w-4 h-4"})],8,B0),n("button",{onClick:V[12]||(V[12]=ee=>a(o).alignSelectedElements("bottom")),disabled:!a(o).selectedElementId||ve.value,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("editor.alignBottom")},[ue(a(Wc),{class:"w-4 h-4"})],8,O0),a(o).selectedElementIds.length>1?(z(),H(Te,{key:0},[V[42]||(V[42]=n("div",{class:"w-px h-4 bg-gray-300 mx-1"},null,-1)),n("button",{onClick:V[13]||(V[13]=ee=>a(o).groupSelectedElements()),disabled:ve.value,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("editor.group")},[ue(a(wu),{class:"w-4 h-4"})],8,q0)],64)):be("",!0)]),V[48]||(V[48]=n("div",{class:"h-6 w-px bg-gray-300"},null,-1)),n("div",F0,[n("button",{onClick:V[14]||(V[14]=ee=>a(o).undo()),disabled:a(o).historyPast.length===0,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("common.undo")+" ("+a(Me)(["Ctrl","Z"])+")"},[ue(a(ji),{class:"w-4 h-4"})],8,j0),n("button",{onClick:V[15]||(V[15]=ee=>a(o).redo()),disabled:a(o).historyFuture.length===0,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("common.redo")+" ("+a(Me)(["Ctrl","Y"])+")"},[ue(a(Ni),{class:"w-4 h-4"})],8,N0),V[44]||(V[44]=n("div",{class:"w-px h-4 bg-gray-300 mx-1"},null,-1)),n("button",{onClick:V[16]||(V[16]=ee=>a(o).copy()),disabled:!a(o).selectedElementId||ve.value,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("common.copy")+" ("+a(Me)(["Ctrl","C"])+")"},[ue(a(Tt),{class:"w-4 h-4"})],8,H0),n("button",{onClick:V[17]||(V[17]=ee=>a(o).paste()),disabled:a(o).clipboard.length===0,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("common.paste")+" ("+a(Me)(["Ctrl","V"])+")"},[ue(a($n),{class:"w-4 h-4"})],8,U0),V[45]||(V[45]=n("div",{class:"w-px h-4 bg-gray-300 mx-1"},null,-1)),n("button",{onClick:V[18]||(V[18]=ee=>a(o).toggleLock()),disabled:!a(o).selectedElementId,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:(ve.value?a(s)("editor.unlock"):a(s)("editor.lock"))+" ("+a(Me)(["Ctrl","L"])+")"},[ve.value?(z(),Pe(a(Hi),{key:0,class:"w-4 h-4 text-red-500"})):(z(),Pe(a(er),{key:1,class:"w-4 h-4"}))],8,V0),n("button",{onClick:V[19]||(V[19]=ee=>a(o).removeSelectedElements()),disabled:!a(o).selectedElementId||ve.value,class:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",title:a(s)("common.delete")+" ("+a(Me)(["Del"])+")"},[ue(a(Et),{class:"w-4 h-4"})],8,W0)]),V[49]||(V[49]=n("div",{class:"h-6 w-px bg-gray-300"},null,-1)),ue(Gm),n("div",G0,[n("div",K0,[n("button",{onClick:R,class:"p-1 hover:bg-gray-200 rounded",title:a(s)("editor.zoomOut")},[ue(a(qi),{class:"w-4 h-4"})],8,Y0),n("button",{onClick:V[20]||(V[20]=ee=>J.value=!J.value),class:"text-xs w-12 text-center hover:bg-gray-200 rounded px-1 py-0.5",title:a(s)("editor.zoomSettings")},E(Math.round(a(o).zoom*100))+"% ",9,X0),n("button",{onClick:B,class:"p-1 hover:bg-gray-200 rounded",title:a(s)("editor.zoomIn")},[ue(a(Oi),{class:"w-4 h-4"})],8,Z0)]),J.value?(z(),H("div",J0,[n("h3",Q0,E(a(s)("editor.zoomLevel")),1),n("div",eb,[n("div",null,[n("label",tb,E(a(s)("editor.zoomLevel"))+" (20% - 500%)",1),Ae(n("input",{type:"range",min:"20",max:"500",step:"10","onUpdate:modelValue":V[21]||(V[21]=ee=>re.value=ee),onInput:w,class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:hover:scale-110 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:bg-blue-600 [&::-moz-range-thumb]:border-none [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:transition-all [&::-moz-range-thumb]:hover:scale-110"},null,544),[[Oe,re.value,void 0,{number:!0}]]),n("div",rb,E(re.value)+"%",1)])]),n("div",{class:"fixed inset-0 z-[-1]",onClick:V[22]||(V[22]=ee=>J.value=!1)})])):be("",!0)]),V[50]||(V[50]=n("div",{class:"h-6 w-px bg-gray-300"},null,-1)),n("div",ob,[n("div",nb,[n("button",{onClick:ne,disabled:a(i).isSaving,class:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-l-md hover:bg-blue-700 transition-colors text-sm border-r border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[a(i).isSaving?(z(),Pe(a(yc),{key:0,class:"w-4 h-4 animate-spin"})):(z(),Pe(a(An),{key:1,class:"w-4 h-4"})),n("span",null,E(a(s)("common.save")),1)],8,ab),n("button",{onClick:V[23]||(V[23]=ee=>q.value=!q.value),class:"px-2 py-1.5 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 transition-colors text-sm flex items-center"},[ue(a(In),{class:"w-5 h-5"})])]),q.value?(z(),H("div",sb,[n("button",{onClick:V[24]||(V[24]=ee=>{he(),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(Fi),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.saveAsTemplate")),1)]),n("button",{onClick:V[25]||(V[25]=ee=>{S(),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(ec),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.preview")),1)]),n("button",{onClick:V[26]||(V[26]=ee=>{N(),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(Tn),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.print")),1)]),n("button",{onClick:V[27]||(V[27]=ee=>{X(),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(Wt),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.exportPdf")),1)]),n("button",{onClick:V[28]||(V[28]=ee=>{D(),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(Wt),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.exportImage")),1)]),n("button",{onClick:V[29]||(V[29]=ee=>{F(),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(ht),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.viewImageBlob")),1)]),n("button",{onClick:V[30]||(V[30]=ee=>{oe(),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(ht),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.viewPdfBlob")),1)]),n("button",{onClick:V[31]||(V[31]=ee=>{g(),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(ht),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.viewJson")),1)]),V[46]||(V[46]=n("div",{class:"h-px bg-gray-200 my-0.5"},null,-1)),n("button",{onClick:V[32]||(V[32]=ee=>{t("toggleHelp"),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(Ac),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.help")),1)]),n("button",{onClick:V[33]||(V[33]=ee=>{t("toggleSettings"),q.value=!1}),class:"w-full flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded text-sm text-left transition-colors whitespace-nowrap"},[ue(a(Gt),{class:"w-4 h-4 text-gray-500"}),n("span",null,E(a(s)("editor.settings")),1)])])):be("",!0),q.value?(z(),H("div",{key:1,class:"fixed inset-0 z-[999]",onClick:V[34]||(V[34]=ee=>q.value=!1)})):be("",!0)])]),ue(kp,{visible:K.value,"onUpdate:visible":V[35]||(V[35]=ee=>K.value=ee),"html-content":P.value,width:a(o).canvasSize.width},null,8,["visible","html-content","width"]),ue(p0,{show:h.value,"onUpdate:show":V[36]||(V[36]=ee=>h.value=ee),mode:x.value,options:Z.value,onConfirm:M},null,8,["show","mode","options"]),ue(Ft,{visible:f.value,"onUpdate:visible":V[37]||(V[37]=ee=>f.value=ee),title:m.value,value:k.value,language:b.value,"read-only":""},null,8,["visible","title","value","language"])],64))}}),Zi="/Vue-Print-Designer/assets/logo-D22CyW4G.png";var lb=ol();const db={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function cb(r,e){return z(),H("svg",db,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M4 19q-.825 0-1.412-.587T2 17V7q0-.825.588-1.412T4 5h16q.825 0 1.413.588T22 7v10q0 .825-.587 1.413T20 19zm4-3h8v-2H8zm-3-3h2v-2H5zm3 0h2v-2H8zm3 0h2v-2h-2zm3 0h2v-2h-2zm3 0h2v-2h-2zM5 10h2V8H5zm3 0h2V8H8zm3 0h2V8h-2zm3 0h2V8h-2zm3 0h2V8h-2z"},null,-1)])])}const ub=Se({name:"material-symbols-keyboard",render:cb}),hb={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function pb(r,e){return z(),H("svg",hb,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M11 17h2v-6h-2zm1-8q.425 0 .713-.288T13 8t-.288-.712T12 7t-.712.288T11 8t.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"},null,-1)])])}const fb=Se({name:"material-symbols-info",render:pb}),mb="vue-print-designer",gb="0.9.6",bb={"@guolao/vue-monaco-editor":"^1.6.0",canvg:"^4.0.3","dom-to-image-more":"^3.7.2",jszip:"^3.10.1",jsbarcode:"^3.12.3",jspdf:"^2.5.2",lodash:"^4.17.21",pinia:"^2.3.0",qrcode:"^1.5.4",uuid:"^11.0.3",vue:"^3.5.13","vue-i18n":"^11.2.8"},un={name:mb,version:gb,dependencies:bb},vb={class:"bg-white rounded-lg shadow-xl w-[700px] max-w-full h-[500px] flex overflow-hidden"},yb={class:"w-48 bg-gray-50 border-r border-gray-200 flex flex-col"},wb={class:"h-[60px] flex items-center px-4 border-b border-gray-200"},xb={class:"text-lg font-semibold text-gray-800"},_b={class:"flex-1 py-2"},kb={class:"flex-1 flex flex-col min-w-0"},Sb={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200"},Cb={class:"text-lg font-semibold text-gray-800"},Eb={class:"flex-1 overflow-y-auto p-6"},Tb={key:0,class:"space-y-6"},Ab={class:"grid grid-cols-1 gap-6 text-sm"},$b={class:"font-medium text-gray-900 mb-3 border-b pb-1"},Ib={class:"space-y-2 text-gray-600"},zb={class:"flex justify-between items-center"},Pb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Lb={class:"flex justify-between items-center"},Mb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Rb={class:"flex justify-between items-center"},Db={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Bb={class:"flex justify-between items-center"},Ob={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},qb={class:"flex justify-between items-center"},Fb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},jb={class:"flex justify-between items-center"},Nb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Hb={class:"flex justify-between items-center"},Ub={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Vb={class:"flex justify-between items-center"},Wb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Gb={class:"flex justify-between items-center"},Kb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Yb={class:"flex justify-between items-center"},Xb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Zb={class:"flex justify-between items-center"},Jb={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Qb={class:"flex justify-between items-center"},ev={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},tv={class:"flex justify-between items-center"},rv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},ov={class:"font-medium text-gray-900 mb-3 border-b pb-1"},nv={class:"space-y-2 text-gray-600"},av={class:"flex justify-between items-center"},sv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},iv={class:"flex justify-between items-center"},lv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},dv={class:"flex justify-between items-center"},cv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},uv={class:"flex justify-between items-center"},hv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},pv={class:"flex justify-between items-center"},fv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},mv={class:"flex justify-between items-center"},gv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},bv={class:"flex justify-between items-center"},vv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},yv={class:"flex justify-between items-center"},wv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},xv={class:"flex justify-between items-center"},_v={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},kv={class:"flex justify-between items-center"},Sv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Cv={class:"font-medium text-gray-900 mb-3 border-b pb-1"},Ev={class:"space-y-2 text-gray-600"},Tv={class:"flex justify-between items-center"},Av={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},$v={class:"flex justify-between items-center"},Iv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},zv={class:"flex justify-between items-center"},Pv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Lv={class:"flex justify-between items-center"},Mv={class:"bg-gray-100 px-2 py-0.5 rounded border text-xs"},Rv={key:1,class:"space-y-6"},Dv={class:"text-center mb-8"},Bv={class:"text-xl font-bold text-gray-800"},Ov={class:"mt-4 flex justify-center"},qv=["title"],Fv={class:"text-gray-600"},jv={class:"font-medium text-gray-900 mb-3 border-b pb-1"},Nv={class:"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden"},Hv={class:"w-full text-sm text-left"},Uv={class:"bg-gray-100 text-gray-700 font-medium"},Vv={class:"px-4 py-2 border-b"},Wv={class:"px-4 py-2 border-b"},Gv={class:"divide-y divide-gray-200"},Kv={class:"px-4 py-2 text-gray-700 font-mono"},Yv={class:"px-4 py-2 text-gray-500"},Xv={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end rounded-br-lg"},Zv=ze({__name:"HelpModal",props:{show:{type:Boolean}},emits:["update:show"],setup(r,{emit:e}){const t=r,s=e,{t:o}=je(),i=Be(),c=at("modal-container",se(null)),l=se("shortcuts"),u=()=>{s("update:show",!1)},y=m=>{t.show&&m.key==="Escape"&&(m.preventDefault(),u())};We(()=>{window.addEventListener("keydown",y)}),Ie(()=>t.show,m=>{i.setDisableGlobalShortcuts(m)}),Ge(()=>{window.removeEventListener("keydown",y),t.show&&i.setDisableGlobalShortcuts(!1)});const x=Object.entries(un.dependencies).map(([m,b])=>({name:m,version:b})),f=un.version,k=lb.startCase(un.name);return(m,b)=>(z(),Pe(tt,{to:a(c)||"body"},[r.show?(z(),H("div",{key:0,class:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:Ke(u,["self"])},[n("div",vb,[n("div",yb,[n("div",wb,[n("h3",xb,E(a(o)("help.title")),1)]),n("div",_b,[n("button",{onClick:b[0]||(b[0]=g=>l.value="shortcuts"),class:xe(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",l.value==="shortcuts"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(a(ub),{class:"w-5 h-5"}),Ce(" "+E(a(o)("shortcuts.title")),1)],2),n("button",{onClick:b[1]||(b[1]=g=>l.value="about"),class:xe(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",l.value==="about"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(a(fb),{class:"w-5 h-5"}),Ce(" "+E(a(o)("help.about")),1)],2)])]),n("div",kb,[n("div",Sb,[n("h3",Cb,E(l.value==="shortcuts"?a(o)("shortcuts.keyboardShortcuts"):a(o)("help.aboutProject",{name:a(k)})),1),n("button",{onClick:u,class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(a(yt),{class:"w-4 h-4"})])]),n("div",Eb,[l.value==="shortcuts"?(z(),H("div",Tb,[n("div",Ab,[n("div",null,[n("h4",$b,E(a(o)("shortcuts.general")),1),n("ul",Ib,[n("li",zb,[n("span",null,E(a(o)("common.save")),1),b[2]||(b[2]=Ce()),n("kbd",Pb,E(a(Me)(["Ctrl","S"])),1)]),n("li",Lb,[n("span",null,E(a(o)("shortcuts.saveAsTemplate")),1),b[3]||(b[3]=Ce()),n("kbd",Mb,E(a(Me)(["Ctrl","Shift","S"])),1)]),n("li",Rb,[n("span",null,E(a(o)("editor.print")),1),b[4]||(b[4]=Ce()),n("kbd",Db,E(a(Me)(["Ctrl","P"])),1)]),n("li",Bb,[n("span",null,E(a(o)("editor.exportPdf")),1),b[5]||(b[5]=Ce()),n("kbd",Ob,E(a(Me)(["Ctrl","Shift","E"])),1)]),n("li",qb,[n("span",null,E(a(o)("editor.preview")),1),b[6]||(b[6]=Ce()),n("kbd",Fb,E(a(Me)(["Ctrl","Shift","P"])),1)]),n("li",jb,[n("span",null,E(a(o)("editor.viewJson")),1),b[7]||(b[7]=Ce()),n("kbd",Nb,E(a(Me)(["Ctrl","Shift","J"])),1)]),n("li",Hb,[n("span",null,E(a(o)("shortcuts.newTemplate")),1),b[8]||(b[8]=Ce()),n("kbd",Ub,E(a(Me)(["Ctrl","Alt","N"])),1)]),n("li",Vb,[n("span",null,E(a(o)("shortcuts.openSettings")),1),b[9]||(b[9]=Ce()),n("kbd",Wb,E(a(Me)(["Ctrl",","])),1)]),n("li",Gb,[n("span",null,E(a(o)("common.undo")),1),b[10]||(b[10]=Ce()),n("kbd",Kb,E(a(Me)(["Ctrl","Z"])),1)]),n("li",Yb,[n("span",null,E(a(o)("common.redo")),1),b[11]||(b[11]=Ce()),n("kbd",Xb,E(a(Me)(["Ctrl","Y"])),1)]),n("li",Zb,[n("span",null,E(a(o)("shortcuts.openHelp")),1),b[12]||(b[12]=Ce()),n("kbd",Jb,E(a(Me)(["Ctrl","H"])),1)]),n("li",Qb,[n("span",null,E(a(o)("shortcuts.zoom")),1),b[13]||(b[13]=Ce()),n("kbd",ev,E(a(Me)(["Ctrl","Wheel"])),1)]),n("li",tv,[n("span",null,E(a(o)("shortcuts.closeModal")),1),b[14]||(b[14]=Ce()),n("kbd",rv,E(a(Me)(["Esc"])),1)])])]),n("div",null,[n("h4",ov,E(a(o)("shortcuts.editing")),1),n("ul",nv,[n("li",av,[n("span",null,E(a(o)("common.copy")),1),b[15]||(b[15]=Ce()),n("kbd",sv,E(a(Me)(["Ctrl","C"])),1)]),n("li",iv,[n("span",null,E(a(o)("common.cut")),1),b[16]||(b[16]=Ce()),n("kbd",lv,E(a(Me)(["Ctrl","X"])),1)]),n("li",dv,[n("span",null,E(a(o)("common.paste")),1),b[17]||(b[17]=Ce()),n("kbd",cv,E(a(Me)(["Ctrl","V"])),1)]),n("li",uv,[n("span",null,E(a(o)("common.delete")),1),b[18]||(b[18]=Ce()),n("kbd",hv,E(a(Me)(["Delete"])),1)]),n("li",pv,[n("span",null,E(a(o)("shortcuts.selectAll")),1),b[19]||(b[19]=Ce()),n("kbd",fv,E(a(Me)(["Ctrl","A"])),1)]),n("li",mv,[n("span",null,E(a(o)("shortcuts.multiSelect")),1),b[20]||(b[20]=Ce()),n("kbd",gv,E(a(Me)(["Ctrl","Click"])),1)]),n("li",bv,[n("span",null,E(a(o)("common.lock"))+"/"+E(a(o)("common.unlock")),1),b[21]||(b[21]=Ce()),n("kbd",vv,E(a(Me)(["Ctrl","L"])),1)]),n("li",yv,[n("span",null,E(a(o)("shortcuts.customEditSave")),1),b[22]||(b[22]=Ce()),n("kbd",wv,E(a(Me)(["Ctrl","S"])),1)]),n("li",xv,[n("span",null,E(a(o)("shortcuts.customEditSaveAs")),1),b[23]||(b[23]=Ce()),n("kbd",_v,E(a(Me)(["Ctrl","Shift","S"])),1)]),n("li",kv,[n("span",null,E(a(o)("shortcuts.customEditExit")),1),b[24]||(b[24]=Ce()),n("kbd",Sv,E(a(Me)(["Ctrl","Q"])),1)])])]),n("div",null,[n("h4",Cv,E(a(o)("shortcuts.manipulation")),1),n("ul",Ev,[n("li",Tv,[n("span",null,E(a(o)("shortcuts.move")),1),b[25]||(b[25]=Ce()),n("kbd",Av,E(a(o)("shortcuts.arrow")),1)]),n("li",$v,[n("span",null,E(a(o)("shortcuts.fastMove")),1),b[26]||(b[26]=Ce()),n("kbd",Iv,E(a(Me)(["Shift",a(o)("shortcuts.arrow")])),1)]),n("li",zv,[n("span",null,E(a(o)("shortcuts.snapRotate")),1),b[27]||(b[27]=Ce()),n("kbd",Pv,E(a(Me)(["Shift",a(o)("shortcuts.drag")])),1)]),n("li",Lv,[n("span",null,E(a(o)("shortcuts.resize")),1),b[28]||(b[28]=Ce()),n("kbd",Mv,E(a(Me)(["Shift",a(o)("shortcuts.resize")])),1)])])])])])):be("",!0),l.value==="about"?(z(),H("div",Rv,[n("div",Dv,[b[32]||(b[32]=n("img",{src:Zi,alt:"Vue Print Designer",class:"w-12 h-12 mx-auto mb-2"},null,-1)),n("h2",Bv,E(a(k)),1),n("div",Ov,[n("a",{href:"https://github.com/0ldFive/Vue-Print-Designer",target:"_blank",rel:"noopener noreferrer",class:"group inline-flex items-center gap-2 rounded-full border border-gray-200 bg-gray-50 px-2.5 py-1 text-[11px] text-gray-700 shadow-sm transition-colors hover:border-blue-200 hover:bg-blue-50 hover:text-blue-700",title:a(o)("help.github")},[b[29]||(b[29]=n("span",{class:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-white text-gray-700 shadow-sm transition-colors group-hover:text-blue-700"},[n("svg",{viewBox:"0 0 16 16","aria-hidden":"true",class:"w-3.5 h-3.5"},[n("path",{fill:"currentColor",d:"M8 0C3.58 0 0 3.73 0 8.35c0 3.7 2.29 6.83 5.47 7.94.4.08.55-.18.55-.4 0-.2-.01-.86-.01-1.56-2.01.38-2.53-.5-2.69-.96-.09-.24-.48-.96-.82-1.16-.28-.16-.68-.56-.01-.57.63-.01 1.08.6 1.23.85.72 1.25 1.87.9 2.33.69.07-.54.28-.9.51-1.11-1.78-.21-3.64-.92-3.64-4.08 0-.9.31-1.64.82-2.22-.08-.21-.36-1.06.08-2.2 0 0 .67-.22 2.2.85.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.07 2.2-.85 2.2-.85.44 1.14.16 1.99.08 2.2.51.58.82 1.32.82 2.22 0 3.17-1.87 3.87-3.65 4.08.29.26.54.77.54 1.56 0 1.12-.01 2.03-.01 2.32 0 .22.15.48.55.4C13.71 15.18 16 12.04 16 8.35 16 3.73 12.42 0 8 0z"})])],-1)),b[30]||(b[30]=n("span",{class:"text-gray-500 group-hover:text-blue-600"},"0ldFive/Vue-Print-Designer",-1)),b[31]||(b[31]=n("span",{class:"text-gray-400"},"|",-1)),n("span",Fv,E(a(o)("help.version"))+" "+E(a(f)),1)],8,qv)])]),n("div",null,[n("h4",jv,E(a(o)("help.dependencies")),1),n("div",Nv,[n("table",Hv,[n("thead",Uv,[n("tr",null,[n("th",Vv,E(a(o)("help.package")),1),n("th",Wv,E(a(o)("help.version")),1)])]),n("tbody",Gv,[(z(!0),H(Te,null,Le(a(x),g=>(z(),H("tr",{key:g.name,class:"hover:bg-gray-50"},[n("td",Kv,E(g.name),1),n("td",Yv,E(g.version),1)]))),128))])])])])])):be("",!0)]),n("div",Xv,[n("button",{onClick:u,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm"},E(a(o)("common.close")),1)])])])])):be("",!0)],8,["to"]))}}),Jv={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Qv(r,e){return z(),H("svg",Jv,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m11.9 22l4.55-12h2.1l4.55 12H21l-1.075-3.05h-4.85L14 22zM4 19l-1.4-1.4l5.05-5.05q-.875-.875-1.588-2T4.75 8h2.1q.5.975 1 1.7t1.2 1.45q.825-.825 1.713-2.313T12.1 6H1V4h7V2h2v2h7v2h-2.9q-.525 1.8-1.575 3.7t-2.075 2.9l2.4 2.45l-.75 2.05l-3.05-3.125zm11.7-1.8h3.6l-1.8-5.1z"},null,-1)])])}const e1=Se({name:"material-symbols-translate",render:Qv}),t1={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function r1(r,e){return z(),H("svg",t1,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M6.5 20q-2.275 0-3.887-1.575T1 14.575q0-1.95 1.175-3.475T5.25 9.15q.625-2.3 2.5-3.725T12 4q2.925 0 4.963 2.038T19 11q1.725.2 2.863 1.488T23 15.5q0 1.875-1.312 3.188T18.5 20z"},null,-1)])])}const o1=Se({name:"material-symbols-cloud",render:r1}),n1={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function a1(r,e){return z(),H("svg",n1,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M11 17H7q-2.075 0-3.537-1.463T2 12t1.463-3.537T7 7h4v2H7q-1.25 0-2.125.875T4 12t.875 2.125T7 15h4zm-3-4v-2h8v2zm5 4v-2h4q1.25 0 2.125-.875T20 12t-.875-2.125T17 9h-4V7h4q2.075 0 3.538 1.463T22 12t-1.463 3.538T17 17z"},null,-1)])])}const Ks=Se({name:"material-symbols-link",render:a1}),s1={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function i1(r,e){return z(),H("svg",s1,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m19.25 16.45l-1.5-1.55q1-.275 1.625-1.063T20 12q0-1.25-.875-2.125T17 9h-4V7h4q2.075 0 3.538 1.463T22 12q0 1.425-.737 2.625T19.25 16.45M15.85 13l-2-2H16v2zm3.95 9.6L1.4 4.2l1.4-1.4l18.4 18.4zM11 17H7q-2.075 0-3.537-1.463T2 12q0-1.725 1.05-3.075t2.7-1.775L7.6 9H7q-1.25 0-2.125.875T4 12t.875 2.125T7 15h4zm-3-4v-2h1.625l1.975 2z"},null,-1)])])}const Ys=Se({name:"material-symbols-link-off",render:i1}),l1={class:"bg-white rounded-lg shadow-xl w-[700px] max-w-full h-[500px] flex overflow-hidden"},d1={class:"w-48 bg-gray-50 border-r border-gray-200 flex flex-col"},c1={class:"h-[60px] flex items-center px-4 border-b border-gray-200"},u1={class:"text-lg font-semibold text-gray-800"},h1={class:"flex-1 py-2"},p1={class:"flex-1 flex flex-col min-w-0 relative"},f1={class:"h-[60px] flex items-center justify-between px-4 border-b border-gray-200"},m1={class:"text-lg font-semibold text-gray-800"},g1={class:"flex-1 overflow-y-auto p-6"},b1={key:0,class:"space-y-4 text-sm text-gray-700"},v1={class:"mb-2 font-medium text-gray-900"},y1={class:"flex items-center gap-3"},w1={class:"text-xs text-gray-500 mt-2"},x1={class:"border-t border-gray-200 pt-4"},_1={class:"mb-2 font-medium text-gray-900"},k1={class:"flex flex-wrap gap-2"},S1=["onClick"],C1={class:"text-xs text-gray-500 mt-2"},E1={class:"border-t border-gray-200 pt-4"},T1={class:"flex items-center justify-between"},A1={class:"font-medium text-gray-900"},$1={class:"sr-only"},I1={class:"text-xs text-gray-500 mt-2"},z1={class:"border-t border-gray-200 pt-4"},P1={class:"flex items-center justify-between"},L1={class:"font-medium text-gray-900"},M1={class:"sr-only"},R1={class:"text-xs text-gray-500 mt-2"},D1={class:"border-t border-gray-200 pt-4 space-y-3"},B1={class:"mb-2 font-medium text-gray-900"},O1={class:"flex items-center gap-3"},q1=["disabled"],F1=["disabled"],j1={class:"text-xs text-gray-500 mt-2"},N1={class:"flex items-center justify-between"},H1={class:"font-medium text-gray-900"},U1={class:"sr-only"},V1={class:"text-xs text-gray-500"},W1={key:1,class:"space-y-4 text-sm text-gray-700"},G1={class:"mb-2 font-medium text-gray-900"},K1={class:"flex items-center gap-3"},Y1={class:"text-xs text-gray-500 mt-2"},X1={key:2,class:"space-y-4 text-sm text-gray-700"},Z1={class:"space-y-2"},J1={class:"font-medium text-gray-900"},Q1={class:"text-xs text-gray-500"},ey={class:"grid grid-cols-2 gap-4"},ty={class:"flex flex-col gap-1 col-span-2"},ry={class:"text-xs text-gray-500"},oy=["placeholder"],ny={class:"flex flex-col gap-1 col-span-2"},ay={class:"text-xs text-gray-500"},sy={class:"rounded bg-gray-100 px-3 py-2 text-xs text-gray-600 break-all"},iy={class:"font-medium text-gray-700"},ly={class:"w-full pt-2"},dy=["disabled"],cy={key:0,class:"mt-2 flex items-center justify-between text-xs text-gray-500"},uy={key:3,class:"space-y-4 text-sm text-gray-700"},hy={class:"space-y-2"},py={class:"font-medium text-gray-900"},fy={class:"text-xs text-gray-500"},my={class:"grid grid-cols-2 gap-4"},gy={class:"flex flex-col gap-1 col-span-2"},by={class:"text-xs text-gray-500"},vy=["placeholder"],yy={class:"flex flex-col gap-1"},wy={class:"text-xs text-gray-500"},xy={class:"flex flex-col gap-1"},_y={class:"text-xs text-gray-500"},ky={class:"space-y-2 pt-2 border-t border-gray-200"},Sy={class:"font-medium text-gray-900"},Cy={class:"text-xs text-gray-500"},Ey={class:"grid grid-cols-2 gap-4"},Ty={class:"flex flex-col gap-1 col-span-2"},Ay={class:"text-xs text-gray-500"},$y=["placeholder"],Iy={class:"flex flex-col gap-1 col-span-2"},zy={class:"text-xs text-gray-500"},Py=["disabled"],Ly={value:""},My=["value","disabled"],Ry={class:"rounded bg-gray-100 px-3 py-2 text-xs text-gray-600 break-all"},Dy={class:"font-medium text-gray-700"},By={class:"text-xs text-gray-500"},Oy={class:"w-full pt-2"},qy=["disabled"],Fy={key:0,class:"mt-2 flex items-center justify-between text-xs text-gray-500"},jy={class:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end rounded-br-lg"},Ny=ze({__name:"SettingsModal",props:{show:{type:Boolean}},emits:["update:show"],setup(r,{emit:e}){const t=r,s=e,{t:o,locale:i}=je(),{theme:c,setTheme:l}=En(),{autoSave:u}=Li(),y=Be(),x=at("modal-container",se(null)),{printMode:f,silentPrint:k,exportImageMerged:m,localSettings:b,remoteSettings:g,localStatus:C,remoteStatus:_,localRetryCount:p,remoteRetryCount:I,remoteClients:A,remoteSelectedClientId:U,localWsUrl:Y,remoteWsUrl:j,cancelLocalRetry:O,cancelRemoteRetry:F,connectLocal:oe,disconnectLocal:K,connectRemote:P,disconnectRemote:q,fetchRemoteClients:h}=tr(),v=se("basic"),Z=se(i.value),J=se(localStorage.getItem("print-designer-brand-key")||"default"),re=se(localStorage.getItem("print-designer-brand-custom-hex")||"#3b82f6"),L=fe(()=>C.value||"disconnected"),W=fe(()=>_.value||"disconnected"),$=fe(()=>p.value||0),T=fe(()=>I.value||0),te=fe(()=>A.value||[]),G=fe(()=>L.value==="connected"),Q=fe(()=>W.value==="connected"),me=fe(()=>L.value==="connecting"),ve=fe(()=>W.value==="connecting"),de=fe(()=>!!b.wsAddress),_e=fe(()=>!!(g.apiBaseUrl&&g.username&&g.password)),ke=fe(()=>G.value?o("settings.status.connected"):o("settings.status.disconnected")),ae=fe(()=>Q.value?o("settings.status.connected"):o("settings.status.disconnected")),le=ie=>ie==="connected"?"bg-blue-600 hover:bg-blue-700 text-white border border-blue-600":"bg-transparent text-blue-600 border border-blue-600 hover:bg-blue-50",pe=(ie,V=0,ee=255)=>Math.min(Math.max(ie,V),ee),d=(ie,V,ee)=>{const Re=De=>pe(Math.round(De)).toString(16).padStart(2,"0");return`#${Re(ie)}${Re(V)}${Re(ee)}`},B=(ie,V,ee)=>({r:ie.r+(V.r-ie.r)*ee,g:ie.g+(V.g-ie.g)*ee,b:ie.b+(V.b-ie.b)*ee}),R=ie=>{const V=Rt(ie);if(!V)return null;const ee=Bt(V.h,V.s,V.v),Re={r:255,g:255,b:255},De={r:0,g:0,b:0},Ue=B(ee,Re,.92),$e=B(ee,Re,.84),Fe=B(ee,Re,.68),st=B(ee,Re,.5),Ve=B(ee,Re,.32),Ne=B(ee,Re,.16),Ze=B(ee,De,.12),dt=B(ee,De,.24),ot=B(ee,De,.36),it=B(ee,De,.5);return{"--brand-50":d(Ue.r,Ue.g,Ue.b),"--brand-100":d($e.r,$e.g,$e.b),"--brand-200":d(Fe.r,Fe.g,Fe.b),"--brand-300":d(st.r,st.g,st.b),"--brand-400":d(Ve.r,Ve.g,Ve.b),"--brand-500":d(Ne.r,Ne.g,Ne.b),"--brand-600":d(ee.r,ee.g,ee.b),"--brand-700":d(Ze.r,Ze.g,Ze.b),"--brand-800":d(dt.r,dt.g,dt.b),"--brand-900":d(ot.r,ot.g,ot.b),"--brand-950":d(it.r,it.g,it.b)}},w=fe(()=>R(re.value)||{}),S=fe(()=>[{key:"default",labelKey:"settings.themePresetDefault",colors:{"--brand-50":"#eff6ff","--brand-100":"#dbeafe","--brand-200":"#bfdbfe","--brand-300":"#93c5fd","--brand-400":"#60a5fa","--brand-500":"#3b82f6","--brand-600":"#2563eb","--brand-700":"#1d4ed8","--brand-800":"#1e40af","--brand-900":"#1e3a8a","--brand-950":"#172554"}},{key:"emerald",labelKey:"settings.themePresetEmerald",colors:{"--brand-50":"#ecfdf5","--brand-100":"#d1fae5","--brand-200":"#a7f3d0","--brand-300":"#6ee7b7","--brand-400":"#34d399","--brand-500":"#10b981","--brand-600":"#059669","--brand-700":"#047857","--brand-800":"#065f46","--brand-900":"#064e3b","--brand-950":"#022c22"}},{key:"amber",labelKey:"settings.themePresetAmber",colors:{"--brand-50":"#fffbeb","--brand-100":"#fef3c7","--brand-200":"#fde68a","--brand-300":"#fcd34d","--brand-400":"#fbbf24","--brand-500":"#f59e0b","--brand-600":"#d97706","--brand-700":"#b45309","--brand-800":"#92400e","--brand-900":"#78350f","--brand-950":"#451a03"}},{key:"rose",labelKey:"settings.themePresetRose",colors:{"--brand-50":"#fff1f2","--brand-100":"#ffe4e6","--brand-200":"#fecdd3","--brand-300":"#fda4af","--brand-400":"#fb7185","--brand-500":"#f43f5e","--brand-600":"#e11d48","--brand-700":"#be123c","--brand-800":"#9f1239","--brand-900":"#881337","--brand-950":"#4c0519"}},{key:"custom",labelKey:"settings.themePresetCustom",colors:w.value}]),N=ie=>{const V=document.documentElement;Object.entries(ie).forEach(([ee,Re])=>{V.style.setProperty(ee,Re)}),window.dispatchEvent(new CustomEvent("brand-theme-updated"))},M=ie=>{localStorage.setItem("print-designer-brand-vars",JSON.stringify(ie))},X=ie=>{const V=S.value.find(ee=>ee.key===ie)||S.value[0];V.colors&&(N(V.colors),M(V.colors),localStorage.setItem("print-designer-brand-key",V.key))};(()=>{const ie=localStorage.getItem("print-designer-brand-vars");if(ie)try{const V=JSON.parse(ie);V&&typeof V=="object"&&N(V)}catch{}})();const ne=async()=>{if(!me.value){if(G.value){K();return}await oe()}},he=async()=>{if(!ve.value){if(Q.value){q();return}await P()}};Ie(Z,ie=>{i.value=ie,localStorage.setItem("print-designer-language",ie)}),Ie(c,ie=>{l(ie)}),Ie(()=>t.show,ie=>{y.setDisableGlobalShortcuts(ie)}),Ie(re,ie=>{ie&&(localStorage.setItem("print-designer-brand-custom-hex",ie),J.value==="custom"&&X("custom"))}),Ie(J,ie=>{X(ie)},{immediate:!0}),Ie([v,_],([ie,V])=>{ie!=="remote"||V!=="connected"||h()});const ce=()=>{s("update:show",!1)},we=ie=>{t.show&&ie.key==="Escape"&&(ie.preventDefault(),ce())};return We(()=>{window.addEventListener("keydown",we)}),Ge(()=>{window.removeEventListener("keydown",we),t.show&&y.setDisableGlobalShortcuts(!1)}),(ie,V)=>(z(),Pe(tt,{to:a(x)||"body"},[r.show?(z(),H("div",{key:0,class:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 pointer-events-auto",onClick:V[26]||(V[26]=Ke(ee=>s("update:show",!1),["self"]))},[n("div",l1,[n("div",d1,[n("div",c1,[n("h3",u1,E(a(o)("settings.title")),1)]),n("div",h1,[n("button",{onClick:V[0]||(V[0]=ee=>v.value="basic"),class:xe(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",v.value==="basic"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(a(Gt),{class:"w-5 h-5"}),Ce(" "+E(a(o)("settings.basic")),1)],2),n("button",{onClick:V[1]||(V[1]=ee=>v.value="language"),class:xe(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",v.value==="language"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(a(e1),{class:"w-5 h-5"}),Ce(" "+E(a(o)("settings.language")),1)],2),n("button",{onClick:V[2]||(V[2]=ee=>v.value="local"),class:xe(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",v.value==="local"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(a(Tn),{class:"w-5 h-5"}),Ce(" "+E(a(o)("settings.localConnection")),1)],2),n("button",{onClick:V[3]||(V[3]=ee=>v.value="remote"),class:xe(["w-full text-left px-4 py-3 flex items-center gap-3 transition-colors text-sm",v.value==="remote"?"bg-white text-blue-600 border-l-4 border-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 border-l-4 border-transparent"])},[ue(a(o1),{class:"w-5 h-5"}),Ce(" "+E(a(o)("settings.remoteConnection")),1)],2)])]),n("div",p1,[n("div",f1,[n("h3",m1,E(v.value==="basic"?a(o)("settings.basic"):v.value==="language"?a(o)("settings.language"):v.value==="local"?a(o)("settings.localConnection"):a(o)("settings.remoteConnection")),1),n("button",{onClick:ce,class:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500"},[ue(a(yt),{class:"w-4 h-4"})])]),n("div",g1,[v.value==="basic"?(z(),H("div",b1,[n("div",null,[n("div",v1,E(a(o)("settings.theme")),1),n("div",y1,[n("label",{class:xe(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",a(c)==="system"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(n("input",{type:"radio",value:"system","onUpdate:modelValue":V[4]||(V[4]=ee=>gt(c)?c.value=ee:null)},null,512),[[ct,a(c)]]),n("span",null,E(a(o)("settings.themeSystem")),1)],2),n("label",{class:xe(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",a(c)==="light"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(n("input",{type:"radio",value:"light","onUpdate:modelValue":V[5]||(V[5]=ee=>gt(c)?c.value=ee:null)},null,512),[[ct,a(c)]]),n("span",null,E(a(o)("settings.themeLight")),1)],2),n("label",{class:xe(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",a(c)==="dark"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(n("input",{type:"radio",value:"dark","onUpdate:modelValue":V[6]||(V[6]=ee=>gt(c)?c.value=ee:null)},null,512),[[ct,a(c)]]),n("span",null,E(a(o)("settings.themeDark")),1)],2)]),n("p",w1,E(a(o)("settings.themeDesc")),1)]),n("div",x1,[n("div",_1,E(a(o)("settings.themeColor")),1),n("div",k1,[(z(!0),H(Te,null,Le(S.value.filter(ee=>ee.key!=="custom"),ee=>(z(),H("button",{key:ee.key,type:"button",class:xe(["flex items-center gap-2 px-3 py-2 border rounded text-xs transition-colors",J.value===ee.key?"border-blue-600 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"]),onClick:Re=>J.value=ee.key},[n("span",{class:"inline-block w-3.5 h-3.5 rounded-full",style:ye({backgroundColor:ee.colors["--brand-600"]})},null,4),n("span",null,E(a(o)(ee.labelKey)),1)],10,S1))),128)),ue(kt,{"model-value":re.value,"onUpdate:modelValue":V[8]||(V[8]=ee=>{ee&&(re.value=ee,J.value="custom")}),"default-color":re.value,"teleport-to-body":!0},{trigger:pt(({color:ee,open:Re})=>[n("button",{type:"button",class:xe(["flex items-center gap-2 px-3 py-2 border rounded text-xs transition-colors",J.value==="custom"?"border-blue-600 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"]),onClick:V[7]||(V[7]=De=>J.value="custom")},[n("span",{class:xe(["inline-block w-3.5 h-3.5 rounded-full border border-gray-200",{"ring-2 ring-blue-500 ring-offset-1":Re}]),style:ye({backgroundColor:ee||re.value})},null,6),n("span",null,E(a(o)("settings.themePresetCustom")),1)],2)]),_:1},8,["model-value","default-color"])]),n("p",C1,E(a(o)("settings.themeColorDesc")),1)]),n("div",E1,[n("div",T1,[n("div",A1,E(a(o)("settings.autoSave")),1),n("button",{onClick:V[9]||(V[9]=ee=>u.value=!a(u)),class:xe(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",a(u)?"bg-blue-600":"bg-gray-200"])},[n("span",$1,E(a(o)("settings.autoSave")),1),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a(u)?"translate-x-5":"translate-x-0"])},null,2)],2)]),n("p",I1,E(a(o)("settings.autoSaveDesc")),1)]),n("div",z1,[n("div",P1,[n("div",L1,E(a(o)("settings.exportImageMerged")),1),n("button",{onClick:V[10]||(V[10]=ee=>m.value=!a(m)),class:xe(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",a(m)?"bg-blue-600":"bg-gray-200"])},[n("span",M1,E(a(o)("settings.exportImageMerged")),1),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a(m)?"translate-x-5":"translate-x-0"])},null,2)],2)]),n("p",R1,E(a(o)("settings.exportImageMergedDesc")),1)]),n("div",D1,[n("div",null,[n("div",B1,E(a(o)("settings.printMode")),1),n("div",O1,[n("label",{class:xe(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",a(f)==="browser"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(n("input",{type:"radio",value:"browser","onUpdate:modelValue":V[11]||(V[11]=ee=>gt(f)?f.value=ee:null)},null,512),[[ct,a(f)]]),n("span",null,E(a(o)("settings.printModeBrowser")),1)],2),n("label",{class:xe(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",a(f)==="local"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(n("input",{type:"radio",value:"local","onUpdate:modelValue":V[12]||(V[12]=ee=>gt(f)?f.value=ee:null),disabled:!G.value},null,8,q1),[[ct,a(f)]]),n("span",null,E(a(o)("settings.printModeLocal")),1)],2),n("label",{class:xe(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",a(f)==="remote"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(n("input",{type:"radio",value:"remote","onUpdate:modelValue":V[13]||(V[13]=ee=>gt(f)?f.value=ee:null),disabled:!Q.value},null,8,F1),[[ct,a(f)]]),n("span",null,E(a(o)("settings.printModeRemote")),1)],2)]),n("p",j1,E(a(o)("settings.printModeDesc")),1)]),n("div",N1,[n("div",H1,E(a(o)("settings.silentPrint")),1),n("button",{onClick:V[14]||(V[14]=ee=>k.value=!a(k)),class:xe(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",a(k)?"bg-blue-600":"bg-gray-200"])},[n("span",U1,E(a(o)("settings.silentPrint")),1),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a(k)?"translate-x-5":"translate-x-0"])},null,2)],2)]),n("p",V1,E(a(o)("settings.silentPrintDesc")),1)])])):be("",!0),v.value==="language"?(z(),H("div",W1,[n("div",G1,E(a(o)("settings.selectLanguage")),1),n("div",K1,[n("label",{class:xe(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",Z.value==="zh"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(n("input",{type:"radio",value:"zh","onUpdate:modelValue":V[15]||(V[15]=ee=>Z.value=ee)},null,512),[[ct,Z.value]]),n("span",null,E(a(o)("settings.zhLabel")),1)],2),n("label",{class:xe(["flex items-center gap-2 px-3 py-2 border rounded cursor-pointer",Z.value==="en"?"border-blue-600 text-blue-700":"border-gray-300"])},[Ae(n("input",{type:"radio",value:"en","onUpdate:modelValue":V[16]||(V[16]=ee=>Z.value=ee)},null,512),[[ct,Z.value]]),n("span",null,E(a(o)("settings.enLabel")),1)],2)]),n("p",Y1,E(a(o)("settings.languageDesc")),1)])):be("",!0),v.value==="local"?(z(),H("div",X1,[n("div",Z1,[n("div",J1,E(a(o)("settings.localClientTitle")),1),n("p",Q1,E(a(o)("settings.localClientDesc")),1)]),n("div",ey,[n("label",ty,[n("span",ry,E(a(o)("settings.wsAddress")),1),Ae(n("input",{"onUpdate:modelValue":V[17]||(V[17]=ee=>a(b).wsAddress=ee),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:a(o)("settings.localWsAddressPlaceholder")},null,8,oy),[[Oe,a(b).wsAddress]])]),n("label",ny,[n("span",ay,E(a(o)("settings.secretKey")),1),Ae(n("input",{"onUpdate:modelValue":V[18]||(V[18]=ee=>a(b).secretKey=ee),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,a(b).secretKey]])])]),n("div",sy,[n("span",iy,E(a(o)("settings.connectionUrl"))+": ",1),n("span",null,E(a(Y)),1)]),n("div",ly,[n("button",{onClick:ne,disabled:me.value||$.value>0||!G.value&&!de.value,class:xe(["w-full inline-flex items-center justify-center gap-2 px-3 h-9 rounded transition-colors text-sm shadow-sm disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",le(L.value)])},[G.value?(z(),Pe(a(Ks),{key:0,class:"w-4 h-4"})):(z(),Pe(a(Ys),{key:1,class:"w-4 h-4"})),n("span",null,E(ke.value),1)],10,dy),$.value>0&&!G.value?(z(),H("div",cy,[n("span",null,E(a(o)("settings.retrying",{count:$.value,max:10})),1),n("button",{onClick:V[19]||(V[19]=(...ee)=>a(O)&&a(O)(...ee)),class:"text-blue-600 hover:text-blue-700"},E(a(o)("settings.cancelRetry")),1)])):be("",!0)])])):be("",!0),v.value==="remote"?(z(),H("div",uy,[n("div",hy,[n("div",py,E(a(o)("settings.remoteLoginTitle")),1),n("p",fy,E(a(o)("settings.remoteLoginDesc")),1)]),n("div",my,[n("label",gy,[n("span",by,E(a(o)("settings.apiBaseUrl")),1),Ae(n("input",{"onUpdate:modelValue":V[20]||(V[20]=ee=>a(g).apiBaseUrl=ee),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:a(o)("settings.apiBasePlaceholder")},null,8,vy),[[Oe,a(g).apiBaseUrl]])]),n("label",yy,[n("span",wy,E(a(o)("settings.username")),1),Ae(n("input",{"onUpdate:modelValue":V[21]||(V[21]=ee=>a(g).username=ee),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,a(g).username]])]),n("label",xy,[n("span",_y,E(a(o)("settings.password")),1),Ae(n("input",{"onUpdate:modelValue":V[22]||(V[22]=ee=>a(g).password=ee),type:"password",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600"},null,512),[[Oe,a(g).password]])])]),n("div",ky,[n("div",Sy,E(a(o)("settings.remoteWsTitle")),1),n("p",Cy,E(a(o)("settings.remoteWsDesc")),1)]),n("div",Ey,[n("label",Ty,[n("span",Ay,E(a(o)("settings.wsAddress")),1),Ae(n("input",{"onUpdate:modelValue":V[23]||(V[23]=ee=>a(g).wsAddress=ee),type:"text",class:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:a(o)("settings.wsAddressPlaceholder")},null,8,$y),[[Oe,a(g).wsAddress]])]),n("label",Iy,[n("span",zy,E(a(o)("settings.remoteClient")),1),Ae(n("select",{"onUpdate:modelValue":V[24]||(V[24]=ee=>gt(U)?U.value=ee:null),class:"w-full px-3 py-2 border rounded bg-white focus:ring-2 focus:ring-blue-600 focus:border-blue-600",disabled:W.value!=="connected"||te.value.length===0},[n("option",Ly,E(a(o)("settings.remoteClientPlaceholder")),1),(z(!0),H(Te,null,Le(te.value,ee=>(z(),H("option",{key:ee.client_id,value:ee.client_id,disabled:ee.online===!1},E(ee.client_name||ee.client_id)+E(ee.online===!1?" (offline)":""),9,My))),128))],8,Py),[[Je,a(U)]])])]),n("div",Ry,[n("span",Dy,E(a(o)("settings.connectionUrl"))+": ",1),n("span",null,E(a(j)),1)]),n("p",By,E(a(o)("settings.remoteAuthHint")),1),n("div",Oy,[n("button",{onClick:he,disabled:ve.value||T.value>0||!Q.value&&!_e.value,class:xe(["w-full inline-flex items-center justify-center gap-2 px-3 h-9 rounded transition-colors text-sm shadow-sm disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",le(W.value)])},[Q.value?(z(),Pe(a(Ks),{key:0,class:"w-4 h-4"})):(z(),Pe(a(Ys),{key:1,class:"w-4 h-4"})),n("span",null,E(ae.value),1)],10,qy),T.value>0&&!Q.value?(z(),H("div",Fy,[n("span",null,E(a(o)("settings.retrying",{count:T.value,max:10})),1),n("button",{onClick:V[25]||(V[25]=(...ee)=>a(F)&&a(F)(...ee)),class:"text-blue-600 hover:text-blue-700"},E(a(o)("settings.cancelRetry")),1)])):be("",!0)])])):be("",!0)]),n("div",jy,[n("button",{onClick:ce,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm"},E(a(o)("common.close")),1)])])])])):be("",!0)],8,["to"]))}}),Hy={class:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 z-[2000] relative shadow-sm"},Uy={class:"flex items-center gap-2"},Vy=["src"],Wy={key:1,class:"font-semibold text-gray-700"},Gy=ze({__name:"Header",setup(r){const{t:e}=je(),t=Be(),s=fe(()=>{var l;return((l=t.branding)==null?void 0:l.showLogo)!==!1}),o=fe(()=>{var l;return((l=t.branding)==null?void 0:l.showTitle)!==!1}),i=fe(()=>{var l;return((l=t.branding)==null?void 0:l.logoUrl)||Zi}),c=fe(()=>{var l;return((l=t.branding)==null?void 0:l.title)||e("common.appTitle")});return(l,u)=>(z(),H("header",Hy,[n("div",Uy,[s.value?(z(),H("img",{key:0,src:i.value,alt:"Logo",class:"w-8 h-8 object-contain"},null,8,Vy)):be("",!0),o.value?(z(),H("h1",Wy,E(c.value),1)):be("",!0)]),ue(ib,{onToggleHelp:u[0]||(u[0]=y=>a(t).setShowHelp(!0)),onToggleSettings:u[1]||(u[1]=y=>a(t).setShowSettings(!0))}),ue(Zv,{show:a(t).showHelp,"onUpdate:show":u[2]||(u[2]=y=>a(t).setShowHelp(y))},null,8,["show"]),ue(Ny,{show:a(t).showSettings,"onUpdate:show":u[3]||(u[3]=y=>a(t).setShowSettings(y))},null,8,["show"])]))}}),Ky={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Yy(r,e){return z(),H("svg",Ky,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M7 20V7H2V4h13v3h-5v13zm9 0v-8h-3V9h9v3h-3v8z"},null,-1)])])}const Xs=Se({name:"material-symbols-text-fields",render:Yy}),Xy={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Zy(r,e){return z(),H("svg",Xy,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m6 20l1-4H3l.5-2h4l1-4h-4L5 8h4l1-4h2l-1 4h4l1-4h2l-1 4h4l-.5 2h-4l-1 4h4l-.5 2h-4l-1 4h-2l1-4H9l-1 4zm3.5-6h4l1-4h-4z"},null,-1)])])}const Zs=Se({name:"material-symbols-numbers",render:Zy}),Jy={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Qy(r,e){return z(),H("svg",Jy,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M3 8V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v3zm2 13q-.825 0-1.412-.587T3 19v-9h4.5v11zm11.5 0V10H21v9q0 .825-.587 1.413T19 21zm-7 0V10h5v11z"},null,-1)])])}const Js=Se({name:"material-symbols-table-chart",render:Qy}),ew={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function tw(r,e){return z(),H("svg",ew,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M1 19V5h2v14zm3 0V5h2v14zm3 0V5h1v14zm3 0V5h2v14zm3 0V5h3v14zm4 0V5h1v14zm3 0V5h3v14z"},null,-1)])])}const Qs=Se({name:"material-symbols-barcode",render:tw}),rw={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ow(r,e){return z(),H("svg",rw,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M3 11V3h8v8zm2-2h4V5H5zM3 21v-8h8v8zm2-2h4v-4H5zm8-8V3h8v8zm2-2h4V5h-4zm4 12v-2h2v2zm-6-6v-2h2v2zm2 2v-2h2v2zm-2 2v-2h2v2zm2 2v-2h2v2zm2-2v-2h2v2zm0-4v-2h2v2zm2 2v-2h2v2z"},null,-1)])])}const ei=Se({name:"material-symbols-qr-code",render:ow}),nw={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function aw(r,e){return z(),H("svg",nw,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M4 13v-2h16v2z"},null,-1)])])}const ti=Se({name:"material-symbols-horizontal-rule",render:aw}),sw={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function iw(r,e){return z(),H("svg",sw,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5H5z"},null,-1)])])}const ri=Se({name:"material-symbols-check-box-outline-blank",render:iw}),lw={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function dw(r,e){return z(),H("svg",lw,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20"},null,-1)])])}const oi=Se({name:"material-symbols-radio-button-unchecked",render:dw}),cw={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function uw(r,e){return z(),H("svg",cw,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m5.825 21l1.625-7.025L2 9.25l7.2-.625L12 2l2.8 6.625l7.2.625l-5.45 4.725L18.175 21L12 17.275z"},null,-1)])])}const hw=Se({name:"material-symbols-star",render:uw}),pw={class:"w-64 bg-white border-r border-gray-200 flex flex-col h-full z-40"},fw={class:"p-4 border-b border-gray-200 bg-gray-50"},mw={class:"font-semibold text-gray-700"},gw={class:"text-xs text-gray-500 mt-1"},bw={class:"flex border-b border-gray-200 bg-white"},vw={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600"},yw={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600"},ww={class:"flex-1 overflow-y-auto"},xw={class:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 px-1"},_w={class:"grid grid-cols-2 gap-3"},kw=["onDragstart"],Sw={class:"text-sm font-medium text-gray-700"},Cw={key:0,class:"p-6 text-center"},Ew={class:"text-sm text-gray-500"},Tw={key:1,class:"p-4 grid grid-cols-2 gap-3"},Aw=["onDragstart"],$w=["title"],Iw=["onClick","title"],zw=["onClick"],Pw=["onClick"],Lw=["onClick"],Mw=["onClick"],Rw=["onClick"],Dw=ze({__name:"Sidebar",setup(r){const{t:e}=je(),t=Be(),s=at("modal-container",se(null)),o=se("standard"),i=fe(()=>t.customElements),c=se(null),l=se({}),u=se(!1),y=se(null),x=se(""),f=se(!1),k=se(""),m=se(null),b=se([]),g=[{title:"sidebar.general",items:[{type:ge.TEXT,label:"sidebar.text",icon:Xs},{type:ge.IMAGE,label:"sidebar.image",icon:js},{type:ge.PAGE_NUMBER,label:"sidebar.pagination",icon:Zs}]},{title:"sidebar.dataCodes",items:[{type:ge.TABLE,label:"sidebar.table",icon:Js},{type:ge.BARCODE,label:"sidebar.barcode",icon:Qs},{type:ge.QRCODE,label:"sidebar.qrcode",icon:ei}]},{title:"sidebar.shapes",items:[{type:ge.LINE,label:"sidebar.line",icon:ti},{type:ge.RECT,label:"sidebar.rect",icon:ri},{type:ge.CIRCLE,label:"sidebar.circle",icon:oi}]}],C=(q,h)=>{q.dataTransfer&&(q.dataTransfer.setData("application/json",JSON.stringify({type:h})),q.dataTransfer.effectAllowed="copy")},_=(q,h)=>{q.dataTransfer&&(q.dataTransfer.setData("application/json",JSON.stringify({type:h.element.type,payload:h.element})),q.dataTransfer.effectAllowed="copy")},p=q=>{switch(q){case ge.TEXT:return Xs;case ge.IMAGE:return js;case ge.TABLE:return Js;case ge.PAGE_NUMBER:return Zs;case ge.BARCODE:return Qs;case ge.QRCODE:return ei;case ge.LINE:return ti;case ge.RECT:return ri;case ge.CIRCLE:return oi;default:return hw}},I=(q,h)=>{if(q.stopPropagation(),c.value===h)c.value=null;else{const Z=q.currentTarget.getBoundingClientRect();let J=Z.right-128;J<5&&(J=Z.left),window.innerHeight-Z.bottom<210?l.value={bottom:`${window.innerHeight-Z.top+5}px`,left:`${J}px`}:l.value={top:`${Z.bottom+5}px`,left:`${J}px`},c.value=h}},A=()=>{c.value=null},U=q=>{c.value=null,y.value=q.id,x.value=q.name,u.value=!0},Y=q=>{y.value&&q&&t.renameCustomElement(y.value,q)},j=q=>{c.value=null,t.addCustomElement(`${q.name} Copy`,q.element)},O=q=>{c.value=null,confirm(e("sidebar.confirmDelete",{name:q.name}))&&t.removeCustomElement(q.id)},F=q=>{if(c.value=null,t.editingCustomElementId!==q.id){if(t.editingCustomElementId&&t.editingCustomElementId!==q.id){const h=t.customElements.find(Z=>Z.id===t.editingCustomElementId),v=h?h.name:"";if(!confirm(e("sidebar.confirmSwitchEdit",{name:v})))return;t.cancelCustomElementEdit()}t.startCustomElementEdit(q.id)}},oe=q=>Ui(q.element),K=q=>{c.value=null,m.value=q;const h=q.testData||{},v=pn(q.element,h);b.value=Object.keys(v),k.value=JSON.stringify(v,null,2),f.value=!0},P=()=>{var re;const q=m.value,h=new Set(b.value||[]);if(m.value=null,b.value=[],!q)return;let v=null;try{const L=((re=k.value)==null?void 0:re.trim())||"{}",W=JSON.parse(L);W&&typeof W=="object"&&!Array.isArray(W)&&(v=W)}catch{v=null}if(!v){alert(e("common.invalidJson"));return}if(h.size>0){const L=Object.keys(v);if(L.length!==h.size||L.some($=>!h.has($))){alert(e("common.testDataKeyChanged"));return}}const Z=pn(q.element,q.testData||{}),J={};Object.keys(Z).forEach(L=>{(h.size===0||h.has(L))&&(J[L]=Object.prototype.hasOwnProperty.call(v,L)?v[L]:Z[L])}),q.testData=J,t.saveCustomElements()};return We(()=>{document.addEventListener("click",A)}),Ge(()=>{document.removeEventListener("click",A)}),(q,h)=>(z(),H("aside",pw,[n("div",fw,[n("h2",mw,E(a(e)("sidebar.elements")),1),n("p",gw,E(a(e)("sidebar.dragToCanvas")),1)]),n("div",bw,[n("button",{onClick:h[0]||(h[0]=v=>o.value="standard"),class:xe(["flex-1 py-3 text-sm font-medium transition-colors relative",o.value==="standard"?"text-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"])},[Ce(E(a(e)("sidebar.standard"))+" ",1),o.value==="standard"?(z(),H("div",vw)):be("",!0)],2),n("button",{onClick:h[1]||(h[1]=v=>o.value="custom"),class:xe(["flex-1 py-3 text-sm font-medium transition-colors relative",o.value==="custom"?"text-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"])},[Ce(E(a(e)("sidebar.custom"))+" ",1),o.value==="custom"?(z(),H("div",yw)):be("",!0)],2)]),n("div",ww,[o.value==="standard"?(z(),H(Te,{key:0},Le(g,v=>n("div",{key:v.title,class:"p-4 border-b border-gray-100 last:border-0"},[n("h3",xw,E(a(e)(v.title)),1),n("div",_w,[(z(!0),H(Te,null,Le(v.items,Z=>(z(),H("div",{key:Z.type,class:"flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg theme-hover-border theme-hover-bg cursor-move transition-all",draggable:"true",onDragstart:J=>C(J,Z.type)},[(z(),Pe(Dt(Z.icon),{class:"w-8 h-8 text-gray-600 mb-2"})),n("span",Sw,E(a(e)(Z.label)),1)],40,kw))),128))])])),64)):be("",!0),o.value==="custom"?(z(),H(Te,{key:1},[i.value.length===0?(z(),H("div",Cw,[n("p",Ew,E(a(e)("sidebar.noCustomElements")),1)])):(z(),H("div",Tw,[(z(!0),H(Te,null,Le(i.value,v=>(z(),H("div",{key:v.id,class:"group relative flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg theme-hover-border theme-hover-bg cursor-move transition-all",draggable:"true",onDragstart:Z=>_(Z,v)},[(z(),Pe(Dt(p(v.element.type)),{class:"w-8 h-8 text-gray-600 mb-2"})),n("span",{class:"text-sm font-medium text-gray-700 truncate w-full text-center",title:v.name},E(v.name),9,$w),n("button",{onClick:Z=>I(Z,v.id),class:xe(["absolute top-1 right-1 p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 opacity-0 group-hover:opacity-100 transition-opacity",{"opacity-100 bg-gray-100 text-gray-600":c.value===v.id}]),title:a(e)("sidebar.moreOptions")},[ue(a(Xi),{class:"w-4 h-4"})],10,Iw)],40,Aw))),128))]))],64)):be("",!0)]),(z(),Pe(tt,{to:a(s)||"body"},[c.value?(z(),H("div",{key:0,class:"fixed inset-0 z-[2000] pointer-events-auto",onClick:h[3]||(h[3]=v=>c.value=null)},[n("div",{class:"absolute w-32 bg-white rounded shadow-lg border border-gray-100 z-[2001] py-1 pointer-events-auto",style:ye(l.value),onClick:h[2]||(h[2]=Ke(()=>{},["stop"]))},[(z(!0),H(Te,null,Le(i.value,v=>(z(),H(Te,{key:v.id},[v.id===c.value?(z(),H(Te,{key:0},[n("button",{onClick:Z=>F(v),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2"},[ue(a(fn),{class:"w-3.5 h-3.5"}),Ce(" "+E(a(e)("sidebar.editElement")),1)],8,zw),oe(v)?(z(),H("button",{key:0,onClick:Z=>K(v),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2"},[ue(a(ht),{class:"w-3.5 h-3.5"}),Ce(" "+E(a(e)("common.testData")),1)],8,Pw)):be("",!0),n("button",{onClick:Z=>U(v),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2"},[ue(a(fn),{class:"w-3.5 h-3.5"}),Ce(" "+E(a(e)("sidebar.rename")),1)],8,Lw),n("button",{onClick:Z=>j(v),class:"w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2"},[ue(a(Tt),{class:"w-3.5 h-3.5"}),Ce(" "+E(a(e)("sidebar.copy")),1)],8,Mw),n("button",{onClick:Z=>O(v),class:"w-full text-left px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 flex items-center gap-2"},[ue(a(Et),{class:"w-3.5 h-3.5"}),Ce(" "+E(a(e)("sidebar.delete")),1)],8,Rw)],64)):be("",!0)],64))),128))],4)])):be("",!0)],8,["to"])),ue(jt,{show:u.value,"initial-value":x.value,title:a(e)("sidebar.renameModalTitle"),placeholder:a(e)("sidebar.enterNamePlaceholder"),onClose:h[4]||(h[4]=v=>u.value=!1),onSave:Y},null,8,["show","initial-value","title","placeholder"]),ue(Ft,{visible:f.value,"onUpdate:visible":h[5]||(h[5]=v=>f.value=v),title:a(e)("common.testData"),value:k.value,language:"json","onUpdate:value":h[6]||(h[6]=v=>k.value=v),onClose:P},null,8,["visible","title","value"])]))}}),Bw={key:0,class:"flex items-center justify-between"},Ow={class:"text-sm text-gray-700 font-medium"},qw=["disabled"],Fw={class:"sr-only"},jw={key:1},Nw={class:"block text-xs text-gray-500 mb-1"},Hw=["value","disabled","placeholder"],Uw=["type","value","disabled","placeholder","min","max","step"],$t=ze({__name:"PropertyInput",props:{label:{},value:{type:[String,Number,Boolean]},type:{},placeholder:{},min:{},max:{},step:{},disabled:{type:Boolean}},emits:["update:value"],setup(r,{emit:e}){const t=e,s=o=>{const i=o.target;t("update:value",i.value)};return(o,i)=>r.type==="switch"?(z(),H("div",Bw,[n("label",Ow,E(r.label),1),n("button",{type:"button",disabled:r.disabled,onClick:i[0]||(i[0]=c=>o.$emit("update:value",!r.value)),class:xe(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",r.value?"bg-blue-600":"bg-gray-200"])},[n("span",Fw,"Toggle "+E(r.label),1),n("span",{"aria-hidden":"true",class:xe(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",r.value?"translate-x-5":"translate-x-0"])},null,2)],10,qw)])):(z(),H("div",jw,[n("label",Nw,E(r.label),1),r.type==="textarea"?(z(),H("textarea",{key:0,value:r.value===void 0||r.value===null?"":String(r.value),disabled:r.disabled,placeholder:r.placeholder,onInput:s,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none h-24 resize-y disabled:bg-gray-100 disabled:text-gray-500"},null,40,Hw)):(z(),H("input",{key:1,type:r.type||"text",value:r.value===void 0||r.value===null?"":String(r.value),disabled:r.disabled,placeholder:r.placeholder,min:r.min,max:r.max,step:r.step,onInput:s,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none disabled:bg-gray-100 disabled:text-gray-500"},null,40,Uw))]))}}),Vw={class:"block text-xs text-gray-500 mb-1"},Ww=["value","disabled"],Gw=["value"],Kw=ze({__name:"PropertySelect",props:{label:{},value:{type:[String,Number,Boolean]},options:{},disabled:{type:Boolean}},emits:["update:value"],setup(r,{emit:e}){const t=r,s=e,o=i=>{const l=i.target.value,u=t.options.find(y=>String(y.value)===l);s("update:value",u?u.value:l)};return(i,c)=>(z(),H("div",null,[n("label",Vw,E(r.label),1),n("select",{value:r.value,disabled:r.disabled,onChange:o,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none disabled:bg-gray-100 disabled:text-gray-500"},[(z(!0),H(Te,null,Le(r.options,l=>(z(),H("option",{key:String(l.value),value:l.value},E(l.label),9,Gw))),128))],40,Ww)]))}}),Yw={class:"flex items-center justify-between"},Xw={class:"text-xs text-gray-500"},Zw={class:"flex items-center gap-2"},Jw={key:0,class:"absolute inset-0 flex items-center justify-center"},ni=ze({__name:"PropertyColor",props:{label:{},value:{},disabled:{type:Boolean}},emits:["update:value"],setup(r,{emit:e}){const t=e;return(s,o)=>(z(),H("div",Yw,[n("label",Xw,E(r.label),1),n("div",Zw,[ue(kt,{"model-value":r.value,"onUpdate:modelValue":o[0]||(o[0]=i=>t("update:value",i)),disabled:r.disabled,"allow-transparent":!0},{trigger:pt(({color:i,open:c})=>[n("div",{class:xe(["w-8 h-6 rounded border border-gray-300 cursor-pointer relative overflow-hidden hover:border-blue-500 transition-colors",{"ring-2 ring-blue-500 ring-offset-1":c,"opacity-50 cursor-not-allowed":r.disabled}])},[o[2]||(o[2]=n("div",{class:"absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwZ+5wNisxL//8n04mEeRAAAhNwX869V4DYAAAAASUVORK5CYII=')] opacity-50"},null,-1)),n("div",{class:"absolute inset-0",style:ye({backgroundColor:i==="transparent"?"transparent":i})},null,4),i==="transparent"?(z(),H("div",Jw,[...o[1]||(o[1]=[n("div",{class:"w-full h-[1px] bg-red-500 rotate-45"},null,-1)])])):be("",!0)],2)]),_:1},8,["model-value","disabled"])])]))}}),Qw={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function e2(r,e){return z(),H("svg",Qw,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M3 21v-8h2v4.6L17.6 5H13V3h8v8h-2V6.4L6.4 19H11v2z"},null,-1)])])}const t2=Se({name:"material-symbols-open-in-full",render:e2}),r2={class:"flex flex-col gap-1"},o2={class:"flex justify-between items-center"},n2={class:"text-xs text-gray-500 font-medium"},a2={class:"flex items-center gap-2"},s2={class:"text-[10px] text-gray-400 uppercase"},i2=ze({__name:"PropertyCode",props:{label:{},value:{},language:{},disabled:{type:Boolean},height:{}},emits:["update:value"],setup(r,{emit:e}){const t=e;Be();const{isDark:s}=En(),o=se(!1),i=fe(()=>({minimap:{enabled:!1},lineNumbers:"on",glyphMargin:!1,folding:!0,wordWrap:"on",automaticLayout:!0,scrollBeyondLastLine:!1,theme:s.value?"vs-dark":"vs",fontSize:12,fontFamily:'Consolas, "Courier New", monospace',renderLineHighlight:"none",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,contextmenu:!1})),c=x=>{t("update:value",x||"")},l=()=>{o.value=!o.value},u=()=>{o.value=!1},y=x=>{t("update:value",x)};return(x,f)=>(z(),H("div",r2,[n("div",o2,[n("label",n2,E(r.label),1),n("div",a2,[n("span",s2,E(r.language),1),n("button",{onClick:l,class:"text-gray-400 hover:text-blue-600 transition-colors p-0.5 rounded hover:bg-gray-100",title:"Expand Editor"},[ue(a(t2),{class:"w-3.5 h-3.5"})])])]),n("div",{class:"border border-gray-300 rounded overflow-hidden focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 resize-y relative group",style:ye({height:`${r.height||200}px`,minHeight:"100px",maxHeight:"600px"})},[ue(a(fi),{value:r.value,language:r.language,options:{...i.value,readOnly:r.disabled},"onUpdate:value":c,class:"w-full h-full"},null,8,["value","language","options"]),f[1]||(f[1]=n("div",{class:"absolute bottom-0 right-0 w-3 h-3 cursor-ns-resize pointer-events-none bg-gradient-to-tl from-gray-300 to-transparent opacity-50 group-hover:opacity-100"},null,-1))],4),ue(Ft,{visible:o.value,"onUpdate:visible":f[0]||(f[0]=k=>o.value=k),title:r.label,value:r.value,language:r.language,"read-only":r.disabled,"onUpdate:value":y,onClose:u},null,8,["visible","title","value","language","read-only"])]))}}),l2=At(i2,[["__scopeId","data-v-44208768"]]),d2={class:"block text-xs text-gray-500 mb-1"},c2={class:"space-y-2"},u2=["value","disabled","placeholder"],h2={class:"flex flex-col gap-1"},p2=["disabled"],f2={class:"text-[10px] text-gray-400 text-center"},m2={key:0,class:"text-xs text-red-500 mt-1"},g2=ze({__name:"PropertyImage",props:{label:{},value:{},disabled:{type:Boolean},placeholder:{}},emits:["update:value"],setup(r,{emit:e}){const t=r,s=e,{t:o}=je(),i=se(null),c=se(""),l=()=>{var x;t.disabled||(x=i.value)==null||x.click()},u=x=>{var b;const f=x.target,k=(b=f.files)==null?void 0:b[0];if(!k)return;if(c.value="",k.size>2*1024*1024){c.value=o("properties.image.sizeError"),f.value="";return}const m=new FileReader;m.onload=g=>{var _;const C=(_=g.target)==null?void 0:_.result;s("update:value",C)},m.onerror=()=>{c.value=o("properties.image.readError")},m.readAsDataURL(k),f.value=""},y=x=>{const f=x.target;s("update:value",f.value)};return(x,f)=>(z(),H("div",null,[n("label",d2,E(r.label),1),n("div",c2,[n("input",{type:"text",value:r.value||"",disabled:r.disabled,placeholder:r.placeholder||a(o)("properties.image.urlPlaceholder"),onInput:y,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none disabled:bg-gray-100 disabled:text-gray-500"},null,40,u2),n("div",h2,[n("button",{type:"button",onClick:l,disabled:r.disabled,class:"w-full py-1.5 px-3 bg-white text-gray-700 text-sm border border-gray-300 rounded hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[f[0]||(f[0]=n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),Ce(" "+E(a(o)("properties.image.uploadBtn")),1)],8,p2),n("span",f2,E(a(o)("properties.image.uploadTip")),1)]),c.value?(z(),H("p",m2,E(c.value),1)):be("",!0),n("input",{ref_key:"fileInput",ref:i,type:"file",accept:"image/*",class:"hidden",onChange:u},null,544)])]))}}),b2={class:"p-4 border-b border-gray-200 bg-gray-50 flex items-center justify-between"},v2={class:"font-semibold text-gray-700"},y2={class:"text-xs text-gray-500 mt-1"},w2={key:0,class:"flex items-center text-red-500 gap-1 text-xs font-medium bg-red-50 px-2 py-1 rounded border border-red-100"},x2={key:0,class:"p-6 text-center"},_2={class:"mb-4"},k2={class:"text-lg font-semibold text-gray-900"},S2={class:"text-sm text-gray-500 mt-2"},C2={class:"font-medium"},E2={key:1,class:"flex flex-col h-full overflow-hidden"},T2={class:"flex border-b border-gray-200 bg-white"},A2=["onClick"],$2={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600"},I2={class:"p-4 space-y-6 overflow-y-auto flex-1 custom-scrollbar"},z2={key:0,class:"space-y-3"},P2={class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},L2={class:"grid grid-cols-2 gap-3"},M2={key:1,class:"space-y-3 pt-2 border-t border-gray-100"},R2={class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},D2={class:"grid grid-cols-2 gap-3"},B2=["disabled"],O2=["disabled"],q2={class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},F2={class:"space-y-3"},j2={key:0},N2=["onClick","disabled"],H2={key:6},U2={class:"block text-xs text-gray-500 mb-1 font-medium"},V2=["placeholder","disabled","value","onChange"],W2={key:2,class:"space-y-3 pt-2 border-t border-gray-100"},G2={class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},K2={key:3,class:"space-y-4"},Y2={class:"p-4 bg-gray-50 rounded border border-gray-200"},X2={class:"text-sm font-medium text-gray-700 mb-3"},Z2={class:"space-y-3"},J2={class:"text-xs text-gray-500 mb-1.5 font-medium"},Q2={class:"flex items-center gap-2 bg-white border border-gray-200 rounded px-2 py-1.5 hover:border-blue-400 transition-colors"},ex=["title"],tx=["title"],rx={class:"text-xs text-gray-500 flex items-center justify-between border-t border-gray-100 pt-2"},ox={class:"font-medium"},nx={class:"px-2 py-0.5 bg-gray-100 rounded text-gray-600"},ax=["disabled"],sx={key:2,class:"p-6 text-center"},ix={class:"mb-4"},lx={class:"text-lg font-semibold text-gray-900"},dx={class:"text-sm text-gray-500 mt-2"},cx=ze({__name:"PropertiesPanel",setup(r){const{t:e}=je(),t=Be(),s=fe(()=>t.selectedElement),o=fe(()=>t.selectedElementIds.length>1),i=fe(()=>{var G;return((G=s.value)==null?void 0:G.locked)||!1}),c=se(!1),l=se(""),u=fe(()=>s.value?[ge.LINE,ge.RECT,ge.CIRCLE].includes(s.value.type):!1),y=fe(()=>t.tableSelection?t.tableSelection.cells.length>1:!1),x=fe(()=>{if(!t.tableSelection||t.tableSelection.cells.length!==1)return!1;const G=t.tableSelection.cells[0],Q=t.selectedElement;if(!Q||Q.type!==ge.TABLE)return!1;const ve=(G.section||"body")==="footer"?Q.footerData:Q.data;if(!ve)return!1;const de=ve[G.rowIndex];if(!de)return!1;const _e=de[G.colField];return _e&&typeof _e=="object"?(_e.rowSpan||1)>1||(_e.colSpan||1)>1:!1}),f=se("properties"),k=se(!1),m=fe(()=>t.unit||"mm"),b=fe(()=>t.unit||"mm"),g=new Set(["fontSize","borderWidth","barcodeWidth","barcodeHeight","margin","borderRadius","headerHeight","rowHeight","footerHeight","labelFontSize","labelBorderWidth"]),C=G=>G.type!=="number"||!G.key?!1:g.has(G.key),_=G=>{const Q=e(G.label);return C(G)?`${Q} (${b.value})`:Q},p=G=>{const Q=re(G);return C(G)&&typeof Q=="number"?nt(Q,m.value):Q},I=(G,Q)=>C(G)?Ye(Number(Q),m.value):Q,A=G=>{if(!(G.min===void 0||G.min===null))return C(G)?nt(G.min,m.value):G.min},U=G=>{if(!(G.max===void 0||G.max===null))return C(G)?nt(G.max,m.value):G.max},Y=G=>{if(!(G.step===void 0||G.step===null))return C(G)?nt(G.step,m.value):G.step},j=()=>{s.value&&(navigator.clipboard.writeText(s.value.id),k.value=!0,setTimeout(()=>{k.value=!1},2e3))},O=()=>{s.value&&(l.value=s.value.type,c.value=!0)},F=G=>{s.value&&G&&t.addCustomElement(G,s.value)},oe=(G,Q)=>{s.value&&t.updateElement(s.value.id,{[G]:Q})},K=(G,Q)=>{s.value&&t.updateElement(s.value.id,{style:{...s.value.style,[G]:Q}})},P=(G,Q)=>{try{const me=Q.target.value;oe(G,JSON.parse(me))}catch{window.alert("Invalid JSON")}},q=G=>{const Q=re(G);return G.language==="json"&&typeof Q=="object"?JSON.stringify(Q,null,2):Q||""},h=(G,Q)=>{if(G.language==="json")try{const me=JSON.parse(Q);oe(G.key,me)}catch{}else oe(G.key,Q)},v=G=>{switch(G){case ge.TEXT:return Hu;case ge.IMAGE:return Gu;case ge.TABLE:return yh;case ge.PAGE_NUMBER:return _h;case ge.BARCODE:return Eh;case ge.QRCODE:return zh;case ge.LINE:return Mh;case ge.RECT:return Dh;case ge.CIRCLE:return Oh;default:return null}},Z=fe(()=>s.value?v(s.value.type):null),J=fe(()=>Z.value?Z.value.sections.filter(G=>(G.tab||"properties")===f.value):[]),re=G=>s.value?(G.target==="style"?s.value.style:s.value)[G.key]??G.defaultValue:G.defaultValue,L=(G,Q)=>{s.value&&(G.target==="style"&&G.key?K(G.key,Q):G.target==="element"&&G.key&&oe(G.key,Q))},W=G=>{!s.value||!G.actionName||(G.actionName==="paginateTable"?t.paginateTable(s.value.id):G.actionName==="removeBorder"&&t.updateElement(s.value.id,{style:{...s.value.style,borderStyle:void 0,borderWidth:void 0,borderColor:void 0,border:"none"}}))},$=()=>{o.value?t.removeSelectedElements():s.value&&t.removeElement(s.value.id)},T=G=>{G.relatedTarget&&G.currentTarget.contains(G.relatedTarget)||t.setDisableGlobalShortcuts(!0)},te=G=>{G.relatedTarget&&G.currentTarget.contains(G.relatedTarget)||t.setDisableGlobalShortcuts(!1)};return(G,Q)=>(z(),H(Te,null,[n("aside",{class:"w-[380px] bg-white border-l border-gray-200 flex flex-col h-full z-40 overflow-hidden",onFocusin:T,onFocusout:te},[n("div",b2,[n("div",null,[n("h2",v2,E(a(e)("properties.title")),1),n("p",y2,E(a(e)("properties.subtitle")),1)]),i.value?(z(),H("div",w2,[ue(a(er),{class:"w-3 h-3"}),n("span",null,E(a(e)("properties.locked")),1)])):be("",!0)]),o.value?(z(),H("div",x2,[n("div",_2,[n("h3",k2,E(a(e)("properties.multiSelectMode")),1),n("p",S2,[n("span",C2,E(a(t).selectedElementIds.length),1),Ce(" "+E(a(e)("properties.selectedElements",{n:""}).replace("{n}","")),1)])]),n("button",{onClick:$,class:"w-full py-2 bg-red-50 text-red-600 rounded border border-red-200 hover:bg-red-100 transition-colors text-sm font-medium"},E(a(e)("properties.deleteSelected")),1)])):s.value?(z(),H("div",E2,[n("div",T2,[(z(),H(Te,null,Le(["properties","style","advanced"],me=>n("button",{key:me,onClick:ve=>f.value=me,class:xe(["flex-1 py-3 text-sm font-medium transition-colors relative",f.value===me?"text-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"])},[Ce(E(a(e)(`properties.tab.${me}`))+" ",1),f.value===me?(z(),H("div",$2)):be("",!0)],10,A2)),64))]),n("div",I2,[f.value==="properties"?(z(),H("div",z2,[n("h3",P2,E(a(e)("properties.section.positionSize")),1),n("div",L2,[ue($t,{label:`${a(e)("properties.label.x")} (${b.value})`,type:"number",disabled:i.value,value:a(nt)(s.value.x,m.value),"onUpdate:value":Q[0]||(Q[0]=me=>oe("x",a(Ye)(Number(me),m.value)))},null,8,["label","disabled","value"]),ue($t,{label:`${a(e)("properties.label.y")} (${b.value})`,type:"number",disabled:i.value,value:a(nt)(s.value.y,m.value),"onUpdate:value":Q[1]||(Q[1]=me=>oe("y",a(Ye)(Number(me),m.value)))},null,8,["label","disabled","value"]),ue($t,{label:`${a(e)("properties.label.width")} (${b.value})`,type:"number",disabled:i.value,value:a(nt)(s.value.width,m.value),"onUpdate:value":Q[2]||(Q[2]=me=>oe("width",a(Ye)(Number(me),m.value)))},null,8,["label","disabled","value"]),ue($t,{label:`${a(e)("properties.label.height")} (${b.value})`,type:"number",disabled:i.value,value:a(nt)(s.value.height,m.value),"onUpdate:value":Q[3]||(Q[3]=me=>oe("height",a(Ye)(Number(me),m.value)))},null,8,["label","disabled","value"])])])):be("",!0),f.value==="properties"&&s.value.type==="table"&&a(t).tableSelection?(z(),H("div",M2,[n("h3",R2,E(a(e)("properties.section.cellOperations")),1),n("div",D2,[n("button",{onClick:Q[4]||(Q[4]=me=>a(t).mergeSelectedCells()),disabled:!y.value||i.value,class:"w-full py-2 bg-blue-50 text-blue-600 rounded border border-blue-200 hover:bg-blue-100 transition-colors text-xs font-medium disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-400 disabled:border-gray-200"},E(a(e)("properties.action.mergeCells")),9,B2),n("button",{onClick:Q[5]||(Q[5]=me=>a(t).splitSelectedCells()),disabled:!x.value||i.value,class:"w-full py-2 bg-white text-gray-600 rounded border border-gray-200 hover:bg-gray-50 transition-colors text-xs font-medium disabled:opacity-50 disabled:cursor-not-allowed"},E(a(e)("properties.action.splitCells")),9,O2)])])):be("",!0),(z(!0),H(Te,null,Le(J.value,(me,ve)=>(z(),H("div",{key:ve,class:"space-y-3 pt-2 first:pt-0 border-t first:border-0 border-gray-100"},[n("h3",q2,E(a(e)(me.title)),1),n("div",F2,[(z(!0),H(Te,null,Le(me.fields,(de,_e)=>(z(),H(Te,{key:_e},[de.type==="action"?(z(),H("div",j2,[n("button",{onClick:ke=>W(de),disabled:i.value,class:"w-full py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400"},E(a(e)(de.label)),9,N2)])):de.type==="text"||de.type==="number"||de.type==="switch"?(z(),Pe($t,{key:1,label:_(de),type:de.type,min:A(de),max:U(de),step:Y(de),disabled:i.value,placeholder:de.placeholder?de.placeholder.startsWith("properties.")?a(e)(de.placeholder):de.placeholder:"",value:p(de),"onUpdate:value":ke=>L(de,I(de,ke))},null,8,["label","type","min","max","step","disabled","placeholder","value","onUpdate:value"])):de.type==="select"?(z(),Pe(Kw,{key:2,label:a(e)(de.label),options:(de.options||[]).map(ke=>({...ke,label:a(e)(ke.label)})),disabled:i.value,value:re(de),"onUpdate:value":ke=>L(de,ke)},null,8,["label","options","disabled","value","onUpdate:value"])):de.type==="color"?(z(),Pe(ni,{key:3,label:a(e)(de.label),disabled:i.value,value:re(de),"onUpdate:value":ke=>L(de,ke)},null,8,["label","disabled","value","onUpdate:value"])):de.type==="image"?(z(),Pe(g2,{key:4,label:a(e)(de.label),disabled:i.value,placeholder:de.placeholder?de.placeholder.startsWith("properties.")?a(e)(de.placeholder):de.placeholder:void 0,value:re(de),"onUpdate:value":ke=>L(de,ke)},null,8,["label","disabled","placeholder","value","onUpdate:value"])):de.type==="code"?(z(),Pe(l2,{key:5,label:a(e)(de.label),language:de.language||"javascript",disabled:i.value,value:q(de),"onUpdate:value":ke=>h(de,ke)},null,8,["label","language","disabled","value","onUpdate:value"])):de.type==="textarea"?(z(),H("div",H2,[n("label",U2,E(a(e)(de.label)),1),n("textarea",{placeholder:de.placeholder?de.placeholder.startsWith("properties.")?a(e)(de.placeholder):de.placeholder:"",disabled:i.value,value:["data","columns","footerData"].includes(de.key)?JSON.stringify(s.value[de.key],null,2):re(de),onChange:ke=>["data","columns","footerData"].includes(de.key)?P(de.key,ke):L(de,ke.target.value),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:border-blue-500 outline-none h-24 resize-y font-mono disabled:bg-gray-100 disabled:text-gray-500"},null,40,V2)])):be("",!0)],64))),128))])]))),128)),f.value==="style"&&!u.value?(z(),H("div",W2,[n("h3",G2,E(a(e)("properties.section.appearance")),1),ue(ni,{label:a(e)("properties.label.backgroundColor"),disabled:i.value,value:s.value.style.backgroundColor||"#ffffff","onUpdate:value":Q[6]||(Q[6]=me=>K("backgroundColor",me))},null,8,["label","disabled","value"])])):be("",!0),f.value==="advanced"?(z(),H("div",K2,[n("div",Y2,[n("h4",X2,E(a(e)("properties.section.elementInfo")),1),n("div",Z2,[n("div",null,[n("p",J2,E(a(e)("properties.label.id")),1),n("div",Q2,[n("span",{class:"font-mono text-xs text-gray-600 flex-1 truncate select-all",title:s.value.id},E(s.value.id),9,ex),n("button",{onClick:j,class:"text-gray-400 hover:text-blue-600 transition-colors p-1 rounded hover:bg-gray-100 flex-shrink-0",title:k.value?a(e)("properties.action.copied"):a(e)("properties.action.copyId")},[k.value?(z(),Pe(a(Ep),{key:0,class:"w-3.5 h-3.5 text-green-500"})):(z(),Pe(a(Tt),{key:1,class:"w-3.5 h-3.5"}))],8,tx)])]),n("div",rx,[n("span",ox,E(a(e)("properties.label.type")),1),n("span",nx,E(a(e)("elements."+s.value.type)),1)])])]),n("button",{onClick:O,class:"w-full py-2 bg-white text-blue-600 rounded border border-blue-200 hover:bg-blue-50 transition-colors text-sm font-medium flex items-center justify-center gap-2 mb-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white"},[ue(a(An),{class:"w-4 h-4"}),Ce(" "+E(a(e)("properties.action.saveCustom")),1)]),n("button",{onClick:$,disabled:i.value,class:"w-full py-2 bg-white text-red-600 rounded border border-red-200 hover:bg-red-50 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white"},[ue(a(Et),{class:"w-4 h-4"}),Ce(" "+E(a(e)("properties.action.deleteElement")),1)],8,ax)])):be("",!0)])])):(z(),H("div",sx,[n("div",ix,[n("h3",lx,E(a(e)("properties.empty.noSelection")),1),n("p",dx,E(a(e)("properties.empty.selectInstruction")),1)])]))],32),ue(jt,{show:c.value,"initial-value":l.value,title:a(e)("properties.action.saveCustomModal"),placeholder:a(e)("sidebar.enterNamePlaceholder"),onClose:Q[7]||(Q[7]=me=>c.value=!1),onSave:F},null,8,["show","initial-value","title","placeholder"])],64))}}),ux=At(cx,[["__scopeId","data-v-35d350fc"]]),ai=ze({__name:"Ruler",props:{type:{},zoom:{},scroll:{},offset:{},thick:{},indicators:{},unit:{}},emits:["guide-drag-start"],setup(r,{emit:e}){const t=r,s=se(null),o=t.thick||20;let i=null;const c=()=>{const x=s.value;if(!x)return;const f=x.getContext("2d");if(!f)return;const k=x.width,m=x.height,{zoom:b,scroll:g,offset:C,type:_,indicators:p}=t,I=document.documentElement.classList.contains("dark");if(f.clearRect(0,0,k,m),f.fillStyle=I?"#1f2937":"#F9FAFB",f.fillRect(0,0,k,m),p&&p.length>0)for(const h of p){const v=C+h.position*b-g;f.fillStyle=h.color,_==="horizontal"?f.fillRect(v-2,0,4,o):f.fillRect(0,v-2,o,4)}f.strokeStyle=I?"#6b7280":"#9CA3AF",f.fillStyle=I?"#9ca3af":"#6B7280",f.lineWidth=1,f.font="10px sans-serif",f.beginPath();const A=t.unit==="mm"?Di:t.unit==="pt"?Bi:1,j=50/(A*b),O=[1,2,5,10,20,50,100,200,500,1e3];let F=O[O.length-1];for(const h of O)if(h>=j-.001){F=h;break}const oe=_==="horizontal"?k:m,K=(-C+g)/(b*A),P=(oe-C+g)/(b*A),q=Math.floor(K/F)*F;for(let h=q;h<=P;h+=F){const v=C+h*A*b-g,Z=Number(h.toFixed(1)).toString();_==="horizontal"?(f.moveTo(v,0),f.lineTo(v,o),f.fillText(Z,v+2,10)):(f.moveTo(0,v),f.lineTo(o,v),f.save(),f.translate(10,v+2),f.rotate(-Math.PI/2),f.fillText(Z,0,0),f.restore());const J=F/5;for(let re=1;re<5;re++){const L=h+J*re,W=C+L*A*b-g;_==="horizontal"?(f.moveTo(W,o-5),f.lineTo(W,o)):(f.moveTo(o-5,W),f.lineTo(o,W))}}f.stroke()},l=new ResizeObserver(x=>{for(const f of x){const k=s.value;if(k){const{width:m,height:b}=f.contentRect;k.width=m,k.height=b,c()}}});We(()=>{s.value&&(l.observe(s.value.parentElement),c()),i=new MutationObserver(()=>{c()}),i.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),Ge(()=>{i==null||i.disconnect(),i=null}),Ie(()=>[t.zoom,t.scroll,t.offset,t.indicators,t.unit],c,{deep:!0});const u=e,y=x=>{u("guide-drag-start",x)};return(x,f)=>(z(),H("div",{class:"w-full h-full overflow-hidden bg-gray-50 relative",onMousedown:y},[n("canvas",{ref_key:"canvasRef",ref:s,class:"block"},null,512)],32))}}),hx={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function px(r,e){return z(),H("svg",hx,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m19 21l-7-7l-2.35 2.35q.2.375.275.8T10 18q0 1.65-1.175 2.825T6 22t-2.825-1.175T2 18t1.175-2.825T6 14q.425 0 .85.075t.8.275L10 12L7.65 9.65q-.375.2-.8.275T6 10q-1.65 0-2.825-1.175T2 6t1.175-2.825T6 2t2.825 1.175T10 6q0 .425-.075.85t-.275.8L22 20v1zm-4-10l-2-2l6-6h3v1zM6 8q.825 0 1.413-.587T8 6t-.587-1.412T6 4t-1.412.588T4 6t.588 1.413T6 8m6 4.5q.2 0 .35-.15t.15-.35t-.15-.35t-.35-.15t-.35.15t-.15.35t.15.35t.35.15M6 20q.825 0 1.413-.587T8 18t-.587-1.412T6 16t-1.412.588T4 18t.588 1.413T6 20"},null,-1)])])}const fx=Se({name:"material-symbols-content-cut",render:px}),mx={class:"bg-white border border-gray-200 shadow-xl rounded-md min-w-[160px] py-1"},gx=["disabled"],bx=["disabled"],vx=["disabled"],yx=["disabled"],wx=["disabled"],xx=ze({__name:"Shortcuts",setup(r){const{t:e}=je(),t=Be(),s=se(!1),o=se(0),i=se(0),c=se(0),l=se(0),u=se(null),y=se(!1),x=se(0),f=se(0),k=p=>{x.value=p.clientX,f.value=p.clientY},m=(p,I)=>{const A=document.querySelectorAll(".print-page");if(A.length===0)return;let U=null,Y=1/0,j=0;for(let O=0;O<A.length;O++){const F=A[O],oe=F.getBoundingClientRect();if(p>=oe.left&&p<=oe.right&&I>=oe.top&&I<=oe.bottom)return{pageIndex:O,x:(p-oe.left)/t.zoom,y:(I-oe.top)/t.zoom};const K=Math.max(oe.left-p,0,p-oe.right),P=Math.max(oe.top-I,0,I-oe.bottom),q=Math.sqrt(K*K+P*P);q<Y&&(Y=q,U=F,j=O)}if(U){const O=U.getBoundingClientRect();let F=(p-O.left)/t.zoom,oe=(I-O.top)/t.zoom;return F=Math.max(0,Math.min(t.canvasSize.width,F)),oe=Math.max(0,Math.min(t.canvasSize.height,oe)),{pageIndex:j,x:F,y:oe}}},b=p=>{if(t.disableGlobalShortcuts)return;if((p.ctrlKey||p.metaKey)&&p.altKey&&p.key.toLowerCase()==="n"){p.preventDefault(),p.stopPropagation(),window.dispatchEvent(new CustomEvent("designer:new-template"));return}if((p.ctrlKey||p.metaKey)&&p.key===","){p.preventDefault(),p.stopPropagation(),t.setShowSettings(!0);return}const I=p.target;if(I&&I.closest('input, textarea, select, [contenteditable="true"]'))return;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(p.key)){const Y=p.shiftKey?10:1;if(t.selectedGuideId){const j=t.guides.find(O=>O.id===t.selectedGuideId);if(j){p.preventDefault();const O=j.position;let F=O;if(j.type==="vertical")if(p.key==="ArrowLeft")F-=Y;else if(p.key==="ArrowRight")F+=Y;else return;else if(p.key==="ArrowUp")F-=Y;else if(p.key==="ArrowDown")F+=Y;else return;(O>0&&F<0||O<0&&F>0||F===0)&&(F=0),t.updateGuide(j.id,F),t.setHighlightedGuide(j.id)}}else if(t.selectedElementIds.length>0){p.preventDefault();const j=p.key==="ArrowLeft"?-Y:p.key==="ArrowRight"?Y:0,O=p.key==="ArrowUp"?-Y:p.key==="ArrowDown"?Y:0;t.nudgeSelectedElements(j,O)}return}if((p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="a"){if(p.preventDefault(),t.pages[t.currentPageIndex]){const Y=t.pages[t.currentPageIndex].elements.map(j=>j.id);t.setSelection(Y)}return}if(p.key==="Delete"){t.selectedElementIds.length>1?(p.preventDefault(),t.removeSelectedElements()):t.selectedElementId?(p.preventDefault(),t.removeElement(t.selectedElementId)):t.selectedGuideId&&(p.preventDefault(),t.removeGuide(t.selectedGuideId));return}if((p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="c"){t.selectedElementId&&(p.preventDefault(),t.copy());return}if((p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="x"){t.selectedElementId&&(p.preventDefault(),t.cut());return}if((p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="v"){t.clipboard.length>0&&(p.preventDefault(),t.paste(m(x.value,f.value)));return}if((p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="h"){p.preventDefault(),t.setShowHelp(!0);return}if(t.showHelp&&p.key==="Escape"){p.preventDefault(),t.setShowHelp(!1);return}if((p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="z"&&!p.shiftKey){p.preventDefault(),t.undo();return}if((p.ctrlKey||p.metaKey)&&(p.key.toLowerCase()==="y"||p.key.toLowerCase()==="z"&&p.shiftKey)){p.preventDefault(),t.redo();return}if((p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="l"){p.preventDefault(),t.toggleLock();return}if((p.ctrlKey||p.metaKey)&&p.shiftKey&&p.key.toLowerCase()==="p"){p.preventDefault(),window.dispatchEvent(new CustomEvent("designer:preview"));return}const A=p.ctrlKey||p.metaKey,U=p.key.toLowerCase();if(!(t.editingCustomElementId&&A&&(U==="s"||U==="q"))){if(A&&p.shiftKey&&U==="s"){p.preventDefault(),window.dispatchEvent(new CustomEvent("designer:save-as"));return}if(A&&U==="s"){p.preventDefault(),window.dispatchEvent(new CustomEvent("designer:save"));return}if((p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="p"&&!p.shiftKey){p.preventDefault(),window.dispatchEvent(new CustomEvent("designer:print"));return}if((p.ctrlKey||p.metaKey)&&p.shiftKey&&p.key.toLowerCase()==="e"){p.preventDefault(),window.dispatchEvent(new CustomEvent("designer:export-pdf"));return}if((p.ctrlKey||p.metaKey)&&p.shiftKey&&p.key.toLowerCase()==="j"){p.preventDefault(),window.dispatchEvent(new CustomEvent("designer:view-json"));return}}},g=p=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(p.key)&&(t.setHighlightedGuide(null),t.setHighlightedEdge(null))},C=async p=>{const I=p.target,A=document.querySelector(".overflow-auto");if(!A||!A.contains(I))return;if(p.preventDefault(),s.value=!0,o.value=p.clientX,i.value=p.clientY,c.value=p.clientX,l.value=p.clientY,await Xe(),u.value){const j=u.value.getBoundingClientRect(),O=window.innerWidth,F=window.innerHeight;p.clientX+j.width>O&&(o.value=O-j.width-5),p.clientY+j.height>F&&(i.value=F-j.height-5)}const U=document.querySelectorAll(".print-page");let Y=!1;U.forEach(j=>{const O=j.getBoundingClientRect();p.clientX>=O.left&&p.clientX<=O.right&&p.clientY>=O.top&&p.clientY<=O.bottom&&(Y=!0)}),y.value=Y,window.addEventListener("click",_)},_=()=>{s.value=!1,window.removeEventListener("click",_)};return We(()=>{window.addEventListener("keydown",b,{capture:!0}),window.addEventListener("contextmenu",C),window.addEventListener("keyup",g),window.addEventListener("mousemove",k)}),Ge(()=>{window.removeEventListener("keydown",b,{capture:!0}),window.removeEventListener("contextmenu",C),window.removeEventListener("click",_),window.removeEventListener("keyup",g),window.removeEventListener("mousemove",k)}),(p,I)=>{var A,U,Y,j,O;return s.value?(z(),H("div",{key:0,ref_key:"menuRef",ref:u,class:"fixed z-[9999]",style:ye({left:`${o.value}px`,top:`${i.value}px`})},[n("div",mx,[n("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:a(t).selectedElementIds.length===0&&!a(t).selectedGuideId||((A=a(t).selectedElement)==null?void 0:A.locked),onClick:I[0]||(I[0]=()=>{a(t).selectedElementIds.length>1?a(t).removeSelectedElements():a(t).selectedElementId?a(t).removeElement(a(t).selectedElementId):a(t).selectedGuideId&&a(t).removeGuide(a(t).selectedGuideId),s.value=!1})},[ue(a(Et),{class:"w-4 h-4"}),n("span",null,E(a(e)("common.delete"))+E(a(t).selectedElementIds.length>1?` (${a(t).selectedElementIds.length})`:""),1)],8,gx),n("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:!a(t).selectedElementId||((U=a(t).selectedElement)==null?void 0:U.locked),onClick:I[1]||(I[1]=()=>{a(t).cut(),s.value=!1})},[ue(a(fx),{class:"w-4 h-4"}),n("span",null,E(a(e)("common.cut")),1)],8,bx),n("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:!a(t).selectedElementId||((Y=a(t).selectedElement)==null?void 0:Y.locked),onClick:I[2]||(I[2]=()=>{a(t).copy(),s.value=!1})},[ue(a(Tt),{class:"w-4 h-4"}),n("span",null,E(a(e)("common.copy")),1)],8,vx),n("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:a(t).clipboard.length===0,onClick:I[3]||(I[3]=()=>{a(t).paste(m(c.value,l.value)),s.value=!1})},[ue(a($n),{class:"w-4 h-4"}),n("span",null,E(a(e)("common.paste")),1)],8,yx),n("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 disabled:opacity-50 flex items-center gap-2",disabled:a(t).selectedElementIds.length===0,onClick:I[4]||(I[4]=()=>{a(t).toggleLock(),s.value=!1})},[(z(),Pe(Dt((j=a(t).selectedElement)!=null&&j.locked?a(Hi):a(er)),{class:"w-4 h-4"})),n("span",null,E((O=a(t).selectedElement)!=null&&O.locked?a(e)("common.unlock"):a(e)("common.lock")),1)],8,wx),I[7]||(I[7]=n("div",{class:"border-t border-gray-200 my-1"},null,-1)),n("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",onClick:I[5]||(I[5]=F=>{a(t).undo(),s.value=!1})},[ue(a(ji),{class:"w-4 h-4"}),n("span",null,E(a(e)("common.undo")),1)]),n("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",onClick:I[6]||(I[6]=F=>{a(t).redo(),s.value=!1})},[ue(a(Ni),{class:"w-4 h-4"}),n("span",null,E(a(e)("common.redo")),1)])])],4)):be("",!0)}}}),_x={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm leading-none text-gray-300 z-10"},kx={key:2,class:"w-full h-full bg-gray-200 flex items-center justify-center overflow-hidden"},Sx=["src"],Cx={key:3,class:"w-full h-full bg-gray-100 flex items-center justify-center overflow-hidden"},Ex=["src"],Tx={key:4,class:"w-full h-full bg-gray-100 flex items-center justify-center overflow-hidden"},Ax=["src"],$x={key:2,class:"w-full h-full bg-gray-200 flex items-center justify-center overflow-hidden"},Ix=["src"],zx={key:3,class:"w-full h-full bg-gray-100 flex items-center justify-center overflow-hidden"},Px=["src"],Lx={key:4,class:"w-full h-full bg-gray-100 flex items-center justify-center overflow-hidden"},Mx=["src"],si=180,ii=120,li=300,Rx=32,Dx=ze({__name:"Minimap",props:{scrollWidth:{},scrollHeight:{},viewportWidth:{},viewportHeight:{},scrollLeft:{},scrollTop:{},pages:{},pageWidth:{},pageHeight:{},zoom:{},contentOffsetX:{},contentOffsetY:{},canvasBackground:{},showHeaderLine:{type:Boolean},showFooterLine:{type:Boolean},headerHeight:{},footerHeight:{},watermark:{}},emits:["update:scroll"],setup(r,{emit:e}){const t=r,s=e,o=fe(()=>{if(t.scrollWidth<=0||t.scrollHeight<=0)return .1;let K=si/t.scrollWidth;return t.scrollHeight*K>li&&(K=li/t.scrollHeight),t.scrollWidth*K<ii&&(K=ii/t.scrollWidth),K}),i=fe(()=>t.scrollHeight*o.value),c=fe(()=>({left:`${t.scrollLeft*o.value}px`,top:`${t.scrollTop*o.value}px`,width:`${t.viewportWidth*o.value}px`,height:`${t.viewportHeight*o.value}px`})),l=K=>K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),u=fe(()=>{const K=t.watermark;if(!K||!K.enabled||!K.text)return null;const P=l(K.text),q=Number.isFinite(K.angle)?K.angle:-30,h=Math.max(6,K.size||24),v=Math.max(40,K.density||160),Z=K.color||"#000000",J=Math.min(1,Math.max(0,K.opacity??.1)),re=`<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" width="${v}" height="${v}"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="${Z}" fill-opacity="${J}" font-size="${h}" transform="rotate(${q} ${v/2} ${v/2})">${P}</text></svg>`;return{backgroundImage:`url("data:image/svg+xml,${encodeURIComponent(re)}")`,backgroundRepeat:"repeat",backgroundSize:`${v}px ${v}px`}}),y=K=>{const P={left:`${t.contentOffsetX*o.value}px`,top:`${(t.contentOffsetY+K*(t.pageHeight+Rx)*t.zoom)*o.value}px`,width:`${t.pageWidth*t.zoom*o.value}px`,height:`${t.pageHeight*t.zoom*o.value}px`,backgroundColor:t.canvasBackground||"#ffffff"};return u.value?{...P,...u.value}:P},x=()=>{if(!t.pages||t.pages.length===0)return[];const K=t.pages[0];return K!=null&&K.elements?K.elements.filter(P=>t.showHeaderLine&&P.y<t.headerHeight||t.showFooterLine&&P.y>=t.pageHeight-t.footerHeight):[]},f=K=>{const P=Math.max(1,K.width*t.zoom*o.value),q=Math.max(1,K.height*t.zoom*o.value);return{width:P,height:q}},k=K=>{var v,Z,J,re,L,W,$,T,te,G,Q,me;const{width:P,height:q}=f(K),h={left:`${K.x*t.zoom*o.value}px`,top:`${K.y*t.zoom*o.value}px`,width:`${P}px`,height:`${q}px`,fontSize:`${(((v=K.style)==null?void 0:v.fontSize)||12)*t.zoom*o.value}px`,zIndex:((Z=K.style)==null?void 0:Z.zIndex)||1,transform:`rotate(${((J=K.style)==null?void 0:J.rotate)||0}deg)`};if(K.type===ge.LINE){const ve=((re=K.style)==null?void 0:re.borderColor)||"#111827",de=Math.max(1,(((L=K.style)==null?void 0:L.borderWidth)||1)*t.zoom*o.value);return{...h,height:`${de}px`,backgroundColor:ve,top:`${K.y*t.zoom*o.value+(q-de)/2}px`}}if(K.type===ge.RECT||K.type===ge.CIRCLE){const ve=((W=K.style)==null?void 0:W.borderColor)||"#111827",de=Math.max(1,((($=K.style)==null?void 0:$.borderWidth)||1)*t.zoom*o.value);return{...h,backgroundColor:((T=K.style)==null?void 0:T.backgroundColor)||"transparent",borderColor:ve,borderWidth:`${de}px`,borderStyle:((te=K.style)==null?void 0:te.borderStyle)||"solid",borderRadius:K.type===ge.CIRCLE?"9999px":`${((G=K.style)==null?void 0:G.borderRadius)||0}px`}}return K.type===ge.BARCODE||K.type===ge.QRCODE?{...h,backgroundColor:"rgba(17, 24, 39, 0.15)",border:"1px solid rgba(17, 24, 39, 0.3)"}:K.type===ge.PAGE_NUMBER?{...h,color:((Q=K.style)==null?void 0:Q.color)||"#111827",backgroundColor:((me=K.style)==null?void 0:me.backgroundColor)||"transparent"}:{...h,backgroundColor:K.type===ge.IMAGE?"#e5e7eb":void 0}},m=(K,P)=>{var Z;const q=P+1,h=((Z=t.pages)==null?void 0:Z.length)||1,v=K.format||"1/Total";return v==="1"?`${q}`:v==="Page 1"?`Page ${q}`:`${q}/${h}`},b=K=>{const P=K.style?JSON.stringify(K.style):"";return`${K.id}:${K.type}:${K.variable||""}:${K.content||""}:${P}`},g=se({}),C=se({});let _=0;const p=K=>K.type===ge.BARCODE?K.variable||K.content||"12345678":K.type===ge.QRCODE?K.variable||K.content||"https://example.com":K.variable||K.content||"",I=K=>{try{const P=document.createElement("canvas"),q=K.style||{};return Vi(P,p(K),{format:q.barcodeFormat||"CODE128",lineColor:q.color||"#000000",width:Number(q.barcodeWidth)||2,height:Number(q.barcodeHeight)||40,displayValue:q.showText!==!1&&q.showText!=="false",fontOptions:q.fontOptions||"",font:q.font||"monospace",textAlign:q.textAlign||"center",textPosition:q.textPosition||"bottom",textMargin:Number(q.textMargin)||2,fontSize:Number(q.fontSize)||20,background:"transparent",margin:Number(q.margin)||0}),P.toDataURL("image/png")}catch{return""}},A=async K=>{var P,q;try{return await Wi.toDataURL(p(K),{margin:0,color:{dark:((P=K.style)==null?void 0:P.color)||"#000000",light:"#00000000"},errorCorrectionLevel:((q=K.style)==null?void 0:q.qrErrorCorrection)||"M"})}catch{return""}},U=async()=>{const K=++_,P={},q={},h=t.pages||[];for(const v of h){const Z=(v==null?void 0:v.elements)||[];for(const J of Z){const re=b(J);if(J.type===ge.BARCODE){const L=I(J);L&&(P[re]=L)}else if(J.type===ge.QRCODE){const L=await A(J);L&&(q[re]=L)}}}K===_&&(g.value=P,C.value=q)},Y=K=>g.value[b(K)]||"",j=K=>C.value[b(K)]||"";Ie(()=>t.pages,()=>{U()},{deep:!0,immediate:!0});const O=se(!1),F=se(null);Ie(()=>t.scrollTop,()=>{if(!F.value)return;const K=t.scrollTop*o.value,P=t.viewportHeight*o.value,q=F.value.clientHeight,h=F.value.scrollTop;K<h?F.value.scrollTop=K:K+P>h+q&&(F.value.scrollTop=K+P-q)});const oe=K=>{K.preventDefault();const P=K.currentTarget,q=P.getBoundingClientRect(),h=K.clientX-q.left,v=K.clientY-q.top,Z=t.scrollLeft*o.value,J=t.scrollTop*o.value,re=t.viewportWidth*o.value,L=t.viewportHeight*o.value;let W=0,$=0;if(h>=Z&&h<=Z+re&&v>=J&&v<=J+L)W=h-Z,$=v-J;else{const G=h/o.value-t.viewportWidth/2,Q=v/o.value-t.viewportHeight/2;s("update:scroll",{left:G,top:Q}),W=re/2,$=L/2}O.value=!0;const T=G=>{const Q=P.getBoundingClientRect(),me=G.clientX-Q.left,ve=G.clientY-Q.top,de=me-W,_e=ve-$;s("update:scroll",{left:de/o.value,top:_e/o.value})},te=()=>{O.value=!1,window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",te)};window.addEventListener("mousemove",T),window.addEventListener("mouseup",te)};return(K,P)=>(z(),H("div",{ref_key:"scrollContainer",ref:F,class:"bg-white border border-gray-200 shadow-lg rounded max-h-[300px] overflow-y-auto overflow-x-hidden box-content no-scrollbar",style:ye({width:`${t.scrollWidth*o.value}px`,maxWidth:`${si}px`})},[n("div",{class:"relative select-none box-content overflow-hidden",style:ye({width:`${t.scrollWidth*o.value}px`,height:`${i.value}px`}),onMousedown:oe},[P[0]||(P[0]=n("div",{class:"absolute inset-0 bg-gray-100"},null,-1)),(z(!0),H(Te,null,Le(r.pages,(q,h)=>(z(),H("div",{key:h,class:"absolute shadow-sm border border-gray-300 overflow-hidden",style:ye(y(h))},[n("div",_x,E(h+1),1),(z(!0),H(Te,null,Le(q.elements,v=>{var Z,J;return z(),H("div",{key:v.id,class:"absolute",style:ye(k(v))},[v.type===a(ge).TEXT?(z(),H("div",{key:0,class:"w-full h-full overflow-hidden whitespace-nowrap",style:ye({color:v.style.color||"#000000",fontFamily:v.style.fontFamily,fontWeight:v.style.fontWeight,fontStyle:v.style.fontStyle,textAlign:v.style.textAlign,lineHeight:1})},E(v.variable||v.content),5)):v.type===a(ge).PAGE_NUMBER?(z(),H("div",{key:1,class:"w-full h-full overflow-hidden whitespace-nowrap",style:ye({color:v.style.color||"#000000",fontFamily:v.style.fontFamily,fontWeight:v.style.fontWeight,fontStyle:v.style.fontStyle,textAlign:v.style.textAlign,lineHeight:1})},E(m(v,h)),5)):v.type===a(ge).IMAGE?(z(),H("div",kx,[v.content?(z(),H("img",{key:0,src:v.content,class:"w-full h-full object-cover"},null,8,Sx)):be("",!0)])):v.type===a(ge).BARCODE?(z(),H("div",Cx,[Y(v)?(z(),H("img",{key:0,src:Y(v),class:"w-full h-full object-contain"},null,8,Ex)):be("",!0)])):v.type===a(ge).QRCODE?(z(),H("div",Tx,[j(v)?(z(),H("img",{key:0,src:j(v),class:"w-full h-full object-contain"},null,8,Ax)):be("",!0)])):v.type===a(ge).TABLE?(z(),H("div",{key:5,class:"w-full h-full border border-gray-300 bg-white grid",style:ye({gridTemplateColumns:`repeat(${((Z=v.columns)==null?void 0:Z.length)||2}, 1fr)`})},[(z(!0),H(Te,null,Le(Math.min(6,(((J=v.columns)==null?void 0:J.length)||2)*2),re=>(z(),H("div",{key:re,class:"border-[0.5px] border-gray-100"}))),128))],4)):be("",!0)],4)}),128)),h>0?(z(!0),H(Te,{key:0},Le(x(),v=>{var Z,J;return z(),H("div",{key:`global-${h}-${v.id}`,class:"absolute",style:ye(k(v))},[v.type===a(ge).TEXT?(z(),H("div",{key:0,class:"w-full h-full overflow-hidden whitespace-nowrap",style:ye({color:v.style.color||"#000000",fontFamily:v.style.fontFamily,fontWeight:v.style.fontWeight,fontStyle:v.style.fontStyle,textAlign:v.style.textAlign,lineHeight:1})},E(v.variable||v.content),5)):v.type===a(ge).PAGE_NUMBER?(z(),H("div",{key:1,class:"w-full h-full overflow-hidden whitespace-nowrap",style:ye({color:v.style.color||"#000000",fontFamily:v.style.fontFamily,fontWeight:v.style.fontWeight,fontStyle:v.style.fontStyle,textAlign:v.style.textAlign,lineHeight:1})},E(m(v,h)),5)):v.type===a(ge).IMAGE?(z(),H("div",$x,[v.content?(z(),H("img",{key:0,src:v.content,class:"w-full h-full object-cover"},null,8,Ix)):be("",!0)])):v.type===a(ge).BARCODE?(z(),H("div",zx,[Y(v)?(z(),H("img",{key:0,src:Y(v),class:"w-full h-full object-contain"},null,8,Px)):be("",!0)])):v.type===a(ge).QRCODE?(z(),H("div",Lx,[j(v)?(z(),H("img",{key:0,src:j(v),class:"w-full h-full object-contain"},null,8,Mx)):be("",!0)])):v.type===a(ge).TABLE?(z(),H("div",{key:5,class:"w-full h-full border border-gray-300 bg-white grid",style:ye({gridTemplateColumns:`repeat(${((Z=v.columns)==null?void 0:Z.length)||2}, 1fr)`})},[(z(!0),H(Te,null,Le(Math.min(6,(((J=v.columns)==null?void 0:J.length)||2)*2),re=>(z(),H("div",{key:re,class:"border-[0.5px] border-gray-100"}))),128))],4)):be("",!0)],4)}),128)):be("",!0)],4))),128)),n("div",{class:"absolute border-2 border-blue-500 bg-blue-500/10 cursor-move z-[1000]",style:ye(c.value)},null,4)],36)],4))}}),Bx=At(Dx,[["__scopeId","data-v-8d64f846"]]),Ox={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function qx(r,e){return z(),H("svg",Ox,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h7v2H5v14h7v2zm11-4l-1.375-1.45l2.55-2.55H9v-2h8.175l-2.55-2.55L16 7l5 5z"},null,-1)])])}const Fx=Se({name:"material-symbols-logout",render:qx}),jx={class:"flex-1 flex overflow-hidden"},Nx={class:"flex-1 overflow-hidden relative flex flex-col"},Hx={key:0,class:"flex items-center justify-between px-4 py-2 bg-blue-50 border-b border-blue-200 text-blue-900 dark:bg-blue-950 dark:border-blue-800 dark:text-blue-100"},Ux={class:"text-sm font-medium"},Vx={class:"flex items-center gap-2"},Wx={class:"relative w-full h-full flex flex-col overflow-hidden"},Gx={class:"flex-none h-5 bg-gray-50 border-b border-gray-300 flex z-20"},Kx={class:"flex-1 relative overflow-hidden"},Yx={class:"flex-1 flex overflow-hidden relative"},Xx={class:"w-5 flex-none bg-gray-50 border-r border-gray-300 h-full relative z-20 overflow-hidden"},Zx=["onMousedown"],Jx={class:"absolute left-2 -top-4 theme-bg text-white text-[10px] px-1 rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap"},Qx=["onMousedown"],e5={class:"absolute top-2 -left-4 theme-bg text-white text-[10px] px-1 rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap"},t5={key:2,class:"absolute pointer-events-none"},r5={key:1,class:"absolute bottom-4 right-4 z-50"},o5=ze({__name:"PrintDesigner",setup(r){const e=Be(),t=Qt(),{autoSave:s}=Li(),{t:o}=je(),i=se(null),c=se(null),l=se(null),u=se(null);tl("modal-container",l);const y=se(null),x=se(!1),f=se(0),k=()=>{f.value+=1},m=(d,B)=>{const R=getComputedStyle(document.documentElement).getPropertyValue(d).trim(),w=Rt(R);return w?Yd(w.h,w.s,w.v,B):`rgba(59, 130, 246, ${B})`},b=fe(()=>e.editingCustomElement),g=fe(()=>b.value?`${b.value.name} Copy`:"");We(()=>{Xe(()=>{re()}),window.addEventListener("resize",re),window.addEventListener("keydown",de),window.addEventListener("keydown",U),window.addEventListener("keyup",de),window.addEventListener("blur",_e),window.addEventListener("brand-theme-updated",k),Ie([()=>e.pages.length,()=>e.canvasSize.width,()=>e.canvasSize.height,()=>e.zoom,()=>e.showMinimap],()=>{Xe(re)}),Ie([()=>e.pages,()=>e.canvasSize,()=>e.guides,()=>e.headerHeight,()=>e.footerHeight,()=>e.showHeaderLine,()=>e.showFooterLine,()=>e.canvasBackground,()=>e.pageSpacingX,()=>e.pageSpacingY,()=>e.watermark,()=>e.showMinimap],()=>{C()},{deep:!0})});const C=Hd(()=>{if(!e.editingCustomElementId&&s.value&&t.currentTemplateId&&!t.isSaving){const d=t.templates.find(B=>B.id===t.currentTemplateId);d&&t.saveCurrentTemplate(d.name)}},1e3),_=()=>{if(!e.commitCustomElementEdit()){alert(o("sidebar.editSaveFailed"));return}e.cancelCustomElementEdit()},p=d=>{const B=d.trim();if(!B)return;if(!e.saveCustomElementEditAs(B)){alert(o("sidebar.editSaveFailed"));return}e.cancelCustomElementEdit()},I=()=>{confirm(o("sidebar.confirmExitEdit"))&&(e.cancelCustomElementEdit(),requestAnimationFrame(()=>{var d,B;(B=(d=i.value)==null?void 0:d.focus)==null||B.call(d)}))},A=d=>{var w;const B=d;if(!B)return!1;if(B.isContentEditable)return!0;const R=(w=B.tagName)==null?void 0:w.toLowerCase();return R==="input"||R==="textarea"||R==="select"},U=d=>{if(e.disableGlobalShortcuts||!e.editingCustomElementId||x.value||A(d.target)||!(d.ctrlKey||d.metaKey))return;const R=d.key.toLowerCase();if(R==="s"&&d.shiftKey){d.preventDefault(),d.stopPropagation(),x.value=!0;return}if(R==="s"){d.preventDefault(),d.stopPropagation(),_();return}R==="q"&&(d.preventDefault(),d.stopPropagation(),I())},Y=se(0),j=se(0),O=se(0),F=se(0),oe=d=>{const B=d.target;Y.value=B.scrollLeft,j.value=B.scrollTop},K=se(0),P=se(0),q=se(0),h=se(0),v=fe(()=>e.unit||"mm"),Z=d=>{const B=nt(d,e.unit||"mm");return e.unit==="px"?Math.round(B):Number(B.toFixed(1))},J=fe(()=>{const d=e.pages.length,B=e.canvasSize.height,R=e.canvasSize.width,w=e.pageSpacingY||0,S=d>0?d*B+(d-1)*w:0;return{width:`${R*e.zoom}px`,height:`${S*e.zoom}px`}}),re=()=>{if(i.value&&y.value){const d=i.value.clientWidth,B=i.value.clientHeight;q.value=d,h.value=B;const R=parseFloat(J.value.width),w=parseFloat(J.value.height),S=64,N=64;K.value=Math.max(d,R+S),P.value=Math.max(B,w+N),R+S<=d&&(K.value=d),w+N<=B&&(P.value=B);const M=i.value.getBoundingClientRect(),X=y.value.getBoundingClientRect();Y.value=i.value.scrollLeft,j.value=i.value.scrollTop,O.value=X.left-M.left+i.value.scrollLeft,F.value=X.top-M.top+i.value.scrollTop}};Ge(()=>{var d;C.cancel(),window.removeEventListener("resize",re),window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",me),window.removeEventListener("keydown",de),window.removeEventListener("keydown",U),window.removeEventListener("keyup",de),window.removeEventListener("blur",_e),window.removeEventListener("brand-theme-updated",k),(d=i.value)==null||d.removeEventListener("wheel",ve)});const L=se(!1),W=se(null),$=se("horizontal"),T=se(0),te=(d,B,R=null)=>{L.value=!0,W.value=R,$.value=B,G(d),window.addEventListener("mousemove",Q),window.addEventListener("mouseup",me)},G=d=>{if(!i.value)return;const B=i.value.getBoundingClientRect(),R=e.zoom;if($.value==="horizontal"){const w=d.clientY-B.top+i.value.scrollTop;T.value=(w-F.value)/R}else{const w=d.clientX-B.left+i.value.scrollLeft;T.value=(w-O.value)/R}},Q=d=>{L.value&&(d.preventDefault(),G(d),W.value&&e.updateGuide(W.value,T.value))},me=d=>{if(!L.value)return;const B=i.value.getBoundingClientRect();let R=!1;$.value==="horizontal"?d.clientY<B.top&&(R=!0):d.clientX<B.left&&(R=!0),R?W.value&&e.removeGuide(W.value):W.value?e.updateGuide(W.value,T.value):e.addGuide({type:$.value,position:T.value}),L.value=!1,W.value=null,window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",me)},ve=d=>{d.ctrlKey&&(d.preventDefault(),d.deltaY<0?e.setZoom(Math.min(5,e.zoom+.1)):e.setZoom(Math.max(.2,e.zoom-.1)))},de=d=>{var B,R;e.disableGlobalShortcuts||(d.key==="Control"||d.key==="Meta")&&(d.type==="keydown"&&!d.repeat?(B=i.value)==null||B.addEventListener("wheel",ve,{passive:!1}):d.type==="keyup"&&((R=i.value)==null||R.removeEventListener("wheel",ve)))},_e=()=>{var d;(d=i.value)==null||d.removeEventListener("wheel",ve)},ke=d=>{i.value&&i.value.scrollTo({left:d.left,top:d.top,behavior:"auto"})},ae=d=>{var we;const B=((we=d.style)==null?void 0:we.rotate)||0;if(B===0)return{minX:d.x,maxX:d.x+d.width,minY:d.y,maxY:d.y+d.height};const R=d.x+d.width/2,w=d.y+d.height/2,S=B*Math.PI/180,N=Math.cos(S),M=Math.sin(S),X=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x,y:d.y+d.height},{x:d.x+d.width,y:d.y+d.height}];let D=1/0,ne=-1/0,he=1/0,ce=-1/0;for(const ie of X){const V=R+(ie.x-R)*N-(ie.y-w)*M,ee=w+(ie.x-R)*M+(ie.y-w)*N;V<D&&(D=V),V>ne&&(ne=V),ee<he&&(he=ee),ee>ce&&(ce=ee)}return{minX:D,maxX:ne,minY:he,maxY:ce}},le=fe(()=>{if(!e.isDragging||e.selectedElementIds.length===0)return null;const d=[];for(const X of e.selectedElementIds)for(const D of e.pages){const ne=D.elements.find(he=>he.id===X);ne&&d.push(ne)}if(d.length===0)return null;let B=1/0,R=-1/0,w=1/0,S=-1/0;for(const X of d){const D=ae(X);D.minX<B&&(B=D.minX),D.maxX>R&&(R=D.maxX),D.minY<w&&(w=D.minY),D.maxY>S&&(S=D.maxY)}const N=(B+R)/2,M=(w+S)/2;return{minX:B,maxX:R,minY:w,maxY:S,centerX:N,centerY:M}}),pe=fe(()=>{if(!le.value)return{h:[],v:[]};f.value;const d=m("--brand-500",.5),{minX:B,maxX:R,minY:w,maxY:S}=le.value;return{h:[{position:B,color:d},{position:R,color:d}],v:[{position:w,color:d},{position:S,color:d}]}});return(d,B)=>{var R;return z(),H("div",{ref_key:"rootContainer",ref:c,class:"h-full w-full flex flex-col bg-gray-100 overflow-hidden"},[ue(Gy),n("div",jx,[ue(Dw),n("main",Nx,[a(e).editingCustomElementId?(z(),H("div",Hx,[n("div",Ux,E(a(o)("sidebar.editingElement",{name:((R=b.value)==null?void 0:R.name)||""})),1),n("div",Vx,[n("button",{onClick:_,class:"px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-400 inline-flex items-center gap-1.5"},[ue(a(An),{class:"w-4 h-4"}),Ce(" "+E(a(o)("sidebar.saveEdit")),1)]),n("button",{onClick:B[0]||(B[0]=w=>x.value=!0),class:"px-3 py-1.5 text-xs font-medium bg-blue-200 text-blue-900 rounded hover:bg-blue-300 dark:bg-blue-700 dark:hover:bg-blue-600 dark:text-white inline-flex items-center gap-1.5"},[ue(a(Fi),{class:"w-4 h-4"}),Ce(" "+E(a(o)("sidebar.saveAs")),1)]),n("button",{onClick:I,class:"px-3 py-1.5 text-xs font-medium bg-slate-200 text-slate-900 rounded hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-100 inline-flex items-center gap-1.5"},[ue(a(Fx),{class:"w-4 h-4"}),Ce(" "+E(a(o)("sidebar.exitEdit")),1)])])])):be("",!0),ue(xx),n("div",Wx,[n("div",Gx,[B[5]||(B[5]=n("div",{class:"w-5 flex-none bg-gray-100 border-r border-gray-300"},null,-1)),n("div",Kx,[ue(ai,{type:"horizontal",zoom:a(e).zoom,scroll:Y.value,offset:O.value,thick:20,unit:a(e).unit||"mm",indicators:pe.value.h,onGuideDragStart:B[1]||(B[1]=w=>te(w,"horizontal"))},null,8,["zoom","scroll","offset","unit","indicators"])])]),n("div",Yx,[n("div",Xx,[ue(ai,{type:"vertical",zoom:a(e).zoom,scroll:j.value,offset:F.value,thick:20,unit:a(e).unit||"mm",indicators:pe.value.v,onGuideDragStart:B[2]||(B[2]=w=>te(w,"vertical"))},null,8,["zoom","scroll","offset","unit","indicators"])]),n("div",{ref_key:"scrollContainer",ref:i,tabindex:"-1",class:"flex-1 overflow-auto p-8 flex relative canvas-scroll bg-gray-100 focus:outline-none",onScroll:oe,onClick:B[3]||(B[3]=w=>{(w.target===i.value||w.target===w.currentTarget)&&a(e).selectGuide(null)})},[n("div",{ref_key:"canvasWrapper",ref:y,style:ye(J.value),class:"mx-auto relative"},[ue(Gi,{ref_key:"canvasContainer",ref:u,class:"absolute top-0 left-0"},null,512)],4),n("div",{class:"absolute top-0 left-0 pointer-events-none z-50",style:ye({width:`${K.value}px`,height:`${P.value}px`})},[le.value?(z(),H(Te,{key:0},[n("div",{class:"absolute w-full border-t border-blue-500 border-dashed",style:ye({top:`${F.value+le.value.minY*a(e).zoom}px`,left:0})},[n("div",{class:"absolute -top-6 bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded shadow-sm",style:ye({left:`${Y.value+10}px`})},E(Z(le.value.minY))+" "+E(v.value),5)],4),n("div",{class:"absolute w-full border-t border-dashed theme-border",style:ye({top:`${F.value+le.value.maxY*a(e).zoom}px`,left:0})},[n("div",{class:"absolute -top-6 theme-bg text-white text-xs px-1.5 py-0.5 rounded shadow-sm",style:ye({left:`${Y.value+10}px`})},E(Z(le.value.maxY))+" "+E(v.value),5)],4),n("div",{class:"absolute h-full border-l border-dashed theme-border",style:ye({left:`${O.value+le.value.minX*a(e).zoom}px`,top:0})},[n("div",{class:"absolute -left-2 transform -translate-x-full theme-bg text-white text-xs px-1.5 py-0.5 rounded shadow-sm whitespace-nowrap",style:ye({top:`${j.value+10}px`})},E(Z(le.value.minX))+" "+E(v.value),5)],4),n("div",{class:"absolute h-full border-l border-dashed theme-border",style:ye({left:`${O.value+le.value.maxX*a(e).zoom}px`,top:0})},[n("div",{class:"absolute -left-2 transform -translate-x-full theme-bg text-white text-xs px-1.5 py-0.5 rounded shadow-sm whitespace-nowrap",style:ye({top:`${j.value+10}px`})},E(Z(le.value.maxX))+" "+E(v.value),5)],4)],64)):be("",!0),(z(!0),H(Te,null,Le(a(e).guides,w=>(z(),H(Te,{key:w.id},[w.type==="horizontal"?(z(),H("div",{key:0,class:"absolute left-0 w-full h-3 -mt-1.5 cursor-row-resize pointer-events-auto group flex flex-col justify-center",style:ye({top:`${F.value+w.position*a(e).zoom}px`}),onMousedown:Ke(S=>{a(e).selectGuide(w.id),te(S,"horizontal",w.id)},["stop"])},[n("div",{class:xe(["w-full",a(e).highlightedGuideId===w.id?"border-t-2 theme-border-strong":"border-t theme-border","theme-border-hover"])},null,2),n("div",Jx,E(Z(w.position))+E(v.value),1)],44,Zx)):(z(),H("div",{key:1,class:"absolute top-0 h-full w-3 -ml-1.5 cursor-col-resize pointer-events-auto group flex flex-row justify-center",style:ye({left:`${O.value+w.position*a(e).zoom}px`}),onMousedown:Ke(S=>{a(e).selectGuide(w.id),te(S,"vertical",w.id)},["stop"])},[n("div",{class:xe(["h-full",a(e).highlightedGuideId===w.id?"border-l-2 theme-border-strong":"border-l theme-border","theme-border-hover"])},null,2),n("div",e5,E(Z(w.position))+E(v.value),1)],44,Qx))],64))),128)),L.value&&!W.value?(z(),H("div",{key:1,class:xe(["absolute border-dashed pointer-events-none theme-border",$.value==="horizontal"?"left-0 w-full border-t":"top-0 h-full border-l"]),style:ye({top:$.value==="horizontal"?`${F.value+T.value*a(e).zoom}px`:void 0,left:$.value==="vertical"?`${O.value+T.value*a(e).zoom}px`:void 0})},[n("div",{class:xe(["absolute theme-bg text-white text-[10px] px-1 rounded",$.value==="horizontal"?"left-2 -top-4":"top-2 -left-4"])},E(Z(T.value))+E(v.value),3)],6)):be("",!0),a(e).highlightedEdge?(z(),H("div",t5,[a(e).highlightedEdge==="top"?(z(),H("div",{key:0,class:"absolute left-0 w-full border-t theme-border",style:ye({top:`${F.value}px`})},null,4)):a(e).highlightedEdge==="bottom"?(z(),H("div",{key:1,class:"absolute left-0 w-full border-t theme-border",style:ye({top:`${F.value+a(e).canvasSize.height*a(e).zoom}px`})},null,4)):a(e).highlightedEdge==="left"?(z(),H("div",{key:2,class:"absolute top-0 h-full border-l theme-border",style:ye({left:`${O.value}px`})},null,4)):a(e).highlightedEdge==="right"?(z(),H("div",{key:3,class:"absolute top-0 h-full border-l theme-border",style:ye({left:`${O.value+a(e).canvasSize.width*a(e).zoom}px`})},null,4)):be("",!0)])):be("",!0)],4)],544)])]),a(e).showMinimap?(z(),H("div",r5,[ue(Bx,{"scroll-width":K.value,"scroll-height":P.value,"viewport-width":q.value,"viewport-height":h.value,"scroll-left":Y.value,"scroll-top":j.value,pages:a(e).pages,"page-width":a(e).canvasSize.width,"page-height":a(e).canvasSize.height,zoom:a(e).zoom,"content-offset-x":O.value,"content-offset-y":F.value,"canvas-background":a(e).canvasBackground,"show-header-line":a(e).showHeaderLine,"show-footer-line":a(e).showFooterLine,"header-height":a(e).headerHeight,"footer-height":a(e).footerHeight,watermark:a(e).watermark||null,"onUpdate:scroll":ke},null,8,["scroll-width","scroll-height","viewport-width","viewport-height","scroll-left","scroll-top","pages","page-width","page-height","zoom","content-offset-x","content-offset-y","canvas-background","show-header-line","show-footer-line","header-height","footer-height","watermark"])])):be("",!0)]),ue(ux)]),ue(jt,{show:x.value,"initial-value":g.value,title:a(o)("sidebar.saveAsCustomElement"),placeholder:a(o)("sidebar.enterNamePlaceholder"),onClose:B[4]||(B[4]=w=>x.value=!1),onSave:p},null,8,["show","initial-value","title","placeholder"]),n("div",{ref_key:"modalContainer",ref:l,class:"print-designer-modals fixed inset-0 pointer-events-none z-[9999]"},null,512)],512)}}}),n5={key:1,class:"h-screen w-screen overflow-hidden"},a5=ze({__name:"App",setup(r){const e=new URLSearchParams(window.location.search).get("print")==="1";return(t,s)=>e?(z(),Pe(Ki,{key:0})):(z(),H("div",n5,[ue(o5)]))}}),s5=pi(),Pn=hi(a5),i5=()=>{const r=localStorage.getItem("print-designer-brand-vars");if(r)try{const e=JSON.parse(r);if(!e||typeof e!="object")return;const t=document.documentElement;Object.entries(e).forEach(([s,o])=>{t.style.setProperty(s,o)})}catch{}};i5();Pn.use(s5);Pn.use(mi);Pn.mount("#app");
