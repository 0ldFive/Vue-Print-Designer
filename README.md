

<p align="center">
    <img src="https://raw.githubusercontent.com/0ldFive/Vue-Print-Designer/master/src/assets/logo.png" alt="Vue Print Designer" width="96" height="96" />
</p>

<h1 align="center">Vue Print Designer</h1>

<p align="center">
    ä¸­æ–‡ | <a href="https://github.com/0ldFive/Vue-Print-Designer/blob/master/README_EN.md">English</a>
</p>

Vue Print Designer æ˜¯ä¸€æ¬¾å¯è§†åŒ–æ‰“å°è®¾è®¡å™¨ï¼Œé¢å‘ä¸šåŠ¡è¡¨å•ã€æ ‡ç­¾ã€ç¥¨æ®ã€å¿«é€’å•ç­‰åœºæ™¯ï¼Œæ”¯æŒæ¨¡æ¿åŒ–ã€å˜é‡åŒ–ï¼Œå¹¶æä¾›é™é»˜æ‰“å°ä¸äº‘æ‰“å°èƒ½åŠ›ï¼ŒåŒæ—¶å…¼å®¹å¤šç§å¯¼å‡º/æ‰“å°æ–¹å¼ã€‚

<h2>åœ¨çº¿æ¼”ç¤º: <a href="https://0ldfive.github.io/Vue-Print-Designer/" target="_blank" rel="noopener noreferrer">https://0ldfive.github.io/Vue-Print-Designer/</a></h2>

## ç•Œé¢é¢„è§ˆ

| ç•Œé¢è§†å›¾ | ç•Œé¢è§†å›¾ |
| --- | --- |
| **è®¾è®¡å™¨ä¸»ç•Œé¢ä¸ç”»å¸ƒè§†å›¾**<br>![è®¾è®¡å™¨ä¸»ç•Œé¢](https://raw.githubusercontent.com/0ldFive/Vue-Print-Designer/master/docs/images/1.png) | **æ‰“å°é¢„è§ˆ**<br>![æ‰“å°é¢„è§ˆ](https://raw.githubusercontent.com/0ldFive/Vue-Print-Designer/master/docs/images/2.png) |
| **æ‰“å°å‚æ•°é…ç½®**<br>![æ‰“å°å‚æ•°](https://raw.githubusercontent.com/0ldFive/Vue-Print-Designer/master/docs/images/3.png) | **ç³»ç»Ÿè®¾ç½®ä¸åå¥½**<br>![ç³»ç»Ÿè®¾ç½®](https://raw.githubusercontent.com/0ldFive/Vue-Print-Designer/master/docs/images/4.png) |
| **å¿«æ·é”®è¯´æ˜**<br>![å¿«æ·é”®](https://raw.githubusercontent.com/0ldFive/Vue-Print-Designer/master/docs/images/5.png) | **é«˜çº§è¡¨æ ¼ç¼–è¾‘**<br>![é«˜çº§è¡¨æ ¼](https://raw.githubusercontent.com/0ldFive/Vue-Print-Designer/master/docs/images/6.png) |

## æ ¸å¿ƒç‰¹æ€§ä¸ä¼˜åŠ¿

å¸‚é¢ä¸Šå¤§å¤šæ•°æ‰“å°æ’ä»¶è¦ä¹ˆ**å¼ºè€¦åˆç‰¹å®šæ¡†æ¶**ï¼Œè¦ä¹ˆ**ä»…æä¾›åŸºç¡€æ‰“å°åŠŸèƒ½**ã€‚æˆ‘ä»¬ä¸“æ³¨äºè§£å†³**åˆ†é¡µé€»è¾‘å¤æ‚**ä¸**é›†æˆæˆæœ¬é«˜**çš„ç—›ç‚¹ï¼Œæä¾›ä¼ä¸šçº§çš„æ‰“å°è§£å†³æ–¹æ¡ˆï¼š

- **å¼€ç®±å³ç”¨**ï¼šä¸åŒäºæ‰‹å†™åˆ†é¡µé€»è¾‘ï¼Œå†…ç½®å®Œæ•´çš„æ‹–æ‹½è®¾è®¡å™¨ä¸é¢„è§ˆå¼•æ“ï¼Œè‡ªåŠ¨å¤„ç†è¡¨æ ¼åˆ†é¡µä¸è¡¨å¤´é‡å¤ã€‚
- **è·¨æ¡†æ¶æ”¯æŒ**ï¼šæ‹’ç»æ¡†æ¶é”å®šï¼ŒåŸºäº Web Componentsï¼Œå®Œç¾é€‚é… Vue/React/Angular/åŸç”Ÿ HTML ç­‰æ‰€æœ‰æŠ€æœ¯æ ˆã€‚
- **å·¥ç¨‹åŒ–å®Œå¤‡**ï¼šä¸ä»…æ˜¯æ‰“å°ï¼Œæ›´æä¾›é™é»˜æ‰“å°ã€äº‘æ‰“å°ã€PDF/å›¾ç‰‡å¯¼å‡ºåŠç²¾ç»†çš„æ‰“å°å‚æ•°æ§åˆ¶ã€‚
- **çµæ´»æ‰©å±•**ï¼šæ”¯æŒè‡ªå®šä¹‰å…ƒç´ ä¸ API å¯¹æ¥ï¼Œæ»¡è¶³æ·±åº¦ä¸šåŠ¡å®šåˆ¶éœ€æ±‚ã€‚

## åŠŸèƒ½äº®ç‚¹

- æ‹–æ‹½å¼é¡µé¢ç¼–è¾‘ï¼Œæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€æ¡ç ã€äºŒç»´ç ã€è¡¨æ ¼ã€å½¢çŠ¶
- è¡¨æ ¼è‡ªåŠ¨åˆ†é¡µï¼ˆæ”¯æŒè¡¨å¤´/è¡¨å°¾é‡å¤ï¼‰
- å¤šé¡µé¢å¸ƒå±€ã€ç½‘æ ¼/æ ‡å°ºã€ç¼©æ”¾ä¸å¯¹é½å·¥å…·
- å¯¼å‡º PDF/å›¾ç‰‡/Blobï¼Œæ”¯æŒæ‹¼æ¥/åˆ†ç‰‡
- æ‰“å°å‚æ•°é…ç½®ï¼šæ‰“å°æœºã€ä»½æ•°ã€é¡µèŒƒå›´ã€å•åŒé¢ã€çº¸å¼ ç­‰
- **é™é»˜æ‰“å°**ï¼šæ”¯æŒæœ¬åœ°å®¢æˆ·ç«¯ç›´æ‰“ï¼Œæ— éœ€äººå·¥ç¡®è®¤
- **äº‘æ‰“å°**ï¼šæ”¯æŒè¿œç¨‹å®¢æˆ·ç«¯æ¥å…¥ä¸äº‘ç«¯ä¸‹å‘æ‰“å°ä»»åŠ¡

## é…å¥—æ‰“å°å®¢æˆ·ç«¯ï¼ˆPrintDot Clientï¼‰

PrintDot Client æ˜¯é…å¥—çš„æ¡Œé¢æ‰“å°åŠ©æ‰‹ï¼ˆWails + Vueï¼‰ï¼Œç”¨äºè®¾å¤‡å‘ç°ã€è¿æ¥ç®¡ç†ä¸ä»»åŠ¡è½¬å‘ï¼Œä¸»æ‰“â€œç¨³å®šã€å¿«é€Ÿã€å¥½ä¸Šæ‰‹â€ã€‚ä¸æœ¬é¡¹ç›®é…åˆå¯å®ç°æ›´ç¨³å®šçš„æœ¬åœ°å®¢æˆ·ç«¯æ‰“å°é“¾è·¯ã€‚

- æ”¯æŒå¹³å°ï¼šWindows / macOS / Linux
- å…³é”®èƒ½åŠ›ï¼šè‡ªåŠ¨å‘ç°ä¸è¯†åˆ«è®¾å¤‡ã€ç¨³å®šè¿æ¥ç»´æŠ¤ä¸è½¬å‘é˜Ÿåˆ—ã€è½»é‡åå°è¿è¡Œ
- é¡¹ç›®åœ°å€ï¼šhttps://github.com/0ldFive/PrintDot-Client

| åˆå§‹ç•Œé¢ | åå¥½è®¾ç½® |
| --- | --- |
| **ä¸»ç•Œé¢ - è®¾å¤‡çŠ¶æ€ä¸è¿æ¥ç®¡ç†**<br><img src="https://raw.githubusercontent.com/0ldFive/Vue-Print-Designer/master/docs/images/7.png" alt="PrintDot ä¸»ç•Œé¢" width="280" /> | **è®¾ç½®é¡µé¢ - åå¥½ä¸é…ç½®é€‰é¡¹**<br><img src="https://raw.githubusercontent.com/0ldFive/Vue-Print-Designer/master/docs/images/8.png" alt="PrintDot è®¾ç½®é¡µé¢" width="280" /> |

<p>
    <a href="https://github.com/0ldFive/PrintDot-Client/releases" target="_blank" rel="noopener noreferrer">â¬‡ ä¸‹è½½ PrintDot Client</a>
</p>

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm >= 7.0.0 æˆ– yarn / pnpm

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

```bash
npm run dev
```

å¯åŠ¨åè®¿é—®æœ¬åœ°æœåŠ¡å³å¯ä½¿ç”¨è®¾è®¡å™¨ã€‚

### ç”Ÿäº§æ„å»º

```bash
npm run build
```

### æ„å»º Web Components åŒ…

```bash
npm run build:wc
```

äº§ç‰©è¯´æ˜ï¼š

- `dist/print-designer.es.js` - ES æ¨¡å—ç‰ˆæœ¬
- `dist/print-designer.umd.js` - UMD ç‰ˆæœ¬
- `dist/print-designer.css` - æ ·å¼æ–‡ä»¶
- `dist/web-component.d.ts` - TypeScript ç±»å‹å£°æ˜

## å¼•å…¥æ–¹å¼

### æ–¹å¼ä¸€ï¼šä¸‹è½½æºç è‡ªè¡Œæ”¹é€ ä¸é›†æˆ API

é€‚åˆæœ‰æ·±åº¦å®šåˆ¶éœ€æ±‚çš„å›¢é˜Ÿã€‚

å»ºè®®æ¥å…¥ç‚¹ï¼š

- æ¨¡æ¿ CRUDï¼š`useTemplateStore`ï¼ˆå¯æ›¿æ¢ä¸ºæ¥å£è¯»å†™ï¼‰
- è‡ªå®šä¹‰å…ƒç´  CRUDï¼š`useDesignerStore` ä¸­çš„ `customElements`
- å˜é‡ä¸æ¨¡æ¿æ•°æ®ï¼šç»„ä»¶å®ä¾‹æ–¹æ³• `setVariables` / `loadTemplateData`

è‡ªå®šä¹‰å…ƒç´ æ‰©å±•è¯·æŸ¥çœ‹ï¼š[è‡ªå®šä¹‰å…ƒç´ æ‰©å±•æŒ‡å—](https://github.com/0ldFive/Vue-Print-Designer/blob/master/docs/zh/guide/custom-element.md)

### æ–¹å¼äºŒï¼šnpm ç»„ä»¶ï¼ˆWeb Componentsï¼‰

é€‚åˆä»»ä½•æŠ€æœ¯æ ˆï¼ˆVue/React/Angular/åŸç”Ÿï¼‰ã€‚Web Components æ–¹å¼**æ”¯æŒ Vue 2**ï¼ˆä½œä¸ºè‡ªå®šä¹‰å…ƒç´ ä½¿ç”¨ï¼‰ï¼Œæ— éœ€ Vue 2 ç»„ä»¶é€‚é…ã€‚

è¯¦ç»†å‚æ•°ã€CRUD ä¸ JSON ç¤ºä¾‹è¯·æŸ¥çœ‹ï¼š[Web Components API ç”¨æˆ·æ‰‹å†Œ](https://github.com/0ldFive/Vue-Print-Designer/blob/master/docs/zh/guide/web-components-guide.md)

```bash
npm i vue-print-designer
```

#### 1) ä½¿ç”¨ç»„ä»¶ï¼ˆVue 3 / Viteï¼‰

åœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥ï¼š

```ts
// main.ts
import 'vue-print-designer';
import 'vue-print-designer/style.css';
```

ç„¶ååœ¨é¡µé¢é‡Œç›´æ¥ä½¿ç”¨è‡ªå®šä¹‰å…ƒç´ ï¼š

```vue
<template>
    <print-designer id="designer"></print-designer>
</template>
```

#### 2) Vue 3 é€‰é¡¹å¼ APIï¼šåˆå§‹åŒ–ä¸è°ƒç”¨åˆ†ç¦»

**è®¾è®¡å™¨é¡µï¼ˆåˆå§‹åŒ–ä¸ç¼–è¾‘ï¼‰**

```vue
<script lang="ts">
export default {
    mounted() {
        const el = this.$refs.designerRef as any;
        // åˆå§‹åŒ–å“ç‰Œä¸ä¸»é¢˜
        el.setBranding({ title: 'ä¸šåŠ¡æ‰“å°è®¾è®¡å™¨', showLogo: true });
        el.setTheme('light');
        // åˆå§‹åŒ–æ¨¡æ¿æˆ–å˜é‡
        el.loadTemplateData(/* ä»ä½ çš„ API è·å–çš„æ•°æ® */);
        el.setVariables({ orderNo: 'A001' }, { merge: true });
    }
};
</script>

<template>
    <print-designer ref="designerRef"></print-designer>
</template>
```

**ä¸šåŠ¡é¡µé¢ï¼ˆéšå¤„è°ƒç”¨æ‰“å°/å¯¼å‡ºï¼‰**

```ts
// ä»»ä½•é¡µé¢ä¸­åªè¦èƒ½æ‹¿åˆ°å…ƒç´ å®ä¾‹å³å¯
const el = document.querySelector('print-designer') as any;

// æ‰“å°
await el.print({ mode: 'browser' });

// å¯¼å‡º PDF / å›¾ç‰‡ / Blob
await el.export({ type: 'pdf', filename: 'order-20240223.pdf' });
const pdfBlob = await el.export({ type: 'pdfBlob' });
```

#### 3) äº‹ä»¶å›è°ƒ

```ts
el.addEventListener('ready', () => {});
el.addEventListener('printed', (e) => {});
el.addEventListener('exported', (e) => {
    const blob = e.detail?.blob;
});
el.addEventListener('error', (e) => {
    console.error(e.detail?.scope, e.detail?.error);
});
```

### é›†æˆç¤ºä¾‹

æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåŸºäº **Vue 3 + Element Plus** çš„å®Œæ•´é›†æˆç¤ºä¾‹é¡¹ç›®ï¼Œæ¼”ç¤ºå¦‚ä½•åœ¨å®é™…ä¸šåŠ¡ç³»ç»Ÿä¸­åµŒå…¥æ‰“å°è®¾è®¡å™¨ã€‚

- **é¡¹ç›®åœ°å€**ï¼š[https://github.com/0ldFive/vue-designer-sample](https://github.com/0ldFive/vue-designer-sample)
- **æŠ€æœ¯æ ˆ**ï¼šVue 3, TypeScript, Element Plus, Vite
- **é¡¹ç›®çŠ¶æ€**ï¼šğŸš§ **å»ºè®¾ä¸­**ï¼ˆé€æ­¥å®Œå–„æ›´å¤šä¸šåŠ¡åœºæ™¯ï¼‰

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ assets/               # é™æ€èµ„æºï¼ˆLogoã€å›¾æ ‡ï¼‰
â”œâ”€â”€ components/           # Vue ç»„ä»¶
â”‚   â”œâ”€â”€ canvas/           # ç”»å¸ƒç»„ä»¶
â”‚   â”œâ”€â”€ common/           # é€šç”¨ç»„ä»¶ï¼ˆé¢œè‰²é€‰æ‹©å™¨ã€å¼¹çª—ç­‰ï¼‰
â”‚   â”œâ”€â”€ elements/         # æ‰“å°å…ƒç´ ç»„ä»¶ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€è¡¨æ ¼ã€æ¡ç ç­‰ï¼‰
â”‚   â”œâ”€â”€ layout/           # å¸ƒå±€ç»„ä»¶ï¼ˆå¤´éƒ¨ã€ä¾§è¾¹æ ã€å±æ€§é¢æ¿ç­‰ï¼‰
â”‚   â”œâ”€â”€ print/            # æ‰“å°æ¸²æŸ“ç»„ä»¶
â”‚   â””â”€â”€ properties/       # å±æ€§é…ç½®ç»„ä»¶
â”œâ”€â”€ composables/          # Vue ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useAutoSave.ts    # è‡ªåŠ¨ä¿å­˜
â”‚   â”œâ”€â”€ usePrintSettings.ts # æ‰“å°è®¾ç½®
â”‚   â””â”€â”€ useTheme.ts       # ä¸»é¢˜ç®¡ç†
â”œâ”€â”€ constants/            # å¸¸é‡å®šä¹‰
â”œâ”€â”€ locales/              # å›½é™…åŒ–è¯­è¨€åŒ…
â”œâ”€â”€ stores/               # Pinia çŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/                # TypeScript ç±»å‹å£°æ˜
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”œâ”€â”€ web-component.ts      # Web Components å…¥å£
â””â”€â”€ main.ts               # åº”ç”¨å…¥å£
```

## å›½é™…åŒ–

é¡¹ç›®å†…ç½®ä¸­æ–‡ï¼ˆzhï¼‰å’Œè‹±æ–‡ï¼ˆenï¼‰è¯­è¨€æ”¯æŒï¼Œé»˜è®¤æ ¹æ®æµè§ˆå™¨è¯­è¨€è‡ªåŠ¨åˆ‡æ¢ï¼Œä¹Ÿå¯é€šè¿‡ API æ‰‹åŠ¨è®¾ç½®ã€‚

## License

AGPL-3.0-only

å“ç‰Œä¸ Logo ä½¿ç”¨è¯·éµå¾ª [TRADEMARKS.md](https://github.com/0ldFive/Vue-Print-Designer/blob/master/TRADEMARKS.md)ã€‚å¦‚éœ€ç§»é™¤æˆ–æ›¿æ¢å“ç‰Œæ ‡è¯†ï¼Œè¯·å‚è€ƒ [COMMERCIAL_LICENSE.md](https://github.com/0ldFive/Vue-Print-Designer/blob/master/COMMERCIAL_LICENSE.md)ã€‚